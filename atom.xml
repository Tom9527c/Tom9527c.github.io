<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Tom</title>
  
  
  <link href="https://tom9527c.github.io/atom.xml" rel="self"/>
  
  <link href="https://tom9527c.github.io/"/>
  <updated>2024-07-10T07:15:02.490Z</updated>
  <id>https://tom9527c.github.io/</id>
  
  <author>
    <name>Tom</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>uniapp-vue2 页面生成PDF</title>
    <link href="https://tom9527c.github.io/posts/87e72661.html"/>
    <id>https://tom9527c.github.io/posts/87e72661.html</id>
    <published>2024-07-10T06:20:59.000Z</published>
    <updated>2024-07-10T07:15:02.490Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="1-场景"><a href="#1-场景" class="headerlink" title="1. 场景"></a>1. 场景</h2><p>unapp-vue2 app上预览pdf，并且需要可以下载pdf文件。</p><h2 id="2-问题"><a href="#2-问题" class="headerlink" title="2.问题"></a>2.问题</h2><p>uniappapp上并不能直接操作dom，导致不能直接使用 html2canvas 或者 jsPDF 这类库来生成pdf文件。</p><h2 id="3-解决方案"><a href="#3-解决方案" class="headerlink" title="3. 解决方案"></a>3. 解决方案</h2><p>找了很久，在uniapp的插件商店上找到了可以使用的插件，<a href="https://ext.dcloud.net.cn/plugin?id=15087">sp-html2pdf-render</a>  <a href="https://sonvee.github.io/sv-app-docs/docs-github/src/plugins/sp-html2pdf-render/sp-html2pdf-render.html">文档地址</a></p><p>本来以为问题可以解决了，预览PDF发现，分页没有做适配，当项数据在当前页放不下时，直接另一半在下一页出来了，正常来说，当前项数据在这一页放不下时，应改放到下一页渲染的，而不是上一页渲染一半，下一页又渲染一办，这样及其不美观</p><p>后来打算在组件源码上解决</p><h2 id="4-修改代码"><a href="#4-修改代码" class="headerlink" title="4.修改代码"></a>4.修改代码</h2><p>找到组件 sp-html2pdf-render.vue 的代码 ,找到 <code>&lt;script module=&quot;h2pRender&quot; lang=&quot;renderjs&quot;&gt;</code> 里面的renderDom()方法<br>在<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if(!el) &#123;</span><br><span class="line">          console.error(&#x27;dom盒子未加载成功，请先确保dom渲染完成，再检查你的domId是否有误&#x27;);</span><br><span class="line">          return</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><br>后面添加一下代码<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"> // 设置A4 宽高</span><br><span class="line">const A4Width = this.A4Width</span><br><span class="line">const A4Height = this.A4Height</span><br><span class="line"></span><br><span class="line">// 获取全部子组件的dom节点</span><br><span class="line">const mainElement = document.getElementById(&#x27;pdf-detail-main&#x27;);</span><br><span class="line">const dom2 = Array.from(mainElement.querySelector(&#x27;.pdf-container&#x27;).children);</span><br><span class="line">const msgListElement = mainElement.querySelector(&#x27;.pdf-container &gt; #msg-list&#x27;);</span><br><span class="line">if (msgListElement) &#123;</span><br><span class="line">  const msgListChildren = Array.from(msgListElement.children);</span><br><span class="line">  dom2.push(...msgListChildren);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 一页的对应px</span><br><span class="line">const realHeight = el.offsetWidth / A4Width * A4Height</span><br><span class="line">// 所有子组件的offsetHeight高度数组</span><br><span class="line">let childrenList = []</span><br><span class="line">Array.from(dom2).forEach(item =&gt; &#123;</span><br><span class="line">  childrenList.push(item.offsetHeight)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// result 每一页打印内容数据统计</span><br><span class="line">let result = []</span><br><span class="line">// temp 每一页的临时数据统计</span><br><span class="line">let temp = []</span><br><span class="line">// 打印头尾padding值</span><br><span class="line">const paddingTB = 40</span><br><span class="line">// 每一页上下padding40，所以初始化80，不需要padding就设置0</span><br><span class="line">let sum = paddingTB * 2</span><br><span class="line"></span><br><span class="line">// 遍历子组件的offsetHeight高度数组</span><br><span class="line">for(let i = 0; i &lt; childrenList.length; i++)&#123;</span><br><span class="line">  sum += childrenList[i]</span><br><span class="line">  temp.push(childrenList[i])</span><br><span class="line">  // 如果dom的classname包含header关键字，则另起一页</span><br><span class="line">  // 或者累计元素的高度之和大于一页的高度，则另起一页</span><br><span class="line">  if((dom2[i + 1] &amp;&amp; dom2[i + 1].id.indexOf(&#x27;header&#x27;) &gt; -1) || sum + childrenList[i+1] &gt;= realHeight)&#123;</span><br><span class="line">    const size = result.length &gt;= 10 ? 0.1 : 0.2 // 只是个大概优化，还是会出现误差的</span><br><span class="line">    result.push(&#123;</span><br><span class="line">      index: i, // 当前页结束的dom索引值</span><br><span class="line">      height: sum,  // 当前页高度</span><br><span class="line">      list: temp, // 当前页dom累计临时数据</span><br><span class="line">      id: dom2[i].id, // 当前页结束dom的classname</span><br><span class="line">      idFirst: dom2[i - temp.length + 1].id, // 当前页第一个dom的classname</span><br><span class="line">      whiteDivHeight: realHeight - sum + (temp.length * size), // 另起一页前，空白区域填充的高度(因为计算存在误差，所以需要调整加一下高度)</span><br><span class="line">    &#125;)</span><br><span class="line">    sum = paddingTB * 2</span><br><span class="line">    temp = []</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 如果还有内容未满足header关键字或者累计元素的高度之和小于一页的高度，则另起一页</span><br><span class="line">if(result.length === 0 || dom2.length - 1 &gt; result[result.length - 1].index)&#123;</span><br><span class="line">  const size = result.length &gt;= 10 ? 0.1 : 0.2 // 只是个大概优化，还是会出现误差的</span><br><span class="line">  result.push(&#123;</span><br><span class="line">    index: childrenList.length - 1,</span><br><span class="line">    height: sum,</span><br><span class="line">    list: temp,</span><br><span class="line">    id: dom2[childrenList.length - 1].id,</span><br><span class="line">    idFirst: dom2[childrenList.length - temp.length].id,</span><br><span class="line">    whiteDivHeight: realHeight - sum - (dom2.length * size) // 最后一页可以减小小</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 遍历每一页打印内容数据统计</span><br><span class="line">await result.forEach((item, index) =&gt; &#123;</span><br><span class="line">  const firsttarget = document.querySelector(`#$&#123;item.idFirst&#125;`)</span><br><span class="line">  const target = document.querySelector(`#$&#123;item.id&#125;`)</span><br><span class="line">  // 上方：padding区域</span><br><span class="line">  const divElement = document.createElement(&quot;div&quot;)</span><br><span class="line">  divElement.style.height = `$&#123;paddingTB&#125;px`</span><br><span class="line">  firsttarget.parentNode.insertBefore(divElement, firsttarget);</span><br><span class="line">  // 下方：空白区域 + padding区域</span><br><span class="line">  const divElement2 = document.createElement(&quot;div&quot;)</span><br><span class="line">  divElement2.style.height = `calc($&#123;item.whiteDivHeight + paddingTB&#125;px)`</span><br><span class="line">  target.parentNode.insertBefore(divElement2, target.nextSibling);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>思路其实就是获取每一页的高度，然后获取每一个元素的高，计算当前元素插入当前页后是否超出页面的高，如果超出了就另一起一页，为了美观，在每一页的页头页尾都添加了padding区域<br>改变页面的布局后，再渲染成 html2canvas 后转成base64，具体获取每个节点高度得根据具体项目来修改</p><h2 id="5-遗留未解决的问题"><a href="#5-遗留未解决的问题" class="headerlink" title="5.遗留未解决的问题"></a>5.遗留未解决的问题</h2><ol><li>生成的pdf文件有点过大，目前还没解决方案</li><li>因为业务需求，需要将生成的PDF传给后端，后端再返回给前端，但是后端返回的是application/pdf格式的文件流，app并不支撑使用 new Blob，所以目前没办法把后端返回的文件流保存下来，后续再做优化</li></ol>]]></content>
    
    
    <summary type="html">uniapp-vue2 页面转成PDF文件</summary>
    
    
    
    <category term="人类补完计划" scheme="https://tom9527c.github.io/categories/%E4%BA%BA%E7%B1%BB%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/"/>
    
    
    <category term="uniapp" scheme="https://tom9527c.github.io/tags/uniapp/"/>
    
  </entry>
  
  <entry>
    <title>el-input 限制输入框只能输入数字和小数</title>
    <link href="https://tom9527c.github.io/posts/bb44c5f1.html"/>
    <id>https://tom9527c.github.io/posts/bb44c5f1.html</id>
    <published>2024-03-20T08:20:15.000Z</published>
    <updated>2024-07-05T10:07:47.237Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="1-场景"><a href="#1-场景" class="headerlink" title="1. 场景"></a>1. 场景</h2><p>  当 el-input 的 type 为 text 时，我们需要限制输入框只能输入数字和小数。</p><h2 id="2-解决方案"><a href="#2-解决方案" class="headerlink" title="2. 解决方案"></a>2. 解决方案</h2><p>方法一：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-input v-model=&quot;sjje&quot; oninput =&quot;value=value.replace(/[^0-9.]/g,&#x27;&#x27;)&quot; class=&quot;money sjje&quot;&gt;</span><br><span class="line">&lt;span slot=&quot;suffix&quot;&gt;/ 元 &lt;/span&gt;</span><br><span class="line">&lt;/el-input&gt; </span><br><span class="line"></span><br><span class="line">&lt;!--</span><br><span class="line">oninput = “value=value.replace(/[^\d]/g,‘’)” //只能输入数字</span><br><span class="line">oninput = “value=value.replace(/[^0-9.]/g,‘’)” //只能输入数字和小数</span><br><span class="line">--&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>方法二</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-input v-model=&quot;sjje&quot; class=&quot;money sjje&quot; @input=&quot;inputChange&quot;&gt;</span><br><span class="line">      &lt;span slot=&quot;suffix&quot;&gt;/ 元 &lt;/span&gt;</span><br><span class="line">&lt;/el-input&gt;</span><br><span class="line"></span><br><span class="line">inputChange(val) &#123;</span><br><span class="line">   this.sjje = this.sjje.replace(/[^0-9.]/g, &#x27;&#x27;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="form表单输入框"><a href="#form表单输入框" class="headerlink" title="form表单输入框"></a>form表单输入框</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-form ref=&quot;userform&quot; rules=&quot;rules&quot; :model=&quot;form&quot; label-width=&quot;110px&quot;&gt;</span><br><span class="line">&lt;el-row&gt;</span><br><span class="line">&lt;el-form-item label=&quot;年龄：&quot; prop=&quot;age&quot;&gt;</span><br><span class="line">            &lt;el-input v-model=&quot;form.age&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">&lt;/el-row&gt;</span><br><span class="line">&lt;/el-form&gt;</span><br><span class="line"></span><br><span class="line">rules:&#123;</span><br><span class="line">  age:[</span><br><span class="line">    &#123; required: true, message: &#x27;年龄不能为空&#x27;, trigger: &#x27;blur&#x27;&#125;,</span><br><span class="line">    &#123;pattern: /^[0-9]*$/, message: &#x27;年龄需为数字&#x27;, trigger: &#x27;blur&#x27;&#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h3 id="el-input-输入框只能输入数字和英文"><a href="#el-input-输入框只能输入数字和英文" class="headerlink" title="el-input 输入框只能输入数字和英文"></a>el-input 输入框只能输入数字和英文</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-input v-model=&quot;queryParams.uid&quot; </span><br><span class="line">          placeholder=&quot;请输入UID&quot; </span><br><span class="line">          clearable style=&quot;width: 240px&quot;</span><br><span class="line">          @input=&quot;value =&gt; queryParams.uid = value.replace(/[^a-zA-Z0-9]/g, &#x27;&#x27;)&quot;</span><br><span class="line">          @keyup.enter=&quot;handleQuery&quot; /&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">Element Plus UI el-input 限制输入框只能输入数字和小数</summary>
    
    
    
    <category term="时刻准备着" scheme="https://tom9527c.github.io/categories/%E6%97%B6%E5%88%BB%E5%87%86%E5%A4%87%E7%9D%80/"/>
    
    
    <category term="前端" scheme="https://tom9527c.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="练习" scheme="https://tom9527c.github.io/tags/%E7%BB%83%E4%B9%A0/"/>
    
    <category term="Vue" scheme="https://tom9527c.github.io/tags/Vue/"/>
    
    <category term="Element Plus" scheme="https://tom9527c.github.io/tags/Element-Plus/"/>
    
    <category term="UI" scheme="https://tom9527c.github.io/tags/UI/"/>
    
  </entry>
  
  <entry>
    <title>el-input number类型右侧加减隐藏和中文光标偏移</title>
    <link href="https://tom9527c.github.io/posts/b5bf5235.html"/>
    <id>https://tom9527c.github.io/posts/b5bf5235.html</id>
    <published>2024-03-20T08:16:05.000Z</published>
    <updated>2024-07-05T10:08:24.628Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="1-场景"><a href="#1-场景" class="headerlink" title="1. 场景"></a>1. 场景</h2><p> 当 el-input 的 type 为 number 时，右侧的加减号会显示，但是有时候我们不需要这个加减号，比如只需要输入数字，不需要加减号，这时我们需要隐藏加减号。另外，当 el-input 的 type 为 number 时，输入中文时，光标会偏移，这时我们需要解决这个问题。</p><h2 id="2-解决方案"><a href="#2-解决方案" class="headerlink" title="2. 解决方案"></a>2. 解决方案</h2><p> 添加一下样式即可解决上述两个问题：<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">::<span class="selector-tag">v-deep</span> <span class="selector-class">.el-input</span> &#123;</span><br><span class="line">  <span class="selector-tag">input</span><span class="selector-attr">[type=<span class="string">&quot;number&quot;</span>]</span> &#123;</span><br><span class="line">    <span class="attribute">padding-right</span>: <span class="number">0px</span>;</span><br><span class="line">    -moz-appearance: textfield;</span><br><span class="line">    -webkit-appearance: textfield;</span><br><span class="line">    <span class="comment">// 解决el-input设置类型为number时，中文输入法光标上移问题</span></span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1px</span> <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">input</span><span class="selector-attr">[type=<span class="string">&quot;number&quot;</span>]</span>::<span class="selector-tag">-webkit-inner-spin-button</span>,</span><br><span class="line">  <span class="selector-tag">input</span><span class="selector-attr">[type=<span class="string">&quot;number&quot;</span>]</span>::<span class="selector-tag">-webkit-outer-spin-button</span> &#123;</span><br><span class="line">    -webkit-appearance: <span class="attribute">none;</span></span><br><span class="line"><span class="attribute">    margin</span>: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    
    <summary type="html">Element Plus UI el-input number类型右侧加减隐藏和中文光标偏移</summary>
    
    
    
    <category term="时刻准备着" scheme="https://tom9527c.github.io/categories/%E6%97%B6%E5%88%BB%E5%87%86%E5%A4%87%E7%9D%80/"/>
    
    
    <category term="前端" scheme="https://tom9527c.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="练习" scheme="https://tom9527c.github.io/tags/%E7%BB%83%E4%B9%A0/"/>
    
    <category term="Vue" scheme="https://tom9527c.github.io/tags/Vue/"/>
    
    <category term="Element Plus" scheme="https://tom9527c.github.io/tags/Element-Plus/"/>
    
    <category term="UI" scheme="https://tom9527c.github.io/tags/UI/"/>
    
  </entry>
  
  <entry>
    <title>Dialog设置遮罩穿透</title>
    <link href="https://tom9527c.github.io/posts/2201da6a.html"/>
    <id>https://tom9527c.github.io/posts/2201da6a.html</id>
    <published>2024-03-20T07:49:33.000Z</published>
    <updated>2024-07-05T10:07:30.625Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="1-场景"><a href="#1-场景" class="headerlink" title="1. 场景"></a>1. 场景</h2><p>el-dialog 隐藏遮罩并且可以控制弹窗后的元素、点击、滚动、其他事件操作，比如一个弹窗打开了，我要能控制弹窗后面的滚动、点击等等一系列事件。</p><h2 id="2-解决方案"><a href="#2-解决方案" class="headerlink" title="2. 解决方案"></a>2. 解决方案</h2><p>   一、去掉遮罩层<br>      添加 :modal=”false”、:close-on-click-modal=”false” 两个属性去掉遮罩层<br>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    &lt;el-dialog</span><br><span class="line">        v-model=&quot;DialogVisilble&quot;</span><br><span class="line">        :width=&quot;360&quot;</span><br><span class="line">        title=&quot;示例&quot;</span><br><span class="line">        :modal=&quot;false&quot;</span><br><span class="line">        :close-on-click-modal=&quot;false&quot;</span><br><span class="line">&gt;&lt;/el-dialog&gt;</span><br></pre></td></tr></table></figure><br>    二、正常操作底层页面<br>    当添加上述的属性后，发现仍然无法正常操作底层页面，这时我们需要添加如下代码：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-dialog</span><br><span class="line">    v-model=&quot;DialogVisilble&quot;</span><br><span class="line">    :width=&quot;360&quot;</span><br><span class="line">    title=&quot;示例&quot;</span><br><span class="line">    :modal=&quot;false&quot;</span><br><span class="line">    :close-on-click-modal=&quot;false&quot;</span><br><span class="line">    modal-class=&quot;kk-dialog-class&quot;</span><br><span class="line">&gt;&lt;/el-dialog&gt;</span><br></pre></td></tr></table></figure><br>其中 kk-dialog-class 是自定义类名，和下面代码中的类名相同即可<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.kk-dialog-class</span> &#123;</span><br><span class="line">  <span class="attribute">pointer-events</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.el-dialog</span> &#123;</span><br><span class="line">  <span class="attribute">pointer-events</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>]]></content>
    
    
    <summary type="html">Element Plus UI Dialog设置遮罩穿透</summary>
    
    
    
    <category term="时刻准备着" scheme="https://tom9527c.github.io/categories/%E6%97%B6%E5%88%BB%E5%87%86%E5%A4%87%E7%9D%80/"/>
    
    
    <category term="前端" scheme="https://tom9527c.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="练习" scheme="https://tom9527c.github.io/tags/%E7%BB%83%E4%B9%A0/"/>
    
    <category term="Vue" scheme="https://tom9527c.github.io/tags/Vue/"/>
    
    <category term="Element Plus" scheme="https://tom9527c.github.io/tags/Element-Plus/"/>
    
    <category term="UI" scheme="https://tom9527c.github.io/tags/UI/"/>
    
  </entry>
  
  <entry>
    <title>常用命令</title>
    <link href="https://tom9527c.github.io/posts/5f3c0533.html"/>
    <id>https://tom9527c.github.io/posts/5f3c0533.html</id>
    <published>2024-02-25T14:11:38.000Z</published>
    <updated>2024-07-10T06:10:10.759Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="brew常用命令"><a href="#brew常用命令" class="headerlink" title="brew常用命令"></a>brew常用命令</h1><h3 id="1、brew的安装"><a href="#1、brew的安装" class="headerlink" title="1、brew的安装"></a>1、brew的安装</h3><p><a href="https://brew.sh/">https://brew.sh/</a></p><h3 id="2、常用命令"><a href="#2、常用命令" class="headerlink" title="2、常用命令"></a>2、常用命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">//查看brew的版本</span><br><span class="line">brew -v</span><br><span class="line"></span><br><span class="line">//更新homebrew自己，把所有的Formula目录更新，并且会对本机已经安装并有更新的软件用*标明</span><br><span class="line">brew update</span><br><span class="line"></span><br><span class="line">//查看命令帮助：</span><br><span class="line">brew -<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line">//查看那些已安装的程序需要更新</span><br><span class="line">brew outdated</span><br><span class="line"></span><br><span class="line">//更新单个软件：</span><br><span class="line">brew upgrade [包名]</span><br><span class="line">例：brew upgrade git</span><br><span class="line"></span><br><span class="line">//更新所有软件：</span><br><span class="line">brew upgrade </span><br><span class="line"></span><br><span class="line">//安装软件</span><br><span class="line">brew install [包名]@版本</span><br><span class="line">例：brew install git</span><br><span class="line"></span><br><span class="line">//卸载</span><br><span class="line">brew uninstall [包名]</span><br><span class="line">例：brew uninstall git</span><br><span class="line"></span><br><span class="line">//清理所有包的旧版本 （安装包缓存）</span><br><span class="line">brew cleanup </span><br><span class="line">例：brew cleanup -n  //显示要删除的内容，但不要实际删除任何内容</span><br><span class="line">例：brew cleanup -s  //清理缓存，包括下载即使是最新的版本</span><br><span class="line">例：brew cleanup --prune=1     //删除所有早于指定时间的缓存文件（天）</span><br><span class="line"></span><br><span class="line">//清理单个软件旧版本</span><br><span class="line">brew cleanup [包名]</span><br><span class="line">例：brew cleanup git </span><br><span class="line"></span><br><span class="line">//查看需要更新的包</span><br><span class="line">brew outdated</span><br><span class="line"></span><br><span class="line">//查看可清理的旧版本包，不执行实际操作</span><br><span class="line">brew cleanup -n </span><br><span class="line"></span><br><span class="line">//锁定某个包</span><br><span class="line">brew pin <span class="variable">$FORMULA</span>  </span><br><span class="line"></span><br><span class="line">//取消锁定</span><br><span class="line">brew unpin <span class="variable">$FORMULA</span>  </span><br><span class="line"></span><br><span class="line">//查看包信息</span><br><span class="line">brew info [包名]</span><br><span class="line">例:brew info git</span><br><span class="line"></span><br><span class="line">//查看安装列表</span><br><span class="line">brew list</span><br><span class="line"></span><br><span class="line">//查询可用包</span><br><span class="line">brew search [包名]</span><br><span class="line">例：brew search git</span><br><span class="line"></span><br><span class="line">//显示包依赖</span><br><span class="line">brew deps [包名]</span><br><span class="line">例: brew deps git</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-注意事项"><a href="#3-注意事项" class="headerlink" title="3.注意事项"></a>3.注意事项</h3><p>在Mac OS X 10.11系统以后，/usr/local/等系统目录下的文件读写是需要系统root权限的，以往的Homebrew安装如果没有指定安装路径，会默认安装在这些需要系统root用户读写权限的目录下，导致有些指令需要添加sudo前缀来执行，比如升级Homebrew需要：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo brew update</span><br></pre></td></tr></table></figure><p>如果你不想每次都使用sudo指令，你有两种方法可以选择:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//1.对/usr/local 目录下的文件读写进行root用户授权</span><br><span class="line">$ sudo <span class="built_in">chown</span> -R <span class="variable">$USER</span> /usr/local</span><br><span class="line">// 例：$ sudo <span class="built_in">chown</span> -R lean /usr/local</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//2.（推荐）安装Homebrew时对安装路径进行指定，直接安装在不需要系统root用户授权就可以自由读写的目录下</span><br><span class="line">&lt;install path&gt; -e <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span>&quot;</span></span><br></pre></td></tr></table></figure><h1 id="nvm-常用命令"><a href="#nvm-常用命令" class="headerlink" title="nvm 常用命令"></a>nvm 常用命令</h1><h3 id="什么是nvm？"><a href="#什么是nvm？" class="headerlink" title="什么是nvm？"></a>什么是nvm？</h3><p>Node.js 默认一台电脑只能装一个版本，有时为了开发项目经常会使用不同版本的Node.js 版本，通常情况版本切换就比较麻烦了。<br>为了解决这个问题，nvm （node version manager）应运而生。有了 nvm，便可以在一台电脑上安装多个 Node.js 版本，并且可以一条指令随时下载或切换版本，而不需要频繁地下载/卸载不同版本的 node.js 来满足当前项目的要求。</p><h3 id="安装nvm"><a href="#安装nvm" class="headerlink" title="安装nvm"></a>安装nvm</h3><p><strong>github下载地址：</strong><a href="https://github.com/coreybutler/nvm-windows/releases">https://github.com/coreybutler/nvm-windows/releases</a></p><ul><li><strong>nvm-noinstall.zip：</strong> 绿色免安装版本，但是使用之前需要配置</li><li><strong>nvm-setup.zip：</strong>安装版，下载之后点击安装，无需配置就可以使用</li></ul><h3 id="常见命令"><a href="#常见命令" class="headerlink" title="常见命令"></a>常见命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">nvm install stable <span class="comment">## 安装最新稳定版 node</span></span><br><span class="line">nvm install &lt;version&gt; <span class="comment">## 安装指定版本</span></span><br><span class="line">nvm uninstall &lt;version&gt; <span class="comment">## 删除已安装的指定版本</span></span><br><span class="line">nvm use &lt;version&gt; <span class="comment">## 切换使用指定的版本node</span></span><br><span class="line">nvm <span class="built_in">alias</span> default [] <span class="comment">##设置默认版本</span></span><br><span class="line">nvm <span class="built_in">ls</span> <span class="comment">## 列出所有安装的版本</span></span><br><span class="line">nvm ls-remote <span class="comment">## 列出所有远程服务器的版本</span></span><br><span class="line">nvm current <span class="comment">## 显示当前的版本</span></span><br><span class="line">nvm <span class="built_in">alias</span> &lt;name&gt; &lt;version&gt; <span class="comment">## 给不同的版本号添加别名</span></span><br><span class="line">nvm <span class="built_in">unalias</span> &lt;name&gt; <span class="comment">## 删除已定义的别名</span></span><br><span class="line">nvm reinstall-packages &lt;version&gt; <span class="comment">## 在当前版本 node 环境下，重新   全局安装指定版本号的 npm 包</span></span><br><span class="line"></span><br><span class="line">nvm -v //查看nvm版本</span><br><span class="line">nvm --version ：显示 nvm 版本</span><br><span class="line"></span><br><span class="line">nvm list //显示版本列表</span><br><span class="line">nvm list ：显示已安装的版本（同 nvm list installed</span><br><span class="line">nvm list installed：显示已安装的版本</span><br><span class="line">nvm list available：显示所有可以下载的版本</span><br><span class="line"></span><br><span class="line">nvm install //安装指定版本node.js</span><br><span class="line">nvm install 14.5.0：安装 14.5.0 版本的 node.js</span><br><span class="line">nvm install latest：安装最新版本</span><br><span class="line"></span><br><span class="line">nvm use //使用指定版本node</span><br><span class="line">nvm use 14.5.0： 切换到 14.5.0 版本的 node.js</span><br><span class="line">--lts // 自动切换到长期支持版本</span><br><span class="line">--lts=&lt;LTS name&gt; // 自动切换到指定名称的node长期支持版本</span><br><span class="line"></span><br><span class="line">nvm <span class="built_in">alias</span> default [] 设置默认版本</span><br><span class="line"></span><br><span class="line">nvm uninstall &lt;version&gt; //卸载指定版本 node</span><br><span class="line">nvm uninstall 14.5.0：卸载到 14.5.0 版本的 node.js</span><br><span class="line">nvm uninstall --lts // 卸载长期支持版本的node</span><br><span class="line">nvm uninstall --lts=&lt;LTS name&gt; // 卸载一个指定名称的长期支持版本的node</span><br><span class="line"></span><br><span class="line">nvm --<span class="built_in">help</span> //显示命令行帮助信息</span><br><span class="line">[ ps：在运行nvm install 的时候，有可能会出现无权限安装的问题，请 以管理员身份 运行 cmd ] </span><br><span class="line"></span><br><span class="line">// 其他命令</span><br><span class="line">nvm deactivate // 取消当前nvm命令行效果</span><br><span class="line"></span><br><span class="line">nvm 查看node版本</span><br><span class="line">nvm current // 查看当前使用的node版本</span><br><span class="line">nvm <span class="built_in">ls</span> // 查看所有本地可用的node版本</span><br><span class="line">nvm <span class="built_in">ls</span> &lt;version&gt; // 参看指定版本</span><br><span class="line">nvm ls-remote // 查看所有可用远程版本</span><br><span class="line">--lts // 查看所有长期支持版本</span><br><span class="line">nvm ls-remote &lt;version&gt; // 参看所有node的指定远程版本</span><br><span class="line">--lts // 查看所有node长期支持版本</span><br><span class="line">--lts=&lt;LTS name&gt; // 仅查看指定名称的长期支持版本</span><br><span class="line"></span><br><span class="line">// nvm 版本别名</span><br><span class="line">nvm <span class="built_in">alias</span> [&lt;pattern&gt;] // 显示所有以&lt;pattern&gt;开头的版本别名</span><br><span class="line">nvm <span class="built_in">alias</span> &lt;name&gt; &lt;version&gt; // 给版本&lt;version&gt;设置一个别名</span><br><span class="line">nvm <span class="built_in">unalias</span> &lt;name&gt; // 删除&lt;name&gt;的版本别名</span><br><span class="line"></span><br><span class="line">// nvm和npm</span><br><span class="line">nvm install-latest-npm // 在当前node版本中，将npm升级到最新版</span><br><span class="line">nvm reinstall-packages &lt;version&gt; // 在全局重新安装npm，从&lt;version&gt;版本到当前版本</span><br><span class="line"></span><br><span class="line">// npm <span class="built_in">which</span>显示安装路径</span><br><span class="line">npm <span class="built_in">which</span> [current | &lt;version&gt;] //显示已安装node的安装路径。</span><br><span class="line"></span><br><span class="line">// nvm缓存</span><br><span class="line">nvm cache <span class="built_in">dir</span> // 显示nvm的缓存目录</span><br><span class="line">nvm cache clear // 清楚nvm的缓存目录</span><br><span class="line"></span><br><span class="line">// nvm运行node</span><br><span class="line">nvm <span class="built_in">exec</span> [--silent] [version] [&lt;<span class="built_in">command</span>&gt;] // 在&lt;version&gt;运行命令&lt;<span class="built_in">command</span>&gt;</span><br><span class="line">nvm <span class="built_in">exec</span> 4.8.3 node app.js //Run `node app.js` with the PATH pointing to node 4.8.3</span><br><span class="line">nvm run [--silent] [version] [&lt;args&gt;] // 在&lt;version&gt;以参数&lt;args&gt;运行node --</span><br><span class="line">nvm run 6.10.3 app.js //Run app.js using node 6.10.3</span><br></pre></td></tr></table></figure><h3 id="设置镜像"><a href="#设置镜像" class="headerlink" title="设置镜像"></a>设置镜像</h3><p>nvm node_mirror [url] ：设置node镜像。默认是<a href="https://nodejs.org/dist/。如果不写url，则使用默认url。设置后可至安装目录settings.txt文件查看，也可直接在该文件操作。">https://nodejs.org/dist/。如果不写url，则使用默认url。设置后可至安装目录settings.txt文件查看，也可直接在该文件操作。</a><br>nvm npm_mirror [url] ：设置npm镜像。<a href="https://github.com/npm/cli/archive/。如果不写url，则使用默认url。设置后可至安装目录settings.txt文件查看，也可直接在该文件操作。">https://github.com/npm/cli/archive/。如果不写url，则使用默认url。设置后可至安装目录settings.txt文件查看，也可直接在该文件操作。</a></p><h4 id="注意：-nvm-ls-remote-N-A问题"><a href="#注意：-nvm-ls-remote-N-A问题" class="headerlink" title="注意： nvm ls-remote N/A问题"></a>注意： <a href="https://so.csdn.net/so/search?q=nvm&amp;spm=1001.2101.3001.7020">nvm</a> ls-remote N/A问题</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nvm在获取远端仓库的时候,就获取不到版本信息 命令行输入：</span><br><span class="line"><span class="keyword">export</span> <span class="variable constant_">NVM_NODEJS_ORG_MIRROR</span>=<span class="attr">http</span>:<span class="comment">//nodejs.org/dist</span></span><br></pre></td></tr></table></figure><h3 id="版本管理"><a href="#版本管理" class="headerlink" title="版本管理"></a>版本管理</h3><p>nvm on ：开启node.js版本管理。<br>nvm off ：关闭node.js版本管理。</p><h1 id="nrm-切换-npm-镜像源"><a href="#nrm-切换-npm-镜像源" class="headerlink" title="nrm 切换 npm 镜像源"></a>nrm 切换 npm 镜像源</h1><p>安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g nrm</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>查看列表</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nrm <span class="built_in">ls</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>添加 中国镜像站源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nrm add npmmirror registry https://registry.npmmirror.com</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>切换 中国镜像站源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nrm use npmmirror</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>删除 中国镜像站源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nrm del npmmirror</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h1 id="Git常用命令"><a href="#Git常用命令" class="headerlink" title="Git常用命令"></a>Git常用命令</h1><h2 id="常用的git命令"><a href="#常用的git命令" class="headerlink" title="常用的git命令"></a>常用的git命令</h2><p>git clone 克隆代码<br>git log 查看日志<br>git tag 查看标签<br>git branch 查看分支<br>git branch -a 查看远程分支<br>git pull 拉取</p><h3 id="引入库"><a href="#引入库" class="headerlink" title="引入库"></a>引入库</h3><h4 id="在当前目录新建一个Git代码库"><a href="#在当前目录新建一个Git代码库" class="headerlink" title="在当前目录新建一个Git代码库"></a>在当前目录新建一个Git代码库</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure><h4 id="新建一个目录，将其初始化为Git代码库"><a href="#新建一个目录，将其初始化为Git代码库" class="headerlink" title="新建一个目录，将其初始化为Git代码库"></a>新建一个目录，将其初始化为Git代码库</h4> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git init [project-name]</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="下载一个项目和它的整个代码历史"><a href="#下载一个项目和它的整个代码历史" class="headerlink" title="下载一个项目和它的整个代码历史"></a>下载一个项目和它的整个代码历史</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> [url]</span><br></pre></td></tr></table></figure><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><h4 id="显示当前的Git配置"><a href="#显示当前的Git配置" class="headerlink" title="显示当前的Git配置"></a>显示当前的Git配置</h4> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --list</span><br></pre></td></tr></table></figure><h4 id="编辑Git配置文件"><a href="#编辑Git配置文件" class="headerlink" title="编辑Git配置文件"></a>编辑Git配置文件</h4> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config -e [--global]</span><br></pre></td></tr></table></figure><h4 id="设置提交代码时的用户信息"><a href="#设置提交代码时的用户信息" class="headerlink" title="设置提交代码时的用户信息"></a>设置提交代码时的用户信息</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config [--global] user.name <span class="string">&quot;[name]&quot;</span></span><br><span class="line">git config [--global] user.email <span class="string">&quot;[email address]&quot;</span></span><br></pre></td></tr></table></figure><h3 id="增加-删除文件"><a href="#增加-删除文件" class="headerlink" title="增加/删除文件"></a>增加/删除文件</h3><h4 id="添加指定文件到暂存区"><a href="#添加指定文件到暂存区" class="headerlink" title="添加指定文件到暂存区"></a>添加指定文件到暂存区</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add [file1] [file2] ...</span><br></pre></td></tr></table></figure><h4 id="添加指定目录到暂存区，包括子目录"><a href="#添加指定目录到暂存区，包括子目录" class="headerlink" title="添加指定目录到暂存区，包括子目录"></a>添加指定目录到暂存区，包括子目录</h4> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add [<span class="built_in">dir</span>]</span><br></pre></td></tr></table></figure><h4 id="加当前目录的所有文件到暂存区"><a href="#加当前目录的所有文件到暂存区" class="headerlink" title="加当前目录的所有文件到暂存区"></a>加当前目录的所有文件到暂存区</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br></pre></td></tr></table></figure><h4 id="删除工作区文件，并且将这次删除放入暂存区"><a href="#删除工作区文件，并且将这次删除放入暂存区" class="headerlink" title="删除工作区文件，并且将这次删除放入暂存区"></a>删除工作区文件，并且将这次删除放入暂存区</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">rm</span> [file1] [file2] ...</span><br></pre></td></tr></table></figure><h4 id="停止追踪指定文件，但该文件会保留在工作区"><a href="#停止追踪指定文件，但该文件会保留在工作区" class="headerlink" title="停止追踪指定文件，但该文件会保留在工作区"></a>停止追踪指定文件，但该文件会保留在工作区</h4> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">rm</span> --cached [file]</span><br></pre></td></tr></table></figure><h4 id="改名文件，并且将这个改名放入暂存区"><a href="#改名文件，并且将这个改名放入暂存区" class="headerlink" title="改名文件，并且将这个改名放入暂存区"></a>改名文件，并且将这个改名放入暂存区</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">mv</span> [file-original] [file-renamed]</span><br></pre></td></tr></table></figure><h3 id="代码提交"><a href="#代码提交" class="headerlink" title="代码提交"></a>代码提交</h3><h4 id="提交暂存区到仓库区"><a href="#提交暂存区到仓库区" class="headerlink" title="提交暂存区到仓库区"></a>提交暂存区到仓库区</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m [message]</span><br></pre></td></tr></table></figure><h4 id="提交暂存区的指定文件到仓库区"><a href="#提交暂存区的指定文件到仓库区" class="headerlink" title="提交暂存区的指定文件到仓库区"></a>提交暂存区的指定文件到仓库区</h4> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit [file1] [file2] ... -m [message]</span><br></pre></td></tr></table></figure><h4 id="提交工作区自上次commit之后的变化，直接到仓库区"><a href="#提交工作区自上次commit之后的变化，直接到仓库区" class="headerlink" title="提交工作区自上次commit之后的变化，直接到仓库区"></a>提交工作区自上次commit之后的变化，直接到仓库区</h4> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -a</span><br></pre></td></tr></table></figure><h4 id="提交时显示所有diff信息"><a href="#提交时显示所有diff信息" class="headerlink" title="提交时显示所有diff信息"></a>提交时显示所有diff信息</h4><figure class="highlight hs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">git</span> commit -v</span><br></pre></td></tr></table></figure><h4 id="使用一次新的commit，替代上一次提交，如果代码没有任何新变化，则用来改写上一次commit的提交信息"><a href="#使用一次新的commit，替代上一次提交，如果代码没有任何新变化，则用来改写上一次commit的提交信息" class="headerlink" title="使用一次新的commit，替代上一次提交，如果代码没有任何新变化，则用来改写上一次commit的提交信息"></a>使用一次新的commit，替代上一次提交，如果代码没有任何新变化，则用来改写上一次commit的提交信息</h4> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit --amend -m [message]</span><br></pre></td></tr></table></figure><h4 id="重做上一次commit，并包括指定文件的新变化"><a href="#重做上一次commit，并包括指定文件的新变化" class="headerlink" title="重做上一次commit，并包括指定文件的新变化"></a>重做上一次commit，并包括指定文件的新变化</h4> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit --amend   ...</span><br></pre></td></tr></table></figure><h3 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h3><h4 id="列出所有本地分支"><a href="#列出所有本地分支" class="headerlink" title="列出所有本地分支"></a>列出所有本地分支</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch</span><br></pre></td></tr></table></figure><h4 id="列出所有远程分支"><a href="#列出所有远程分支" class="headerlink" title="列出所有远程分支"></a>列出所有远程分支</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -r</span><br></pre></td></tr></table></figure><h4 id="列出所有本地分支和远程分支"><a href="#列出所有本地分支和远程分支" class="headerlink" title="列出所有本地分支和远程分支"></a>列出所有本地分支和远程分支</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -a</span><br></pre></td></tr></table></figure><h4 id="新建一个分支，但依然停留在当前分支"><a href="#新建一个分支，但依然停留在当前分支" class="headerlink" title="新建一个分支，但依然停留在当前分支"></a>新建一个分支，但依然停留在当前分支</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch [branch-name]</span><br></pre></td></tr></table></figure><h4 id="新建一个分支，并切换到该分支"><a href="#新建一个分支，并切换到该分支" class="headerlink" title="新建一个分支，并切换到该分支"></a>新建一个分支，并切换到该分支</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b [branch]</span><br></pre></td></tr></table></figure><h4 id="新建一个分支，指向指定commit"><a href="#新建一个分支，指向指定commit" class="headerlink" title="新建一个分支，指向指定commit"></a>新建一个分支，指向指定commit</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch [branch] [commit]</span><br></pre></td></tr></table></figure><h4 id="新建一个分支，与指定的远程分支建立追踪关系"><a href="#新建一个分支，与指定的远程分支建立追踪关系" class="headerlink" title="新建一个分支，与指定的远程分支建立追踪关系"></a>新建一个分支，与指定的远程分支建立追踪关系</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch --track [branch] [remote-branch]</span><br></pre></td></tr></table></figure><h4 id="切换到指定分支，并更新工作区"><a href="#切换到指定分支，并更新工作区" class="headerlink" title="切换到指定分支，并更新工作区"></a>切换到指定分支，并更新工作区</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout [branch-name]</span><br></pre></td></tr></table></figure><h4 id="建立追踪关系，在现有分支与指定的远程分支之间"><a href="#建立追踪关系，在现有分支与指定的远程分支之间" class="headerlink" title="建立追踪关系，在现有分支与指定的远程分支之间"></a>建立追踪关系，在现有分支与指定的远程分支之间</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch --set-upstream [branch] [remote-branch]</span><br></pre></td></tr></table></figure><h4 id="合并指定分支到当前分支"><a href="#合并指定分支到当前分支" class="headerlink" title="合并指定分支到当前分支"></a>合并指定分支到当前分支</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge [branch]</span><br></pre></td></tr></table></figure><h4 id="选择一个commit，合并进当前分支"><a href="#选择一个commit，合并进当前分支" class="headerlink" title="选择一个commit，合并进当前分支"></a>选择一个commit，合并进当前分支</h4> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git cherry-pick [commit]</span><br></pre></td></tr></table></figure><h4 id="删除分支"><a href="#删除分支" class="headerlink" title="删除分支"></a>删除分支</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -d [branch-name]</span><br></pre></td></tr></table></figure><h4 id="删除远程分支"><a href="#删除远程分支" class="headerlink" title="删除远程分支"></a>删除远程分支</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git push origin --delete </span><br><span class="line">git branch -dr</span><br></pre></td></tr></table></figure><h3 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h3><h4 id="列出所有tag"><a href="#列出所有tag" class="headerlink" title="列出所有tag"></a>列出所有tag</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag</span><br></pre></td></tr></table></figure><h4 id="新建一个tag在当前commit"><a href="#新建一个tag在当前commit" class="headerlink" title="新建一个tag在当前commit"></a>新建一个tag在当前commit</h4> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag [tag]</span><br></pre></td></tr></table></figure><h4 id="新建一个tag在指定commit"><a href="#新建一个tag在指定commit" class="headerlink" title="新建一个tag在指定commit"></a>新建一个tag在指定commit</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag [tag] [commit]</span><br></pre></td></tr></table></figure><h5 id="查看tag信息"><a href="#查看tag信息" class="headerlink" title="查看tag信息"></a>查看tag信息</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git show [tag]</span><br></pre></td></tr></table></figure><h4 id="提交指定tag"><a href="#提交指定tag" class="headerlink" title="提交指定tag"></a>提交指定tag</h4> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push [remote] [tag]</span><br></pre></td></tr></table></figure><h4 id="提交所有tag"><a href="#提交所有tag" class="headerlink" title="提交所有tag"></a>提交所有tag</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push [remote] --tags</span><br></pre></td></tr></table></figure><h5 id="新建一个分支，指向某个tag"><a href="#新建一个分支，指向某个tag" class="headerlink" title="新建一个分支，指向某个tag"></a>新建一个分支，指向某个tag</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b [branch] [tag]</span><br></pre></td></tr></table></figure><h3 id="查看所有信息"><a href="#查看所有信息" class="headerlink" title="查看所有信息"></a>查看所有信息</h3><h4 id="显示有变更的文件"><a href="#显示有变更的文件" class="headerlink" title="显示有变更的文件"></a>显示有变更的文件</h4> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br></pre></td></tr></table></figure><h4 id="显示当前分支的版本历史"><a href="#显示当前分支的版本历史" class="headerlink" title="显示当前分支的版本历史"></a>显示当前分支的版本历史</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span></span><br></pre></td></tr></table></figure><h4 id="显示commit历史，以及每次commit发生变更的文件"><a href="#显示commit历史，以及每次commit发生变更的文件" class="headerlink" title="显示commit历史，以及每次commit发生变更的文件"></a>显示commit历史，以及每次commit发生变更的文件</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span> --<span class="built_in">stat</span></span><br></pre></td></tr></table></figure><h4 id="显示某个文件的版本历史，包括文件改名"><a href="#显示某个文件的版本历史，包括文件改名" class="headerlink" title="显示某个文件的版本历史，包括文件改名"></a>显示某个文件的版本历史，包括文件改名</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span> --follow [file]</span><br><span class="line">git whatchanged [file]</span><br></pre></td></tr></table></figure><h4 id="显示指定文件相关的每一次diff"><a href="#显示指定文件相关的每一次diff" class="headerlink" title="显示指定文件相关的每一次diff"></a>显示指定文件相关的每一次diff</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span> -p [file]</span><br></pre></td></tr></table></figure><h4 id="显示指定文件是什么人在什么时间修改过"><a href="#显示指定文件是什么人在什么时间修改过" class="headerlink" title="显示指定文件是什么人在什么时间修改过"></a>显示指定文件是什么人在什么时间修改过</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git blame [file]</span><br></pre></td></tr></table></figure><h4 id="显示暂存区和工作区的差异"><a href="#显示暂存区和工作区的差异" class="headerlink" title="显示暂存区和工作区的差异"></a>显示暂存区和工作区的差异</h4> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git diff</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="显示暂存区和上一个commit的差异"><a href="#显示暂存区和上一个commit的差异" class="headerlink" title="显示暂存区和上一个commit的差异"></a>显示暂存区和上一个commit的差异</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git diff --cached []</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="显示工作区与当前分支最新commit之间的差异"><a href="#显示工作区与当前分支最新commit之间的差异" class="headerlink" title="显示工作区与当前分支最新commit之间的差异"></a>显示工作区与当前分支最新commit之间的差异</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff HEAD</span><br></pre></td></tr></table></figure><h4 id="显示两次提交之间的差异"><a href="#显示两次提交之间的差异" class="headerlink" title="显示两次提交之间的差异"></a>显示两次提交之间的差异</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff [first-branch]...[second-branch]</span><br></pre></td></tr></table></figure><h4 id="显示某次提交的元数据和内容变化"><a href="#显示某次提交的元数据和内容变化" class="headerlink" title="显示某次提交的元数据和内容变化"></a>显示某次提交的元数据和内容变化</h4> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git show [commit]</span><br></pre></td></tr></table></figure><h4 id="显示某次提交发生变化的文件"><a href="#显示某次提交发生变化的文件" class="headerlink" title="显示某次提交发生变化的文件"></a>显示某次提交发生变化的文件</h4> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git show --name-only [commit]</span><br></pre></td></tr></table></figure><h4 id="显示某次提交时，某个文件的内容"><a href="#显示某次提交时，某个文件的内容" class="headerlink" title="显示某次提交时，某个文件的内容"></a>显示某次提交时，某个文件的内容</h4> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git show [commit]:[filename]</span><br></pre></td></tr></table></figure><h4 id="显示当前分支的最近几次提交"><a href="#显示当前分支的最近几次提交" class="headerlink" title="显示当前分支的最近几次提交"></a>显示当前分支的最近几次提交</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reflog</span><br></pre></td></tr></table></figure><h3 id="远程同步"><a href="#远程同步" class="headerlink" title="远程同步"></a>远程同步</h3><h4 id="下载远程仓库的所有变动"><a href="#下载远程仓库的所有变动" class="headerlink" title="下载远程仓库的所有变动"></a>下载远程仓库的所有变动</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git fetch [remote]</span><br></pre></td></tr></table></figure><h4 id="显示所有远程仓库"><a href="#显示所有远程仓库" class="headerlink" title="显示所有远程仓库"></a>显示所有远程仓库</h4> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote -v</span><br></pre></td></tr></table></figure><h4 id="显示某个远程仓库的信息"><a href="#显示某个远程仓库的信息" class="headerlink" title="显示某个远程仓库的信息"></a>显示某个远程仓库的信息</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote show [sremote]</span><br></pre></td></tr></table></figure><h4 id="增加一个新的远程仓库，并命名"><a href="#增加一个新的远程仓库，并命名" class="headerlink" title="增加一个新的远程仓库，并命名"></a>增加一个新的远程仓库，并命名</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add [shortname] [url]</span><br></pre></td></tr></table></figure><h4 id="取回远程仓库的变化，并与本地分支合并"><a href="#取回远程仓库的变化，并与本地分支合并" class="headerlink" title="取回远程仓库的变化，并与本地分支合并"></a>取回远程仓库的变化，并与本地分支合并</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull [remote] [branch]</span><br></pre></td></tr></table></figure><h4 id="上传本地指定分支到远程仓库"><a href="#上传本地指定分支到远程仓库" class="headerlink" title="上传本地指定分支到远程仓库"></a>上传本地指定分支到远程仓库</h4> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push [remote] [branch]</span><br></pre></td></tr></table></figure><h4 id="强行推送当前分支到远程仓库，即使有冲突"><a href="#强行推送当前分支到远程仓库，即使有冲突" class="headerlink" title="强行推送当前分支到远程仓库，即使有冲突"></a>强行推送当前分支到远程仓库，即使有冲突</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push [remote] --force</span><br></pre></td></tr></table></figure><h4 id="推送所有分支到远程仓库"><a href="#推送所有分支到远程仓库" class="headerlink" title="推送所有分支到远程仓库"></a>推送所有分支到远程仓库</h4> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push [remote] --all</span><br></pre></td></tr></table></figure><h4 id="恢复暂存区的指定文件到工作区"><a href="#恢复暂存区的指定文件到工作区" class="headerlink" title="恢复暂存区的指定文件到工作区"></a>恢复暂存区的指定文件到工作区</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout [file]</span><br></pre></td></tr></table></figure><h4 id="恢复某个commit的指定文件到工作区"><a href="#恢复某个commit的指定文件到工作区" class="headerlink" title="恢复某个commit的指定文件到工作区"></a>恢复某个commit的指定文件到工作区</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout [commit] [file]</span><br></pre></td></tr></table></figure><h4 id="恢复上一个commit的所有文件到工作区"><a href="#恢复上一个commit的所有文件到工作区" class="headerlink" title="恢复上一个commit的所有文件到工作区"></a>恢复上一个commit的所有文件到工作区</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout .</span><br></pre></td></tr></table></figure><h4 id="重置暂存区的指定文件，与上一次commit保持一致，但工作区不变"><a href="#重置暂存区的指定文件，与上一次commit保持一致，但工作区不变" class="headerlink" title="重置暂存区的指定文件，与上一次commit保持一致，但工作区不变"></a>重置暂存区的指定文件，与上一次commit保持一致，但工作区不变</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset [file]</span><br></pre></td></tr></table></figure><h4 id="重置暂存区与工作区，与上一次commit保持一致"><a href="#重置暂存区与工作区，与上一次commit保持一致" class="headerlink" title="重置暂存区与工作区，与上一次commit保持一致"></a>重置暂存区与工作区，与上一次commit保持一致</h4> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard</span><br></pre></td></tr></table></figure><h4 id="重置当前分支的指针为指定commit，同时重置暂存区，但工作区不变"><a href="#重置当前分支的指针为指定commit，同时重置暂存区，但工作区不变" class="headerlink" title="重置当前分支的指针为指定commit，同时重置暂存区，但工作区不变"></a>重置当前分支的指针为指定commit，同时重置暂存区，但工作区不变</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset [commit]</span><br></pre></td></tr></table></figure><h4 id="重置当前分支的HEAD为指定commit，同时重置暂存区和工作区，与指定commit一致"><a href="#重置当前分支的HEAD为指定commit，同时重置暂存区和工作区，与指定commit一致" class="headerlink" title="重置当前分支的HEAD为指定commit，同时重置暂存区和工作区，与指定commit一致"></a>重置当前分支的HEAD为指定commit，同时重置暂存区和工作区，与指定commit一致</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard [commit]</span><br></pre></td></tr></table></figure><h4 id="重置当前HEAD为指定commit，但保持暂存区和工作区不变"><a href="#重置当前HEAD为指定commit，但保持暂存区和工作区不变" class="headerlink" title="重置当前HEAD为指定commit，但保持暂存区和工作区不变"></a>重置当前HEAD为指定commit，但保持暂存区和工作区不变</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --keep [commit]</span><br></pre></td></tr></table></figure><h4 id="新建一个commit，用来撤销指定commit，后者的所有变化都将被前者抵消，并且应用到当前分支"><a href="#新建一个commit，用来撤销指定commit，后者的所有变化都将被前者抵消，并且应用到当前分支" class="headerlink" title="新建一个commit，用来撤销指定commit，后者的所有变化都将被前者抵消，并且应用到当前分支"></a>新建一个commit，用来撤销指定commit，后者的所有变化都将被前者抵消，并且应用到当前分支</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git revert [commit]</span><br></pre></td></tr></table></figure><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><h4 id="生成一个可供发布的压缩包"><a href="#生成一个可供发布的压缩包" class="headerlink" title="生成一个可供发布的压缩包"></a>生成一个可供发布的压缩包</h4> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git archive</span><br></pre></td></tr></table></figure><h4 id="备份当前工作区的内容"><a href="#备份当前工作区的内容" class="headerlink" title="备份当前工作区的内容"></a>备份当前工作区的内容</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash</span><br></pre></td></tr></table></figure><h4 id="从Git栈中读取最近一次保存的内容，恢复工作区的相关内容"><a href="#从Git栈中读取最近一次保存的内容，恢复工作区的相关内容" class="headerlink" title="从Git栈中读取最近一次保存的内容，恢复工作区的相关内容"></a>从Git栈中读取最近一次保存的内容，恢复工作区的相关内容</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash pop</span><br></pre></td></tr></table></figure><h4 id="显示Git栈内的所有备份"><a href="#显示Git栈内的所有备份" class="headerlink" title="显示Git栈内的所有备份"></a>显示Git栈内的所有备份</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash list</span><br></pre></td></tr></table></figure><h4 id="清空Git栈"><a href="#清空Git栈" class="headerlink" title="清空Git栈"></a>清空Git栈</h4> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash clear</span><br></pre></td></tr></table></figure><h1 id="Hexo常用命令"><a href="#Hexo常用命令" class="headerlink" title="Hexo常用命令"></a>Hexo常用命令</h1><p><a href="https://hexo.io">Hexo官网</a></p><h2 id="新建一个网站-init"><a href="#新建一个网站-init" class="headerlink" title="新建一个网站 init"></a>新建一个网站 <code>init</code></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init [folder]</span><br></pre></td></tr></table></figure><p>新建一个网站。如果没有设置 <code>folder</code> ，Hexo 默认在目前的文件夹建立网站。</p><p>本命令相当于执行了以下几步：</p><ol><li>Git clone <a href="https://github.com/hexojs/hexo-starter">hexo-starter</a> 和 <a href="https://github.com/hexojs/hexo-theme-landscape">hexo-theme-landscape</a> 主题到当前目录或指定目录。</li><li>使用 <a href="https://classic.yarnpkg.com/lang/en/">Yarn 1</a>、<a href="https://pnpm.io/zh/">pnpm</a> 或 <a href="https://docs.npmjs.com/cli/install">npm</a> 包管理器下载依赖（如有已安装多个，则列在前面的优先）。npm 默认随 <a href="https://hexo.io/zh-cn/docs/index.html#安装-Node-js">Node.js</a> 安装。</li></ol><h2 id="新建一篇文章-new"><a href="#新建一篇文章-new" class="headerlink" title="新建一篇文章 new"></a>新建一篇文章 <code>new</code></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new [layout] &lt;title&gt;</span><br></pre></td></tr></table></figure><p>新建一篇文章。如果没有设置 <code>layout</code> 的话，默认使用 <a href="https://hexo.io/zh-cn/docs/configuration">_config.yml</a> 中的 <code>default_layout</code> 参数代替。如果标题包含空格的话，请使用引号括起来。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new &quot;post title with whitespace&quot;</span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th style="text-align:left">参数</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left"><code>-p</code>, <code>--path</code></td><td style="text-align:left">自定义新文章的路径</td></tr><tr><td style="text-align:left"><code>-r</code>, <code>--replace</code></td><td style="text-align:left">如果存在同名文章，将其替换</td></tr><tr><td style="text-align:left"><code>-s</code>, <code>--slug</code></td><td style="text-align:left">文章的 Slug，作为新文章的文件名和发布后的 URL</td></tr></tbody></table></div><p>默认情况下，Hexo 会使用文章的标题来决定文章文件的路径。对于独立页面来说，Hexo 会创建一个以标题为名字的目录，并在目录中放置一个 <code>index.md</code> 文件。你可以使用 <code>--path</code> 参数来覆盖上述行为、自行决定文件的目录：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page --path about/me &quot;About me&quot;</span><br></pre></td></tr></table></figure><p>以上命令会创建一个 <code>source/about/me.md</code> 文件，同时 Front Matter 中的 title 为 <code>&quot;About me&quot;</code></p><p>注意！title 是必须指定的！如果你这么做并不能达到你的目的：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page --path about/me</span><br></pre></td></tr></table></figure><p>此时 Hexo 会创建 <code>source/_posts/about/me.md</code>，同时 <code>me.md</code> 的 Front Matter 中的 title 为 <code>&quot;page&quot;</code>。这是因为在上述命令中，hexo-cli 将 <code>page</code> 视为指定文章的标题、并采用默认的 <code>layout</code>。</p><h2 id="生成静态文件-generate"><a href="#生成静态文件-generate" class="headerlink" title="生成静态文件 generate"></a>生成静态文件 <code>generate</code></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>生成静态文件。</p><div class="table-container"><table><thead><tr><th style="text-align:left">选项</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left"><code>-d</code>, <code>--deploy</code></td><td style="text-align:left">文件生成后立即部署网站</td></tr><tr><td style="text-align:left"><code>-w</code>, <code>--watch</code></td><td style="text-align:left">监视文件变动</td></tr><tr><td style="text-align:left"><code>-b</code>, <code>--bail</code></td><td style="text-align:left">生成过程中如果发生任何未处理的异常则抛出异常</td></tr><tr><td style="text-align:left"><code>-f</code>, <code>--force</code></td><td style="text-align:left">强制重新生成文件 Hexo 引入了差分机制，如果 <code>public</code> 目录存在，那么 <code>hexo g</code> 只会重新生成改动的文件。 使用该参数的效果接近 <code>hexo clean &amp;&amp; hexo generate</code></td></tr><tr><td style="text-align:left"><code>-c</code>, <code>--concurrency</code></td><td style="text-align:left">最大同时生成文件的数量，默认无限制</td></tr></tbody></table></div><p>该命令可以简写为</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo g</span><br></pre></td></tr></table></figure><h2 id="发表草稿-publish"><a href="#发表草稿-publish" class="headerlink" title="发表草稿 publish"></a>发表草稿 <code>publish</code></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo publish [layout] &lt;filename&gt;</span><br></pre></td></tr></table></figure><p>发表草稿。</p><h2 id="启动服务器-server"><a href="#启动服务器-server" class="headerlink" title="启动服务器 server"></a>启动服务器 <code>server</code></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>启动服务器。默认情况下，访问网址为： <code>http://localhost:4000/</code>。</p><div class="table-container"><table><thead><tr><th style="text-align:left">选项</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left"><code>-p</code>, <code>--port</code></td><td style="text-align:left">重设端口</td></tr><tr><td style="text-align:left"><code>-s</code>, <code>--static</code></td><td style="text-align:left">只使用静态文件</td></tr><tr><td style="text-align:left"><code>-l</code>, <code>--log</code></td><td style="text-align:left">启动日记记录，使用覆盖记录格式</td></tr></tbody></table></div><h2 id="部署网站-deploy"><a href="#部署网站-deploy" class="headerlink" title="部署网站 deploy"></a>部署网站 <code>deploy</code></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>部署网站。</p><div class="table-container"><table><thead><tr><th style="text-align:left">参数</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left"><code>-g</code>, <code>--generate</code></td><td style="text-align:left">部署之前预先生成静态文件</td></tr></tbody></table></div><p>该命令可以简写为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo d</span><br></pre></td></tr></table></figure><h2 id="渲染文件-render"><a href="#渲染文件-render" class="headerlink" title="渲染文件 render"></a>渲染文件 <code>render</code></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo render &lt;file1&gt; [file2] ...</span><br></pre></td></tr></table></figure><p>渲染文件。</p><div class="table-container"><table><thead><tr><th style="text-align:left">参数</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left"><code>-o</code>, <code>--output</code></td><td style="text-align:left">设置输出路径</td></tr></tbody></table></div><h2 id="从其他博客系统-迁移内容-migrate"><a href="#从其他博客系统-迁移内容-migrate" class="headerlink" title="从其他博客系统 迁移内容 migrate"></a>从其他博客系统 <a href="https://hexo.io/zh-cn/docs/migration">迁移内容</a> <code>migrate</code></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo migrate &lt;type&gt;</span><br></pre></td></tr></table></figure><p>从其他博客系统 <a href="https://hexo.io/zh-cn/docs/migration">迁移内容</a>。</p><h2 id="清除缓存文件-clean"><a href="#清除缓存文件-clean" class="headerlink" title="清除缓存文件 clean"></a>清除缓存文件 <code>clean</code></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean</span><br></pre></td></tr></table></figure><p>清除缓存文件 (<code>db.json</code>) 和已生成的静态文件 (<code>public</code>)。</p><p>在某些情况（尤其是更换主题后），如果发现您对站点的更改无论如何也不生效，您可能需要运行该命令。</p><h2 id="列出网站数据-list"><a href="#列出网站数据-list" class="headerlink" title="列出网站数据 list"></a>列出网站数据 <code>list</code></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo list &lt;type&gt;</span><br></pre></td></tr></table></figure><p>列出网站数据。</p><h2 id="显示-Hexo-版本-version"><a href="#显示-Hexo-版本-version" class="headerlink" title="显示 Hexo 版本 version"></a>显示 Hexo 版本 <code>version</code></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo version</span><br></pre></td></tr></table></figure><p>显示 Hexo 版本。</p><h2 id="列出网站的配置-config"><a href="#列出网站的配置-config" class="headerlink" title="列出网站的配置 config"></a>列出网站的配置 <code>config</code></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo config [key] [value]</span><br></pre></td></tr></table></figure><p>列出网站的配置（<code>_config.yml</code>）。如果指定了 <code>key</code>，则只展示配置中对应 <code>key</code> 的值；如果同时指定了 <code>key</code> 和 <code>value</code>，则将配置中对应的 <code>key</code> 的值修改为 <code>value</code>。</p><h2 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h2><h3 id="安全模式"><a href="#安全模式" class="headerlink" title="安全模式"></a>安全模式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo --safe</span><br></pre></td></tr></table></figure><p>在安全模式下，不会加载插件和脚本。当您在安装新插件遭遇问题时，可以尝试以安全模式重新执行。</p><h3 id="调试模式"><a href="#调试模式" class="headerlink" title="调试模式"></a>调试模式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo --debug</span><br></pre></td></tr></table></figure><p>在终端中显示调试信息并记录到 <code>debug.log</code>。当您碰到问题时，可以尝试用调试模式重新执行一次，并 <a href="https://github.com/hexojs/hexo/issues/new?assignees=&amp;labels=&amp;projects=&amp;template=bug_report.yml">提交调试信息到 GitHub</a>。</p><h3 id="简洁模式"><a href="#简洁模式" class="headerlink" title="简洁模式"></a>简洁模式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo --silent</span><br></pre></td></tr></table></figure><p>隐藏终端信息。</p><h3 id="自定义配置文件的路径"><a href="#自定义配置文件的路径" class="headerlink" title="自定义配置文件的路径"></a>自定义配置文件的路径</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 使用 custom.yml 代替默认的 _config.yml</span><br><span class="line">$ hexo server --config custom.yml</span><br><span class="line"></span><br><span class="line"># 使用 custom.yml 和 custom2.json，其中 custom2.json 优先级更高</span><br><span class="line">$ hexo generate --config custom.yml,custom2.json,custom3.yml</span><br></pre></td></tr></table></figure><p>自定义配置文件的路径，指定这个参数后将不再使用默认的 <code>_config.yml</code>。<br>你可以使用一个 YAML 或 JSON 文件的路径，也可以使用逗号分隔（无空格）的多个 YAML 或 JSON 文件的路径。例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 使用 custom.yml 代替默认的 _config.yml</span><br><span class="line">$ hexo server --config custom.yml</span><br><span class="line"></span><br><span class="line"># 使用 custom.yml, custom2.json 和 custom3.yml，其中 custom3.yml 优先级最高，其次是 custom2.json</span><br><span class="line">$ hexo generate --config custom.yml,custom2.json,custom3.yml</span><br></pre></td></tr></table></figure><p>当你指定了多个配置文件以后，Hexo 会按顺序将这部分配置文件合并成一个 <code>_multiconfig.yml</code>。如果遇到重复的配置，排在后面的文件的配置会覆盖排在前面的文件的配置。这个原则适用于任意数量、任意深度的 YAML 和 JSON 文件。</p><h3 id="显示草稿"><a href="#显示草稿" class="headerlink" title="显示草稿"></a>显示草稿</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo --draft</span><br></pre></td></tr></table></figure><p>显示 <code>source/_drafts</code> 文件夹中的草稿文章。</p><h3 id="自定义-CWD"><a href="#自定义-CWD" class="headerlink" title="自定义 CWD"></a>自定义 CWD</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo --cwd /path/to/cwd</span><br></pre></td></tr></table></figure><p>自定义当前工作目录（Current working directory）的路径。</p><h1 id="Linux常用命令大全"><a href="#Linux常用命令大全" class="headerlink" title="Linux常用命令大全"></a>Linux常用命令大全</h1><h2 id="1．Linux管理文件和目录的命令"><a href="#1．Linux管理文件和目录的命令" class="headerlink" title="1．Linux管理文件和目录的命令"></a>1．Linux管理文件和目录的命令</h2><p>命令 功能 命令 功能<br>Pwd 显示当前目录 ls 查看目录下的内容<br>Cd 改变所在目录 cat 显示文件的内容<br>Grep 在文件中查找某字符 cp 复制文件<br>Touch 创建文件 mv 移动文件<br>Rm 删除文件 rmdir 删除目录<br>Vi 编辑文件</p><h3 id="1-1-pwd命令"><a href="#1-1-pwd命令" class="headerlink" title="1.1 pwd命令"></a>1.1 pwd命令</h3><p>该命令的英文解释为print working directory(打印工作目录)。输入pwd命令，Linux会输出当前目录。</p><h3 id="1-2-cd命令-用来改变所在目录。"><a href="#1-2-cd命令-用来改变所在目录。" class="headerlink" title="1.2 cd命令 用来改变所在目录。"></a>1.2 cd命令 用来改变所在目录。</h3><p>cd / 转到根目录中<br>cd ~ 转到/home/user用户目录下<br>cd /usr 转到根目录下的usr目录中——————-绝对路径<br>cd test 转到当前目录下的test子目录中———-相对路径</p><h3 id="1-3-ls命令-用来查看目录的内容。"><a href="#1-3-ls命令-用来查看目录的内容。" class="headerlink" title="1.3 ls命令 用来查看目录的内容。"></a>1.3 ls命令 用来查看目录的内容。</h3><p>选项 含义<br>-a 列举目录中的全部文件，包括隐藏文件<br>-l 列举目录中的细节，包括权限、所有者、组群、大小、创建日期、文件是否是链接等<br>-f 列举的文件显示文件类型<br>-r 逆向，从后向前地列举目录中内容<br>-R 递归，该选项递归地列举当前目录下所有子目录内的内容<br>-s 大小，按文件大小排序<br>-h 以人类可读的方式显示文件的大小，如用K、M、G作单位</p><p>ls -l examples.doc 列举文件examples.doc的所有信息</p><h3 id="1-4-cat命令"><a href="#1-4-cat命令" class="headerlink" title="1.4 cat命令"></a>1.4 cat命令</h3><p>cat命令可以用来合并文件，也可以用来在屏幕上显示整个文件的内容。<br>cat snow.txt 该命令显示文件snow.txt的内容，ctrl+D退出cat。</p><h3 id="1-5-grep命令"><a href="#1-5-grep命令" class="headerlink" title="1.5 grep命令"></a>1.5 grep命令</h3><blockquote><p>最大功能是在一堆文件中查找一个特定的字符串。</p></blockquote><p>grep money test.txt<br>以上命令在test.txt中查找money这个字符串，grep查找是区分大小写的。</p><h3 id="1-6-touch命令"><a href="#1-6-touch命令" class="headerlink" title="1.6 touch命令"></a>1.6 touch命令</h3><p>touch命令用来创建新文件，他可以创建一个空白的文件，可以在其中添加文本和数据。<br>touch newfile 该命令创建一个名为newfile的空白文件。</p><h3 id="1-7-cp命令"><a href="#1-7-cp命令" class="headerlink" title="1.7 cp命令"></a>1.7 cp命令</h3><blockquote><p>用来拷贝文件，要复制文件，输入命令：</p></blockquote><p>cp<br>cp t.txt Document/t 该命令将把文件t.txt复制到Document目录下，并命名为t。<br>选项 含义<br>-I 互动：如果文件将覆盖目标中的文件，他会提示确认<br>-r 递归：这个选项会复制整个目录树、子目录以及其他<br>-v 详细：显示文件的复制进度</p><h3 id="1-8-mv命令"><a href="#1-8-mv命令" class="headerlink" title="1.8 mv命令"></a>1.8 mv命令</h3><blockquote><p>用来移动文件。</p></blockquote><p>选项 说明<br>-I 互动：如果选择的文件会覆盖目标中的文件，他会提示确认<br>-f 强制：它会超越互动模式，不提示地移动文件，属于很危险的选项<br>-v 详细：显示文件的移动进度<br>mv t.txt Document 把文件t.txt 移动到目录Document中。</p><h3 id="1-9-rm命令"><a href="#1-9-rm命令" class="headerlink" title="1.9 rm命令"></a>1.9 rm命令</h3><blockquote><p> 用来删除文件。</p></blockquote><p>选项 说明<br>-I 互动：提示确认删除<br>-f 强制：代替互动模式，不提示确认删除<br>-v 详细：显示文件的删除进度<br>-r 递归：将删除某个目录以及其中所有的文件和子目录<br>rm t.txt 该命令删除文件t.txt</p><h3 id="1-10-rmdir命令"><a href="#1-10-rmdir命令" class="headerlink" title="1.10 rmdir命令"></a>1.10 rmdir命令</h3><blockquote><p> 用来删除目录。</p></blockquote><h3 id="1-11-vi"><a href="#1-11-vi" class="headerlink" title="1.11 vi"></a>1.11 vi</h3><blockquote><p>vi是UNIX操作系统和类UNIX操作系统中最通用的全屏幕纯文本编辑器。Linux中的vi编辑器叫vim，它是vi的增强版（vi Improved），与vi编辑器完全兼容，而且实现了很多增强功能。进入vi的命令</p></blockquote><p>vi filename :打开或新建文件,并将光标置于第一行首<br>vi n filename ：打开文件,并将光标置于第n行首<br>vi filename ：打开文件,并将光标置于一行首<br>vi /pattern filename：打开文件,并将光标置于第一个与pattern匹配的串处<br>vi -r filename ：在上次正用vi编辑时发生系统崩溃,恢复filename<br>vi filename….filename ：打开多个文件,依次进行编辑</p><p>屏幕翻滚类命令<br>Ctrl u：向文件首翻半屏<br>Ctrl d：向文件尾翻半屏<br>Ctrl f：向文件尾翻一屏<br>Ctrl＋b；向文件首翻一屏<br>nz：将第n行滚至屏幕顶部,不指定n时将当前行滚至屏幕顶部.<br>插入文本类命令<br>i ：在光标前<br>I ：在当前行首<br>a：光标后<br>A：在当前行尾<br>o：在当前行之下新开一行<br>O：在当前行之上新开一行<br>r：替换当前字符<br>R：替换当前字符及其后的字符,直至按ESC键<br>s：从当前光标位置处开始,以输入的文本替代指定数目的字符</p><p>保存命令<br>按ESC键 跳到命令模式，然后：<br>:w 保存文件但不退出vi<br>:w file 将修改另外保存到file中，不退出vi<br>:w! 强制保存，不推出vi<br>:wq 保存文件并退出vi<br>:wq! 强制保存文件，并退出vi<br>:q 不保存文件，退出vi<br>:q! 不保存文件，强制退出vi<br>:e! 放弃所有修改，从上次保存文件开始再编辑<br>之后，回车，ok!</p><h2 id="2-有关磁盘空间的命令"><a href="#2-有关磁盘空间的命令" class="headerlink" title="2.有关磁盘空间的命令"></a>2.有关磁盘空间的命令</h2><p>命令 功能<br>mount 挂载文件系统<br>umount 卸载已挂载上的文件系统<br>df 检查各个硬盘分区和已挂上来的文件系统的磁盘空间<br>du 显示文件目录和大小<br>fsck 主要是检查和修复Linux文件系统</p><h3 id="2-1-mount命令"><a href="#2-1-mount命令" class="headerlink" title="2.1 mount命令"></a>2.1 mount命令</h3><blockquote><p>是挂载文件系统，可以挂载硬盘、光盘、软盘，也可以挂载NFS网络文件系统。这个命令的标准用法如下：</p></blockquote><p>mount –t 设备类型存放目录<br>mount IP地址：/所提供的目录存放目录<br>不加任何参数，直接输入命令可以显示已挂载的文件系统和目录<br>-a 挂上/etc/fstab下的全部文件系统<br>-t 制定所挂上来的文件系统的名称，所有系统支持的文件系统，这个信息可以在/proc/filesystems这个文件里看到<br>-n 挂上文件系统，但是不把文件系统的数据写入/etc/mtlab这个文件<br>-w 将文件系统设为可读写<br>-r 挂上来的文件系统设为只读<br>在目录/mnt下，挂上iso9660文件系统。输入命令：<br>mount –t iso9660 /dev/hdb /cdrom</p><h3 id="2-2-umount命令"><a href="#2-2-umount命令" class="headerlink" title="2.2 umount命令"></a>2.2 umount命令</h3><p>umount命令的功能是卸载已挂上的文件系统，在关闭系统前应该把所有挂载上的文件系统卸载。这个命令和mount命令是相对的。用法：<br>umount 已挂上的目录或设备<br>卸载已挂上的/cdrom目录，输入命令：umount /cdrom<br>卸载已挂上的某个分区，输入命令：umount /dev/hdb1</p><h3 id="2-3-df命令"><a href="#2-3-df命令" class="headerlink" title="2.3 df命令"></a>2.3 df命令</h3><blockquote><p>用来检查硬盘分区和已挂在的文件系统的磁盘空间，也就是说，检查硬盘的使用量。标准用法如下：</p></blockquote><p>选项 功能<br>-a 把全部的文件系统和各分区的硬盘使用情形列出来，包括0区块的，例如/proc这个文件系统<br>-I 列出I-nodes的使用量<br>-k 把各分区的大小和挂上来的文件分区的大小用k表示<br>-t 列出某一文件系统的所有分区磁盘空间使用量<br>-x 列出不是某一文件系统的所有分区磁盘空间使用量，和-t选项相反<br>-T 列出每个分区所属文件系统的名称<br>例如，要列出全部文件系统和各分区的磁盘使用情况，输入命令：df –a</p><h3 id="2-4-du命令"><a href="#2-4-du命令" class="headerlink" title="2.4 du命令"></a>2.4 du命令</h3><blockquote><p>是用于显示文件目录或大小。标准用法：</p></blockquote><p>选项 含义<br>-a 显示全部目录及其次目录下的每个文件所占的磁盘空间<br>-b 显示目录和文件的大小，以B为单位<br>-c 最后再加上一个总计<br>-h 以KB、MB、GB为单位，提高信息可读性<br>-s 只列出各文件大小的总和<br>-x 只计算属于同一文件系统的文件</p><h3 id="2-5-fsck命令"><a href="#2-5-fsck命令" class="headerlink" title="2.5 fsck命令"></a>2.5 fsck命令</h3><p>fsck命令的功能是检查和修复Linux文件系统，这个命令最好在没有人或是没有分区挂上来时使用，其实每次开机系统都会做一次检查，看是否有坏轨或数据流失的现象。用法：<br>fsck (-选项) 分区名称<br>选项 功能<br>-a 自动修复文件系统，不询问任何问题，比较危险<br>-A 依照/etc/fstab配置文件的内容，检查该文件内所列全部文件系统。若没有附加参数”-P”，则会先检查/目录的文件系统，而不会同时检查所有文件系统<br>-R 采取互动方式，在修复时询问问题，让用户确认并决定处理方式<br>-S 依次检查作业而不是同时执行。当依次指定多个文件系统且采用互动的方式进行检查时，请使用此参数以便顺序执行，否则fsck可能会同时询问数个问题，让人不知所措<br>-V 显示命令执行的过程<br>-T 指定要检查的文件系统的类型<br>-N 不是真正执行指令，仅列出实际执行时会进行的动作</p><h2 id="3-文件备份和压缩命令"><a href="#3-文件备份和压缩命令" class="headerlink" title="3.文件备份和压缩命令"></a>3.文件备份和压缩命令</h2><p>在Linux中，常用的文件压缩工具有gzip、bzip2、zip。bzip2是最理想的压缩工具，它提供了最大限度的压缩。zip兼容性好，Windows也支持。<br>命令 功能<br>bzip2/bunzip2 扩展名为bz2的压缩/解压缩工具<br>gzip/gunzip 扩展名为gz的压缩/解压缩工具<br>zip/unzip 扩展名为zip的压缩/解压缩工具<br>tar 创建备份和归档</p><h3 id="3-1-bzip2命令"><a href="#3-1-bzip2命令" class="headerlink" title="3.1 bzip2命令"></a>3.1 bzip2命令</h3><p>要使用bzip2来压缩文件，在shell提示下输入命令：<br>bzip2 filename 文件即会被压缩，并被保存为filename.bz2。<br>要解压缩文件，输入命令：<br>bunzip2 filename.bz2<br>filename.bz2会被删除，而以filename代替。<br>bzip2 filename.bz2 file1 file2 file3/usr/work/school<br>上面的命令把file1、file2、file3以及/usr/work/school目录中的内容压缩起来放入filename.bz2。</p><h3 id="3-2-gzip命令"><a href="#3-2-gzip命令" class="headerlink" title="3.2 gzip命令"></a>3.2 gzip命令</h3><p>要使用gzip来压缩文件，输入命令：<br>gzip filename 文件即会被压缩，并被保存为filename.gz。<br>要解压缩文件，输入命令：<br>gunzip filename.gz<br>filename.gz会被删除，而以filename代替。<br>gzip -r filename.gz file1 file2 file3/usr/work/school<br>上面的命令把file1、file2、file3以及/usr/work/school目录中的内容压缩起来放入filename.gz。</p><h3 id="3-3-zip命令"><a href="#3-3-zip命令" class="headerlink" title="3.3 zip命令"></a>3.3 zip命令</h3><blockquote><p> 使用方法同gzip。</p></blockquote><h3 id="3-4-tar命令"><a href="#3-4-tar命令" class="headerlink" title="3.4 tar命令"></a>3.4 tar命令</h3><blockquote><p>最早是用来做磁带备份的，但是由于硬盘容量越来越大，因此现在主要用这个命令来备份所有的文件。tar这个命令把大量的文件和目录打包成一个文件。</p></blockquote><p>选项 功能<br>-c 创建一个新归档<br>-f 当与-c选项一起使用时，创建的tar文件使用该选项指定的文件名；当与-x选项一起使用时，则解除该选项指定的归档<br>-t 显示包括在tar文件中的文件列表<br>-v 显示文件的归档进度<br>-x 从归档中抽取文件<br>-z 使用gzip压缩tar文件<br>-j 使用bzip2压缩tar文件<br>要创建一个tar文件，输入命令：<br>tar –cvf filename.tar directory/file/home/mine<br>上面的命令将directory/file、/home/mine放入归档文件中。<br>要列出tar文件的内容，输入命令：<br>tar –tvf filename.tar<br>要抽取tar文件的命令，输入命令：<br>tar –xvf filename.tar<br>这个命令不会删除tar文件，但会把解除归档的内容复制到当前工作目录下，并保留归档文件所使用的任何目录结构。<br>请记住，tar默认不压缩文件。要创建一个使用tar和bzip2来归档压缩的文件，使用-j选项：<br>tar –cjvf filename.tbz file<br>如果使用bunzip2命令解压filename.tbz文件，则filename.tbz会被删除，以filename.tar代替。<br>要扩展并解除归档bzip tar文件，输入命令：tar –xjvf filename.tbz<br>要创建一个用tar和gzip归档并压缩的文件，使用-z选项：tar –czvf filename.tgz file<br>如果使用gunzip命令解压filename.tgz文件，则filename.tgz会被删除，以filename.tar代替。</p><h2 id="4-有关关机和查看系统信息的命令"><a href="#4-有关关机和查看系统信息的命令" class="headerlink" title="4.有关关机和查看系统信息的命令"></a>4.有关关机和查看系统信息的命令</h2><p>命令 说明<br>shutdown 正常关机<br>reboot 重启计算机<br>ps 查看目前程序执行的情况<br>top 查看目前程序执行的情景和内存使用的情况<br>kill 终止一个进程<br>date 更改或查看目前日期<br>cal 显示月历及年历</p><h3 id="4-1-shutdown命令"><a href="#4-1-shutdown命令" class="headerlink" title="4.1 shutdown命令"></a>4.1 shutdown命令</h3><p>要使用这个命令必须保证是根用户，否则使用su命令改变为根用户。命令格式如下：<br>选项 功能<br>-k 不是真正的关机，只是发出警告命令<br>-r 关机后重启（这个用的最多）<br>-t 在规定的时间内关机<br>加入要在2min内关机，输入命令：shutdown –t 2<br>如果是关机后重启，输入命令：shutdown –r</p><h3 id="4-2-reboot命令"><a href="#4-2-reboot命令" class="headerlink" title="4.2 reboot命令"></a>4.2 reboot命令</h3><p>这个命令也是一个关机命令，只有输入，不加任何参数，系统会以最快的速度关机，且不将内存或缓冲区里的东西写回硬盘。<br>选项 功能<br>-d 不把记录写到/var/log/wtmp档案里(-n这个参数包含了-d)<br>-f 强迫重开机，不呼叫shutdown这个指令<br>-n 在重开机前不做将记忆体资料写回硬盘<br>-w 并不会真的重开机，只是把记录写到/var/log/wtmp档案里</p><h3 id="4-3-ps命令"><a href="#4-3-ps命令" class="headerlink" title="4.3 ps命令"></a>4.3 ps命令</h3><p>用来查看在计算机系统中有哪些程序正在执行，及其执行的情况。这是一个相当强大的命令，可以用它来找出所有的process id和名称。另外，ps命令也可以用来列出所有程序占用内存的情况。用法如下：<br>选项 功能<br>-l 用长格式列出<br>-u 列出使用者的名称和使用时间<br>-m 列出内存分布的情况<br>-r 只列出正在执行的前台程序，不列出其他信息<br>-x 列出所有程序，包括那些没有终端机的程序</p><h3 id="4-4-top命令"><a href="#4-4-top命令" class="headerlink" title="4.4 top命令"></a>4.4 top命令</h3><p>top命令可以查看目前程序的执行情景和内存使用。它和ps类似，不过，它会几秒钟更新一次系统状态，方便追踪。要离开这个程序，按Ctrl+C键就可以了。</p><h3 id="4-5-kill命令"><a href="#4-5-kill命令" class="headerlink" title="4.5 kill命令"></a>4.5 kill命令</h3><p>kill命令用来终止一个正在执行中的进程。如果一个程序执行过程中失败了，可以把这个程序终止，避免留在内存中占用系统资源。不过，它的实际意义是送一个信号给这个正在执行的程序，叫它自杀。可以送很多信号给这些程序，也可以让他们受到信号后做很多事情。标准用法：<br>kill –(选项) pid<br>在执行kill命令前。可以先用ps命令查一下某宕掉程序的pid，然后使用kill除去某个程序。例如，终止pid为90的程序：<br>kill 90<br>选项 功能<br>-l 列出所有可用的信号名称<br>-p 印出pid并不发送信号<br>-signal 其中可用的讯号有 HUP (1), KILL (9), TERM (15), 分别代表著重跑, 砍掉, 结束<br>将 pid 为 323 的行程砍掉 (kill) ：<br>kill -9 323<br>将 pid 为 456 的行程重跑 (restart) ：kill -HUP 456</p><h3 id="4-6-date命令"><a href="#4-6-date命令" class="headerlink" title="4.6 date命令"></a>4.6 date命令</h3><p>date命令用来显示、设定和修改现在的时间和日期。标准用法：<br>date –(选项) 显示时间格式(以+号开头，后加格式)<br>date 设定时间格式<br>选项 功能<br>-u 使用格林尼治时间<br>-r 最后一次修改文件的时间<br>-s 设置时间<br>常用的几种时间格式如下表所示：<br>格式 说明<br>%a 星期几的简称，例如一、二、三<br>%A 星期几的全名，例如星期一、星期二<br>%D 日期(mm/dd/yy格式)<br>%T 显示时间格式，24小时制(hh:mm:ss)<br>%x 显示日期的格式(mm/dd/yy)<br>%y 年的最后两个数字<br>%Y 年(如2007、2008)<br>%r 时间(hh:mm:ss 上午或下午)<br>%p 显示上午或下午<br>如果输入命令：date “+%x,%r”<br>系统返回如下信息：2010年3月26日，下午 18时06分49秒</p><h3 id="4-7-cal命令"><a href="#4-7-cal命令" class="headerlink" title="4.7 cal命令"></a>4.7 cal命令</h3><p>cal命令有两种功能：显示月历以及年历。<br>直接输入cal命令则系统会显示目前月份的月历。<br>若要显示一整年的年历，可以在cal命令后加4位数的公元年份。例如要显示2008年的年历，必须输入：<br>cal 2008<br>若输入 cal 08 ，则最显示公元8年的年历。<br>若只需要查看某一年份中某一月份的月历，可以输入：cal 月份公元年份。例如输入：”cal 12 2004”。</p><h2 id="5-管理使用者和设立权限的命令"><a href="#5-管理使用者和设立权限的命令" class="headerlink" title="5.管理使用者和设立权限的命令"></a>5.管理使用者和设立权限的命令</h2><p>命令 说明 命令 说明<br>chmod 用来改变权限 useradd 用来增加用户<br>su 用来修改用户</p><h3 id="5-1-chmod命令"><a href="#5-1-chmod命令" class="headerlink" title="5.1 chmod命令"></a>5.1 chmod命令</h3><blockquote><p>用来改变许可权限。读取、写入和执行是许可权限中的三个主要设置。因为用户在他们的账号被创建时就被编入一个组群，所以还可以指定那些组群可以读取、写入或执行某一文件。其中：</p></blockquote><p>r— 文件可以被读取<br>w— 文件可以被写入<br>x— 文件可以被执行，如果文件是程序的话<br>可以使用带有-l的ls命令来仔细查看一个文件的许多细节。<br>chmod命令用来设定文件的权限。标准用法：<br>chmod 文件的使用者(u,g,o,a)增减(+,-,=)权限名称(r,w,x) 文件<br>文件的使用者 说明 权限 说明 增减 说明<br>u 拥有文件的用户 r 读取权 + 添加权限<br>g 所有者所在的组群 w 写入权 - 删除权限<br>o 其他人 x 执行权 = 是它称为唯一权限<br>a 全部(u,g和o)<br>删除某一文件的所有权限，输入命令：chmod a-rwx test.txt<br>为文件所有者添加权限，输入命令：chmod u+rwx test<br>还可以用数字表示权限：4——读取，2——写入，1——执行。下面的两个命令等价：<br>chmod 751 filename<br>chmod u+rwx,g=rx,0=x filename</p><h3 id="5-2-su命令"><a href="#5-2-su命令" class="headerlink" title="5.2 su命令"></a>5.2 su命令</h3><blockquote><p>用来修改用户。这个命令非常重要，它可以让一个普通的使用者拥有超级用户或其他使用者的权限。不过，这个命令必须具有超级用户或其他使用者的口令才能成为超级用户或其他使用者。如果要离开，可以输入exit。标准用法：</p></blockquote><p>su 用户名 (如果没有输入用户名则预设为root)<br>举例说明，假设当前用户user01，想要转变为user02，则输入命令：<br>su user02 系统返回：<br>password： 此时，输入user02的指令，就会变为user02。</p><h3 id="5-3-useradd命令"><a href="#5-3-useradd命令" class="headerlink" title="5.3 useradd命令"></a>5.3 useradd命令</h3><blockquote><p>用来增加用户，只有根用户才能增加用户。如果没有登录为根用户，输入su，再输入根口令即可。</p></blockquote><p>要增加用户，输入命令：useradd 用户名<br>然后，根据提示为新用户输入一个口令即可。</p><h2 id="6-线上查询的命令"><a href="#6-线上查询的命令" class="headerlink" title="6.线上查询的命令"></a>6.线上查询的命令</h2><p>命令 功能<br>man 查询和解释一个命令的使用方法，以及这个命令的说明事项<br>locate 定位文件和目录<br>whatis 寻找某个命令的含义</p><h3 id="6-1-man命令"><a href="#6-1-man命令" class="headerlink" title="6.1 man命令"></a>6.1 man命令</h3><blockquote><p>用来查询和解释一个命令的使用方法和这个命令的注意事项。这个查询查询在每个Linux上都有。通常，使用者只要输入命令man和这个命令的名称shell就会列出一份完整的说明。标准用法：man 命令的名称</p></blockquote><p>要查询ls命令的说明书页，输入命令：man ls<br>要翻阅说明书页，可以使用Page Up和Page Down键，或使用空格键向后翻一页，使用b向前翻。要退出说明书页，输入命令q。要在说明书页中搜索关键字，输入命令/和要搜索的关键字或短语，然后按Enter键即可。所有出现在说明书页中的关键字都会被突出显示，允许快速地阅读上下文中的关键字。</p><h3 id="6-2-locate命令"><a href="#6-2-locate命令" class="headerlink" title="6.2 locate命令"></a>6.2 locate命令</h3><blockquote><p>主要功能是定位文件和目录。有时候，只知道某一文件或目录存在，却不知道在哪儿，就可以用locate来定位文件和目录。使用locate命令，将会看到每一个包括搜索田间的文件和目录。例如，如果想要搜索带有test的这个词的文件，输入命令：</p></blockquote><p>locate test locate命令使用数据库来定位带有test这个词的文件或目录。</p><h3 id="6-3-whatis命令"><a href="#6-3-whatis命令" class="headerlink" title="6.3 whatis命令"></a>6.3 whatis命令</h3><blockquote><p>用来查询某个命令的含义。用法简单，也不需要什么参数，直接在whatis命令后加上所要查询的命令就可以了，但是却很实用。</p></blockquote><p>要查询mv命令的含义，输入命令：whatis mv</p><h2 id="7-文件阅读的命令"><a href="#7-文件阅读的命令" class="headerlink" title="7.文件阅读的命令"></a>7.文件阅读的命令</h2><p>命令 功能<br>head 查看文件的开头部分<br>tail 查看文件结尾的10行<br>less 一个分页工具，它允许一页一页地(或一个屏幕一个屏幕地)查看信息<br>more 一个分页工具，它允许一页一页地(或一个屏幕一个屏幕地)查看信息</p><h3 id="7-1-head命令"><a href="#7-1-head命令" class="headerlink" title="7.1 head命令"></a>7.1 head命令</h3><blockquote><p>可以用来查看文件的开头部分。此命令的格式是：head 文件名</p></blockquote><p>默认设置，它只查看文件的前10行。但可以通过指定一个数字选项来改变要显示的行数，命令如下：head –20 文件名<br>这个命令将会查看文件的前20行。</p><h3 id="7-2-tail命令"><a href="#7-2-tail命令" class="headerlink" title="7.2 tail命令"></a>7.2 tail命令</h3><p>tail命令和head命令恰恰相反。使用tail命令，可以查看文件结尾的10行。这有助于查看日志文件的最后10行来阅读重要的系统信息。还可以使用tail观察日志文件更新的过程。使用-f选项，tail会自动实时地把打开文件中的新信息显示到屏幕上。例如，要活跃地观察/var/log/messages，以根用户身份在shell下输入以下命令：tail –f /var/log/messages</p><h3 id="7-3-less命令"><a href="#7-3-less命令" class="headerlink" title="7.3 less命令"></a>7.3 less命令</h3><blockquote><p>与more命令相似。</p></blockquote><h3 id="7-4-more命令"><a href="#7-4-more命令" class="headerlink" title="7.4 more命令"></a>7.4 more命令</h3><blockquote><p>和less的主要区别是，less允许使用箭头来前后移动，而more使用空格键和b键来前后移动。使用ls和more来列举/etc目录下的内容：</p></blockquote><p>ls –al /etc | more<br>要使用more在文本文件中搜索关键字，按/键并输入命令搜索条目：/foo<br>使用空格键来先前翻阅页码。按q键退出。<br>more命令标准格式为：<br>more [选项] [fileNames]<br>选项 含义<br>-num 一次显示的行数<br>-d 提示使用者，在画面下方显示[Press space to continue, q to quit.]，如果使用者按错键，则会显示[Press h for instructions.]而不是哔声<br>-l 取消遇见特殊字元^L(送纸字元)时会暂停的功能<br>-f 计算行数时，以实际上的行数，而非自动换行过后的行数(有些单行字数太长的会被扩展为两行或两行以上)<br>-p 不以卷动的方式显示每一页，而是先清除萤幕后再显示内容<br>-c 跟-p相似，不同的是先显示内容再清除其他旧资料<br>-s 当遇到有连续两行以上的空白行，就代换为一行的空白行<br>-u 不显示下引号(根据环境变数TERM指定的terminal而有所不同)<br>+/ 在每个档案显示前搜寻该字串(pattern)，然后从该字串之后开始显示<br>+num 从第num行开始显示<br>fileNames 欲显示内容的档案，可为复数个数<br>例如：more -s testfile 逐页显示testfile之档案内容，如有连续两行以上空白行则以一行空白行显示。<br>more +20 testfile 从第20行开始显示testfile之档案内容。</p><h2 id="8-网络操作命令"><a href="#8-网络操作命令" class="headerlink" title="8.网络操作命令"></a>8.网络操作命令</h2><p>命令 功能 命令 功能<br>ftp 传送文件 telnet 远端登陆<br>bye 结束连线并结束程序 rlogin 远端登入<br>ping 检测主机 netstat 显示网络状态</p><h3 id="8-1-ftp命令"><a href="#8-1-ftp命令" class="headerlink" title="8.1 ftp命令"></a>8.1 ftp命令</h3><blockquote><p>用来传输文件，非常重要。如果在网络上看到一个很重要的文件，就可以用这个命令把那个文件传到自己的机器上来。</p></blockquote><p>标准用法：ftp (-选项) 主机名称或IP地址<br>选项 含义<br>-D 详细显示命令的执行过程，便于排错和分析程序的执行情况<br>-I 关闭互动模式，不询问任何问题<br>-G 关闭本地主机文件名称支持特殊字符的扩充特征<br>-N 不适用自动登录。FTP在启动时，会尝试自动登录远端系统，它会从用户的转述目录中读取.netrc文件的内容，以便自行登录。若该文件不存在，FTP会放弃自动登录，并询问用户的账号名称<br>-V 显示命令的执行过程<br>举例说明，用ftp登录ftp.dark.com主机，输入命令：ftp ftp.dark.com<br>注意：用户必须有相应的存取权限，否则不能从远程系统中获得文件或向远程系统中传输文件。为了使用ftp来传输文件，用户必须知道远程计算机上的合法用户名和口令。</p><h3 id="8-2-bye命令"><a href="#8-2-bye命令" class="headerlink" title="8.2 bye命令"></a>8.2 bye命令</h3><p>在ftp模式下，输入bye即可中断目前的连线作业，并结束ftp的执行，没有选项。</p><h3 id="8-3-ping命令"><a href="#8-3-ping命令" class="headerlink" title="8.3 ping命令"></a>8.3 ping命令</h3><p>执行ping命令，它会使用ICMP传输协议，发出要求回应的信息，若远程主机的网络没有什么问题，就会回应信息，因而得知该主机运作正常。<br>标准用法：<br>ping (-选项) 主机名称或IP地址<br>选项 含义<br>c 次数 设置完成要求回应的次数。ping命令会反复发出信息，直到达到设定的次数为止<br>D 使用Socket的SO_DEBUG功能<br>F 大量而且快速地送网络封包给一台机器，看它的回应。一般不到几秒钟，送出去的封包就会超过两千个<br>I 秒数 指定收发信息的间隔时间，单位为s，预置位1s。与参数f不兼容<br>S bytes 设置数据包的大小。预设置为56B，加上8B ICMP头文件，共64B<br>R 忽略网关，直接将数据保送到远程主机上。如果该主机并非局域网的一份子，就会传回错误信息<br>Q 不显示命令的执行过程，只显示结果<br>V 详细显示命令的执行过程，包括非回应信息和其它信息<br>T 存活数值 设置存活数值TTL的大小。TTL是IP协议包中的一个值，它告诉网络，数据包在网络中的时间是否太长而应被丢弃<br>举例说明，检测des.bllod.net主机网络功能是否正常，送出去要去信息需完成5次回应，每次间隔10s，数据包的大小为512B，输入命令：ping –c 5 –i 10 –s 504 –t 64 des.blood.net</p><h3 id="8-4-telnet命令"><a href="#8-4-telnet命令" class="headerlink" title="8.4 telnet命令"></a>8.4 telnet命令</h3><blockquote><p>主要功能是进行远程登录。该命令允许用户在使用telnet协议的远程计算机之间进行通信，用户可以通过网络在远程计算机上登录，就像登录到本地机上执行命令一样。为了通过telnet登录计算机，必须知道远程计算机上的合法用户名和口令。telnet只为普通终端提供终端仿真，而不支持X Window等图形环境。</p></blockquote><p>标准用法：telnet 主机名或IP<br>例如登录IP地址为140.114.63.12的计算机，输入命令：<br>telnet 140.114.63.12<br>一旦telnet成功连接到远程系统上，就显示登录信息，并提示用户输入用户名和口令。如果用户名和口令正确，就能成功登录并在远程系统上工作。用户结束了远程会话后，一定要确保使用logout命令退出远程系统。然后telnet报告远程会话被关闭，并返回到用户本地机的shell提示符下。</p><h3 id="8-5-rlogin命令"><a href="#8-5-rlogin命令" class="headerlink" title="8.5 rlogin命令"></a>8.5 rlogin命令</h3><blockquote><p>用来远程登录的。它的英文含义是remote login。该命令与telnet命令很相似，允许用户启动远程系统上的交互命令会话。用法：</p></blockquote><p>rlogin (-选项) host<br>选项 含义<br>8 允许输入8位字符数据<br>E 为rlogin会话设置转义字符，默认的转义字符是“~”，用户可以指定一个文字字符或一个/nnn形式的八进制数<br>E 停止任何转义字符。当与-8选项一起使用时，它提供一个完全透明的链接<br>L 用户名称 指定要登入远端主机的用户名称<br>L 使用litout模式进行远端登入操作<br>例如，要登入别人的计算机。输入命令：rlogin –l inin 140.114.125.24</p><h3 id="8-6-netstat命令"><a href="#8-6-netstat命令" class="headerlink" title="8.6 netstat命令"></a>8.6 netstat命令</h3><p>netstat命令的主要功能是了解Linux系统的网络情况。假设没有指定任何参数给netstat命令，则效果和指定-F参数相同。用法：netstat (-选项)<br>选项 说明<br>a 显示所有连线中的Socket<br>F 显示FIB<br>A 全部列出，包括正在等待的程序<br>c 持续列出网络状态<br>I 显示网络界面信息<br>n 使用网络ip地址代替名称<br>o 显示计时器<br>r 显示网络路径表<br>t 显示TCP协议的连接情形<br>u 显示UDP协议的连接情形<br>v 显示版本信息<br>w 显示RAW传输协议的连接情形<br>which 语法 which command<br>说明 依序从path环境变量所列的目录中找出command的位置，并显示完整路径的名称。在找到第一个符合条件的程序文件时，就立刻停止搜索，省略其余未搜索目录。<br>范例，找出ls命令的程序文件的位置：which ls<br>系统输出：/usr/bin/ls<br>whereis 语法 whereis [option] name<br>说明 找出特定程序的可执行文件、源代码文件以及manpage的路径。你所提供的name会被先除去前置的路径以及任何.ext形式的扩展名。<br>whereis 只会在标准的Linux目录中进行搜索。<br>常用选项<br>-b 只搜索可执行文件。<br>-m 只搜索manpage。<br>-s 只搜索源代码文件。<br>-B directory 更改或限定搜索可执行的文件的目录。<br>-M directory 更改或限定搜索manpage的目录。<br>-S directory 更改或限定搜索源代码文件的目录。<br>find 语法 find paths expression [action]<br>说明 以paths为搜索起点逐层往下找出每一个符合expression条件的文件，并对该文件执行action所代表的动作。expression是搜索条件，它由一个代表匹配项目的选项以及一个代表匹配模式的参数构成。<br>action是处理动作，它有一个代表“处理方式”的选项以及一个操作参数构成。若不指定action，则默认动作是显示出文件名。</p><p>常用的搜索条件<br>-name pattern<br>-path pattern<br>-lname pattern<br>找出名称、路径名称或符号链接的目标匹配pattern模式的文件。pattern可以包含shell的文件名通配符，路径是相对于搜索起点的。</p><p>常见处理动作<br>-print 显示出文件的相对路径（相对于搜索起点）。<br>-exec cmd /; 执行指定的shell命令。若cmd含有任何shell特殊字符，则他们之前都必须加上/符号，以免shell立刻执行他们。在cmd里，可以用”{}”符号(包括双引号)表示find所找出的文件。<br>locate 语法 locate patterns<br>说明 第一次执行locate时，它会建立一个索引数据库，当往后再次执行时，它便从索引数据库中迅速找出文件的位置。locate很适合用来反复搜索很少变动的目录树，但是对于刚改名的旧文件以及新建的文件，locate就找不到了，除非重建数据库。<br>updatedb 语法 updatedb [option]<br>说明 更新slocate的索引数据库。<br>选项 -e directories 略过directories所列的目录。</p><h2 id="9-其他命令"><a href="#9-其他命令" class="headerlink" title="9.其他命令"></a>9.其他命令</h2><p>命令 功能<br>echo 显示一字串<br>passwd 修改密码<br>clear 清除显示器<br>lpr 打印<br>lpq 查看在打印队列中等待的作业<br>lprm 取消打印队列中的作业</p><h3 id="9-1-echo命令"><a href="#9-1-echo命令" class="headerlink" title="9.1 echo命令"></a>9.1 echo命令</h3><p>echo命令用来在显示器上输出一段文字，这个命令常用来输出一些提示信息，因此这个命令的意义在于输出一些文字。它的用法也很简单：<br>echo –(参数) 字串 (可以用””，也可以不用，显示略有区别)<br>参数n代表输出文字后不换行，如果不加参数会自动换行。<br>输入命令：echo “welcome to use Linux”<br>输出结果为：welcome to use Linux<br>如果不加””，则输出结果为：welcome to use Linux<br>它们的区别在于后一个输出，每两个输出之间只隔一个空格，这是因为echo把这些输出看做字串的缘故。</p><h3 id="9-2-clear命令"><a href="#9-2-clear命令" class="headerlink" title="9.2 clear命令"></a>9.2 clear命令</h3><blockquote><p>clear命令的主要功能是清除显示器，这个命令很简单，只要输入clear即可。</p></blockquote><h3 id="9-3-passwd命令"><a href="#9-3-passwd命令" class="headerlink" title="9.3 passwd命令"></a>9.3 passwd命令</h3><blockquote><p>修改用户的密码。</p></blockquote><p>在shell下输入 passwd 然后，根据提示输入旧密码和新密码即可。</p><h3 id="9-4-lpr命令"><a href="#9-4-lpr命令" class="headerlink" title="9.4 lpr命令"></a>9.4 lpr命令</h3><p>lpr命令的功能是把指定的文件发送到打印队列中。例如，lpr foo.txt 会打印 foo.txt 文件。<br>标准用法：lpr filename<br>要查看在打印队列中等待的作业，在命令行中输入命令lpq。系统返回如下信息：<br>active root 389 foo.txt<br>在这个例子中，389是作业号码。还可以取消打印队列中的作业，格式是：<br>lprm 作业号码 输入命令：lprm 389 这样就去修了 foo.txt 打印作业。</p><h1 id="node-npm-yarn-nvm-pnpm"><a href="#node-npm-yarn-nvm-pnpm" class="headerlink" title="node npm yarn nvm pnpm"></a>node npm yarn nvm pnpm</h1><h2 id="镜像源"><a href="#镜像源" class="headerlink" title="镜像源"></a>镜像源</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#中国科大</span><br><span class="line">https://mirrors.ustc.edu.cn/help/index.html</span><br><span class="line"></span><br><span class="line">#清华</span><br><span class="line">https://mirrors.tuna.tsinghua.edu.cn/</span><br><span class="line">12345</span><br></pre></td></tr></table></figure><h2 id="nvm-管理和切换node版本"><a href="#nvm-管理和切换node版本" class="headerlink" title="nvm 管理和切换node版本"></a><a href="https://so.csdn.net/so/search?q=nvm&amp;spm=1001.2101.3001.7020">nvm</a> 管理和切换node版本</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><h4 id="mac安装"><a href="#mac安装" class="headerlink" title="mac安装"></a>mac安装</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew install nvm</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h4 id="其他方式安装"><a href="#其他方式安装" class="headerlink" title="其他方式安装"></a>其他方式安装</h4><p><a href="https://github.com/nvm-sh/nvm">https://github.com/nvm-sh/nvm</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash</span><br><span class="line"><span class="comment">#国内加速下载 </span></span><br><span class="line">git <span class="built_in">clone</span> -b v0.39.1 https://gitee.com/mirrors/nvm.git &amp;&amp; sh ./nvm/install.sh</span><br><span class="line"><span class="comment">#curl -o- https://gitee.com/mirrors/nvm/raw/v0.39.1/install.sh | bash</span></span><br><span class="line"><span class="comment">#国内加速下载 </span></span><br><span class="line"><span class="comment">#curl -o- https://raw.staticdn.net/nvm-sh/nvm/v0.39.1/install.sh | bash</span></span><br><span class="line">123456</span><br></pre></td></tr></table></figure><h3 id="添加环境变量和-nvm-node国内镜像"><a href="#添加环境变量和-nvm-node国内镜像" class="headerlink" title="添加环境变量和 nvm node国内镜像"></a>添加环境变量和 nvm node国内镜像</h3><p>把如下内容添加到:(如果已存在就不需要添加)</p><blockquote><p><a href="https://so.csdn.net/so/search?q=MACOS&amp;spm=1001.2101.3001.7020">MACOS</a> : <code>~/.zshrc</code><br>linux: <code>.bashrc</code></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> NVM_DIR=<span class="string">&quot;<span class="variable">$HOME</span>/.nvm&quot;</span></span><br><span class="line">[ -s <span class="string">&quot;<span class="variable">$NVM_DIR</span>/nvm.sh&quot;</span> ] &amp;&amp; \. <span class="string">&quot;<span class="variable">$NVM_DIR</span>/nvm.sh&quot;</span>  <span class="comment"># This loads nvm</span></span><br><span class="line">[ -s <span class="string">&quot;<span class="variable">$NVM_DIR</span>/bash_completion&quot;</span> ] &amp;&amp; \. <span class="string">&quot;<span class="variable">$NVM_DIR</span>/bash_completion&quot;</span>  <span class="comment"># This loads nvm bash_completion</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 国内镜像</span></span><br><span class="line"><span class="comment"># 国内镜像 node</span></span><br><span class="line"><span class="built_in">export</span> NVM_NODEJS_ORG_MIRROR=https://npmmirror.com/mirrors/node/</span><br><span class="line">1234567</span><br></pre></td></tr></table></figure><p>应用并生效:</p><blockquote><p>MACOS : <code>source ~/.zshrc</code><br>MACOS : <code>source ~/.bashrc</code></p></blockquote><h3 id="nvm使用"><a href="#nvm使用" class="headerlink" title="nvm使用"></a>nvm使用</h3><h4 id="查看所有可安装-Node-版本号"><a href="#查看所有可安装-Node-版本号" class="headerlink" title="查看所有可安装 Node 版本号"></a>查看所有可安装 Node 版本号</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看所有可安装 Node 版本号</span></span><br><span class="line">nvm ls-remote</span><br><span class="line"><span class="comment">#查看所有可安装 Node  v17开头的版本好</span></span><br><span class="line">nvm ls-remote |grep v17</span><br><span class="line">1234</span><br></pre></td></tr></table></figure><h5 id="安装最新版本"><a href="#安装最新版本" class="headerlink" title="安装最新版本"></a>安装最新版本</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nvm install node</span><br><span class="line"></span><br><span class="line">安装指定版本</span><br><span class="line">nvm install v17.9.1</span><br><span class="line">1234</span><br></pre></td></tr></table></figure><h3 id="查看已安装的所有版本"><a href="#查看已安装的所有版本" class="headerlink" title="查看已安装的所有版本"></a>查看已安装的所有版本</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nvm <span class="built_in">ls</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><h3 id="切换node版本"><a href="#切换node版本" class="headerlink" title="切换node版本"></a>切换node版本</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用指定版本</span></span><br><span class="line">nvm use 10.16.2</span><br><span class="line"></span><br><span class="line"><span class="comment">#使用最新版本</span></span><br><span class="line">nvm use node</span><br><span class="line">12345</span><br></pre></td></tr></table></figure><h3 id="设置全局默认版本"><a href="#设置全局默认版本" class="headerlink" title="设置全局默认版本"></a>设置全局默认版本</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nvm <span class="built_in">alias</span> default  v18.16.0</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>查看默认版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 输入查看当前默认版本</span></span><br><span class="line">nvm <span class="built_in">ls</span>  </span><br><span class="line">=====================                   </span><br><span class="line">       v14.20.0</span><br><span class="line">        v17.9.1</span><br><span class="line">        v18.4.0</span><br><span class="line">        v18.5.0</span><br><span class="line">-&gt;     v18.16.0</span><br><span class="line"></span><br><span class="line">default -&gt; v18.16.0</span><br><span class="line">12345678910</span><br></pre></td></tr></table></figure><h3 id="开启nvm，关闭nvm"><a href="#开启nvm，关闭nvm" class="headerlink" title="开启nvm，关闭nvm"></a>开启nvm，关闭nvm</h3><p>开启nvm，并设置使用最新node 版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nvm on</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>关闭nvm<br>此时 node 命令不可使用，如果再执行<code>nvm use xxx</code>会重新开起</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nvm off </span><br><span class="line">1</span><br></pre></td></tr></table></figure><h3 id="设置下载代理"><a href="#设置下载代理" class="headerlink" title="设置下载代理"></a>设置下载代理</h3><p>设置代理，<br>不加可选参数url，显示当前代理<br>将url设置为none则移除代理</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nvm proxy [url]</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h3 id="设置不同版本node存储目录，不写path查看当前node存储目录"><a href="#设置不同版本node存储目录，不写path查看当前node存储目录" class="headerlink" title="设置不同版本node存储目录，不写path查看当前node存储目录"></a>设置不同版本node存储目录，不写path查看当前node存储目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nvm root [path] </span><br><span class="line">1</span><br></pre></td></tr></table></figure><h2 id="n-管理和切换node版本"><a href="#n-管理和切换node版本" class="headerlink" title="n 管理和切换node版本"></a>n 管理和切换node版本</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install -g n</span><br><span class="line">或</span><br><span class="line">npm install --global n</span><br><span class="line">123</span><br></pre></td></tr></table></figure><h3 id="查看最新版"><a href="#查看最新版" class="headerlink" title="查看最新版"></a>查看最新版</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">n --stable</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h3 id="查看-版本"><a href="#查看-版本" class="headerlink" title="查看 版本"></a>查看 版本</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm -v</span><br><span class="line"></span><br><span class="line">node -v</span><br><span class="line">123</span><br></pre></td></tr></table></figure><h3 id="安装最新版"><a href="#安装最新版" class="headerlink" title="安装最新版"></a>安装最新版</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">n stable</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>查看当前版</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br><span class="line">npm -v</span><br><span class="line">12</span><br></pre></td></tr></table></figure><p>或</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install npm@latest -g</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h2 id="nrm-切换-npm-镜像源-1"><a href="#nrm-切换-npm-镜像源-1" class="headerlink" title="nrm 切换 npm 镜像源"></a>nrm 切换 npm 镜像源</h2><p>安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g nrm</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>查看列表</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nrm <span class="built_in">ls</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>添加 中国镜像站源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nrm add npmmirror registry https://registry.npmmirror.com</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>切换 中国镜像站源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nrm use npmmirror</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>删除 中国镜像站源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nrm del npmmirror</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h2 id="npm-管理"><a href="#npm-管理" class="headerlink" title="npm 管理"></a>npm 管理</h2><h3 id="npm-镜像"><a href="#npm-镜像" class="headerlink" title="npm 镜像"></a>npm 镜像</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://registry.npmmirror.com</span><br><span class="line">npm config <span class="built_in">set</span> registry https://registry.npmmirror.com</span><br><span class="line">12</span><br></pre></td></tr></table></figure><h3 id="安装模块"><a href="#安装模块" class="headerlink" title="安装模块"></a>安装模块</h3><p>安装express模块</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#</span></span><br><span class="line">npm install express</span><br><span class="line"><span class="comment">#安装指定版本</span></span><br><span class="line">npm install express@11.0.0</span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#安装但不写入package.json</span></span><br><span class="line">npm install express</span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#安装并写入package.json的&quot;dependencies&quot;中</span></span><br><span class="line">npm install express -S</span><br><span class="line"><span class="comment">#安装并写入package.json的&quot;devDependencies&quot;中</span></span><br><span class="line">npm install express -D</span><br><span class="line">123456789101112</span><br></pre></td></tr></table></figure><h3 id="全局安装模块"><a href="#全局安装模块" class="headerlink" title="全局安装模块"></a>全局安装模块</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g express  <span class="comment">#全局安装express模块 </span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><h3 id="显示模块详情"><a href="#显示模块详情" class="headerlink" title="显示模块详情"></a>显示模块详情</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm show express</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h3 id="已安装模块"><a href="#已安装模块" class="headerlink" title="已安装模块"></a>已安装模块</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm list </span><br><span class="line">1</span><br></pre></td></tr></table></figure><h3 id="升级当前目录下的项目的所有模块"><a href="#升级当前目录下的项目的所有模块" class="headerlink" title="升级当前目录下的项目的所有模块"></a>升级当前目录下的项目的所有模块</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm update</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h3 id="升级当前目录下的项目的指定模块"><a href="#升级当前目录下的项目的指定模块" class="headerlink" title="升级当前目录下的项目的指定模块"></a>升级当前目录下的项目的指定模块</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm update express</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h3 id="升级全局安装的express模块"><a href="#升级全局安装的express模块" class="headerlink" title="升级全局安装的express模块"></a>升级全局安装的express模块</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm update -g express</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h3 id="升级package-json中依赖包版本"><a href="#升级package-json中依赖包版本" class="headerlink" title="升级package.json中依赖包版本"></a>升级package.json中依赖包版本</h3><h4 id="方式一-升级到最新版本"><a href="#方式一-升级到最新版本" class="headerlink" title="方式一 升级到最新版本"></a>方式一 升级到最新版本</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install --force</span><br><span class="line">或</span><br><span class="line"><span class="comment"># 升级到最新版本</span></span><br><span class="line">npm install</span><br><span class="line">1234</span><br></pre></td></tr></table></figure><h4 id="方式二-使用第三方"><a href="#方式二-使用第三方" class="headerlink" title="方式二 使用第三方"></a>方式二 使用第三方</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">npm install -g npm-check-updates</span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 查看可更新包</span></span><br><span class="line">ncu</span><br><span class="line"><span class="comment">#更新package.json</span></span><br><span class="line">ncu -u</span><br><span class="line">1234567</span><br></pre></td></tr></table></figure><h3 id="查看可更新模块"><a href="#查看可更新模块" class="headerlink" title="查看可更新模块"></a>查看可更新模块</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm outdated</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h3 id="删除指定的模块"><a href="#删除指定的模块" class="headerlink" title="删除指定的模块"></a>删除指定的模块</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall express</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h3 id="删除全局模块"><a href="#删除全局模块" class="headerlink" title="删除全局模块"></a>删除全局模块</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall -g express</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h3 id="清除缓存"><a href="#清除缓存" class="headerlink" title="清除缓存"></a>清除缓存</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm cache clean --force</span><br><span class="line"></span><br><span class="line">npm cache clean -f</span><br><span class="line">123</span><br></pre></td></tr></table></figure><p>验证缓存</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm cache verify</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h2 id="yarn"><a href="#yarn" class="headerlink" title="yarn"></a>yarn</h2><h3 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g yarn</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h3 id="查看版本"><a href="#查看版本" class="headerlink" title="查看版本"></a>查看版本</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn --version</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>输出</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.22.17</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h3 id="yarn-1-镜像"><a href="#yarn-1-镜像" class="headerlink" title="yarn 1 镜像"></a>yarn 1 镜像</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn config <span class="built_in">set</span> registry https://registry.npmmirror.com</span><br><span class="line">yarn config <span class="built_in">set</span> registry https://registry.npmmirror.com</span><br><span class="line">12</span><br></pre></td></tr></table></figure><h3 id="yarn-清除缓存"><a href="#yarn-清除缓存" class="headerlink" title="yarn 清除缓存"></a>yarn 清除缓存</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yarn cache clean</span><br><span class="line">或</span><br><span class="line">npm cache clean --force</span><br><span class="line">123</span><br></pre></td></tr></table></figure><h3 id="查看已缓存包的列表"><a href="#查看已缓存包的列表" class="headerlink" title="查看已缓存包的列表"></a>查看已缓存包的列表</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn cache list</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h3 id="查看已缓存包的列表-1"><a href="#查看已缓存包的列表-1" class="headerlink" title="查看已缓存包的列表"></a>查看已缓存包的列表</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn cache list</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h3 id="cache缓存文件目录路径"><a href="#cache缓存文件目录路径" class="headerlink" title="cache缓存文件目录路径"></a>cache缓存文件目录路径</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn cache <span class="built_in">dir</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><h3 id="改变-yarn-cache缓存文件目录路径"><a href="#改变-yarn-cache缓存文件目录路径" class="headerlink" title="改变 yarn cache缓存文件目录路径"></a>改变 yarn cache缓存文件目录路径</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /User/fox/.yarn/cache</span><br><span class="line">yarn config <span class="built_in">set</span> cache-folder /User/fox/.yarn/cache</span><br><span class="line"></span><br><span class="line">或者</span><br><span class="line">yarn &lt;<span class="built_in">command</span>&gt; --cache-folder &lt;path&gt;</span><br><span class="line">例如</span><br><span class="line">yarn install --cache-folder /User/fox/.yarn/cache</span><br><span class="line">1234567</span><br></pre></td></tr></table></figure><h3 id="升级依赖"><a href="#升级依赖" class="headerlink" title="升级依赖"></a>升级依赖</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn upgrade-interactive --latest</span><br><span class="line">1</span><br></pre></td></tr></table></figure><blockquote><p>手动选择要升级的包<br>按空格键选择，<br>a 键切换所有，i 键反选选择</p></blockquote><h2 id="yarn2"><a href="#yarn2" class="headerlink" title="yarn2"></a>yarn2</h2><h3 id="安装（需要线安装yarn1，然后切换yarn2）"><a href="#安装（需要线安装yarn1，然后切换yarn2）" class="headerlink" title="安装（需要线安装yarn1，然后切换yarn2）"></a>安装（需要线安装yarn1，然后切换yarn2）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g yarn</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h3 id="查看版本-1"><a href="#查看版本-1" class="headerlink" title="查看版本"></a>查看版本</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn --version</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>输出</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.22.17</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h3 id="安装yarn2"><a href="#安装yarn2" class="headerlink" title="安装yarn2"></a>安装yarn2</h3><p>设置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn <span class="built_in">set</span> version berry</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>查看版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn --version</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>输出</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">3.2.0</span><br><span class="line">1</span><br></pre></td></tr></table></figure><blockquote><p>yarn 会创建 <code>.yarn</code> 目录和 <code>.yarnrc.yml</code> 文件，只关注<code>.yarnrc.yml</code></p></blockquote><p>如果 <code>yarn set version berry</code> 报错<br>那么看文章最后部分 <a href="https://foxwho.blog.csdn.net/article/details/121467992#t57"><strong>yarn2国内下载过慢解决</strong></a></p><h3 id="配置-yarnrc-yml"><a href="#配置-yarnrc-yml" class="headerlink" title="配置.yarnrc.yml"></a>配置.yarnrc.yml</h3><p>官方手册：<a href="https://www.yarnpkg.cn/configuration/yarnrc">https://www.yarnpkg.cn/configuration/yarnrc</a></p><p>默认内容由：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">yarnPath:</span> <span class="string">&quot;.yarn/releases/yarn-berry.cjs&quot;</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>如果已经设置 yarn2镜像库那么会有：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">yarnPath:</span> <span class="string">&quot;.yarn/releases/yarn-berry.cjs&quot;</span></span><br><span class="line"><span class="attr">npmRegistryServer:</span> <span class="string">&quot;https://registry.npmmirror.com&quot;</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><h3 id="升级依赖-1"><a href="#升级依赖-1" class="headerlink" title="升级依赖"></a>升级依赖</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn up</span><br><span class="line">1</span><br></pre></td></tr></table></figure><blockquote><p>执行该命令后，如果是yarn1项目或者npm项目，那么：<br><code>node_modules</code>被清空<br>多了<code>.pnp.cjs</code><br>多了<code>.pnp.loader..mjs</code><br><code>.yarn</code>目录下多了很多文件</p></blockquote><h3 id="目录说明"><a href="#目录说明" class="headerlink" title="目录说明"></a>目录说明</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">|____.yarn                          Yarn 2的具体执行文件,安装的依赖等等</span><br><span class="line">| |____releases</span><br><span class="line">| | |____yarn-berry.cjs             具体执行文件</span><br><span class="line">| |____cache                        安装的依赖,全部是压缩包</span><br><span class="line">| | |____.........</span><br><span class="line">| |____install-state.gz</span><br><span class="line">| |____unplugged                    是否具有安装脚本</span><br><span class="line">| | |____.........</span><br><span class="line">|____.pnp.cjs</span><br><span class="line">|____.pnp.loader.mjs</span><br><span class="line">|____yarn.lock</span><br><span class="line">|____yarn-error.log</span><br><span class="line">|____.yarnrc.yml                 具体配置文件</span><br><span class="line">12345678910111213</span><br></pre></td></tr></table></figure><p><strong>方式一：</strong></p><ul><li>只提交 <code>.yarnrc.yml</code>文件，其他人使用时候，执行<code>yarn install</code>重新下载安装所有依赖</li></ul><p><strong>方式二：（团队版）</strong></p><ul><li>提交 <code>.yarnrc.yml</code>，<code>.pnp.cjs</code>,<code>.pnp.loader.mjs</code>文件和<code>.yarn</code>目录，其他人使用时候，不需要执行<code>yarn install</code>，直接<code>yarn dev</code>运行即可。因为依赖已经下载安装了，这就是Yarn 2提出的<a href="https://yarnpkg.com/features/zero-installs">零安装zero-install</a></li></ul><p><strong>方式三：</strong></p><ul><li>项目很多时候，依赖几乎完全一样的时候，在 <code>.yarnrc.yml</code>文件配置<code>enableGlobalCache: true</code>，提交 <code>.yarnrc.yml</code>文件，那么其他项目用到一样的依赖不在下载，会自动使用全局版本</li></ul><blockquote><p><code>enableGlobalCache</code> ： 是否启用全局缓存，默认不启用(所有缓存都存在.yarn/cache目录下)。</p></blockquote><h3 id="配置yarn2-设置-yarn镜像库"><a href="#配置yarn2-设置-yarn镜像库" class="headerlink" title="配置yarn2 设置 yarn镜像库"></a>配置yarn2 设置 yarn镜像库</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn config <span class="built_in">set</span> npmRegistryServer https://registry.npmmirror.com</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h3 id="yarn2-命令"><a href="#yarn2-命令" class="headerlink" title="yarn2 命令"></a>yarn2 命令</h3><h4 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yarn install </span><br><span class="line">或</span><br><span class="line">yarn</span><br><span class="line">123</span><br></pre></td></tr></table></figure><h4 id="添加依赖"><a href="#添加依赖" class="headerlink" title="添加依赖"></a>添加依赖</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn add [package] [--dev|--peer]</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h4 id="删除依赖"><a href="#删除依赖" class="headerlink" title="删除依赖"></a>删除依赖</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn remove [package]</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h4 id="更多"><a href="#更多" class="headerlink" title="更多"></a>更多</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn --<span class="built_in">help</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><h2 id="yarn2国内下载过慢解决"><a href="#yarn2国内下载过慢解决" class="headerlink" title="yarn2国内下载过慢解决"></a>yarn2国内下载过慢解决</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">mkdir</span> <span class="string">-p</span> <span class="string">.yarn/releases</span> <span class="string">&amp;&amp;</span> <span class="string">\</span></span><br><span class="line"><span class="string">wget</span> <span class="string">https://repo.yarnpkg.com/3.2.0/packages/yarnpkg-cli/bin/yarn.js</span> <span class="string">-O</span> <span class="string">./.yarn/releases/yarn-berry.cjs</span>  <span class="string">&amp;&amp;</span> <span class="string">\</span></span><br><span class="line"><span class="string">cat</span> <span class="string">&gt;&gt;</span> <span class="string">.yarnrc.yml</span> <span class="string">&lt;&lt;EOF</span></span><br><span class="line"><span class="attr">yarnPath:</span> <span class="string">&quot;.yarn/releases/yarn-berry.cjs&quot;</span></span><br><span class="line"><span class="attr">npmRegistryServer:</span> <span class="string">&quot;https://registry.npmmirror.com&quot;</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure><blockquote><p>3.2.0 这个版本号怎么来，请看 <a href="https://github.com/yarnpkg/berry/releases">https://github.com/yarnpkg/berry/releases</a></p></blockquote><p>最后执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn up</span><br><span class="line">或者其他命令</span><br><span class="line">12</span><br></pre></td></tr></table></figure><p>更多 yarn2 请看 <a href="https://segmentfault.com/a/1190000040520326">https://segmentfault.com/a/1190000040520326</a></p><h2 id="pnpm-安装"><a href="#pnpm-安装" class="headerlink" title="pnpm 安装"></a><a href="https://so.csdn.net/so/search?q=pnpm&amp;spm=1001.2101.3001.7020">pnpm</a> 安装</h2><p>官网 <a href="https://pnpm.io/">https://pnpm.io/</a></p><p>中文 <a href="https://pnpm.io/zh/">https://pnpm.io/zh/</a></p><p><a href="https://www.pnpm.cn/">https://www.pnpm.cn/</a></p><h3 id="脚本安装"><a href="#脚本安装" class="headerlink" title="脚本安装"></a>脚本安装</h3><h4 id="windows"><a href="#windows" class="headerlink" title="windows"></a>windows</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iwr https://get.pnpm.io/install.ps1 -useb | iex</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h4 id="linux-mac"><a href="#linux-mac" class="headerlink" title="linux mac"></a>linux mac</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://get.pnpm.io/install.sh | sh -</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>安装指定的版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://get.pnpm.io/install.sh | <span class="built_in">env</span> PNPM_VERSION=&lt;version&gt; sh -</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h4 id="通过-npm-安装-pnpm"><a href="#通过-npm-安装-pnpm" class="headerlink" title="通过 npm 安装 pnpm"></a>通过 npm 安装 pnpm</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g pnpm</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h4 id="通过-Homebrew-安装-pnpm"><a href="#通过-Homebrew-安装-pnpm" class="headerlink" title="通过 Homebrew 安装 pnpm"></a>通过 Homebrew 安装 pnpm</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew install pnpm</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h4 id="通过-Scoop-安装-pnpm"><a href="#通过-Scoop-安装-pnpm" class="headerlink" title="通过 Scoop 安装 pnpm"></a>通过 Scoop 安装 pnpm</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scoop install nodejs-lts pnpm</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h3 id="pnpm-升级-pnpm"><a href="#pnpm-升级-pnpm" class="headerlink" title="pnpm 升级 pnpm"></a>pnpm 升级 pnpm</h3><h4 id="方式一"><a href="#方式一" class="headerlink" title="方式一"></a>方式一</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pnpm i -g pnpm</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h4 id="方式二"><a href="#方式二" class="headerlink" title="方式二"></a>方式二</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pnpm i -g pnpm@指定版本号</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>查看版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pnpm -v</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h3 id="pnpm-命令"><a href="#pnpm-命令" class="headerlink" title="pnpm 命令"></a>pnpm 命令</h3><h4 id="设置国内镜像"><a href="#设置国内镜像" class="headerlink" title="设置国内镜像"></a>设置国内镜像</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pnpm config <span class="built_in">set</span> registry https://registry.npmmirror.com</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h4 id="添加依赖-1"><a href="#添加依赖-1" class="headerlink" title="添加依赖"></a>添加依赖</h4><div class="table-container"><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>pnpm add sax</td><td>保存到 dependencies 配置项下</td></tr><tr><td>pnpm add -D sax</td><td>保存到 devDependencies 配置项下</td></tr><tr><td>pnpm add -O sax</td><td>保存到 optionalDependencies 配置项下</td></tr><tr><td>pnpm add -g sax</td><td>安装软件包到全局环境中</td></tr><tr><td>pnpm add sax@next</td><td>安装标记为 next 的版本</td></tr><tr><td>pnpm add sax@3.0.0</td><td>安装指定版本 3.0.0</td></tr></tbody></table></div><h4 id="初始化依赖"><a href="#初始化依赖" class="headerlink" title="初始化依赖"></a>初始化依赖</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pnpm install</span><br><span class="line">或</span><br><span class="line">pnpm i</span><br><span class="line">123</span><br></pre></td></tr></table></figure><h4 id="升级依赖-2"><a href="#升级依赖-2" class="headerlink" title="升级依赖"></a>升级依赖</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">pnpm up</span><br><span class="line">或</span><br><span class="line">pnpm up --latest</span><br><span class="line">或</span><br><span class="line">pnpm up xxx@版本号</span><br><span class="line">例如</span><br><span class="line">pnpm up foo@2</span><br><span class="line"></span><br><span class="line">12345678</span><br></pre></td></tr></table></figure><h4 id="删除pnpm缓存"><a href="#删除pnpm缓存" class="headerlink" title="删除pnpm缓存"></a>删除pnpm缓存</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pnpm store prune</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h5 id="store-dir-目录位置"><a href="#store-dir-目录位置" class="headerlink" title="store-dir 目录位置"></a>store-dir 目录位置</h5><p>默认值：<br>在 <code>Windows</code> 上: <code>~/AppData/Local/pnpm/store</code><br>在 <code>macOS</code> 上: <code>~/Library/pnpm/store</code><br>在 <code>Linux</code> 上: <code>~/.local/share/pnpm/store</code></p><h3 id="pnpm-server-相关命令"><a href="#pnpm-server-相关命令" class="headerlink" title="pnpm server 相关命令"></a>pnpm server 相关命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pnpm server start</span><br><span class="line">1</span><br><span class="line">pnpm server stop</span><br><span class="line">1</span><br><span class="line">pnpm server status</span><br></pre></td></tr></table></figure><h1 id="conda常用命令"><a href="#conda常用命令" class="headerlink" title="conda常用命令"></a>conda常用命令</h1><p>1.升级<br>2.卸载Anaconda软件<br>3.找到自己安装环境对应的最新TensorFlow后（可以在终端搜索anaconda，定位到那一行），然后查看指定包</p><h2 id="升级"><a href="#升级" class="headerlink" title="升级"></a><strong>升级</strong></h2><p>升级Anaconda需要先升级conda</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1 conda update conda</span><br><span class="line">2 conda update anaconda</span><br><span class="line">3 conda update anaconda-navigator    //update最新版本的anaconda-navigator</span><br></pre></td></tr></table></figure><h2 id="卸载Anaconda软件"><a href="#卸载Anaconda软件" class="headerlink" title="卸载Anaconda软件"></a><strong>卸载Anaconda软件</strong></h2><p>由于Anaconda的安装文件都包含在一个目录中，所以直接将该目录删除即可。删除整个Anaconda目录：</p><p>计算机控制面板-&gt;程序与应用-&gt;卸载 //windows</p><p>或者</p><p>找到C:\ProgramData\Anaconda3\Uninstall-Anaconda3.exe执行卸载</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf anaconda //ubuntu</span><br></pre></td></tr></table></figure><p>最后，建议清理下.bashrc中的Anaconda路径。</p><h2 id="conda环境使用基本命令："><a href="#conda环境使用基本命令：" class="headerlink" title="conda环境使用基本命令："></a><strong>conda环境使用基本命令</strong>：</h2><p><a href="javascript:void(0"><img src="https://assets.cnblogs.com/images/copycode.gif" alt="复制代码"></a>;)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1 conda update -n base conda #update最新版本的conda</span><br><span class="line">2 conda create -n xxxx python=3.5 #创建python3.5的xxxx虚拟环境</span><br><span class="line">3 conda activate xxxx #开启xxxx环境</span><br><span class="line">4 conda deactivate #关闭环境</span><br><span class="line">5 conda env list #显示所有的虚拟环境</span><br><span class="line">6 conda info --envs #显示所有的虚拟环境</span><br></pre></td></tr></table></figure><p><a href="javascript:void(0"><img src="https://assets.cnblogs.com/images/copycode.gif" alt="复制代码"></a>;)</p><h2 id="anaconda安装最新的TensorFlow版本"><a href="#anaconda安装最新的TensorFlow版本" class="headerlink" title="anaconda安装最新的TensorFlow版本"></a><strong>anaconda安装最新的TensorFlow版本</strong></h2><p>参考：<a href="https://blog.csdn.net/qq_35203425/article/details/79965389">https://blog.csdn.net/qq_35203425/article/details/79965389</a><br>一般从anaconda官网下载的anaconda，查看tensorflow依然还是1.2的版本，现在用conda更新TensorFlow，解决方法：<br>1.打开anaconda-prompt<br>2.查看tensorflow各个版本：（查看会发现有一大堆TensorFlow源，但是不能随便选，选择可以用查找命令定位）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 anaconda search -t conda tensorflow</span><br></pre></td></tr></table></figure><p>3.找到自己安装环境对应的最新TensorFlow后（可以在终端搜索anaconda，定位到那一行），然后查看指定包<USER/PACKAGE>可安装版本信息命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 anaconda show &lt;USER/PACKAGE&gt; </span><br></pre></td></tr></table></figure><h2 id="查看tensorflow版本信息"><a href="#查看tensorflow版本信息" class="headerlink" title="查看tensorflow版本信息"></a><strong>查看tensorflow版本信息</strong></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">anaconda show anaconda/tensorflow</span><br></pre></td></tr></table></figure><p>4.第4步会提供一个下载地址，使用下面命令就可安装1.8.0版本tensorflow</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install --channel https://conda.anaconda.org/anaconda tensorflow=1.8.0 </span><br></pre></td></tr></table></figure><h2 id="更新，卸载安装包："><a href="#更新，卸载安装包：" class="headerlink" title="更新，卸载安装包："></a><strong>更新，卸载安装包</strong>：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1 conda list #查看已经安装的文件包</span><br><span class="line">2 conda list -n xxx #指定查看xxx虚拟环境下安装的package</span><br><span class="line">3 conda update xxx #更新xxx文件包</span><br><span class="line">4 conda uninstall xxx #卸载xxx文件包</span><br></pre></td></tr></table></figure><h2 id="删除虚拟环境"><a href="#删除虚拟环境" class="headerlink" title="删除虚拟环境"></a>删除虚拟环境</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda remove -n xxxx --all //创建xxxx虚拟环境</span><br></pre></td></tr></table></figure><h2 id="清理（conda瘦身）"><a href="#清理（conda瘦身）" class="headerlink" title="清理（conda瘦身）"></a>清理（conda瘦身）</h2><p>conda clean就可以轻松搞定！第一步：通过conda clean -p来删除一些没用的包，这个命令会检查哪些包没有在包缓存中被硬依赖到其他地方，并删除它们。第二步：通过conda clean -t可以将conda保存下来的tar包。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1 conda clean -p //删除没有用的包</span><br><span class="line">2 conda clean -t //tar打包</span><br><span class="line">3 conda clean -y -all //删除所有的安装包及cache</span><br></pre></td></tr></table></figure><p>参考：<a href="https://blog.csdn.net/menc15/article/details/71477949">https://blog.csdn.net/menc15/article/details/71477949</a></p><p>7.重命名env<br>Conda是没有重命名环境的功能的, 要实现这个基本需求, 只能通过愚蠢的克隆-删除的过程。<br>切记不要直接mv移动环境的文件夹来重命名, 会导致一系列无法想象的错误的发生!</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1 conda create --name newname --clone oldname //克隆环境</span><br><span class="line">2 conda remove --name oldname --all //彻底删除旧环境</span><br></pre></td></tr></table></figure><h2 id="常用软件安装"><a href="#常用软件安装" class="headerlink" title="常用软件安装"></a>常用软件安装</h2><p>参考：conda环境下常用软件安装</p><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>1:failed ERROR conda.core.link:_execute(502):</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1 conda install 软件时出现如下错误信息：</span><br><span class="line">2 Preparing transaction: done</span><br><span class="line">3 Verifying transaction: done</span><br><span class="line">4 Executing transaction: </span><br><span class="line">5 failed ERROR conda.core.link:_execute(502):</span><br></pre></td></tr></table></figure><p>解决方法：往往时权限不够，需要以管理员方式运行Anaconda prompt进行安装</p><p>2.anaconda或conda不是内部命令<br>解决方法：<a href="https://zhuanlan.zhihu.com/p/32446675">https://zhuanlan.zhihu.com/p/32446675</a></p><p>添加上图环境变量即可</p><p>jupyter notebook默认工作目录设置<br>参考：<a href="https://blog.csdn.net/liwei1205/article/details/78818568">https://blog.csdn.net/liwei1205/article/details/78818568</a></p><p>1）在Anaconda Prompt终端中输入下面命令，查看你的notebook配置文件在哪里：</p><p>jupyter notebook —generate-config<br>#会生成文件C:\Users\用户.jupyter\jupyter_notebook_config.py</p><p>2）打开jupyter_notebook_config.py文件通过搜索关键词：c.NotebookApp.notebook_dir，修改如下</p><p>c.NotebookApp.notebook_dir = ‘E:\tf_models’ //修改到自定义文件夹</p><p>3）然后重启notebook服务器就可以了</p><p><strong>注：</strong>其它方法直接命令到指定目录，Anaconda Prompt终端中输：jupyter notebook 目录地址</p>]]></content>
    
    
    <summary type="html">常用命令</summary>
    
    
    
    <category term="命令" scheme="https://tom9527c.github.io/categories/%E5%91%BD%E4%BB%A4/"/>
    
    
    <category term="brew" scheme="https://tom9527c.github.io/tags/brew/"/>
    
    <category term="nvm" scheme="https://tom9527c.github.io/tags/nvm/"/>
    
    <category term="git" scheme="https://tom9527c.github.io/tags/git/"/>
    
    <category term="hexo" scheme="https://tom9527c.github.io/tags/hexo/"/>
    
    <category term="linux" scheme="https://tom9527c.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>你不知道的JavaScript</title>
    <link href="https://tom9527c.github.io/posts/7cda.html"/>
    <id>https://tom9527c.github.io/posts/7cda.html</id>
    <published>2023-12-05T14:44:12.000Z</published>
    <updated>2024-06-29T08:11:47.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="tip warning faa-horizontal animated"><p>warning</p></div><div class="tip ban faa-flash animated"><p>ban</p></div><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-rat_zi"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-rat"></use></svg><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-tiger_yin"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-tiger"></use></svg><h1 id="你不知道的JavaScript（上）"><a href="#你不知道的JavaScript（上）" class="headerlink" title="你不知道的JavaScript（上）"></a>你不知道的JavaScript（上）</h1><h2 id="为什么读（解决那些问题）"><a href="#为什么读（解决那些问题）" class="headerlink" title="为什么读（解决那些问题）"></a>为什么读（解决那些问题）</h2><p>JavaScript语言本质上有许多复杂的概念，但是却用一种看起来比较简单的方式体现出来，比如回调函数，因此JavaScript开发者通常只是简单的使用这些特性，并不会关心语言内部的实现原理</p><p>如果每次遇到JavaScript中出乎意料的行为时，你的反应就是把他加入黑名单，那么用不了多久就会把JavaScript语言真正的多样性全部排除</p><h2 id="作用域是什么"><a href="#作用域是什么" class="headerlink" title="作用域是什么"></a>作用域是什么</h2><p>储存和访问变量的值的能力将<code>状态</code>带给了程序，这些变量储存在哪里?程序如何找到它们，这个查找规则被称为<code>作用域</code></p><h3 id="编译原理"><a href="#编译原理" class="headerlink" title="编译原理"></a>编译原理</h3><p>尽管通常将js归类为动态或解释执行语言，但事实上它是一门编译语言。与传统的编译语言不同，它不是提前编译的，编译结果不能再分布式系统中进行移植</p><p>传统语言的<code>编译</code>原理</p><ul><li><code>分词/词法分析</code>将由字符组成的字符串分解为<code>有意义的代码块</code>，这些代码块被称为<code>词法单元</code></li><li><code>解析/语法分析</code> 将词法单元转换为<code>AST</code></li><li><code>代码生成</code> 将AST<code>转换</code>为<code>可执行的代码</code></li></ul><p>JavaScript引擎要复杂的多（也会在执行前进行编译），不会有大量的时间来进行优化，因为JS编译过程不是发生在构建之前，而是发生在代码执行之前的几微秒</p><h3 id="理解作用域"><a href="#理解作用域" class="headerlink" title="理解作用域"></a>理解作用域</h3><h4 id=""><a href="#" class="headerlink" title=" "></a> </h4><ul><li><code>引擎</code> 从头到尾负责整个js程序的<code>编译</code>及<code>执行</code>过程</li><li><code>编译器</code> 引擎的好朋友之一，负责<code>语法分析</code>及<code>代码生成</code>等脏活累活</li><li><code>作用域</code> 引擎的另一位好朋友，负责<code>收集</code>并<code>维护</code>由所有声明的标识符（变量）组成的一系列查询，并实施一套非常严格的规则，确定当前执行的代码对这些标识符的访问权限</li></ul><h4 id="var-a-2-解析过程"><a href="#var-a-2-解析过程" class="headerlink" title="var a = 2 解析过程"></a>var a = 2 解析过程</h4><ul><li>编译器分解成词法单元</li><li>词法单元解析成一个树结构</li><li>编译器进行代码生成<ul><li>var a 会询问作用域是否存在a变量，如果存在忽略该声明，继续进行编译，否在会要求作用域声明变量a</li><li>编译器为引擎<code>生成运行时所需代码</code>，这些代码被用来处理 a = 2 这个赋值操作。引擎会问作用域是否存在a变量，存在的话使用，不存在，继续查找</li></ul></li></ul><blockquote><p><code>变量的赋值</code>操作会执行<code>两个动作</code>，首先编译器会在当前作用域中<code>声明一个变量</code>（如果之前没有声明过），然后在运行时引擎会在作用域中<code>查找该变量</code>，如果能够找到就会对它赋值</p></blockquote><h4 id="引擎如何在作用域中查找变量"><a href="#引擎如何在作用域中查找变量" class="headerlink" title="引擎如何在作用域中查找变量"></a>引擎如何在作用域中查找变量</h4><p>当<code>变量</code>出现在<code>赋值操作</code>的<code>左侧</code>时进行 <code>LHS</code>查询，出现在<code>右侧时</code>进行<code>RHS</code>查询</p><p>RHS 查询与简单地查找某个<code>变量的值</code>并无二致，而 LHS 查询则是试图找到变量的<code>容器本身</code>,从而可以对其赋值。从这个角度说，RHS并不是真正意义上的‘赋值操作的左侧’，更准确的说是‘非右侧’</p><blockquote><p>LHS 和 RHS的含义是”赋值操作的左侧或右侧“并不一定意味着就是 ”=赋值操作符的左侧或右侧“。赋值操作还有其他几种形式，因此在概念上最好讲其理解为 <code>赋值操作的目标是谁</code>（LHS）,已经<code>谁是赋值操作的源头</code>（RHS）</p></blockquote><h2 id="补充问题"><a href="#补充问题" class="headerlink" title="补充问题"></a>补充问题</h2><h3 id="什么是js引擎"><a href="#什么是js引擎" class="headerlink" title="什么是js引擎"></a>什么是js引擎</h3><p>JavaScript引擎是一种解释和执行JavaScript代码的软件组件或程序。它是浏览器或其他JavaScript运行环境中的重要组成部分。JavaScript是一种脚本语言，最初设计用于在网页上添加交互性。JavaScript引擎负责解释和执行JavaScript代码，使其能够在用户的浏览器中运行。</p><p>不同的浏览器使用不同的JavaScript引擎。以下是一些主要的JavaScript引擎：</p><ul><li><p>V8引擎： 由Google开发，最初用于Google Chrome浏览器，后来也被用于Node.js等环境。</p></li><li><p>SpiderMonkey： Mozilla Firefox浏览器使用的JavaScript引擎，由Mozilla开发。</p></li><li><p>Chakra引擎： 由Microsoft开发，最初用于Internet Explorer浏览器，后来被Edge浏览器采用。</p></li><li><p>JavaScriptCore（Nitro）： Safari浏览器的JavaScript引擎，由WebKit项目提供。</p></li><li><p>Rhino： 一个由Java编写的JavaScript引擎，通常用于Java应用程序中。</p></li></ul><p>这些引擎<code>负责将JavaScript代码转换为机器代码或解释执行</code>，以便在用户的设备上运行。随着JavaScript的发展，引擎不断优化以提高执行性能和支持新的语言特性。</p><h3 id="什么是js编译器"><a href="#什么是js编译器" class="headerlink" title="什么是js编译器"></a>什么是js编译器</h3><p>JavaScript 是一种解释型语言，通常是通过浏览器中的 JavaScript 引擎逐行解释执行的。然而，随着 JavaScript 的发展，一些工具和技术已经出现，使得 JavaScript 也可以使用编译器进行一些优化。</p><p>在 JavaScript 中，有一种被称为“即时编译”（Just-In-Time Compilation，JIT Compilation）的技术，这是一种在<code>运行时</code>将 JavaScript 代码<code>编译成机器码</code>或其他中间代码的方法。这种技术使得 JavaScript 的执行速度得到提升，因为机器码的执行通常比解释器执行更为高效。</p><p>主要的 JavaScript 引擎，比如 V8（用于 Chrome 和 Node.js）、SpiderMonkey（用于 Firefox）、Chakra（用于 Edge）等，都使用了 JIT 编译技术。以下是 JIT 编译的基本工作原理：</p><ul><li><p>解释执行（Interpretation）： 初始阶段，JavaScript 引擎会解释执行源代码。</p></li><li><p>即时编译（JIT Compilation）： 引擎会监测代码的执行情况，识别经常执行的代码段（热点代码），并将其编译成机器码。</p></li><li><p>优化： JIT 编译器通常会应用一些优化技术，例如内联缓存、去除冗余代码等，以提高执行效率。</p></li><li><p>执行机器码： 一旦代码被成功编译成机器码，后续的执行就会直接使用这些机器码，而不是再次解释源代码。</p></li></ul><p>这种 JIT 编译的方式使得 JavaScript 在运行时能够获得接近原生代码的性能，同时保留了 JavaScript 动态性的特点。这也是为什么现代 JavaScript 引擎能够在性能上取得显著的提升的原因之一。</p><h3 id="其他语言的编译器"><a href="#其他语言的编译器" class="headerlink" title="其他语言的编译器"></a>其他语言的编译器</h3><p>编译器是一种将高级编程语言代码翻译为机器码或其他中间代码的工具。与JavaScript引擎不同，编译器通常在代码执行之前将整个程序编译为机器码，而不是逐行解释执行。这样的编译过程使得执行速度更快，因为代码已经被转换为计算机能够直接理解和执行的形式。</p><p>在不同的编程语言中，有各种不同类型的编译器。以下是一些常见的编译器类型：</p><ul><li><p>前端编译器： 将高级编程语言代码翻译为中间代码，而不生成最终的可执行文件。这些中间代码通常由解释器或后端编译器进一步处理。</p></li><li><p>即时编译器（Just-In-Time Compiler，JIT）： 在程序执行时将字节码或中间代码编译为机器码。JavaScript引擎中的V8就包含了JIT编译器。它在运行时动态地将JavaScript代码编译为机器码，以提高执行性能。</p></li><li><p>静态编译器： 在运行之前将源代码完全编译为机器码。C和C++等语言通常使用静态编译器，生成可执行文件。</p></li><li><p>解释器： 逐行解释执行源代码，而不事先生成机器码。很多脚本语言（如Python、Ruby）使用解释器。</p></li></ul><p>编译器的目标是将源代码转换为能够在计算机上直接执行的形式，以提高程序的性能和效率。与JavaScript引擎不同，编译器通常在程序执行之前完成整个编译过程。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="时刻准备着" scheme="https://tom9527c.github.io/categories/%E6%97%B6%E5%88%BB%E5%87%86%E5%A4%87%E7%9D%80/"/>
    
    
    <category term="原生JS" scheme="https://tom9527c.github.io/tags/%E5%8E%9F%E7%94%9FJS/"/>
    
  </entry>
  
  <entry>
    <title>读书笔记</title>
    <link href="https://tom9527c.github.io/posts/ca87.html"/>
    <id>https://tom9527c.github.io/posts/ca87.html</id>
    <published>2023-11-11T09:57:31.000Z</published>
    <updated>2023-12-04T15:13:53.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="唐诗"><a href="#唐诗" class="headerlink" title="唐诗"></a>唐诗</h1><h2 id="诗歌的起源"><a href="#诗歌的起源" class="headerlink" title="诗歌的起源"></a>诗歌的起源</h2><p>诗词，其实就是古代的流行歌曲，它们记录着一个个时代的变迁；如果史书事国家视角，记录的是帝王将相史，那么诗歌就是个人视角，记录的是个人的喜怒哀乐。比起历史的过眼云烟，诗歌包含着诗人丰富的个人情感，这些情感史永恒的，所以诗歌是一种表达情感的高级方式</p><ul><li><p>诗歌的起源于干活时候的口号，中国第一首诗叫做《弹歌》，讲的是原始社会打猎的是，全诗一共八个字  断竹，续竹，飞土，逐肉 （其实这首诗就是个口号，干活的时候一块喊喊，大概类似于做操时候喊的节拍）</p></li><li><p>西周，周公搞了一套礼乐制，把礼节、音乐、舞蹈上升到国家高度。还特意设置了一个采诗官的机构，专门收集各地的民歌，交给朝廷专门的歌舞图谱曲。</p></li><li><p>这些诗歌流传下来，据说孔子把它们又整理了一遍，这就是中国的第一本诗歌总集《诗经》，《诗经》共有诗歌305首，所以后人又称为《诗三百》，</p><ul><li>《诗经》拢共有三种类型<ul><li>风：又称国风，就是各地民歌</li><li>雅 ：大部分是贵族音乐，比如开宴会时的曲子</li><li>颂：特别重大的正式场合演奏的音乐，比如祭祀时用的曲子</li></ul></li><li>里面的诗，基本是四个字一小句，实际上是两组词拼在一块组成的，读起来是‘二/二’的形式，这就是四言诗  例如：（关关/雎鸠，在河/之洲，窈窕/淑女，君子/好逑。）</li></ul></li><li><p>后来有人开辟了全新的玩法，代表人物屈原的《离骚》，《离骚》里面的句子，就不是四个字四个字的了，而是特别喜欢用兮这个语气词 例如：（路漫漫其修远兮，吾将上下而求索。）</p></li><li><p>后来有人继承和模仿屈原的风格写了不少东西，后人将这些作品编辑成集，这就是楚辞</p></li></ul><blockquote><p>《诗经》和《楚辞》，构成了中国诗词的量大起源。诗经里最经典的《国风》和楚辞里面最经典的《离骚》，合称”风骚“，称为中国文学的代称<br>《国风》，代表现实主义，朴实无华 《离骚》，代表浪漫主义，天马行空，这两种类型文学延续至今，涌现出无数的代表人物，后来的诗词，就在这两大起源上继续发展</p></blockquote><ul><li>到了汉代，也有一个机构，跟周朝的采诗官类似，叫乐府，负责采集各地的民歌。这时候的诗已经发展成五言诗，这就是后人口中的汉乐府。最有名的就是《孔雀东南飞》：府吏闻此事，心知长别离。徘徊庭树下，自挂东南枝</li><li>还有一些问人继承《离骚》，于是就有了汉赋 例如：司马相如的《子虚赋》 </li><li>到了魏晋南北朝出现 三曹、竹林七贤、陶渊明（田园诗鼻祖）、谢灵运（山水诗鼻祖），发现五言又不够用了，慢慢发展出七言诗</li></ul><p>可以看到是个发展套路就是：</p><ul><li>节奏越来越丰富；四言到五言到起眼，信息量越来越大，节奏越来越丰富<ul><li>平仄 平仄结合</li><li>押韵 某些句的最后一个字，韵母相同或类似</li><li>对仗 上下两句，平仄相反，句式相同，每个词意思能对上</li></ul></li><li>感情越来越丰富，称为表达喜怒哀乐的重要方式</li></ul><p>催化剂</p><ul><li>科举制 唐代，如果考进士，写诗是基本要求</li><li>国家命运 剧烈变化，给诗人无穷的心理冲击和创作灵感</li></ul><h2 id="初唐领路人"><a href="#初唐领路人" class="headerlink" title="初唐领路人"></a>初唐领路人</h2><p>南北朝的诗歌，开始注重格律（诗的格式和音调，诗开始有节奏感并且读起来朗朗上口），但是缺乏感情，初唐出现几个诗歌改革的先驱，推动诗歌的发展</p><ul><li>王绩 山水田园派，寓言简单朴实 （相顾无相识，长歌怀采薇） </li><li>初唐四杰<ul><li>王勃 《滕王阁序》、《春思赋》、《采莲赋》、五律《送杜少府之任蜀川》、五绝《山中》等</li><li>杨炯 《从军行》</li><li>卢照邻 《长安古意》（得成比目何辞死，愿作鸳鸯不羡仙）</li><li>骆宾王</li></ul></li><li>陈子昂 《登幽州台歌》 前不见古人，后不见来者。年天地之悠悠，独怆然而涕下！他号召向魏晋诗人学习，让诗的风气好起来</li><li>张若虚 《春江花月夜》孤篇盖全唐 （闻一多：诗中的诗，顶峰上的顶峰）</li></ul><p>扭转前朝遗留的弊病，开始注重真情实感</p><h2 id="盛唐老大哥"><a href="#盛唐老大哥" class="headerlink" title="盛唐老大哥"></a>盛唐老大哥</h2><ul><li>贺知章</li></ul><p>37岁高中状元，初唐小跟班（响应陈子昂诗歌改革，是诗歌改革中主要干将），盛唐老大哥（活到86岁，耗死了大神陈子昂，张若虚），人们把他和张若虚，张旭，包融并称吴中（江浙一带）四士</p><p>官场提携了很多人，也和诸多文人雅士为莫逆之交 。看了李白的《蜀道难》后惊为天人，于是大呼，太白是<code>谪仙人</code>(被贬下凡尘的神仙，从此李白也自称谪仙人)，据说诗仙的美号就是这么来的</p><ul><li>张九龄</li></ul><p>号称盛唐最后一位名相，诗人里面官最大的，大官里面诗最棒的</p><p>找举荐人张说（当了三次宰相，号称开元名相，执掌文坛三十年，号称一代文宗），举荐别人孟浩然（望洞庭湖赠张丞相）、王维。 后被李林甫（口蜜腹剑）在玄宗面前说坏话贬职</p><h2 id="边塞诗人"><a href="#边塞诗人" class="headerlink" title="边塞诗人"></a>边塞诗人</h2><p>在唐朝，想要当大官除了科举和被举荐这两条路之外还有一条危险又刺激的道路就是从军。唐朝在各地设立了军区，军区长官被称为节度使。不仅有兵，还能得到中央拨款，节度使不仅需要武将，还需要问人来搞行政，有部分文人投身军旅</p><ul><li>王翰 《凉州词》葡萄美酒夜光杯…</li><li>李颀（qi 身材修长之意）《古意》《古从军行》</li><li>王之涣 《登鹳雀楼》《凉州词》黄河远上白云间</li><li>高适 《燕歌行》边塞诗第一 《别董大》</li><li>王昌龄（七绝圣手）非常注重通过周围的景物描写，来烘托氛围表达情感，情景交融</li><li>岑参 诗歌雄奇瑰丽《白雪歌送武判官归京》</li></ul><h2 id="山水田园诗派"><a href="#山水田园诗派" class="headerlink" title="山水田园诗派"></a>山水田园诗派</h2><ul><li>孟浩然 李白赞美 高山安可仰，徒此辑清芬</li><li>王维 诗佛</li></ul><h2 id="不得不说的李白"><a href="#不得不说的李白" class="headerlink" title="不得不说的李白"></a>不得不说的李白</h2><p>飘逸洒脱独成一派</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="唐诗" scheme="https://tom9527c.github.io/categories/%E5%94%90%E8%AF%97/"/>
    
    
    <category term="读书" scheme="https://tom9527c.github.io/tags/%E8%AF%BB%E4%B9%A6/"/>
    
  </entry>
  
  <entry>
    <title>算法复杂度</title>
    <link href="https://tom9527c.github.io/posts/7796.html"/>
    <id>https://tom9527c.github.io/posts/7796.html</id>
    <published>2023-11-04T14:00:00.000Z</published>
    <updated>2023-11-05T14:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="算法复杂度"><a href="#算法复杂度" class="headerlink" title="算法复杂度"></a>算法复杂度</h1><p>怎么理解算法呢？</p><p>简单说就是，同一个功能</p><ul><li>别人写的代码跑起来占内存100M,耗时100毫秒</li><li>你写的代码跑起来占用内存500M,耗时1000毫秒，甚至更多</li></ul><p>所以</p><blockquote><p>衡量代码好坏有两个非常重要的标准: 运行时间(<code>时间复杂度</code>)和占用空间(<code>空间复杂度</code>)</p></blockquote><h2 id="时间复杂度"><a href="#时间复杂度" class="headerlink" title="时间复杂度"></a>时间复杂度</h2><p>举个例子</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn1</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我吃了一颗糖&quot;</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我又吃了一颗糖&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;再吃一颗糖&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>调用这个函数，里面总执行次数就是3次</p><p>下面这个例子</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo2</span>(<span class="params">n</span>)&#123;</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我吃了一颗糖&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;一颗糖&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个函数总执行次数会根据我们传进去的值不一样，执行次数也不一样，大概次数如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> i = <span class="number">0</span>     : 执行 <span class="string">`1`</span> 次</span><br><span class="line">i &lt; n         : 执行 <span class="string">`n+1`</span> 次</span><br><span class="line">i++           : 执行 <span class="string">`n`</span> 次</span><br><span class="line"><span class="variable language_">console</span>.<span class="property">log</span>   : 执行 <span class="string">`n`</span> 次</span><br><span class="line"><span class="keyword">return</span>        : 执行 <span class="string">`1`</span> 次</span><br></pre></td></tr></table></figure><p>这个函数的<code>总执行</code>就是 <code>3n + 3</code> 次</p><p>可是我们开发不可能都这样去数，所以根据代码执行时间的推导过程就又一个规律，也就是所有代码执行时间 <code>T(n)</code>和代码的执行次数<code>f(n)</code>是<code>成正比</code>的，而这个规律有一个公式</p><blockquote><p><code>T(n) = O(f(n))</code></p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">n是输入数据的大小或者输入数据的数量</span><br><span class="line"><span class="title function_">T</span>(n)表示一段代码的总执行时间</span><br><span class="line"><span class="title function_">f</span>(n)表示一段代码的总执行次数</span><br><span class="line">O 表示代码的执行时间 <span class="title function_">T</span>(n) 和 执行次数 <span class="title function_">f</span>(n) 成正比</span><br></pre></td></tr></table></figure><p>算法复杂度的 <code>O()</code> 就是这么来的，我们平时表示算法复杂度主要就是 <code>O()</code>, 读作<code>大欧表示法</code></p><p>上面的两个例子</p><ul><li>第一个函数执行了<code>3</code>次，复杂度就是 <code>O(3)</code></li><li>第二个函数执行了<code>3n+3</code>次，复杂大就是<code>O(3n+3)</code></li></ul><p>这样就会很麻烦，因为如果函数逻辑一样，只是执行次数差了几次，想O(3)和O(4),有什么差别呢？还要写成两种就多此一举了，所以复杂度李有统一的简化表示法，这个执行时间简化的估算值就是我们最终的 <code>时间复杂度</code></p><p>简化过程如下</p><ul><li><code>如果只是常熟直接估算为1</code>， O(3)的时间复杂度就是O(1)，不是说只执行了1次，而是对<code>常量级</code>时间复杂度的一种表示法。<code>一般情况下，只要算法里没有循环和递归，就算有上万行代码，时间复杂度也是O(1)</code></li><li>O(3n+4)里面常数3对于总执行次数几乎没有影响，直接忽略不计，系数3影响也不大,因为3n和n都是一个量级的，所以作为系数的常数3也估算为1或者可以理解为<code>去掉系数</code>，所以O(3n+3)的时间复杂度为 <code>O(n)</code></li><li><code>如果是多项式，只需要保留n的最高次项</code>，O(666n³ + 666n² + n)，这个复杂度里面的最高次项是n得3次方。因为随着n的增大，后面的项的增值远远不及n的最高次项大，所以低于这个次项的直接忽略不计，常数也忽略不计，简化后的 <code>时间复杂度为O(n³)</code></li></ul><h3 id="常用时间复杂度"><a href="#常用时间复杂度" class="headerlink" title="常用时间复杂度"></a>常用时间复杂度</h3><h4 id="O-1"><a href="#O-1" class="headerlink" title="O(1)"></a>O(1)</h4><p>一般情况下，只要算法里没有循环和递归，就算有上万行代码，时间复杂度也是 O(1)，因为它的执行次数不会随着任何一个变量的增大而变长，比如下面这样</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> n = <span class="number">1</span></span><br><span class="line">    <span class="keyword">let</span> b = n * <span class="number">100</span></span><br><span class="line">    <span class="keyword">if</span>(b === <span class="number">100</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;开始吃糖&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我吃了1颗糖&quot;</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我吃了2颗糖&quot;</span>)</span><br><span class="line">    ......</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我吃了10000颗糖&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="O-n"><a href="#O-n" class="headerlink" title="O(n)"></a>O(n)</h4><p>只有<code>一层循环或者递归</code>，时间复杂度就是<code>O(n)</code>,举个例子</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo1</span>(<span class="params">n</span>)&#123;</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我吃了一颗糖&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo2</span>(<span class="params">n</span>)&#123;</span><br><span class="line">    <span class="keyword">while</span>( --n &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我吃了一颗糖&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo3</span>(<span class="params">n</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我吃了一颗糖&quot;</span>)</span><br><span class="line">    --n &gt; <span class="number">0</span> &amp;&amp; <span class="title function_">foo3</span>(n)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="O-n²"><a href="#O-n²" class="headerlink" title="O(n²)"></a>O(n²)</h4><p>比如嵌套循环，如下面这样的，里层循环执行n次，外层循环也执行n次，总执行次数就是 n <em> n , 时间复杂度就是 n的平方，也就是<code>O(n²)</code>。假设n是10，那么里面就会打印10 </em> 10 = 100 次</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo1</span>(<span class="params">n</span>)&#123;</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>( <span class="keyword">let</span> j = <span class="number">0</span>; j &lt; n; j++)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我吃了一颗糖&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这样的总执行次数为 <code>n + n²</code>, 上面说如果是<code>多项式，取最高次项</code>，所以这个时间复杂度也是 <code>O(n²)</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo2</span>(<span class="params">n</span>)&#123;</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> k = <span class="number">0</span>; k &lt; n; k++)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我吃了一颗糖&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>( <span class="keyword">let</span> j = <span class="number">0</span>; j &lt; n; j++)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我吃了一颗O(1)</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">//或者下面这样，以运行时间最长的，作为时间复杂度的依据，所以下面的时间复杂度就是 O(n²)</span></span><br><span class="line"><span class="string">function foo3(n)&#123;</span></span><br><span class="line"><span class="string">    if( n &gt; 100)&#123;</span></span><br><span class="line"><span class="string">        for( let k = 0; k &lt; n; k++)&#123;</span></span><br><span class="line"><span class="string">            console.log(&quot;</span>我吃了一颗糖<span class="string">&quot;)</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;else&#123;</span></span><br><span class="line"><span class="string">        for( let i = 0; i &lt; n; i++)&#123;</span></span><br><span class="line"><span class="string">            for( let j = 0; j &lt; n; j++)&#123;</span></span><br><span class="line"><span class="string">                console.log(&quot;</span>我吃了一颗糖<span class="string">&quot;)</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="O-logn"><a href="#O-logn" class="headerlink" title="O(logn)"></a>O(logn)</h4><p>袋子里有16颗糖，每天吃这包糖的一半，多少天吃完</p><p>意思就是16不断除以2，除几次之后等于1？用代码表示</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fool1</span>(<span class="params">n</span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> day = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span>(n &gt; <span class="number">1</span>)&#123;</span><br><span class="line">        n = n / <span class="number">2</span></span><br><span class="line">        day ++ </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> day</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>循环次数的影响主要来源于 n/2 , 这个时间复杂度就是 <code>O(logn)</code>,</p><p>再比如下面这样</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo2</span>(<span class="params">n</span>)&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; n; i *= <span class="number">2</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;一天&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">foo2</span>( <span class="number">16</span> )</span><br></pre></td></tr></table></figure><p>里面的打印执行了4次，循环次数主要影响来源于 i * = 2 , 这个时间复杂度也是 <code>O(logn)</code></p><p>这个O(logn)是怎么来的，看下图<br><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4c0e9949416546a7ad430150ec1841bd~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt=""></p><p>没有理解的话再看一下，理解一下规律</p><ul><li><code>真数</code>： 这道题的真数是16</li><li><code>底数</code>：就是值的变化规律，比如每次循环都是i*=2，这个乘以2就是规律。比如1,2,3,4,5…这样的值的话，底就是1，每个数变化的规律是+1</li><li><code>对数</code>：在这道题里可以理解成x2乘了多少次，这个次数</li></ul><p>仔细观察就会发现这道题底数是2，而我们要求的天数就是这个对数4，在对数里有一个表达公司</p><blockquote><p>a^b = n  读作以a为底,b的对数=n，在这道题里我们知道a和n的值，也就是  2b = 16 然后求 b</p></blockquote><p>把这个公式转换一下的写法如下</p><blockquote><p>logan = b    在这道题里就是   log216 = ?  答案就是 4</p></blockquote><p>公式是固定的，这个16不是固定的，是我们传进去的 n，所以可以理解为这道题就是求 log2n = ?</p><p>用时间复杂度表示就是 O(log2n)，由于时间复杂度需要去掉常数和系数，而log的底数跟系数是一样的，所以也需要去掉，所以最后这个正确的时间复杂度就是 <code>O(logn)</code></p><p>其他还有一些时间复杂度，我<code>由快到慢</code>排列了一下，如下表顺序</p><div class="table-container"><table><thead><tr><th>复杂度</th><th>名称</th></tr></thead><tbody><tr><td>O(1)</td><td>常数复杂度</td></tr><tr><td>O(logn)</td><td>对数复杂度</td></tr><tr><td>O(n)</td><td>线性时间复杂度</td></tr><tr><td>O(nlogn)</td><td>线性对数复杂度</td></tr><tr><td>O(n²)</td><td>平方</td></tr><tr><td>O(n³)</td><td>立方</td></tr><tr><td>O(2^n)</td><td>指数，一点数据就卡</td></tr><tr><td>O(n!)</td><td>阶乘，更慢</td></tr></tbody></table></div><p>这些时间复杂度有什么区别呢，看张图</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6bce74e49bf84c44b1ba0f733ac4cc3e~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt=""></p><blockquote><p>随着数据流或者n的增大，时间复杂度也随之增加，也就是执行时间的增加，会越来越慢，越来越卡</p></blockquote><h2 id="空间复杂度"><a href="#空间复杂度" class="headerlink" title="空间复杂度"></a>空间复杂度</h2><p>空间复杂度就是算法需要多少内存，占用了多少空间</p><p>常用的空间复杂度有 <code>O(1)</code>,<code>O(n)</code>,<code>O(n^2)</code></p><h4 id="O-1-1"><a href="#O-1-1" class="headerlink" title="O(1)"></a><code>O(1)</code></h4><p>只要不会因为算法里的执行，导致额外的空间增长，就算一万行，空间复杂度也是 <code>O(1)</code>,比如下面这样，时间复杂度也是<code>O(1)</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> n = <span class="number">1</span></span><br><span class="line">    <span class="keyword">let</span> b = n * <span class="number">100</span></span><br><span class="line">    <span class="keyword">if</span>(b === <span class="number">100</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;开始吃糖&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我吃了1颗糖&quot;</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我吃了2颗糖&quot;</span>)</span><br><span class="line">    ......</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我吃了10000颗糖&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="O-n-1"><a href="#O-n-1" class="headerlink" title="O(n)"></a><code>O(n)</code></h4><p>下面这种，n的数值越大，算法需要分配的空间就越多，所以他的空间复杂度就是 <code>O(n)</code>,时间复杂度也是<code>O(n)</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params">n</span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> arr = []</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> i = <span class="number">1</span>; i &lt; n; i++ ) &#123;</span><br><span class="line">        arr[i] = i</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="O-n²-1"><a href="#O-n²-1" class="headerlink" title="O(n²)"></a><code>O(n²)</code></h4><p>O(n²) 这种空间复杂度一般出现在比如二维数组，或是矩阵的情况下</p><p>就是遍历生成类似这样格式的</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [</span><br><span class="line">    [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>],</span><br><span class="line">    [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>],</span><br><span class="line">    [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="时刻准备着" scheme="https://tom9527c.github.io/categories/%E6%97%B6%E5%88%BB%E5%87%86%E5%A4%87%E7%9D%80/"/>
    
    
    <category term="算法" scheme="https://tom9527c.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>TypeScript笔记(三)</title>
    <link href="https://tom9527c.github.io/posts/4fe0ff4.html"/>
    <id>https://tom9527c.github.io/posts/4fe0ff4.html</id>
    <published>2023-10-31T12:59:37.000Z</published>
    <updated>2024-07-05T10:06:56.827Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="1-unknown"><a href="#1-unknown" class="headerlink" title="1.unknown"></a>1.unknown</h1><h3 id="unknown"><a href="#unknown" class="headerlink" title="unknown"></a>unknown</h3><p><code>unknown</code>类型，任何类型都可以赋值为<code>unknown</code>类型。 它是 any 类型对应的安全类型</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">unknown</span>:<span class="built_in">unknown</span>;</span><br><span class="line"><span class="built_in">unknown</span> = <span class="string">&#x27;zf&#x27;</span>;</span><br><span class="line"><span class="built_in">unknown</span> = <span class="number">11</span>;</span><br></pre></td></tr></table></figure><blockquote><p>不能访问unknown类型上的属性，不能作为函数、类来使用</p></blockquote><ul><li><p>联合类型中的<code>unknown</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">UnionUnknown</span> = <span class="built_in">unknown</span> | <span class="literal">null</span> | <span class="built_in">string</span> | <span class="built_in">number</span></span><br></pre></td></tr></table></figure><blockquote><p>联合类型与<code>unknown</code>都是<code>unknown</code>类型</p></blockquote></li><li><p>交叉类型中的<code>unknown</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> inter = <span class="built_in">unknown</span> &amp; <span class="literal">null</span></span><br></pre></td></tr></table></figure><blockquote><p>交叉类型与<code>unknown</code>都是其他类型</p></blockquote></li></ul><h3 id="unknown特性"><a href="#unknown特性" class="headerlink" title="unknown特性"></a>unknown特性</h3><ul><li><p>never是unknown的子类型</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> isNever = <span class="built_in">never</span> <span class="keyword">extends</span> <span class="built_in">unknown</span> ? <span class="literal">true</span> : <span class="literal">false</span>;=</span><br></pre></td></tr></table></figure></li><li><p>keyof unknown 是never</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> key = keyof <span class="built_in">unknown</span>;</span><br></pre></td></tr></table></figure></li><li><p>unknown类型不能被遍历</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">unknown</span>类型不能被遍历</span><br></pre></td></tr></table></figure><blockquote><p>unknown类型不能和number类型进行 <code>+</code>运算,<strong>可以用于等或不等操作</strong></p></blockquote></li></ul><p>unknown 和 any 都是顶级的类型</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> keys1 = keyof <span class="built_in">any</span>;</span><br><span class="line"><span class="keyword">type</span> keys2 = keyof <span class="built_in">unknown</span>; <span class="comment">//unknown 是无法识别的类型 没有key</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> unionUnknown = <span class="built_in">unknown</span> | <span class="built_in">string</span> | <span class="literal">true</span> | <span class="literal">false</span>; <span class="comment">// unknown 任何类型都可以赋予给unknown</span></span><br><span class="line"><span class="keyword">type</span> interUnknown = <span class="built_in">unknown</span> &amp; <span class="built_in">string</span>; <span class="comment">// string</span></span><br></pre></td></tr></table></figure><p>如果无法确定的类型 不要贸然采用any</p><p>any不校验 意味着可以调用 可以取值</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="built_in">unknown</span> = <span class="number">1</span>; <span class="comment">// unknown 是any的安全类型</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>如果标识为unknown 类型 必须先类型保护再去使用 （收窄类型 在使用）</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">isNumber</span>(<span class="params">val: <span class="built_in">unknown</span></span>): val is <span class="built_in">number</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">typeof</span> val === <span class="string">&quot;number&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isString</span>(<span class="params">val: <span class="built_in">unknown</span></span>): val is <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">typeof</span> val === <span class="string">&quot;string&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_">isNumber</span>(a)) &#123;</span><br><span class="line">  a.<span class="property">toFixed</span>; <span class="comment">//</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_">isString</span>(a)) &#123;</span><br><span class="line">  a.<span class="property">charCodeAt</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="2-自定义类型"><a href="#2-自定义类型" class="headerlink" title="2.自定义类型"></a>2.自定义类型</h1><h3 id="Diff实现"><a href="#Diff实现" class="headerlink" title="Diff实现"></a>Diff实现</h3><p>求两个对象不同的部分</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person1 = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;zhufeng&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">11</span>,</span><br><span class="line">    <span class="attr">address</span>: <span class="string">&#x27;回龙观&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> person2 = &#123;</span><br><span class="line">    <span class="attr">address</span>: <span class="string">&#x27;回龙观&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Diff</span>&lt;T <span class="keyword">extends</span> <span class="built_in">object</span>,K <span class="keyword">extends</span> <span class="title class_">Object</span>&gt; = <span class="title class_">Omit</span>&lt;T,keyof K&gt;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">DiffPerson</span> = <span class="title class_">Diff</span>&lt;<span class="keyword">typeof</span> person1,<span class="keyword">typeof</span> person2&gt;</span><br></pre></td></tr></table></figure><h3 id="InterSection交集"><a href="#InterSection交集" class="headerlink" title="InterSection交集"></a>InterSection交集</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person1 = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;zhufeng&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">11</span>,</span><br><span class="line">    <span class="attr">address</span>: <span class="string">&#x27;回龙观&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> person2 = &#123;</span><br><span class="line">    <span class="attr">address</span>: <span class="string">&#x27;回龙观&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">InterSection</span>&lt;T <span class="keyword">extends</span> <span class="built_in">object</span>, K <span class="keyword">extends</span> <span class="built_in">object</span>&gt; = <span class="title class_">Pick</span>&lt;T, <span class="title class_">Extract</span>&lt;keyof T, keyof K&gt;&gt;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">InterSectionPerson</span> = <span class="title class_">InterSection</span>&lt;<span class="keyword">typeof</span> person1, <span class="keyword">typeof</span> person2&gt;</span><br></pre></td></tr></table></figure><h3 id="Overwrite属性覆盖"><a href="#Overwrite属性覆盖" class="headerlink" title="Overwrite属性覆盖"></a>Overwrite属性覆盖</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">OldProps</span> = &#123; <span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span>, <span class="attr">visible</span>: <span class="built_in">boolean</span> &#125;;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">NewProps</span> = &#123; <span class="attr">age</span>: <span class="built_in">string</span>, <span class="attr">other</span>: <span class="built_in">string</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Diff</span>&lt;T <span class="keyword">extends</span> <span class="built_in">object</span>,K <span class="keyword">extends</span> <span class="title class_">Object</span>&gt; = <span class="title class_">Omit</span>&lt;T,keyof K&gt;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">InterSection</span>&lt;T <span class="keyword">extends</span> <span class="built_in">object</span>, K <span class="keyword">extends</span> <span class="built_in">object</span>&gt; = <span class="title class_">Pick</span>&lt;T, <span class="title class_">Extract</span>&lt;keyof T, keyof K&gt;&gt;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Overwrite</span>&lt;T <span class="keyword">extends</span> <span class="built_in">object</span>, K <span class="keyword">extends</span> <span class="built_in">object</span>, I = <span class="title class_">Diff</span>&lt;T,K&gt; &amp; <span class="title class_">InterSection</span>&lt;K,T&gt;&gt; = <span class="title class_">Pick</span>&lt;I,keyof I&gt;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ReplaceProps</span> = <span class="title class_">Overwrite</span>&lt;<span class="title class_">OldProps</span>, <span class="title class_">NewProps</span>&gt;</span><br></pre></td></tr></table></figure><blockquote><p>如果存在已有属性则使用新属性类型进行覆盖操作</p></blockquote><h3 id="Merge对象合并"><a href="#Merge对象合并" class="headerlink" title="Merge对象合并"></a>Merge对象合并</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Compute</span>&lt;A <span class="keyword">extends</span> <span class="built_in">any</span>&gt; = &#123; [K <span class="keyword">in</span> keyof A]: A[K] &#125;;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Merge</span>&lt;T, K&gt; = <span class="title class_">Compute</span>&lt;<span class="title class_">Omit</span>&lt;T, keyof K&gt; &amp; K&gt;;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">MergeObj</span> = <span class="title class_">Merge</span>&lt;<span class="title class_">OldProps</span>,<span class="title class_">NewProps</span>&gt;</span><br></pre></td></tr></table></figure><blockquote><p>将两个对象类型进行合并操作</p></blockquote><p>自己实现一些常用的类型</p><blockquote><p>内置类型  基于条件类型的 Extract Exclude  集合类型</p><p>基于映射的类型 Partial Required Readonly  修饰</p><p>结构的  Pick Omit Record  结构处理</p><p>基于推断的类型 InstanceType  ReturnType  Paramters….  infer (模式匹配类型)</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;ac&quot;</span>;</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">address</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T2</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">gender</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">address</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol><li>(先找到name，和 address 排除掉）  和 （name，address 添加可选）</li></ol><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. （先找到name，和 address 排除掉）  和 （name，address 添加可选）</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Compute</span>&lt;T <span class="keyword">extends</span> <span class="built_in">object</span>&gt; = &#123;</span><br><span class="line">  [K <span class="keyword">in</span> keyof T]: T[K];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PartialPropsOptional</span>&lt;T <span class="keyword">extends</span> <span class="built_in">object</span>, K <span class="keyword">extends</span> keyof T&gt; = <span class="title class_">Omit</span>&lt;T, K&gt; &amp;</span><br><span class="line">  <span class="title class_">Partial</span>&lt;<span class="title class_">Pick</span>&lt;T, K&gt;&gt;;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">PPO</span> = <span class="title class_">Compute</span>&lt;<span class="title class_">PartialPropsOptional</span>&lt;<span class="variable constant_">T1</span>, <span class="string">&quot;name&quot;</span> | <span class="string">&quot;address&quot;</span>&gt;&gt;;</span><br></pre></td></tr></table></figure><p>2.我期望 去t1 中 取出 值是string类型</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> isEqual&lt;T, K, S, F&gt; = T &amp; &#123;&#125; <span class="keyword">extends</span> K ? (K &amp; &#123;&#125; <span class="keyword">extends</span> T ? S : F) : F;</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#123;name:never, age:never, address:&#x27;address&#x27;&#125;</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ExtractKeyByValue</span>&lt;T <span class="keyword">extends</span> <span class="built_in">object</span>, U&gt; = &#123;</span><br><span class="line">  [K <span class="keyword">in</span> keyof T]: isEqual&lt;T[K], U, K, <span class="built_in">never</span>&gt;;</span><br><span class="line">&#125;[keyof T]; <span class="comment">// string |</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 可索引接口</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PickKeysByValue</span>&lt;T <span class="keyword">extends</span> <span class="built_in">object</span>, K&gt; = <span class="title class_">Pick</span>&lt;T, <span class="title class_">ExtractKeyByValue</span>&lt;T, K&gt;&gt;;</span><br><span class="line"><span class="comment">// 用户在使用类型的时候 希望的是简单， 内部复杂写</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ReturnPickKeysByValue</span> = <span class="title class_">PickKeysByValue</span>&lt;<span class="variable constant_">T1</span>, <span class="built_in">string</span>&gt;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>3.我期望去掉string 类型</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> isEqual&lt;T, K, S, F&gt; = T &amp; &#123;&#125; <span class="keyword">extends</span> K ? (K &amp; &#123;&#125; <span class="keyword">extends</span> T ? S : F) : F;</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &#123;name:never, age:never, address:&#x27;address&#x27;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ExtractKeyByValue</span>&lt;T <span class="keyword">extends</span> <span class="built_in">object</span>, U&gt; = &#123;</span><br><span class="line">  [K <span class="keyword">in</span> keyof T]: isEqual&lt;T[K], U, K, <span class="built_in">never</span>&gt;;</span><br><span class="line">&#125;[keyof T]; <span class="comment">// string |</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// &#123;never:xxx,address:string,never:xxx&#125;</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ExtractKeyByValue</span>&lt;T <span class="keyword">extends</span> <span class="built_in">object</span>, U&gt; = &#123;</span><br><span class="line">  [K <span class="keyword">in</span> keyof T <span class="keyword">as</span> isEqual&lt;T[K], U, K, <span class="built_in">never</span>&gt;]: T[K]; <span class="comment">// 冲映射</span></span><br><span class="line">&#125;; <span class="comment">// string |</span></span><br></pre></td></tr></table></figure><p>可索引接口</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">PickKeysByValue</span>&lt;T <span class="keyword">extends</span> <span class="built_in">object</span>, K, O = <span class="literal">true</span>&gt; = isEqual&lt;</span><br><span class="line"> O,</span><br><span class="line"> <span class="literal">true</span>,</span><br><span class="line"> <span class="title class_">Omit</span>&lt;T, <span class="title class_">ExtractKeyByValue</span>&lt;T, K&gt;&gt;,</span><br><span class="line">  <span class="title class_">Pick</span>&lt;T, <span class="title class_">ExtractKeyByValue</span>&lt;T, K&gt;&gt;</span><br><span class="line">&gt;;</span><br></pre></td></tr></table></figure><p>用户在使用类型的时候 希望的是简单， 内部复杂写</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">ReturnPickKeysByValue</span> = <span class="title class_">ExtractKeyByValue</span>&lt;<span class="variable constant_">T1</span>, <span class="built_in">string</span>&gt;;</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;ac&quot;</span>;</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">address</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T2</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">gender</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">address</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 对象求交集</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ObjectInter</span>&lt;T <span class="keyword">extends</span> <span class="built_in">object</span>, K <span class="keyword">extends</span> <span class="built_in">object</span>&gt; = <span class="title class_">Pick</span>&lt;</span><br><span class="line">  T,</span><br><span class="line">  keyof T &amp; keyof K</span><br><span class="line">&gt;;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">X1</span> = <span class="title class_">ObjectInter</span>&lt;<span class="variable constant_">T1</span>, <span class="variable constant_">T2</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象求差</span></span><br><span class="line"><span class="comment">// Omit + Extract ==  Pick exclude</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ObjectDiff</span>&lt;T <span class="keyword">extends</span> <span class="built_in">object</span>, K <span class="keyword">extends</span> <span class="built_in">object</span>&gt; = <span class="title class_">Omit</span>&lt;T, keyof K&gt;;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">X2</span> = <span class="title class_">ObjectDiff</span>&lt;<span class="variable constant_">T1</span>, <span class="variable constant_">T2</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 两个类型合并在一起，如果都有的属性 用T2的 ？ &#123;...T1,...T2&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// T1  - T2  + T2 - T1 + T2 &amp; T1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">OverWrite</span>&lt;T <span class="keyword">extends</span> <span class="built_in">object</span>, K <span class="keyword">extends</span> <span class="built_in">object</span>&gt; = <span class="title class_">ObjectDiff</span>&lt;T, K&gt; &amp;</span><br><span class="line">  <span class="title class_">ObjectDiff</span>&lt;K, T&gt; &amp;</span><br><span class="line">  <span class="title class_">ObjectInter</span>&lt;K, T&gt;;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">X3</span> = <span class="title class_">Compute</span>&lt;<span class="title class_">OverWrite</span>&lt;<span class="variable constant_">T1</span>, <span class="variable constant_">T2</span>&gt;&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// merge 类型会合并在一起</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">MergeType</span>&lt;T, U&gt; = &#123;</span><br><span class="line">  [K <span class="keyword">in</span> keyof T]: K <span class="keyword">extends</span> keyof U ? T[K] | U[K] : T[K];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 求差集  + 其他的属性交集的部分联合在一起即可</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">MergeWrite</span>&lt;T <span class="keyword">extends</span> <span class="built_in">object</span>, K <span class="keyword">extends</span> <span class="built_in">object</span>&gt; = <span class="title class_">ObjectDiff</span>&lt;K, T&gt; &amp;</span><br><span class="line">  <span class="title class_">MergeType</span>&lt;T, K&gt;;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">X4</span> = <span class="title class_">Compute</span>&lt;<span class="title class_">MergeWrite</span>&lt;<span class="variable constant_">T1</span>, <span class="variable constant_">T2</span>&gt;&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// type O1 = &#123; top: number; bottom?: never &#125;;</span></span><br><span class="line"><span class="comment">// type O2 = &#123; bottom: number; top?: never &#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// let o: O1 | O2 = &#123;</span></span><br><span class="line"><span class="comment">//   bottom: 100,</span></span><br><span class="line"><span class="comment">// &#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Man1</span> &#123;</span><br><span class="line">  <span class="attr">fortune</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Man2</span> &#123;</span><br><span class="line">  <span class="attr">funny</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Man3</span> &#123;</span><br><span class="line">  <span class="attr">foreign</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">DiffType</span>&lt;T, U&gt; = &#123;</span><br><span class="line">  [K <span class="keyword">in</span> <span class="title class_">Exclude</span>&lt;keyof T, keyof U&gt;]?: <span class="built_in">never</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// man1- man2 + man2</span></span><br><span class="line"><span class="comment">// man2 -man1 + man1</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">OrType</span>&lt;T, K&gt; = (<span class="title class_">DiffType</span>&lt;T, K&gt; &amp; K) | (<span class="title class_">DiffType</span>&lt;K, T&gt; &amp; T);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">man</span>: <span class="title class_">OrType</span>&lt;<span class="title class_">Man3</span>, <span class="title class_">OrType</span>&lt;<span class="title class_">Man1</span>, <span class="title class_">Man2</span>&gt;&gt; = &#123;</span><br><span class="line">  <span class="attr">funny</span>: <span class="string">&quot;ed&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">TypeScript的学习笔记和总结</summary>
    
    
    
    <category term="前端" scheme="https://tom9527c.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="前端" scheme="https://tom9527c.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="TypeScript" scheme="https://tom9527c.github.io/tags/TypeScript/"/>
    
    <category term="笔记" scheme="https://tom9527c.github.io/tags/%E7%AC%94%E8%AE%B0/"/>
    
    <category term="练习" scheme="https://tom9527c.github.io/tags/%E7%BB%83%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>TypeScript笔记(二)</title>
    <link href="https://tom9527c.github.io/posts/7a0d2fdf.html"/>
    <id>https://tom9527c.github.io/posts/7a0d2fdf.html</id>
    <published>2023-10-30T12:10:10.000Z</published>
    <updated>2024-07-05T10:06:49.602Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="1-泛型-generic"><a href="#1-泛型-generic" class="headerlink" title="1. 泛型 (generic)"></a>1. 泛型 (generic)</h1><h2 id="文档解释"><a href="#文档解释" class="headerlink" title="文档解释"></a>文档解释</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>软件工程中，我们不仅要创建一致的定义良好的API，同时也要考虑可重用性。 组件不仅能够支持当前的数据类型，同时也能支持未来的数据类型，这在创建大型系统时为你提供了十分灵活的功能。</p><p>在像C#和Java这样的语言中，可以使用<code>泛型</code>来创建可重用的组件，一个组件可以支持多种类型的数据。 这样用户就可以以自己的数据类型来使用组件。</p><h3 id="泛型之Hello-World"><a href="#泛型之Hello-World" class="headerlink" title="泛型之Hello World"></a>泛型之Hello World</h3><p>下面来创建第一个使用泛型的例子：identity函数。 这个函数会返回任何传入它的值。 你可以把这个函数当成是<code>echo</code>命令。</p><p>不用泛型的话，这个函数可能是下面这样：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">identity</span>(<span class="params">arg: <span class="built_in">number</span></span>): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>或者，我们使用<code>any</code>类型来定义函数：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">identity</span>(<span class="params">arg: <span class="built_in">any</span></span>): <span class="built_in">any</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用<code>any</code>类型会导致这个函数可以接收任何类型的<code>arg</code>参数，这样就丢失了一些信息：传入的类型与返回的类型应该是相同的。 如果我们传入一个数字，我们只知道任何类型的值都有可能被返回。</p><p>因此，我们需要一种方法使返回值的类型与传入参数的类型是相同的。 这里，我们使用了<em>类型变量</em>，它是一种特殊的变量，只用于表示类型而不是值。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> identity&lt;T&gt;(<span class="attr">arg</span>: T): T &#123;</span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们给identity添加了类型变量<code>T</code>。 <code>T</code>帮助我们捕获用户传入的类型（比如：<code>number</code>），之后我们就可以使用这个类型。 之后我们再次使用了<code>T</code>当做返回值类型。现在我们可以知道参数类型与返回值类型是相同的了。 这允许我们跟踪函数里使用的类型的信息。</p><p>我们把这个版本的<code>identity</code>函数叫做泛型，因为它可以适用于多个类型。 不同于使用<code>any</code>，它不会丢失信息，像第一个例子那像保持准确性，传入数值类型并返回数值类型。</p><p>我们定义了泛型函数后，可以用两种方法使用。 第一种是，传入所有的参数，包含类型参数：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> output = identity&lt;<span class="built_in">string</span>&gt;(<span class="string">&quot;myString&quot;</span>);  <span class="comment">// type of output will be &#x27;string&#x27;</span></span><br></pre></td></tr></table></figure><p>这里我们明确的指定了<code>T</code>是<code>string</code>类型，并做为一个参数传给函数，使用了<code>&lt;&gt;</code>括起来而不是<code>()</code>。</p><p>第二种方法更普遍。利用了<em>类型推论</em> – 即编译器会根据传入的参数自动地帮助我们确定T的类型：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> output = <span class="title function_">identity</span>(<span class="string">&quot;myString&quot;</span>);  <span class="comment">// type of output will be &#x27;string&#x27;</span></span><br></pre></td></tr></table></figure><p>注意我们没必要使用尖括号（<code>&lt;&gt;</code>）来明确地传入类型；编译器可以查看<code>myString</code>的值，然后把<code>T</code>设置为它的类型。 类型推论帮助我们保持代码精简和高可读性。如果编译器不能够自动地推断出类型的话，只能像上面那样明确的传入T的类型，在一些复杂的情况下，这是可能出现的。</p><h3 id="使用泛型变量"><a href="#使用泛型变量" class="headerlink" title="使用泛型变量"></a>使用泛型变量</h3><p>使用泛型创建像<code>identity</code>这样的泛型函数时，编译器要求你在函数体必须正确的使用这个通用的类型。 换句话说，你必须把这些参数当做是任意或所有类型。</p><p>看下之前<code>identity</code>例子：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> identity&lt;T&gt;(<span class="attr">arg</span>: T): T &#123;</span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果我们想同时打印出<code>arg</code>的长度。 我们很可能会这样做：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> loggingIdentity&lt;T&gt;(<span class="attr">arg</span>: T): T &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arg.<span class="property">length</span>);  <span class="comment">// Error: T doesn&#x27;t have .length</span></span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果这么做，编译器会报错说我们使用了<code>arg</code>的<code>.length</code>属性，但是没有地方指明<code>arg</code>具有这个属性。 记住，这些类型变量代表的是任意类型，所以使用这个函数的人可能传入的是个数字，而数字是没有<code>.length</code>属性的。</p><p>现在假设我们想操作<code>T</code>类型的数组而不直接是<code>T</code>。由于我们操作的是数组，所以<code>.length</code>属性是应该存在的。 我们可以像创建其它数组一样创建这个数组：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> loggingIdentity&lt;T&gt;(<span class="attr">arg</span>: T[]): T[] &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arg.<span class="property">length</span>);  <span class="comment">// Array has a .length, so no more error</span></span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>你可以这样理解<code>loggingIdentity</code>的类型：泛型函数<code>loggingIdentity</code>，接收类型参数<code>T</code>和参数<code>arg</code>，它是个元素类型是<code>T</code>的数组，并返回元素类型是<code>T</code>的数组。 如果我们传入数字数组，将返回一个数字数组，因为此时<code>T</code>的的类型为<code>number</code>。 这可以让我们把泛型变量T当做类型的一部分使用，而不是整个类型，增加了灵活性。</p><p>我们也可以这样实现上面的例子：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> loggingIdentity&lt;T&gt;(<span class="attr">arg</span>: <span class="title class_">Array</span>&lt;T&gt;): <span class="title class_">Array</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arg.<span class="property">length</span>);  <span class="comment">// Array has a .length, so no more error</span></span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用过其它语言的话，你可能对这种语法已经很熟悉了。 在下一节，会介绍如何创建自定义泛型像<code>Array&lt;T&gt;</code>一样。</p><h3 id="泛型类型"><a href="#泛型类型" class="headerlink" title="泛型类型"></a>泛型类型</h3><p>上一节，我们创建了identity通用函数，可以适用于不同的类型。 在这节，我们研究一下函数本身的类型，以及如何创建泛型接口。</p><p>泛型函数的类型与非泛型函数的类型没什么不同，只是有一个类型参数在最前面，像函数声明一样：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> identity&lt;T&gt;(<span class="attr">arg</span>: T): T &#123;</span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">myIdentity</span>: &lt;T&gt;<span class="function">(<span class="params">arg: T</span>) =&gt;</span> T = identity;</span><br></pre></td></tr></table></figure><p>我们也可以使用不同的泛型参数名，只要在数量上和使用方式上能对应上就可以。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> identity&lt;T&gt;(<span class="attr">arg</span>: T): T &#123;</span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">myIdentity</span>: &lt;U&gt;<span class="function">(<span class="params">arg: U</span>) =&gt;</span> U = identity;</span><br></pre></td></tr></table></figure><p>我们还可以使用带有调用签名的对象字面量来定义泛型函数：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> identity&lt;T&gt;(<span class="attr">arg</span>: T): T &#123;</span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">myIdentity</span>: &#123;&lt;T&gt;(<span class="attr">arg</span>: T): T&#125; = identity;</span><br></pre></td></tr></table></figure><p>这引导我们去写第一个泛型接口了。 我们把上面例子里的对象字面量拿出来做为一个接口：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">GenericIdentityFn</span> &#123;</span><br><span class="line">    &lt;T&gt;(<span class="attr">arg</span>: T): T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> identity&lt;T&gt;(<span class="attr">arg</span>: T): T &#123;</span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">myIdentity</span>: <span class="title class_">GenericIdentityFn</span> = identity;</span><br></pre></td></tr></table></figure><p>一个相似的例子，我们可能想把泛型参数当作整个接口的一个参数。 这样我们就能清楚的知道使用的具体是哪个泛型类型（比如：<code>Dictionary&lt;string&gt;而不只是Dictionary</code>）。 这样接口里的其它成员也能知道这个参数的类型了。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">GenericIdentityFn</span>&lt;T&gt; &#123;</span><br><span class="line">    (<span class="attr">arg</span>: T): T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> identity&lt;T&gt;(<span class="attr">arg</span>: T): T &#123;</span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">myIdentity</span>: <span class="title class_">GenericIdentityFn</span>&lt;<span class="built_in">number</span>&gt; = identity;</span><br></pre></td></tr></table></figure><p>注意，我们的示例做了少许改动。 不再描述泛型函数，而是把非泛型函数签名作为泛型类型一部分。 当我们使用<code>GenericIdentityFn</code>的时候，还得传入一个类型参数来指定泛型类型（这里是：<code>number</code>），锁定了之后代码里使用的类型。 对于描述哪部分类型属于泛型部分来说，理解何时把参数放在调用签名里和何时放在接口上是很有帮助的。</p><p>除了泛型接口，我们还可以创建泛型类。 注意，无法创建泛型枚举和泛型命名空间。</p><h3 id="泛型类"><a href="#泛型类" class="headerlink" title="泛型类"></a>泛型类</h3><p>泛型类看上去与泛型接口差不多。 泛型类使用（<code>&lt;&gt;</code>）括起泛型类型，跟在类名后面。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">GenericNumber</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="attr">zeroValue</span>: T;</span><br><span class="line">    <span class="attr">add</span>: <span class="function">(<span class="params">x: T, y: T</span>) =&gt;</span> T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myGenericNumber = <span class="keyword">new</span> <span class="title class_">GenericNumber</span>&lt;<span class="built_in">number</span>&gt;();</span><br><span class="line">myGenericNumber.<span class="property">zeroValue</span> = <span class="number">0</span>;</span><br><span class="line">myGenericNumber.<span class="property">add</span> = <span class="keyword">function</span>(<span class="params">x, y</span>) &#123; <span class="keyword">return</span> x + y; &#125;;</span><br></pre></td></tr></table></figure><p><code>GenericNumber</code>类的使用是十分直观的，并且你可能已经注意到了，没有什么去限制它只能使用<code>number</code>类型。 也可以使用字符串或其它更复杂的类型。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stringNumeric = <span class="keyword">new</span> <span class="title class_">GenericNumber</span>&lt;<span class="built_in">string</span>&gt;();</span><br><span class="line">stringNumeric.<span class="property">zeroValue</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">stringNumeric.<span class="property">add</span> = <span class="keyword">function</span>(<span class="params">x, y</span>) &#123; <span class="keyword">return</span> x + y; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">alert</span>(stringNumeric.<span class="title function_">add</span>(stringNumeric.<span class="property">zeroValue</span>, <span class="string">&quot;test&quot;</span>));</span><br></pre></td></tr></table></figure><p>与接口一样，直接把泛型类型放在类后面，可以帮助我们确认类的所有属性都在使用相同的类型。</p><p>我们在<a href="https://www.tsdev.cn/Classes.md">类</a>那节说过，类有两部分：静态部分和实例部分。 泛型类指的是实例部分的类型，所以类的静态属性不能使用这个泛型类型。</p><h3 id="泛型约束"><a href="#泛型约束" class="headerlink" title="泛型约束"></a>泛型约束</h3><p>你应该会记得之前的一个例子，我们有时候想操作某类型的一组值，并且我们知道这组值具有什么样的属性。 在<code>loggingIdentity</code>例子中，我们想访问<code>arg</code>的<code>length</code>属性，但是编译器并不能证明每种类型都有<code>length</code>属性，所以就报错了。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> loggingIdentity&lt;T&gt;(<span class="attr">arg</span>: T): T &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arg.<span class="property">length</span>);  <span class="comment">// Error: T doesn&#x27;t have .length</span></span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>相比于操作any所有类型，我们想要限制函数去处理任意带有<code>.length</code>属性的所有类型。 只要传入的类型有这个属性，我们就允许，就是说至少包含这一属性。 为此，我们需要列出对于T的约束要求。</p><p>为此，我们定义一个接口来描述约束条件。 创建一个包含<code>.length</code>属性的接口，使用这个接口和<code>extends</code>关键字还实现约束：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Lengthwise</span> &#123;</span><br><span class="line">    <span class="attr">length</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> loggingIdentity&lt;T <span class="keyword">extends</span> <span class="title class_">Lengthwise</span>&gt;(<span class="attr">arg</span>: T): T &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arg.<span class="property">length</span>);  <span class="comment">// Now we know it has a .length property, so no more error</span></span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>现在这个泛型函数被定义了约束，因此它不再是适用于任意类型：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">loggingIdentity</span>(<span class="number">3</span>);  <span class="comment">// Error, number doesn&#x27;t have a .length property</span></span><br></pre></td></tr></table></figure><p>我们需要传入符合约束类型的值，必须包含必须的属性：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">loggingIdentity</span>(&#123;<span class="attr">length</span>: <span class="number">10</span>, <span class="attr">value</span>: <span class="number">3</span>&#125;);</span><br></pre></td></tr></table></figure><h3 id="在泛型约束中使用类型参数"><a href="#在泛型约束中使用类型参数" class="headerlink" title="在泛型约束中使用类型参数"></a>在泛型约束中使用类型参数</h3><p>你可以声明一个类型参数，且它被另一个类型参数所约束。 比如，现在我们想要用属性名从对象里获取这个属性。 并且我们想要确保这个属性存在于对象<code>obj</code>上，因此我们需要在这两个类型之间使用约束。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> getProperty&lt;T, K <span class="keyword">extends</span> keyof T&gt;(<span class="attr">obj</span>: T, <span class="attr">key</span>: K) &#123;</span><br><span class="line">    <span class="keyword">return</span> obj[key];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> x = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span>, <span class="attr">d</span>: <span class="number">4</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">getProperty</span>(x, <span class="string">&quot;a&quot;</span>); <span class="comment">// okay</span></span><br><span class="line"><span class="title function_">getProperty</span>(x, <span class="string">&quot;m&quot;</span>); <span class="comment">// error: Argument of type &#x27;m&#x27; isn&#x27;t assignable to &#x27;a&#x27; | &#x27;b&#x27; | &#x27;c&#x27; | &#x27;d&#x27;.</span></span><br></pre></td></tr></table></figure><h3 id="在泛型里使用类类型"><a href="#在泛型里使用类类型" class="headerlink" title="在泛型里使用类类型"></a>在泛型里使用类类型</h3><p>在TypeScript使用泛型创建工厂函数时，需要引用构造函数的类类型。比如，</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> create&lt;T&gt;(<span class="attr">c</span>: &#123;<span class="title function_">new</span>(): T; &#125;): T &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title function_">c</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>一个更高级的例子，使用原型属性推断并约束构造函数与类实例的关系。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BeeKeeper</span> &#123;</span><br><span class="line">    <span class="attr">hasMask</span>: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ZooKeeper</span> &#123;</span><br><span class="line">    <span class="attr">nametag</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="attr">numLegs</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bee</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span> &#123;</span><br><span class="line">    <span class="attr">keeper</span>: <span class="title class_">BeeKeeper</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Lion</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span> &#123;</span><br><span class="line">    <span class="attr">keeper</span>: <span class="title class_">ZooKeeper</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> createInstance&lt;A <span class="keyword">extends</span> <span class="title class_">Animal</span>&gt;(<span class="attr">c</span>: <span class="keyword">new</span> () =&gt; A): A &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title function_">c</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">createInstance</span>(<span class="title class_">Lion</span>).<span class="property">keeper</span>.<span class="property">nametag</span>;  <span class="comment">// typechecks!</span></span><br><span class="line"><span class="title function_">createInstance</span>(<span class="title class_">Bee</span>).<span class="property">keeper</span>.<span class="property">hasMask</span>;   <span class="comment">// typechecks!</span></span><br></pre></td></tr></table></figure><h2 id="学习解释"><a href="#学习解释" class="headerlink" title="学习解释"></a>学习解释</h2><h3 id="指定函数参数类型"><a href="#指定函数参数类型" class="headerlink" title="指定函数参数类型"></a>指定函数参数类型</h3><blockquote><p>泛型可以用于 函数、接口、类、type</p><p>如果在使用的时候 无法确定当时的类型，可以采用泛形来定义</p></blockquote><ul><li><p>单个泛型</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getArray = &lt;T&gt;(<span class="attr">times</span>:<span class="built_in">number</span>,<span class="attr">val</span>:T):T[]=&gt;&#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">result</span>:T[] = [];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i&lt;times;i++)&#123;</span><br><span class="line">        result.<span class="title function_">push</span>(val);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">getArray</span>(<span class="number">3</span>,<span class="number">3</span>); <span class="comment">// 3 =&gt; T =&gt; number</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> createArr = &lt;T&gt;(<span class="attr">times</span>: <span class="built_in">number</span>, <span class="attr">val</span>: T): T[] =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> arr = []</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; times; i++) &#123;</span><br><span class="line">        arr.<span class="title function_">push</span>(val)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr</span><br><span class="line">    <span class="comment">// return Array.from(&#123;length:times&#125;).fill(val)  as  T[]</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">createArr</span>(<span class="number">3</span>, <span class="string">&#x27;abc&#x27;</span>))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">createArr</span>(<span class="number">3</span>, <span class="number">123</span>))</span><br></pre></td></tr></table></figure></li><li><p>多个泛型</p><blockquote><p>写辅助函数的函数的时候可以写 多个泛型用于保存值</p><p>值的交换</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> swap&lt;T, K&gt;(<span class="attr">tuple</span>: [T, K]): [K, T] &#123;</span><br><span class="line">    <span class="keyword">return</span> [tuple[<span class="number">1</span>], tuple[<span class="number">0</span>]]</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">swap</span>([<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>]))</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> swap&lt;T,K&gt;(<span class="attr">tuple</span>:[T,K]):[K,T]&#123;</span><br><span class="line">    <span class="keyword">return</span> [tuple[<span class="number">1</span>],tuple[<span class="number">0</span>]]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> r = <span class="title function_">swap</span>([<span class="string">&#x27;jw&#x27;</span>,<span class="literal">true</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// IForEach&lt;T&gt; 表示使用接口的时候确定类型</span></span><br><span class="line"><span class="comment">// &lt;T&gt;():void 在使用这个函数的函数传入类型</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IForEach</span> &#123;</span><br><span class="line">    &lt;T&gt;(<span class="attr">arr</span>: T[],<span class="attr">callback</span>:<span class="function">(<span class="params">val:T</span>)=&gt;</span><span class="built_in">void</span>): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// type ICallback = &lt;T&gt;(val: T) =&gt; void  //  错误写法 泛型的使用需要能正常推到，但是内部的callback没有真正的执行，还是认为arr:T[]</span></span><br><span class="line"> <span class="keyword">type</span> <span class="title class_">IForEach</span> = &lt;T&gt;<span class="function">(<span class="params">arr: T[], callback: ICallback</span>) =&gt;</span> <span class="built_in">void</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">forEach</span>: <span class="title class_">IForEach</span> = <span class="function">(<span class="params">arr, callback</span>) =&gt;</span> &#123;</span><br><span class="line">     <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">         <span class="comment">// ts 并没有真正的执行内部的callback(arr[i])</span></span><br><span class="line">        <span class="title function_">callback</span>(arr[i])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用forEach才传递的类型，而不是定义接口的时候 传递类型</span></span><br><span class="line"><span class="comment">// string | number | &#123;&#125;</span></span><br><span class="line"><span class="title function_">forEach</span>([<span class="string">&#x27;A&#x27;</span>, <span class="number">2</span>, <span class="number">3</span>,&#123;&#125;], <span class="keyword">function</span> (<span class="params">val</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(val)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><h3 id="函数标注的方式"><a href="#函数标注的方式" class="headerlink" title="函数标注的方式"></a>函数标注的方式</h3><ul><li><p>类型别名</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">TArray</span> = &lt;T, K&gt;<span class="function">(<span class="params">tuple: [T, K]</span>) =&gt;</span> [K, T];</span><br><span class="line"><span class="keyword">const</span> <span class="attr">getArray</span>:<span class="title class_">TArray</span> = &lt;T, K&gt;(<span class="attr">tuple</span>: [T, K]): [K, T] =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> [tuple[<span class="number">1</span>], tuple[<span class="number">0</span>]]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>可以使用类型别名，但是类型别名不能被继承和实现。一般联合类型可以使用类型别名来声明</p></blockquote></li><li><p>接口</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IArray</span>&#123;</span><br><span class="line">    &lt;T,K&gt;(<span class="attr">typle</span>:[T,K]):[K,T]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">getArray</span>:<span class="title class_">IArray</span> = &lt;T, K&gt;(<span class="attr">tuple</span>: [T, K]): [K, T] =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> [tuple[<span class="number">1</span>], tuple[<span class="number">0</span>]]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>能使用interface尽量使用interface</p></blockquote></li></ul><h3 id="泛型接口使用"><a href="#泛型接口使用" class="headerlink" title="泛型接口使用"></a>泛型接口使用</h3><blockquote><p>接口的返回值可能都是统一的  </p><p>code, data, message</p><p>泛型的默认值来解决泛型的值默认情况</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">ISum</span>&lt;T&gt; &#123; <span class="comment">// 这里的T是使用接口的时候传入</span></span><br><span class="line">    &lt;U&gt;(<span class="attr">a</span>: T, <span class="attr">b</span>: T): U <span class="comment">// 这里的U是调用函数的时候传入</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">sum</span>: <span class="title class_">ISum</span>&lt;<span class="built_in">number</span>&gt; = <span class="function">(<span class="params">a:<span class="built_in">number</span>, b:<span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">3</span> <span class="keyword">as</span> <span class="built_in">any</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">APIResponse</span>&lt;T = <span class="built_in">any</span>&gt; &#123;</span><br><span class="line">    <span class="attr">error</span>: <span class="built_in">number</span>,</span><br><span class="line">    <span class="attr">data</span>: T,</span><br><span class="line">    message?: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">LoginInfo</span> &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">token</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">login</span>(<span class="params"></span>): <span class="title class_">APIResponse</span> &#123; <span class="comment">// 请求方法</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">error</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">data</span>: &#123;</span><br><span class="line">            <span class="attr">username</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">            <span class="attr">token</span>: <span class="string">&#x27;xxxx&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">message</span>: <span class="string">&#x27;成功&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> r = <span class="title function_">login</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">//  在平时开发中我门想使用联合类型 </span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IUnion</span>&lt;T = <span class="built_in">boolean</span>&gt; = T | <span class="built_in">string</span> | <span class="built_in">number</span></span><br><span class="line"><span class="keyword">type</span> t1 = <span class="title class_">IUnion</span></span><br><span class="line"><span class="keyword">type</span> t2 = <span class="title class_">IUnion</span>&lt;<span class="built_in">string</span>[] | <span class="built_in">number</span>[]&gt;</span><br></pre></td></tr></table></figure><h3 id="默认泛型"><a href="#默认泛型" class="headerlink" title="默认泛型"></a>默认泛型</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> T2&lt;T=<span class="built_in">string</span>&gt;&#123;</span><br><span class="line">    <span class="attr">name</span>:T</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T22</span> = <span class="variable constant_">T2</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">name1</span>:<span class="variable constant_">T22</span> = &#123;<span class="attr">name</span>:<span class="string">&#x27;zf&#x27;</span>&#125;</span><br></pre></td></tr></table></figure><blockquote><p>可以指定泛型的默认类型，方便使用</p></blockquote><h3 id="类中的泛型"><a href="#类中的泛型" class="headerlink" title="类中的泛型"></a><strong>类中的泛型</strong></h3><ul><li><p>创建实例时提供类型</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyArray</span>&lt;T&gt;&#123; <span class="comment">// T =&gt; number</span></span><br><span class="line">    <span class="attr">arr</span>: T[] = [];</span><br><span class="line">    <span class="title function_">add</span>(<span class="params">num: T</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">arr</span>.<span class="title function_">push</span>(num);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">getMaxNum</span>(): T &#123;</span><br><span class="line">        <span class="keyword">let</span> arr = <span class="variable language_">this</span>.<span class="property">arr</span></span><br><span class="line">        <span class="keyword">let</span> max = arr[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">let</span> current = arr[i];</span><br><span class="line">            current &gt; max ? max = current : <span class="literal">null</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> myArr = <span class="keyword">new</span> <span class="title class_">MyArray</span>&lt;<span class="built_in">number</span>&gt;();</span><br><span class="line">myArr.<span class="title function_">add</span>(<span class="number">3</span>);</span><br><span class="line">myArr.<span class="title function_">add</span>(<span class="number">1</span>);</span><br><span class="line">myArr.<span class="title function_">add</span>(<span class="number">2</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(myArr.<span class="title function_">getMaxNum</span>());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyList</span>&lt;T <span class="keyword">extends</span> <span class="built_in">string</span> | <span class="built_in">number</span> = <span class="built_in">number</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="attr">arr</span>: T[] = []</span><br><span class="line">    <span class="title function_">add</span>(<span class="params">val: T</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">arr</span>.<span class="title function_">push</span>(val)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">getMax</span>(): T &#123;</span><br><span class="line">        <span class="keyword">let</span> max = <span class="variable language_">this</span>.<span class="property">arr</span>[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; <span class="variable language_">this</span>.<span class="property">arr</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">let</span> cur = <span class="variable language_">this</span>.<span class="property">arr</span>[i];</span><br><span class="line">            cur &gt; max ? (max = cur) : <span class="built_in">void</span> <span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> list = <span class="keyword">new</span> <span class="title class_">MyList</span>&lt;<span class="built_in">string</span>&gt;</span><br><span class="line">list.<span class="title function_">add</span>(<span class="string">&#x27;1&#x27;</span>)</span><br><span class="line">list.<span class="title function_">add</span>(<span class="string">&#x27;100&#x27;</span>);</span><br><span class="line">list.<span class="title function_">add</span>(<span class="string">&#x27;200&#x27;</span>);</span><br><span class="line"></span><br><span class="line">list.<span class="title function_">getMax</span>(); <span class="comment">// 200</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>校验构造函数类型</p><blockquote><p>ts只是对类型做校验，对于真正的业务逻辑不关心</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> createClass = &lt;T&gt;(<span class="attr">clazz</span>: <span class="title function_">new</span>(<span class="attr">name</span>:<span class="built_in">string</span>,<span class="attr">age</span>:<span class="built_in">number</span>)=&gt;T):<span class="function"><span class="params">T</span> =&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title function_">clazz</span>(name,age);</span><br><span class="line">&#125;</span><br><span class="line">createClass&lt;<span class="title class_">Person2</span>&gt;(<span class="title class_">Person2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> getObjVal&lt;T <span class="keyword">extends</span> <span class="built_in">object</span>, K <span class="keyword">extends</span> keyof T&gt;(<span class="attr">target</span>: T, <span class="attr">key</span>: K) &#123;</span><br><span class="line">    <span class="keyword">return</span> target[key]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> person = &#123; <span class="attr">name</span>: <span class="string">&#x27;jw&#x27;</span>, <span class="attr">age</span>: <span class="number">30</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> animal = &#123; <span class="attr">name</span>: <span class="string">&#x27;tom&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">address</span>: <span class="string">&#x27;china&#x27;</span> &#125;;</span><br><span class="line"><span class="title function_">getObjVal</span>(animal, <span class="string">&quot;address&quot;</span>);</span><br></pre></td></tr></table></figure></li></ul><h3 id="泛型约束-extends"><a href="#泛型约束-extends" class="headerlink" title="泛型约束 (extends)"></a>泛型约束 (extends)</h3><ul><li><p>泛型必须包含某些属性</p><blockquote><p>泛型是用户传递的类型（用户随便传？） 在使用泛型的时候 都要添加约束 泛型约束</p><p>我门在使用泛型的时候 不能直接做运算的 （无法保证泛型的结果 t + t = t?）</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IWithLength</span> &#123;</span><br><span class="line">    <span class="attr">length</span>:<span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> getLen&lt;T <span class="keyword">extends</span> <span class="title class_">IWithLength</span>&gt;(<span class="attr">val</span>:T)&#123;</span><br><span class="line">    <span class="keyword">return</span> val.<span class="property">length</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">getLen</span>(<span class="string">&#x27;hello&#x27;</span>);</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sum = &lt;T <span class="keyword">extends</span> <span class="built_in">number</span>&gt;(<span class="attr">a</span>: T, <span class="attr">b</span>: T): <span class="function"><span class="params">T</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (a + b) <span class="keyword">as</span> T</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> r = sum&lt;<span class="built_in">number</span>&gt;(<span class="number">1</span>, <span class="number">2</span>); </span><br></pre></td></tr></table></figure><p>约束当前这个类型T 需要是 string | number 子类型</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> getLen&lt;T <span class="keyword">extends</span> &#123; <span class="attr">length</span>: <span class="built_in">number</span> &#125;&gt;(<span class="attr">val</span>: T) &#123;</span><br><span class="line">    <span class="keyword">return</span> val.<span class="property">length</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">getLen</span>(<span class="string">&#x27;123&#x27;</span>)</span><br><span class="line"><span class="title function_">getLen</span>(&#123; <span class="attr">length</span>: <span class="number">123</span> &#125;)</span><br><span class="line"><span class="comment">// getLen(123) 约束是某种类型的子类型</span></span><br></pre></td></tr></table></figure></li><li><p>返回泛型中指定属性</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getVal = &lt;T,K <span class="keyword">extends</span> keyof T&gt;(<span class="attr">obj</span>:T,<span class="attr">key</span>:K) : T[K]=&gt;&#123;</span><br><span class="line">    <span class="keyword">return</span> obj[key];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h1 id="2-类型兼容性"><a href="#2-类型兼容性" class="headerlink" title="2.类型兼容性"></a>2.类型兼容性</h1><h2 id="文档解释-1"><a href="#文档解释-1" class="headerlink" title="文档解释"></a>文档解释</h2><h3 id="介绍-1"><a href="#介绍-1" class="headerlink" title="介绍"></a>介绍</h3><p>TypeScript里的类型兼容性是基于结构子类型的。 结构类型是一种只使用其成员来描述类型的方式。 它正好与名义（nominal）类型形成对比。（译者注：在基于名义类型的类型系统中，数据类型的兼容性或等价性是通过明确的声明和/或类型的名称来决定的。这与结构性类型系统不同，它是基于类型的组成结构，且不要求明确地声明。） 看下面的例子：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Named</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">p</span>: <span class="title class_">Named</span>;</span><br><span class="line"><span class="comment">// OK, because of structural typing</span></span><br><span class="line">p = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br></pre></td></tr></table></figure><p>在使用基于名义类型的语言，比如C#或Java中，这段代码会报错，因为Person类没有明确说明其实现了Named接口。</p><p>TypeScript的结构性子类型是根据JavaScript代码的典型写法来设计的。 因为JavaScript里广泛地使用匿名对象，例如函数表达式和对象字面量，所以使用结构类型系统来描述这些类型比使用名义类型系统更好。</p><h4 id="关于可靠性的注意事项"><a href="#关于可靠性的注意事项" class="headerlink" title="关于可靠性的注意事项"></a>关于可靠性的注意事项</h4><p>TypeScript的类型系统允许某些在编译阶段无法确认其安全性的操作。当一个类型系统具此属性时，被当做是“不可靠”的。TypeScript允许这种不可靠行为的发生是经过仔细考虑的。通过这篇文章，我们会解释什么时候会发生这种情况和其有利的一面。</p><h3 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h3><p>TypeScript结构化类型系统的基本规则是，如果<code>x</code>要兼容<code>y</code>，那么<code>y</code>至少具有与<code>x</code>相同的属性。比如：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Named</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">x</span>: <span class="title class_">Named</span>;</span><br><span class="line"><span class="comment">// y&#x27;s inferred type is &#123; name: string; location: string; &#125;</span></span><br><span class="line"><span class="keyword">let</span> y = &#123; <span class="attr">name</span>: <span class="string">&#x27;Alice&#x27;</span>, <span class="attr">location</span>: <span class="string">&#x27;Seattle&#x27;</span> &#125;;</span><br><span class="line">x = y;</span><br></pre></td></tr></table></figure><p>这里要检查<code>y</code>是否能赋值给<code>x</code>，编译器检查<code>x</code>中的每个属性，看是否能在<code>y</code>中也找到对应属性。 在这个例子中，<code>y</code>必须包含名字是<code>name</code>的<code>string</code>类型成员。<code>y</code>满足条件，因此赋值正确。</p><p>检查函数参数时使用相同的规则：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">greet</span>(<span class="params">n: Named</span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;Hello, &#x27;</span> + n.<span class="property">name</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">greet</span>(y); <span class="comment">// OK</span></span><br></pre></td></tr></table></figure><p>注意，<code>y</code>有个额外的<code>location</code>属性，但这不会引发错误。 只有目标类型（这里是<code>Named</code>）的成员会被一一检查是否兼容。</p><p>这个比较过程是递归进行的，检查每个成员及子成员。</p><h3 id="比较两个函数"><a href="#比较两个函数" class="headerlink" title="比较两个函数"></a>比较两个函数</h3><p>相对来讲，在比较原始类型和对象类型的时候是比较容易理解的，问题是如何判断两个函数是兼容的。 下面我们从两个简单的函数入手，它们仅是参数列表略有不同：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title function_">x</span> = (<span class="params">a: <span class="built_in">number</span></span>) =&gt; <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="title function_">y</span> = (<span class="params">b: <span class="built_in">number</span>, s: <span class="built_in">string</span></span>) =&gt; <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">y = x; <span class="comment">// OK</span></span><br><span class="line">x = y; <span class="comment">// Error</span></span><br></pre></td></tr></table></figure><p>要查看<code>x</code>是否能赋值给<code>y</code>，首先看它们的参数列表。 <code>x</code>的每个参数必须能在<code>y</code>里找到对应类型的参数。 注意的是参数的名字相同与否无所谓，只看它们的类型。 这里，<code>x</code>的每个参数在<code>y</code>中都能找到对应的参数，所以允许赋值。</p><p>第二个赋值错误，因为<code>y</code>有个必需的第二个参数，但是<code>x</code>并没有，所以不允许赋值。</p><p>你可能会疑惑为什么允许<code>忽略</code>参数，像例子<code>y = x</code>中那样。 原因是忽略额外的参数在JavaScript里是很常见的。 例如，<code>Array#forEach</code>给回调函数传3个参数：数组元素，索引和整个数组。 尽管如此，传入一个只使用第一个参数的回调函数也是很有用的：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> items = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Don&#x27;t force these extra arguments</span></span><br><span class="line">items.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index, array</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(item));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Should be OK!</span></span><br><span class="line">items.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(item));</span><br></pre></td></tr></table></figure><p>下面来看看如何处理返回值类型，创建两个仅是返回值类型不同的函数：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title function_">x</span> = (<span class="params"></span>) =&gt; (&#123;<span class="attr">name</span>: <span class="string">&#x27;Alice&#x27;</span>&#125;);</span><br><span class="line"><span class="keyword">let</span> <span class="title function_">y</span> = (<span class="params"></span>) =&gt; (&#123;<span class="attr">name</span>: <span class="string">&#x27;Alice&#x27;</span>, <span class="attr">location</span>: <span class="string">&#x27;Seattle&#x27;</span>&#125;);</span><br><span class="line"></span><br><span class="line">x = y; <span class="comment">// OK</span></span><br><span class="line">y = x; <span class="comment">// Error because x() lacks a location property</span></span><br></pre></td></tr></table></figure><p>类型系统强制源函数的返回值类型必须是目标函数返回值类型的子类型。</p><h3 id="函数参数双向协变"><a href="#函数参数双向协变" class="headerlink" title="函数参数双向协变"></a>函数参数双向协变</h3><p>当比较函数参数类型时，只有当源函数参数能够赋值给目标函数或者反过来时才能赋值成功。 这是不稳定的，因为调用者可能传入了一个具有更精确类型信息的函数，但是调用这个传入的函数的时候却使用了不是那么精确的类型信息。 实际上，这极少会发生错误，并且能够实现很多JavaScript里的常见模式。例如：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">EventType</span> &#123; <span class="title class_">Mouse</span>, <span class="title class_">Keyboard</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Event</span> &#123; <span class="attr">timestamp</span>: <span class="built_in">number</span>; &#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">MouseEvent</span> <span class="keyword">extends</span> <span class="title class_">Event</span> &#123; <span class="attr">x</span>: <span class="built_in">number</span>; <span class="attr">y</span>: <span class="built_in">number</span> &#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">KeyEvent</span> <span class="keyword">extends</span> <span class="title class_">Event</span> &#123; <span class="attr">keyCode</span>: <span class="built_in">number</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">listenEvent</span>(<span class="params">eventType: EventType, handler: (n: Event) =&gt; <span class="built_in">void</span></span>) &#123;</span><br><span class="line">    <span class="comment">/* ... */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Unsound, but useful and common</span></span><br><span class="line"><span class="title function_">listenEvent</span>(<span class="title class_">EventType</span>.<span class="property">Mouse</span>, <span class="function">(<span class="params">e: MouseEvent</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">x</span> + <span class="string">&#x27;,&#x27;</span> + e.<span class="property">y</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Undesirable alternatives in presence of soundness</span></span><br><span class="line"><span class="title function_">listenEvent</span>(<span class="title class_">EventType</span>.<span class="property">Mouse</span>, <span class="function">(<span class="params">e: Event</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>((&lt;<span class="title class_">MouseEvent</span>&gt;e).<span class="property">x</span> + <span class="string">&#x27;,&#x27;</span> + (&lt;<span class="title class_">MouseEvent</span>&gt;e).<span class="property">y</span>));</span><br><span class="line"><span class="title function_">listenEvent</span>(<span class="title class_">EventType</span>.<span class="property">Mouse</span>, &lt;<span class="function">(<span class="params">e: Event</span>) =&gt;</span> <span class="built_in">void</span>&gt;(<span class="function">(<span class="params">e: MouseEvent</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">x</span> + <span class="string">&#x27;,&#x27;</span> + e.<span class="property">y</span>)));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Still disallowed (clear error). Type safety enforced for wholly incompatible types</span></span><br><span class="line"><span class="title function_">listenEvent</span>(<span class="title class_">EventType</span>.<span class="property">Mouse</span>, <span class="function">(<span class="params">e: <span class="built_in">number</span></span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(e));</span><br></pre></td></tr></table></figure><h3 id="可选参数及剩余参数"><a href="#可选参数及剩余参数" class="headerlink" title="可选参数及剩余参数"></a>可选参数及剩余参数</h3><p>比较函数兼容性的时候，可选参数与必须参数是可互换的。 源类型上有额外的可选参数不是错误，目标类型的可选参数在源类型里没有对应的参数也不是错误。</p><p>当一个函数有剩余参数时，它被当做无限个可选参数。</p><p>这对于类型系统来说是不稳定的，但从运行时的角度来看，可选参数一般来说是不强制的，因为对于大多数函数来说相当于传递了一些<code>undefinded</code>。</p><p>有一个好的例子，常见的函数接收一个回调函数并用对于程序员来说是可预知的参数但对类型系统来说是不确定的参数来调用：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">invokeLater</span>(<span class="params">args: <span class="built_in">any</span>[], callback: (...args: <span class="built_in">any</span>[]) =&gt; <span class="built_in">void</span></span>) &#123;</span><br><span class="line">    <span class="comment">/* ... Invoke callback with &#x27;args&#x27; ... */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Unsound - invokeLater &quot;might&quot; provide any number of arguments</span></span><br><span class="line"><span class="title function_">invokeLater</span>([<span class="number">1</span>, <span class="number">2</span>], <span class="function">(<span class="params">x, y</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(x + <span class="string">&#x27;, &#x27;</span> + y));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Confusing (x and y are actually required) and undiscoverable</span></span><br><span class="line"><span class="title function_">invokeLater</span>([<span class="number">1</span>, <span class="number">2</span>], <span class="function">(<span class="params">x?, y?</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(x + <span class="string">&#x27;, &#x27;</span> + y));</span><br></pre></td></tr></table></figure><h3 id="函数重载"><a href="#函数重载" class="headerlink" title="函数重载"></a>函数重载</h3><p>对于有重载的函数，源函数的每个重载都要在目标函数上找到对应的函数签名。 这确保了目标函数可以在所有源函数可调用的地方调用。</p><h3 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a>枚举</h3><p>枚举类型与数字类型兼容，并且数字类型与枚举类型兼容。不同枚举类型之间是不兼容的。比如，</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Status</span> &#123; <span class="title class_">Ready</span>, <span class="title class_">Waiting</span> &#125;;</span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Color</span> &#123; <span class="title class_">Red</span>, <span class="title class_">Blue</span>, <span class="title class_">Green</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> status = <span class="title class_">Status</span>.<span class="property">Ready</span>;</span><br><span class="line">status = <span class="title class_">Color</span>.<span class="property">Green</span>;  <span class="comment">//error</span></span><br></pre></td></tr></table></figure><h3 id="类"><a href="#类" class="headerlink" title="类"></a>类</h3><p>类与对象字面量和接口差不多，但有一点不同：类有静态部分和实例部分的类型。 比较两个类类型的对象时，只有实例的成员会被比较。 静态成员和构造函数不在比较的范围内。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="attr">feet</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span>, numFeet: <span class="built_in">number</span></span>) &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Size</span> &#123;</span><br><span class="line">    <span class="attr">feet</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">numFeet: <span class="built_in">number</span></span>) &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="title class_">Animal</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">s</span>: <span class="title class_">Size</span>;</span><br><span class="line"></span><br><span class="line">a = s;  <span class="comment">//OK</span></span><br><span class="line">s = a;  <span class="comment">//OK</span></span><br></pre></td></tr></table></figure><h3 id="类的私有成员"><a href="#类的私有成员" class="headerlink" title="类的私有成员"></a>类的私有成员</h3><p>私有成员会影响兼容性判断。 当类的实例用来检查兼容时，如果目标类型包含一个私有成员，那么源类型必须包含来自同一个类的这个私有成员。 这允许子类赋值给父类，但是不能赋值给其它有同样类型的类。</p><h3 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h3><p>因为TypeScript是结构性的类型系统，类型参数只影响使用其做为类型一部分的结果类型。比如，</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Empty</span>&lt;T&gt; &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">x</span>: <span class="title class_">Empty</span>&lt;<span class="built_in">number</span>&gt;;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">y</span>: <span class="title class_">Empty</span>&lt;<span class="built_in">string</span>&gt;;</span><br><span class="line"></span><br><span class="line">x = y;  <span class="comment">// okay, y matches structure of x</span></span><br></pre></td></tr></table></figure><p>上面代码里，<code>x</code>和<code>y</code>是兼容的，因为它们的结构使用类型参数时并没有什么不同。 把这个例子改变一下，增加一个成员，就能看出是如何工作的了：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">NotEmpty</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="attr">data</span>: T;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">x</span>: <span class="title class_">NotEmpty</span>&lt;<span class="built_in">number</span>&gt;;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">y</span>: <span class="title class_">NotEmpty</span>&lt;<span class="built_in">string</span>&gt;;</span><br><span class="line"></span><br><span class="line">x = y;  <span class="comment">// error, x and y are not compatible</span></span><br></pre></td></tr></table></figure><p>在这里，泛型类型在使用时就好比不是一个泛型类型。</p><p>对于没指定泛型类型的泛型参数时，会把所有泛型参数当成<code>any</code>比较。 然后用结果类型进行比较，就像上面第一个例子。</p><p>比如，</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> identity = <span class="keyword">function</span>&lt;T&gt;(<span class="attr">x</span>: T): T &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> reverse = <span class="keyword">function</span>&lt;U&gt;(<span class="attr">y</span>: U): U &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">identity = reverse;  <span class="comment">// Okay because (x: any)=&gt;any matches (y: any)=&gt;any</span></span><br></pre></td></tr></table></figure><h3 id="高级主题"><a href="#高级主题" class="headerlink" title="高级主题"></a>高级主题</h3><h4 id="子类型与赋值"><a href="#子类型与赋值" class="headerlink" title="子类型与赋值"></a>子类型与赋值</h4><p>目前为止，我们使用了<code>兼容性</code>，它在语言规范里没有定义。 在TypeScript里，有两种类型的兼容性：子类型与赋值。 它们的不同点在于，赋值扩展了子类型兼容，允许给<code>any</code>赋值或从<code>any</code>取值和允许数字赋值给枚举类型或枚举类型赋值给数字。</p><p>语言里的不同地方分别使用了它们之中的机制。 实际上，类型兼容性是由赋值兼容性来控制的，即使在<code>implements</code>和<code>extends</code>语句也不例外。 更多信息，请参阅<a href="https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md">TypeScript语言规范</a>.</p><h2 id="学习解释-1"><a href="#学习解释-1" class="headerlink" title="学习解释"></a>学习解释</h2><h3 id="基本数据类型的兼容性"><a href="#基本数据类型的兼容性" class="headerlink" title="基本数据类型的兼容性"></a>基本数据类型的兼容性</h3><blockquote><p>ts兼容性分成两种 子 extends 父  结构来考虑</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">str</span>: <span class="built_in">string</span> = <span class="string">&quot;abc&quot;</span>; <span class="comment">// 类型层级</span></span><br><span class="line"><span class="keyword">let</span> obj!: &#123; <span class="title function_">toString</span>(): <span class="built_in">string</span> &#125;;</span><br><span class="line"></span><br><span class="line">obj = str; <span class="comment">// 结构来考虑   extends object   extends &#123;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 安全性 ts 主要考虑的就是安全， 安全就可以进行复制</span></span><br><span class="line"><span class="comment">// obj.toString</span></span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">temp</span>:<span class="built_in">string</span> | <span class="built_in">number</span>;</span><br><span class="line"><span class="keyword">let</span> num!:<span class="built_in">number</span>;</span><br><span class="line">temp = num;</span><br></pre></td></tr></table></figure><blockquote><p>你要的我有就可以</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">num</span>:&#123;</span><br><span class="line">    <span class="title function_">toString</span>():<span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">str</span>:<span class="built_in">string</span> = <span class="string">&#x27;zf&#x27;</span>;</span><br><span class="line">num = str; <span class="comment">// 字符串中具备toString()方法，所以可以进行兼容</span></span><br></pre></td></tr></table></figure><h3 id="接口兼容性"><a href="#接口兼容性" class="headerlink" title="接口兼容性"></a>接口兼容性</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IAnimal</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IPerson</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span>,</span><br><span class="line">    <span class="attr">address</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">animal</span>: <span class="title class_">IAnimal</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: <span class="title class_">IPerson</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;zf&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">11</span>,</span><br><span class="line">    <span class="attr">address</span>: <span class="string">&#x27;回龙观&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line">animal = person;</span><br></pre></td></tr></table></figure><blockquote><p>接口的兼容性，只要满足接口中所需要的类型即可！</p></blockquote><h3 id="函数的兼容性"><a href="#函数的兼容性" class="headerlink" title="函数的兼容性"></a>函数的兼容性</h3><p>函数的兼容性主要是比较参数和返回值</p><ul><li><p>参数</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title function_">sum1</span> = (<span class="params">a: <span class="built_in">string</span>, b: <span class="built_in">string</span></span>) =&gt; a + b;</span><br><span class="line"><span class="keyword">let</span> <span class="title function_">sum2</span> = (<span class="params">a: <span class="built_in">string</span></span>) =&gt; a;</span><br><span class="line">sum1 = sum2</span><br></pre></td></tr></table></figure><blockquote><p>赋值函数的参数要少于等于被赋值的函数，与对象相反,例如:</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Func</span>&lt;T&gt; = <span class="function">(<span class="params">item: T, index: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">void</span></span><br><span class="line"><span class="keyword">function</span> forEach&lt;T&gt;(<span class="attr">arr</span>: T[], <span class="attr">cb</span>: <span class="title class_">Func</span>&lt;T&gt;) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="title function_">cb</span>(arr[i], i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">forEach</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(item);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>返回值</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> sum1 = <span class="function">() =&gt;</span> <span class="built_in">string</span> | <span class="built_in">number</span></span><br><span class="line"><span class="keyword">type</span> sum2 = <span class="function">() =&gt;</span> <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">fn1</span>: sum1;</span><br><span class="line"><span class="keyword">let</span> fn2!: sum2;</span><br><span class="line">fn1 = fn2;</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>参数和返回值的兼容性</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sum1 = (<span class="attr">a</span>: <span class="built_in">number</span>, <span class="attr">b</span>: <span class="built_in">number</span>): <span class="built_in">string</span> | <span class="function"><span class="params">number</span> =&gt;</span> a + b;</span><br><span class="line"><span class="keyword">let</span> sum2 = (<span class="attr">a</span>: <span class="built_in">number</span>): <span class="function"><span class="params">number</span> =&gt;</span> a;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Sum1</span> = <span class="keyword">typeof</span> sum1;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Sum2</span> = <span class="keyword">typeof</span> sum2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> X = <span class="title class_">Sum2</span> <span class="keyword">extends</span> <span class="title class_">Sum1</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对于函数而言他的兼容性， 少的可以赋予给多的， 参数少的是子类型</span></span><br><span class="line"><span class="comment">// 返回值要求安全, 返回值要求是子类型.</span></span><br><span class="line"><span class="keyword">const</span> forEach = &lt;T&gt;<span class="function">(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">  arr: T[],</span></span></span><br><span class="line"><span class="params"><span class="function">  callback: (val: T, key: <span class="built_in">number</span>) =&gt; <span class="built_in">string</span> | <span class="built_in">number</span></span></span></span><br><span class="line"><span class="params"><span class="function"></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> r = <span class="title function_">callback</span>(arr[i], i); <span class="comment">// 调用函数的时候 会传递多个参数</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title function_">forEach</span>([<span class="string">&quot;A&quot;</span>, <span class="number">2</span>, <span class="number">3</span>, &#123;&#125;], <span class="keyword">function</span> (<span class="params">val</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;abc&quot;</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id=""><a href="#" class="headerlink" title=" "></a> </h3></li></ul><h3 id="类的兼容性"><a href="#类的兼容性" class="headerlink" title="类的兼容性"></a>类的兼容性</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Perent</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span> = <span class="string">&#x27;zf&#x27;</span>;</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span> = <span class="number">11</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Parent1</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span> = <span class="string">&#x27;zf&#x27;</span>;</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span> = <span class="number">11</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">parent</span>: <span class="title class_">Perent</span> = <span class="keyword">new</span> <span class="title class_">Parent1</span></span><br></pre></td></tr></table></figure><blockquote><p>这里要注意的是，只要有private或者protected关键字类型就会不一致;但是继承的类可以兼容</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Parent1</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="attr">name</span>: <span class="built_in">string</span> = <span class="string">&#x27;zf&#x27;</span>;</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span> = <span class="number">11</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Parent1</span>&#123;&#125; </span><br><span class="line"><span class="keyword">let</span> <span class="attr">child</span>:<span class="title class_">Parent1</span> = <span class="keyword">new</span> <span class="title class_">Child</span>;</span><br></pre></td></tr></table></figure><p>类的兼容性 也是一样  比较的是实例</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> a = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> a = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">b</span>: B = <span class="keyword">new</span> <span class="title function_">A</span>(); <span class="comment">// 如果类中的属性 有private 或者protected则两个值不能互相复制</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ts 这种叫结构化类型，标称类型</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 希望给基本类型做区分，达到差异化的目的</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> withType&lt;T, K&gt; = T &amp; [K];</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">BTC</span> = withType&lt;<span class="built_in">number</span>, <span class="string">&quot;BTC&quot;</span>&gt;;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">USDT</span> = withType&lt;<span class="built_in">number</span>, <span class="string">&quot;USDT&quot;</span>&gt;; <span class="comment">// 基于内置类型来做构建</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> c1 = <span class="number">100</span> <span class="keyword">as</span> <span class="variable constant_">BTC</span>;</span><br><span class="line"><span class="keyword">const</span> c2 = <span class="number">100</span> <span class="keyword">as</span> <span class="variable constant_">USDT</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">money</span>(<span class="params">val: BTC</span>) &#123;&#125;</span><br><span class="line"><span class="title function_">money</span>(c1)</span><br></pre></td></tr></table></figure><h3 id="泛型的兼容性"><a href="#泛型的兼容性" class="headerlink" title="泛型的兼容性"></a>泛型的兼容性</h3><p>泛型兼容性， 如果生成的结果一致 类型就就兼容</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> IT&lt;T&gt;&#123;&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">obj1</span>:<span class="variable constant_">IT</span>&lt;<span class="built_in">string</span>&gt;;</span><br><span class="line"><span class="keyword">let</span> obj2!:<span class="variable constant_">IT</span>&lt;<span class="built_in">number</span>&gt;;</span><br><span class="line">obj1 = obj2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">II</span>&lt;T&gt; = &#123; name?: T &#125;;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">X1</span> = <span class="variable constant_">II</span>&lt;<span class="built_in">string</span>&gt; <span class="keyword">extends</span> <span class="variable constant_">II</span>&lt;<span class="built_in">string</span>&gt; ? <span class="literal">true</span> : <span class="literal">false</span>; <span class="comment">// 生成结构一致即可</span></span><br></pre></td></tr></table></figure><h3 id="枚举的兼容性"><a href="#枚举的兼容性" class="headerlink" title="枚举的兼容性"></a>枚举的兼容性</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">USER1</span> &#123;</span><br><span class="line">    role = <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">USER2</span> &#123;</span><br><span class="line">    role = <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> user1!:<span class="title class_">USER1</span></span><br><span class="line"><span class="keyword">let</span> user2!:<span class="title class_">USER2</span></span><br><span class="line">user1 = user2 <span class="comment">// 错误语法</span></span><br><span class="line"><span class="comment">// -------------</span></span><br><span class="line"><span class="keyword">enum</span> <span class="variable constant_">E1</span> &#123;</span><br><span class="line">  a = <span class="number">1</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">enum</span> <span class="variable constant_">E2</span> &#123;</span><br><span class="line">  a = <span class="number">1</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> e1!: <span class="variable constant_">E1</span>.<span class="property">a</span>;</span><br><span class="line"><span class="keyword">let</span> e2!: <span class="variable constant_">E2</span>.<span class="property">a</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// e2 = e1; //两个枚举之间 不能兼容</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>不同的枚举类型不兼容</p></blockquote><h3 id="对象的兼容性"><a href="#对象的兼容性" class="headerlink" title="对象的兼容性"></a>对象的兼容性</h3><p>对象的兼容性， 多的属性可以赋予给少的</p><h3 id="类型层级兼容性，"><a href="#类型层级兼容性，" class="headerlink" title="类型层级兼容性，"></a>类型层级兼容性，</h3><p>never -&gt; 字面量 -&gt; 基础类型 -&gt; 包装类型 -&gt; any / unknown</p><p>子  extends  父  满足 即可赋值</p><h3 id="函数的逆变与协变"><a href="#函数的逆变与协变" class="headerlink" title="函数的逆变与协变"></a>函数的逆变与协变</h3><p>函数的参数是逆变的，返回值是协变的 （在非严格模式下函数的参数是双向协变的）</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Parent</span> &#123;</span><br><span class="line">    <span class="attr">address</span>: <span class="built_in">string</span> = <span class="string">&#x27;回龙观&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Parent</span> &#123;</span><br><span class="line">    <span class="attr">money</span>: <span class="built_in">number</span> = <span class="number">100</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Grandsom</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Child</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span> = <span class="string">&#x27;吉姆&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Callback</span> = <span class="function">(<span class="params">person: Child</span>) =&gt;</span> <span class="title class_">Child</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">execCallback</span>(<span class="params">cb: Callback</span>) &#123; &#125;</span><br><span class="line"><span class="keyword">let</span> <span class="title function_">fn</span> = (<span class="params">person: Parent</span>) =&gt; <span class="keyword">new</span> <span class="title class_">Grandsom</span>;</span><br><span class="line"><span class="title function_">execCallback</span>(fn);</span><br></pre></td></tr></table></figure><blockquote><p>通过这个案例可以说明，函数参数可以接收父类，返回值可以返回子类</p></blockquote><p>逆变（在函数参数可以标记儿子传父亲）和协变（可以标记父亲返回儿子）</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Parent</span> &#123;</span><br><span class="line">  <span class="title function_">car</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Parent</span> &#123;</span><br><span class="line">  <span class="title function_">house</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Grandson</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Child</span> &#123;</span><br><span class="line">  <span class="title function_">sleep</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>安全性考虑</p><p>内部调用函数的时候 可以传递 Child 和 Grandson. 但是在使用属性时 只能认为最多就是child</p><p>函数的返回值, 需要返回子类，因为内部代码在访问属性的时候要保证可以访问到</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">callback: (ctr: Child) =&gt; Child</span>) &#123;</span><br><span class="line">  <span class="comment">// 我交给回调的有房、有车</span></span><br><span class="line">  <span class="keyword">let</span> r = <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Child</span>());</span><br><span class="line">  r.<span class="property">house</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn</span>((<span class="attr">child</span>: <span class="title class_">Parent</span>): <span class="function"><span class="params">Grandson</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Grandson</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Arg</span>&lt;T&gt; = <span class="function">(<span class="params">arg: T</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Return</span>&lt;T&gt; = <span class="function">(<span class="params">arg: <span class="built_in">any</span></span>) =&gt;</span> T;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ArgReturn</span> = <span class="title class_">Arg</span>&lt;<span class="title class_">Parent</span>&gt; <span class="keyword">extends</span> <span class="title class_">Arg</span>&lt;<span class="title class_">Child</span>&gt; ? <span class="literal">true</span> : <span class="literal">false</span>; <span class="comment">// 基于函数参数的逆变</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ReturnReturn</span> = <span class="title class_">Return</span>&lt;<span class="title class_">Grandson</span>&gt; <span class="keyword">extends</span> <span class="title class_">Return</span>&lt;<span class="title class_">Child</span>&gt; ? <span class="literal">true</span> : <span class="literal">false</span>; <span class="comment">// </span></span><br></pre></td></tr></table></figure><h4 id="逆变带来的问题"><a href="#逆变带来的问题" class="headerlink" title="逆变带来的问题"></a>逆变带来的问题</h4><p>(我们写业务的时候 还是要正常开启逆变）</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">MyArray</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="comment">//   concat: (...args: T[]) =&gt; T[];</span></span><br><span class="line">  <span class="title function_">concat</span>(...<span class="attr">args</span>: T[]): T[]; <span class="comment">// 这种写法不进行逆变检测，所有在描述对象中的方法时全部采用这种方式</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// parent: (...args: Parent[]) =&gt; Parent[];</span></span><br><span class="line"><span class="comment">// child:  (...args: Child[]) =&gt; Child[];</span></span><br><span class="line"><span class="comment">// 将child 赋予给parent   传父返儿子</span></span><br><span class="line"><span class="keyword">let</span> parentArr!: <span class="title class_">MyArray</span>&lt;<span class="title class_">Parent</span>&gt;;</span><br><span class="line"><span class="keyword">let</span> childArr!: <span class="title class_">MyArray</span>&lt;<span class="title class_">Child</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// chilldArr 能不能赋予给 parentArr</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// [&#123;car()&#123;&#125;&#125;] = [&#123;car()&#123;&#125;,house()&#123;&#125;&#125;]</span></span><br><span class="line"></span><br><span class="line">parentArr = childArr;</span><br><span class="line"><span class="comment">// childArr = parentArr;</span></span><br></pre></td></tr></table></figure><h1 id="3-类型保护"><a href="#3-类型保护" class="headerlink" title="3.类型保护"></a>3.类型保护</h1><p>通过判断识别所执行的代码块，自动识别变量属性和方法</p><blockquote><p>类型保护  基于js + ts （收窄）</p><p>ts很多情况下 需要使用联合类型, 默认情况下只能使用公共的方法，识别类型 （针对某个类型进行处理）</p><p>typeof(基础类型)  instanceof(类类型)  in(接口类型，可辨识类型)</p></blockquote><h2 id="typeof类型保护"><a href="#typeof类型保护" class="headerlink" title="typeof类型保护"></a><code>typeof</code>类型保护</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">double</span>(<span class="params">val: <span class="built_in">number</span> | <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> val === <span class="string">&#x27;number&#x27;</span>) &#123;</span><br><span class="line">        val</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        val</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">a: <span class="built_in">string</span> | <span class="built_in">number</span></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> a === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">    a; <span class="comment">// string</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    a; <span class="comment">// number</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> &#123;</span><br><span class="line">  <span class="title function_">cry</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">  <span class="title function_">eat</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getInstance</span>(<span class="params">clazz: &#123; <span class="keyword">new</span> (...args: <span class="built_in">any</span>[]): Cat | Dog &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title function_">clazz</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="instanceof类型保护"><a href="#instanceof类型保护" class="headerlink" title="instanceof类型保护"></a><code>instanceof</code>类型保护</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> &#123; &#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getInstance</span> = (<span class="params">clazz: &#123; <span class="keyword">new</span>(): Cat | Dog &#125;</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title function_">clazz</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> r = <span class="title function_">getInstance</span>(<span class="title class_">Cat</span>);</span><br><span class="line"><span class="keyword">if</span>(r <span class="keyword">instanceof</span> <span class="title class_">Cat</span>)&#123;</span><br><span class="line">    r</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    r</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> instance = <span class="title function_">getInstance</span>(<span class="title class_">Cat</span>);</span><br><span class="line"><span class="keyword">if</span> (instance <span class="keyword">instanceof</span> <span class="title class_">Cat</span>) &#123;</span><br><span class="line">  instance.<span class="property">cry</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  instance.<span class="property">eat</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="in类型保护"><a href="#in类型保护" class="headerlink" title="in类型保护"></a><code>in</code>类型保护</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Fish</span> &#123;</span><br><span class="line">    <span class="attr">swiming</span>: <span class="built_in">string</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Bird</span> &#123;</span><br><span class="line">    <span class="attr">fly</span>: <span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">leg</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getType</span>(<span class="params">animal: Fish | Bird</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="string">&#x27;swiming&#x27;</span> <span class="keyword">in</span> animal) &#123;</span><br><span class="line">        animal <span class="comment">// Fish</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        animal <span class="comment">// Bird</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>is 语法 ts语法  主要在辅助的方法中用的比较多</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Bird</span> &#123;</span><br><span class="line">  <span class="attr">kind</span>: <span class="string">&quot;鸟&quot;</span>;</span><br><span class="line">  <span class="attr">fly</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Fish</span> &#123;</span><br><span class="line">  <span class="attr">kind</span>: <span class="string">&quot;鱼&quot;</span>;</span><br><span class="line">  <span class="attr">swim</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isBird</span>(<span class="params">val: Bird | Fish</span>): val is <span class="title class_">Bird</span> &#123;</span><br><span class="line">  <span class="comment">// ts的返回值类型</span></span><br><span class="line">  <span class="comment">// 函数的名字 和返回值是无关的</span></span><br><span class="line">  <span class="comment">// true是bird 还是false 是bird</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;fly&quot;</span> <span class="keyword">in</span> val;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getAimal</span>(<span class="params">val: Bird | Fish</span>) &#123;</span><br><span class="line">  <span class="comment">// 基于差异化来辨别</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="title function_">isBird</span>(val)) &#123;</span><br><span class="line">    val;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    val;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="可辨识联合类型"><a href="#可辨识联合类型" class="headerlink" title="可辨识联合类型"></a>可辨识联合类型</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">WarningButton</span> &#123;</span><br><span class="line">    <span class="attr">class</span>: <span class="string">&#x27;warning&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">DangerButton</span> &#123;</span><br><span class="line">    <span class="attr">class</span>: <span class="string">&#x27;danger&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createButton</span>(<span class="params">button: WarningButton | DangerButton</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (button.<span class="property">class</span> == <span class="string">&#x27;warning&#x27;</span>) &#123;</span><br><span class="line">        button <span class="comment">// WarningButton</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        button <span class="comment">// DangerButton</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可辨识类型  通过in来实现</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">nterface <span class="title class_">Bird</span> &#123;</span><br><span class="line">  <span class="attr">kind</span>: <span class="string">&quot;鸟&quot;</span>;</span><br><span class="line">  <span class="attr">fly</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Fish</span> &#123;</span><br><span class="line">  <span class="attr">kind</span>: <span class="string">&quot;鱼&quot;</span>;</span><br><span class="line">  <span class="attr">swim</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getAimal</span>(<span class="params">val: Bird | Fish</span>) &#123;</span><br><span class="line">  <span class="comment">// 基于差异化来辨别</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="string">&quot;fly&quot;</span> <span class="keyword">in</span> val) &#123;</span><br><span class="line">    val;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    val;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (val.<span class="property">kind</span> == <span class="string">&quot;鸟&quot;</span>) &#123;</span><br><span class="line">    val.<span class="property">fly</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    val.<span class="property">swim</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过各种判断来缩小范围  生命周期 []</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> ensureArray&lt;T&gt;(<span class="attr">input</span>: T | T[]) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(input)) &#123;</span><br><span class="line">    <span class="keyword">return</span> input;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> [input];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> r1 = <span class="title function_">ensureArray</span>(<span class="string">&quot;abc&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> r2 = <span class="title function_">ensureArray</span>([<span class="string">&quot;abc&quot;</span>]);</span><br></pre></td></tr></table></figure><p>函数的嵌套不识别的问题  ? ! if 都有缩小范围的用途 (基于上下文类型的推导，会因为作用域的变化 而产生问题)</p><p> ! 一定存在的意思  ?取值</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">addType</span>(<span class="params">val?: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">  <span class="comment">// 断言就是自己说的算，出错了自己承担</span></span><br><span class="line">  val = val || <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"><span class="keyword">type</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">type</span> + (val <span class="keyword">as</span> <span class="built_in">number</span>).<span class="title function_">toFixed</span>(); <span class="comment">// ts 无法识别的时候 需要用断言</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">addType</span>(<span class="number">100</span>)(<span class="string">&quot;$&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="null保护"><a href="#null保护" class="headerlink" title="null保护"></a>null保护</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">addPrefix</span> = (<span class="params">num?: <span class="built_in">number</span></span>) =&gt; &#123;</span><br><span class="line">    num = num || <span class="number">1.1</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">prefix</span>(<span class="params">fix: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> fix + num?.<span class="title function_">toFixed</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">prefix</span>(<span class="string">&#x27;zf&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">addPrefix</span>());</span><br></pre></td></tr></table></figure><blockquote><p>这里要注意的是ts无法检测内部函数变量类型</p></blockquote><h3 id="自定义类型保护"><a href="#自定义类型保护" class="headerlink" title="自定义类型保护"></a>自定义类型保护</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Fish</span> &#123;</span><br><span class="line">    <span class="attr">swiming</span>: <span class="built_in">string</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Bird</span> &#123;</span><br><span class="line">    <span class="attr">fly</span>: <span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">leg</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isBird</span>(<span class="params">animal: Fish | Bird</span>):animal is <span class="title class_">Bird</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;swiming&#x27;</span> <span class="keyword">in</span> animal</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getAniaml</span> (<span class="attr">animal</span>:<span class="title class_">Fish</span> | <span class="title class_">Bird</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_">isBird</span>(animal))&#123;</span><br><span class="line">        animal</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        animal</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="完整性保护"><a href="#完整性保护" class="headerlink" title="完整性保护"></a>完整性保护</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">ICircle</span> &#123;</span><br><span class="line">    <span class="attr">kind</span>: <span class="string">&#x27;circle&#x27;</span>,</span><br><span class="line">    <span class="attr">r</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IRant</span> &#123;</span><br><span class="line">    <span class="attr">kind</span>: <span class="string">&#x27;rant&#x27;</span>,</span><br><span class="line">    <span class="attr">width</span>: <span class="built_in">number</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ISquare</span> &#123;</span><br><span class="line">    <span class="attr">kind</span>: <span class="string">&#x27;square&#x27;</span>,</span><br><span class="line">    <span class="attr">width</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Area</span> = <span class="title class_">ICircle</span> | <span class="title class_">IRant</span> | <span class="title class_">ISquare</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">isAssertion</span> = (<span class="params">obj: <span class="built_in">never</span></span>) =&gt; &#123; &#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getArea</span> = (<span class="params">obj: Area</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">switch</span> (obj.<span class="property">kind</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;circle&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">3.14</span> * obj.<span class="property">r</span> ** <span class="number">2</span></span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">isAssertion</span>(obj); <span class="comment">// 必须实现所有逻辑</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="4-交叉类型"><a href="#4-交叉类型" class="headerlink" title="4.交叉类型"></a>4.交叉类型</h1><p>交叉类型(Intersection Types)是将多个类型合并为一个类型</p><blockquote><p>联合类型（并集） ｜  按位或  交叉类型 （交集） &amp; 按位与 </p></blockquote><h3 id="交叉类型-Intersection-Types"><a href="#交叉类型-Intersection-Types" class="headerlink" title="交叉类型 (Intersection Types)"></a>交叉类型 (Intersection Types)</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Person1</span> &#123;</span><br><span class="line">    <span class="attr">handsome</span>: <span class="built_in">string</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Person2</span> &#123;</span><br><span class="line">    <span class="attr">high</span>: <span class="built_in">string</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">P1P2</span> = <span class="title class_">Person1</span> &amp; <span class="title class_">Person2</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">p</span>: <span class="variable constant_">P1P2</span> = &#123; <span class="attr">handsome</span>: <span class="string">&#x27;帅&#x27;</span>, <span class="attr">high</span>: <span class="string">&#x27;高&#x27;</span> &#125;</span><br></pre></td></tr></table></figure><blockquote><p>举例：我们提供两拨人，一拨人都很帅、另一拨人很高。我们希望找到他们的交叉部分 =&gt; 又高又帅的人</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> mixin&lt;T, K&gt;(<span class="attr">a</span>: T, <span class="attr">b</span>: K): T &amp; K &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; ...a, ...b &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> x = <span class="title function_">mixin</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;zf&#x27;</span> &#125;, &#123; <span class="attr">age</span>: <span class="number">11</span> &#125;)</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IPerson1</span> &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IPerson2</span> &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="built_in">number</span></span><br><span class="line">    <span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> person = <span class="title class_">IPerson1</span> &amp; <span class="title class_">IPerson2</span></span><br><span class="line"><span class="keyword">let</span> name!:<span class="built_in">never</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>:person = &#123;name,<span class="attr">age</span>:<span class="number">11</span>&#125;;  <span class="comment">// 两个属性之间 string &amp; number的值为never</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//--------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Person1</span> &#123;</span><br><span class="line">    <span class="attr">handsome</span>:<span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">gender</span>:<span class="built_in">number</span></span><br><span class="line">    <span class="attr">meta</span>:&#123;</span><br><span class="line">        <span class="attr">n</span>:<span class="built_in">number</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Person2</span> &#123;</span><br><span class="line">    <span class="attr">high</span>:<span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">gender</span>:<span class="built_in">string</span></span><br><span class="line">    <span class="attr">meta</span>:&#123;</span><br><span class="line">        <span class="attr">n</span>:<span class="built_in">string</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Person3</span> = <span class="title class_">Person1</span> &amp; <span class="title class_">Person2</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IGender</span> = <span class="title class_">Person3</span>[<span class="string">&#x27;meta&#x27;</span>][<span class="string">&#x27;n&#x27;</span>]; <span class="comment">// 如果两个类型不相同没有交集 &amp;集后的结果是never</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">person</span>:<span class="title class_">Person1</span> | <span class="title class_">Person2</span> = &#123;</span><br><span class="line">    <span class="attr">high</span>:<span class="string">&#x27;高&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 交叉类型 同时是两个类型的子类型， 最终的结果可以赋予给任何的一个类型</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>:<span class="title class_">Person1</span> &amp; <span class="title class_">Person2</span> = &#123;</span><br><span class="line">     <span class="attr">handsome</span>:<span class="string">&#x27;帅&#x27;</span>,</span><br><span class="line">     <span class="attr">high</span>:<span class="string">&#x27;高&#x27;</span>,</span><br><span class="line"> &#125;</span><br><span class="line"><span class="comment">// 子类型可以赋予给 父类型 （子类型的结构要包含父类型的结构）</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person1</span>:<span class="title class_">Person1</span> =person</span><br><span class="line"><span class="keyword">let</span> <span class="attr">person2</span>:<span class="title class_">Person2</span> =person</span><br></pre></td></tr></table></figure><h3 id="快速扩展属性"><a href="#快速扩展属性" class="headerlink" title="快速扩展属性"></a>快速扩展属性</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;<span class="attr">name</span>:<span class="string">&#x27;jw&#x27;</span>,<span class="attr">age</span>:<span class="number">30</span>&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>:&#123;<span class="attr">name</span>:<span class="built_in">string</span>,<span class="attr">age</span>:<span class="built_in">number</span>,<span class="attr">address</span>:<span class="built_in">string</span>&#125; = obj <span class="keyword">as</span> <span class="keyword">typeof</span> obj &amp; &#123;<span class="attr">address</span>:<span class="built_in">string</span>&#125;</span><br><span class="line"><span class="keyword">function</span> merge&lt;T <span class="keyword">extends</span> <span class="built_in">object</span> , K <span class="keyword">extends</span> <span class="built_in">object</span>&gt;(<span class="attr">o1</span>:T,<span class="attr">o2</span>:K)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;...o1,...o2&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> result = <span class="title function_">merge</span>(&#123;<span class="attr">name</span>:<span class="string">&#x27;abc&#x27;</span>&#125;,&#123;<span class="attr">name</span>:<span class="number">123</span>&#125;)</span><br><span class="line"><span class="comment">// result.name</span></span><br></pre></td></tr></table></figure><blockquote><p>交叉类型和联合类型的区别， 平时我门使用的交叉类型场景还是很多的</p></blockquote><h1 id="5-条件类型"><a href="#5-条件类型" class="headerlink" title="5.条件类型"></a>5.条件类型</h1><blockquote><p>条件类型  if / else 三元表达式  (extends 左边 和 右边的关系)</p></blockquote><h3 id="条件类型基本使用"><a href="#条件类型基本使用" class="headerlink" title="条件类型基本使用"></a>条件类型基本使用</h3><p>可以使用<code>extends</code>关键字和三元表达式，实现条件判断</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Fish</span> &#123;</span><br><span class="line">    <span class="attr">name1</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Water</span> &#123;</span><br><span class="line">    <span class="attr">name2</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Bird</span> &#123;</span><br><span class="line">    <span class="attr">name3</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Sky</span> &#123;</span><br><span class="line">    <span class="attr">name4</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Condition</span>&lt;T&gt; = T <span class="keyword">extends</span> <span class="title class_">Fish</span> ? <span class="title class_">Water</span> : <span class="title class_">Sky</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">con1</span>: <span class="title class_">Condition</span>&lt;<span class="title class_">Fish</span>&gt; = &#123; <span class="attr">name2</span>: <span class="string">&#x27;水&#x27;</span> &#125;</span><br></pre></td></tr></table></figure><p>子类型 extends 父类型 = true</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">StatusCode</span>&lt;T&gt; = T <span class="keyword">extends</span> <span class="number">200</span> | <span class="number">201</span> | <span class="number">204</span> | <span class="number">304</span> ? <span class="string">&quot;success&quot;</span> : <span class="string">&quot;fail&quot;</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IReturnMessage</span> = <span class="title class_">StatusCode</span>&lt;<span class="number">200</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IObj</span>&lt;T&gt; = T <span class="keyword">extends</span> &#123; <span class="attr">name</span>: <span class="string">&quot;jw&quot;</span> &#125; ? <span class="string">&quot;ok&quot;</span> : <span class="string">&quot;no ok&quot;</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IPerson</span> = <span class="title class_">IObj</span>&lt;&#123; <span class="attr">name</span>: <span class="string">&quot;jw&quot;</span>; <span class="attr">age</span>: <span class="number">30</span> &#125;&gt;;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IPerson1</span> = <span class="title class_">IObj</span>&lt;&#123;&#125;&gt;;</span><br></pre></td></tr></table></figure><p>类型级别 1) 根据结构的角度来分析  2) 从类型角度来进行分析</p><blockquote><p>never 是任何类型的子类型</p><p>字面量类型</p><p> 基础类型</p><p>包装的类型</p><p> any unknown</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = <span class="built_in">never</span> <span class="keyword">extends</span> <span class="string">&quot;str&quot;</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T2</span> = <span class="string">&quot;str&quot;</span> <span class="keyword">extends</span> <span class="built_in">string</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T3</span> = <span class="built_in">string</span> <span class="keyword">extends</span> <span class="title class_">String</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br></pre></td></tr></table></figure><p>{} object Object  {} 和 object 可以看成字面量类型</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Temp1</span> = &#123;&#125; <span class="keyword">extends</span> <span class="built_in">object</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Temp2</span> = <span class="built_in">object</span> <span class="keyword">extends</span> &#123;&#125; ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Temp3</span> = <span class="built_in">object</span> <span class="keyword">extends</span> <span class="title class_">Object</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Temp4</span> = <span class="title class_">Object</span> <span class="keyword">extends</span> <span class="built_in">object</span> ? <span class="literal">true</span> : <span class="literal">false</span>; <span class="comment">// 因为从结构角度出发</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Temp5</span> = <span class="title class_">Object</span> <span class="keyword">extends</span> &#123;&#125; ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Temp6</span> = <span class="built_in">object</span> <span class="keyword">extends</span> &#123;&#125; ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br></pre></td></tr></table></figure><p>{}  object 可以看成结构， 和类型两部分</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="variable constant_">T4</span> = <span class="built_in">string</span> <span class="keyword">extends</span> <span class="built_in">object</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T5</span> = <span class="built_in">string</span> <span class="keyword">extends</span> <span class="built_in">any</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T6</span> = <span class="built_in">string</span> <span class="keyword">extends</span> <span class="built_in">unknown</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T7</span> = <span class="built_in">any</span> <span class="keyword">extends</span> <span class="built_in">unknown</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T8</span> = <span class="built_in">unknown</span> <span class="keyword">extends</span> <span class="built_in">any</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T9</span> = <span class="built_in">any</span> <span class="keyword">extends</span> <span class="number">1</span> ? <span class="literal">true</span> : <span class="literal">false</span>; <span class="comment">// (条件类型 是有分发机制) 1 + 除了1的部分  true ｜ false</span></span><br></pre></td></tr></table></figure><h3 id="条件类型分发"><a href="#条件类型分发" class="headerlink" title="条件类型分发"></a>条件类型分发</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">con2</span>: <span class="title class_">Condition</span>&lt;<span class="title class_">Fish</span>|<span class="title class_">Bird</span>&gt; = &#123; <span class="attr">name2</span>: <span class="string">&#x27;水&#x27;</span> &#125; </span><br></pre></td></tr></table></figure><blockquote><p>这里会用每一项依次进行分发,最终采用联合类型作为结果,等价于:</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> c1 = <span class="title class_">Condition</span>&lt;<span class="title class_">Fish</span>&gt;;</span><br><span class="line"><span class="keyword">type</span> c2 = <span class="title class_">Condition</span>&lt;<span class="title class_">Bird</span>&gt;;</span><br><span class="line"><span class="keyword">type</span> c = c1 | c2</span><br></pre></td></tr></table></figure><h5 id="any自带分发的机制"><a href="#any自带分发的机制" class="headerlink" title="any自带分发的机制"></a>any自带分发的机制</h5><p>never 如果通过泛型传入，此时只会返回never</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="variable constant_">T10</span>&lt;T&gt; = T <span class="keyword">extends</span> <span class="built_in">string</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Temp7</span> = <span class="variable constant_">T10</span>&lt;<span class="built_in">never</span>&gt;;</span><br></pre></td></tr></table></figure><h5 id="联合类型的子类型-是联合类型中的某个类型"><a href="#联合类型的子类型-是联合类型中的某个类型" class="headerlink" title="联合类型的子类型 是联合类型中的某个类型"></a>联合类型的子类型 是联合类型中的某个类型</h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="variable constant_">T11</span> = <span class="number">100</span> <span class="keyword">extends</span> <span class="number">100</span> | <span class="number">200</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br></pre></td></tr></table></figure><p>通过条件类型 来进行类型的区分，条件语句也可以实现约束的效果</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Fish</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;鱼&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Bird</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;鸟&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Water</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;水&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Sky</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;天&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="T-amp-就可以解决分发问题"><a href="#T-amp-就可以解决分发问题" class="headerlink" title="T &amp; {} 就可以解决分发问题"></a><code>T &amp; &#123;&#125;</code> 就可以解决分发问题</h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">GetType</span>&lt;T <span class="keyword">extends</span> <span class="title class_">Fish</span> | <span class="title class_">Bird</span>&gt; = T &amp; &#123;&#125; <span class="keyword">extends</span> <span class="title class_">Fish</span> ? <span class="title class_">Water</span> : <span class="title class_">Sky</span>;</span><br></pre></td></tr></table></figure><blockquote><p>分发导致的问题： 什么时候会有分发</p><p>1.联合类型通过泛型传递</p><p>2.而且比较(extends)的时候会产生分发</p><p>3.类型需要是裸类型 (裸类型就是泛型 就自己没有和别人搭配)</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="variable constant_">A1</span> = <span class="title class_">GetType</span>&lt;<span class="title class_">Fish</span> | <span class="title class_">Bird</span>&gt;;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">NoDistribute</span>&lt;T&gt; = T &amp; &#123;&#125;;</span><br></pre></td></tr></table></figure><p>分发机制有的场景需要，有的场景需要禁用， 不能一概而论。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">UnionAssets</span>&lt;T, K&gt; = <span class="title class_">NoDistribute</span>&lt;T&gt; <span class="keyword">extends</span> K ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">U1</span> = <span class="title class_">UnionAssets</span>&lt;<span class="number">1</span> | <span class="number">2</span>, <span class="number">1</span> | <span class="number">2</span> | <span class="number">3</span>&gt;;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">U2</span> = <span class="title class_">UnionAssets</span>&lt;<span class="number">1</span> | <span class="number">2</span> | <span class="number">3</span>, <span class="number">1</span> | <span class="number">2</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断两个类型是否完全一致 ？   1|2    1|2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> isEqual&lt;T, K, S, F&gt; = <span class="title class_">NoDistribute</span>&lt;T&gt; <span class="keyword">extends</span> K</span><br><span class="line">  ? <span class="title class_">NoDistribute</span>&lt;K&gt; <span class="keyword">extends</span> T</span><br><span class="line">    ? S</span><br><span class="line">    : F</span><br><span class="line">  : F;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">A2</span> = isEqual&lt;<span class="number">1</span> | <span class="number">2</span>, <span class="number">1</span> | <span class="number">2</span>, <span class="literal">true</span>, <span class="literal">false</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">FormatVal</span>&lt;T&gt; = T <span class="keyword">extends</span> <span class="built_in">string</span></span><br><span class="line">  ? <span class="built_in">string</span></span><br><span class="line">  : T <span class="keyword">extends</span> <span class="built_in">number</span></span><br><span class="line">  ? <span class="built_in">number</span></span><br><span class="line">  : <span class="built_in">never</span>;</span><br></pre></td></tr></table></figure><p>映射关系 可以考虑用泛型，参数个数不一致，类型和入参数无法，考虑重载</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> sum&lt;T <span class="keyword">extends</span> <span class="built_in">string</span> | <span class="built_in">number</span>&gt;(<span class="attr">a</span>: T, <span class="attr">b</span>: T): <span class="title class_">FormatVal</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> a + (b <span class="keyword">as</span> <span class="built_in">any</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> r = <span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure><h1 id="6-内置类型"><a href="#6-内置类型" class="headerlink" title="6.内置类型"></a>6.内置类型</h1><h3 id="Exclude排除类型"><a href="#Exclude排除类型" class="headerlink" title="Exclude排除类型"></a><code>Exclude</code>排除类型</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Exclude</span>&lt;T, U&gt; = T <span class="keyword">extends</span> U ? <span class="built_in">never</span> : T;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">MyExclude</span> = <span class="title class_">Exclude</span>&lt;<span class="string">&#x27;1&#x27;</span> | <span class="string">&#x27;2&#x27;</span> | <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;1&#x27;</span> | <span class="string">&#x27;2&#x27;</span>&gt; <span class="comment">// 3</span></span><br></pre></td></tr></table></figure><h3 id="Extract抽取类型"><a href="#Extract抽取类型" class="headerlink" title="Extract抽取类型"></a><code>Extract</code>抽取类型</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Extract</span>&lt;T, U&gt; = T <span class="keyword">extends</span> U ? T : <span class="built_in">never</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">MyExtract</span> = <span class="title class_">Extract</span>&lt;<span class="string">&#x27;1&#x27;</span> | <span class="string">&#x27;2&#x27;</span> | <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;1&#x27;</span> | <span class="string">&#x27;2&#x27;</span>&gt; <span class="comment">// 12</span></span><br></pre></td></tr></table></figure><h3 id="NoNullable-非空检测"><a href="#NoNullable-非空检测" class="headerlink" title="NoNullable 非空检测"></a><code>NoNullable</code> 非空检测</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">NonNullable</span>&lt;T&gt; = T <span class="keyword">extends</span> <span class="literal">null</span> | <span class="literal">undefined</span> ? <span class="built_in">never</span> : T</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">MyNone</span> = <span class="title class_">NonNullable</span>&lt;<span class="string">&#x27;a&#x27;</span> | <span class="literal">null</span> | <span class="literal">undefined</span>&gt; <span class="comment">// a</span></span><br></pre></td></tr></table></figure><h3 id="ReturnType返回值的类型"><a href="#ReturnType返回值的类型" class="headerlink" title="ReturnType返回值的类型"></a><code>ReturnType</code>返回值的类型</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getUser</span>(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">name</span>: <span class="string">&#x27;zf&#x27;</span>, <span class="attr">age</span>: <span class="number">10</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ReturnType</span>&lt;T&gt; = T <span class="keyword">extends</span> (...<span class="attr">args</span>: <span class="built_in">any</span>) =&gt; infer R ? R : <span class="built_in">never</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">MyReturn</span> = <span class="title class_">ReturnType</span>&lt;<span class="keyword">typeof</span> getUser&gt; <span class="comment">// type MyReturn = &#123;name: string;age: number;&#125;</span></span><br></pre></td></tr></table></figure><h3 id="Parameters-返回参数的类型"><a href="#Parameters-返回参数的类型" class="headerlink" title="Parameters 返回参数的类型"></a><code>Parameters</code> 返回参数的类型</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Parameters</span>&lt;T&gt; = T <span class="keyword">extends</span> (...<span class="attr">args</span>: infer R) =&gt; <span class="built_in">any</span> ? R : <span class="built_in">any</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">MyParams</span> = <span class="title class_">Parameters</span>&lt;<span class="keyword">typeof</span> getUser&gt;; <span class="comment">// type MyParams = [a: number, b: number]</span></span><br></pre></td></tr></table></figure><h3 id="ConstructorParameters返回构造函数的参数类型"><a href="#ConstructorParameters返回构造函数的参数类型" class="headerlink" title="ConstructorParameters返回构造函数的参数类型"></a><code>ConstructorParameters</code>返回构造函数的参数类型</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span>, age: <span class="built_in">number</span></span>) &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ConstructorParameters</span>&lt;T&gt; = T <span class="keyword">extends</span> &#123; <span class="title function_">new</span>(...<span class="attr">args</span>: infer R): <span class="built_in">any</span> &#125; ? R : <span class="built_in">never</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">MyConstructor</span> = <span class="title class_">ConstructorParameters</span>&lt;<span class="keyword">typeof</span> <span class="title class_">Person</span>&gt; <span class="comment">// type MyConstructor = [name: string, age: number]</span></span><br></pre></td></tr></table></figure><h3 id="InstanceType-返回实例的类型"><a href="#InstanceType-返回实例的类型" class="headerlink" title="InstanceType 返回实例的类型"></a><code>InstanceType</code> 返回实例的类型</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">InstanceType</span>&lt;T&gt; = T <span class="keyword">extends</span> &#123; <span class="title function_">new</span>(...<span class="attr">args</span>: <span class="built_in">any</span>): infer R &#125; ? R : <span class="built_in">any</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">MyInstance</span> = <span class="title class_">InstanceType</span>&lt;<span class="keyword">typeof</span> <span class="title class_">Person</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="infer实践"><a href="#infer实践" class="headerlink" title="infer实践"></a>infer实践</h3><p>将数组类型转化为联合类型</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">ElementOf</span>&lt;T&gt; = T <span class="keyword">extends</span> <span class="title class_">Array</span>&lt;infer E&gt; ? E : <span class="built_in">never</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">TupleToUnion</span> = <span class="title class_">ElementOf</span>&lt;[<span class="built_in">string</span>, <span class="built_in">number</span>, <span class="built_in">boolean</span>]&gt;;</span><br></pre></td></tr></table></figure><p>将两个函数的参数转化为交叉类型</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = &#123; <span class="attr">name</span>: <span class="built_in">string</span> &#125;;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T2</span> = &#123; <span class="attr">age</span>: <span class="built_in">number</span> &#125;;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ToIntersection</span>&lt;T&gt; = T <span class="keyword">extends</span> ([<span class="function">(<span class="params">x: infer U</span>) =&gt;</span> <span class="built_in">any</span>, <span class="function">(<span class="params">x: infer U</span>) =&gt;</span> <span class="built_in">any</span>]) ? U : <span class="built_in">never</span>;</span><br><span class="line"><span class="keyword">type</span> t3 = <span class="title class_">ToIntersection</span>&lt;[<span class="function">(<span class="params">x:T1</span>)=&gt;</span><span class="built_in">any</span>,<span class="function">(<span class="params">x:T2</span>)=&gt;</span><span class="built_in">any</span>]&gt;</span><br></pre></td></tr></table></figure><blockquote><p>表示要把<code>T1</code>、<code>T2</code>赋予给x，那么x的值就是<code>T1</code>、<code>T2</code>的交集。（参数是逆变的可以传父类）</p><p>TS的类型：TS主要是为了代码的安全性来考虑。所以所有的兼容性问题都要从安全性来考虑!</p></blockquote><h3 id="Partial转化可选属性"><a href="#Partial转化可选属性" class="headerlink" title="Partial转化可选属性"></a>Partial转化可选属性</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Company</span> &#123;</span><br><span class="line">    <span class="attr">num</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">company</span>: <span class="title class_">Company</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// type Partial&lt;T&gt; = &#123; [K in keyof T]?: T[K] &#125;; 实现原理</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PartialPerson</span> = <span class="title class_">Partial</span>&lt;<span class="title class_">Person</span>&gt;;</span><br></pre></td></tr></table></figure><blockquote><p>遍历所有的属性将属性设置为可选属性,但是无法实现深度转化!</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">DeepPartial</span>&lt;T&gt; = &#123;</span><br><span class="line">    [K <span class="keyword">in</span> keyof T]?: T[K] <span class="keyword">extends</span> <span class="built_in">object</span> ? <span class="title class_">DeepPartial</span>&lt;T[K]&gt; : T[K]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">DeepPartialPerson</span> = <span class="title class_">DeepPartial</span>&lt;<span class="title class_">Person</span>&gt;;</span><br></pre></td></tr></table></figure><blockquote><p>我们可以实现深度转化,如果值是对象继续深度转化。</p></blockquote><h3 id="Required转化必填属性"><a href="#Required转化必填属性" class="headerlink" title="Required转化必填属性"></a>Required转化必填属性</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Company</span> &#123;</span><br><span class="line">    <span class="attr">num</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">company</span>: <span class="title class_">Company</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PartialPerson</span> = <span class="title class_">Partial</span>&lt;<span class="title class_">Person</span>&gt;;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Required</span>&lt;T&gt; = &#123;[K <span class="keyword">in</span> keyof T]-?:T[K]&#125; </span><br><span class="line"><span class="keyword">type</span> <span class="title class_">RequiredPerson</span> = <span class="title class_">Required</span>&lt;<span class="title class_">PartialPerson</span>&gt;</span><br></pre></td></tr></table></figure><blockquote><p>将所有的属性转化成必填属性</p></blockquote><h3 id="Readonly转化仅读属性"><a href="#Readonly转化仅读属性" class="headerlink" title="Readonly转化仅读属性"></a>Readonly转化仅读属性</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Readonly</span>&lt;T&gt; = &#123; <span class="keyword">readonly</span> [K <span class="keyword">in</span> keyof T]: T[K] &#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">RequiredPerson</span> = <span class="title class_">Readonly</span>&lt;<span class="title class_">Person</span>&gt;</span><br></pre></td></tr></table></figure><blockquote><p>将所有属性变为仅读状态</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">IPerson</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">company</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Readonly</span>&lt;T&gt; = &#123;</span><br><span class="line">  +<span class="keyword">readonly</span> [K <span class="keyword">in</span> keyof T]: T[K];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ReadonlyRes</span> = <span class="title class_">Readonly</span>&lt;<span class="title class_">IPerson</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不能修改就是readonly ， 却掉readonly</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Mutate</span>&lt;T&gt; = &#123;</span><br><span class="line">  -<span class="keyword">readonly</span> [K <span class="keyword">in</span> keyof T]: T[K];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">MutateRes</span> = <span class="title class_">Mutate</span>&lt;<span class="title class_">ReadonlyRes</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// -? +?   -readonly +readonly</span></span><br></pre></td></tr></table></figure><h3 id="Pick挑选所需的属性"><a href="#Pick挑选所需的属性" class="headerlink" title="Pick挑选所需的属性"></a>Pick挑选所需的属性</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Pick</span>&lt;T, U <span class="keyword">extends</span> keyof T&gt; = &#123; [P <span class="keyword">in</span> U]: T[P] &#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PickPerson</span> = <span class="title class_">Pick</span>&lt;<span class="title class_">Person</span>, <span class="string">&#x27;name&#x27;</span> | <span class="string">&#x27;age&#x27;</span>&gt;</span><br></pre></td></tr></table></figure><blockquote><p>在已有类型中挑选所需属性</p></blockquote><h3 id="Omit忽略属性"><a href="#Omit忽略属性" class="headerlink" title="Omit忽略属性"></a>Omit忽略属性</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;zhufeng&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">11</span>,</span><br><span class="line">    <span class="attr">address</span>: <span class="string">&#x27;回龙观&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Omit</span>&lt;T, K <span class="keyword">extends</span> keyof T&gt; = <span class="title class_">Pick</span>&lt;T, <span class="title class_">Exclude</span>&lt;keyof T, K&gt;&gt;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">OmitAddress</span> = <span class="title class_">Omit</span>&lt;<span class="keyword">typeof</span> person, <span class="string">&#x27;address&#x27;</span>&gt;</span><br></pre></td></tr></table></figure><blockquote><p>忽略person中的address属性 (先排除掉不需要的key，在通过key选出需要的属性)</p></blockquote><p>Omit Pick 对象来操作的</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">IPerson</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">company</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Pick</span>&lt;T, K <span class="keyword">extends</span> keyof T&gt; = &#123;</span><br><span class="line">  [key <span class="keyword">in</span> K]: T[key];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PickRes</span> = <span class="title class_">Pick</span>&lt;<span class="title class_">IPerson</span>, <span class="string">&quot;company&quot;</span> | <span class="string">&quot;age&quot;</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Omit</span>&lt;T, K <span class="keyword">extends</span> keyof <span class="built_in">any</span>&gt; = <span class="title class_">Pick</span>&lt;T, <span class="title class_">Exclude</span>&lt;keyof T, K&gt;&gt;;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">OmitRes</span> = <span class="title class_">Omit</span>&lt;<span class="title class_">IPerson</span>, <span class="string">&quot;name&quot;</span> | <span class="string">&quot;age&quot;</span>&gt;;</span><br></pre></td></tr></table></figure><blockquote><p>Pick和Omit用的比较多</p></blockquote><h3 id="Record记录类型"><a href="#Record记录类型" class="headerlink" title="Record记录类型"></a>Record记录类型</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Record</span>&lt;K <span class="keyword">extends</span> keyof <span class="built_in">any</span>, T&gt; = &#123; [P <span class="keyword">in</span> K]  : T &#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">any</span>&gt; = &#123; <span class="attr">name</span>: <span class="string">&#x27;zf&#x27;</span>, <span class="attr">age</span>: <span class="number">11</span> &#125;;</span><br></pre></td></tr></table></figure><p>实现map方法，我们经常用record类型表示映射类型</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> map&lt;T <span class="keyword">extends</span> keyof <span class="built_in">any</span>, K, U&gt;(<span class="attr">obj</span>: <span class="title class_">Record</span>&lt;T, K&gt;, <span class="attr">callback</span>: <span class="function">(<span class="params">item: K, key: T</span>) =&gt;</span> U) &#123;</span><br><span class="line">    <span class="keyword">let</span> result = &#123;&#125; <span class="keyword">as</span> <span class="title class_">Record</span>&lt;T, U&gt;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">        result[key] = <span class="title function_">callback</span>(obj[key], key)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> r = <span class="title function_">map</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;zf&#x27;</span>, <span class="attr">age</span>: <span class="number">11</span> &#125;, <span class="function">(<span class="params">item, key</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> item</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>推导出类型  (根据泛型的位置 来推导具体的类型)</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> map&lt;T <span class="keyword">extends</span> keyof <span class="built_in">any</span>, K, R&gt;(</span><br><span class="line">  <span class="attr">obj</span>: <span class="title class_">Record</span>&lt;T, K&gt;,</span><br><span class="line">  <span class="attr">callback</span>: <span class="function">(<span class="params">value: K, key: T</span>) =&gt;</span> R</span><br><span class="line">) &#123;</span><br><span class="line">  <span class="keyword">let</span> result = &#123;&#125; <span class="keyword">as</span> <span class="title class_">Record</span>&lt;T, R&gt;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    result[key] = <span class="title function_">callback</span>(obj[key], key);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">map</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;jw&quot;</span>, <span class="attr">age</span>: <span class="number">30</span> &#125;, <span class="function">(<span class="params">value, key</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>infer  inference 手动类型推导</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getPerson</span>(<span class="params">a: <span class="built_in">string</span>, b: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">name</span>: <span class="string">&quot;jw&quot;</span>, <span class="attr">age</span>: <span class="number">30</span> &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>类型推断 ， 因为infer 需要extends 关键字， 所以必须构建一个条件</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">ReturnType</span>&lt;T <span class="keyword">extends</span> (...<span class="attr">args</span>: <span class="built_in">any</span>[]) =&gt; <span class="built_in">any</span>&gt; = T <span class="keyword">extends</span> (</span><br><span class="line">   ...<span class="attr">args</span>: <span class="built_in">any</span>[]</span><br><span class="line"> ) =&gt; infer R</span><br><span class="line">   ? R</span><br><span class="line">   : <span class="built_in">never</span>;</span><br></pre></td></tr></table></figure><p>infer 关键字需要基于extends</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">FnReturnType</span> = <span class="title class_">ReturnType</span>&lt;<span class="keyword">typeof</span> getPerson&gt;;</span><br><span class="line"><span class="comment">// type Parameters&lt;T extends (...args: any[]) =&gt; any&gt; = T extends (</span></span><br><span class="line"><span class="comment">//   ...args: infer P</span></span><br><span class="line"><span class="comment">// ) =&gt; any</span></span><br><span class="line"><span class="comment">//   ? P</span></span><br><span class="line"><span class="comment">//   : false;</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">FnParamaters</span> = <span class="title class_">Parameters</span>&lt;<span class="keyword">typeof</span> getPerson&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">a: <span class="built_in">string</span>, b: <span class="built_in">string</span></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// type ConstructorParameters&lt;T extends &#123; new (...args: any[]): any &#125;&gt; =</span></span><br><span class="line"><span class="comment">//   T extends &#123; new (...args: infer P): any &#125; ? P : any;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ClassConstructorParameters</span> = <span class="title class_">ConstructorParameters</span>&lt;<span class="keyword">typeof</span> <span class="title class_">Person</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// type InstanceType&lt;T extends &#123; new (...args: any[]): any &#125;&gt; = T extends &#123;</span></span><br><span class="line"><span class="comment">//   new (...args: any[]): infer R;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">//   ? R</span></span><br><span class="line"><span class="comment">//   : any;</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ClassInstanceType</span> = <span class="title class_">InstanceType</span>&lt;<span class="keyword">typeof</span> <span class="title class_">Person</span>&gt;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>如何讲一个元组转化成联合和类型</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">ITumple</span> = [<span class="built_in">string</span>, <span class="built_in">number</span>, <span class="built_in">boolean</span>]; <span class="comment">// string | number | boolean</span></span><br><span class="line"><span class="comment">// type TumpleToUniom = ITumple[number];</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ElementOf</span>&lt;T <span class="keyword">extends</span> <span class="built_in">any</span>[]&gt; = T <span class="keyword">extends</span> <span class="title class_">Array</span>&lt;infer R&gt; ? R : <span class="built_in">never</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">TumpleToUniom</span> = <span class="title class_">ElementOf</span>&lt;<span class="title class_">ITumple</span>&gt;;</span><br></pre></td></tr></table></figure><p>对元组进行参数移动， 将元组头尾进行交换 . infer 要配合 extends</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">SwapHeadTail</span>&lt;T <span class="keyword">extends</span> <span class="built_in">any</span>[]&gt; = T <span class="keyword">extends</span> [</span><br><span class="line">  infer <span class="title class_">Head</span>,</span><br><span class="line">  ...infer <span class="title class_">Body</span>,</span><br><span class="line">  infer <span class="title class_">Tail</span></span><br><span class="line">]</span><br><span class="line">  ? [<span class="title class_">Tail</span>, ...<span class="title class_">Body</span>, <span class="title class_">Head</span>]</span><br><span class="line">  : <span class="built_in">never</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Res</span> = <span class="title class_">SwapHeadTail</span>&lt;[<span class="string">&quot;jw&quot;</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">30</span>]&gt;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>infer 可以递归推断</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// function getVal(): Promise&lt;Promise&lt;200&gt;&gt; &#123;</span></span><br><span class="line"><span class="comment">//   return new Promise((resolve, reject) =&gt; &#123;</span></span><br><span class="line"><span class="comment">//     resolve(</span></span><br><span class="line"><span class="comment">//       new Promise((resolve, reject) =&gt; &#123;</span></span><br><span class="line"><span class="comment">//         resolve(200);</span></span><br><span class="line"><span class="comment">//       &#125;) as Promise&lt;200&gt;</span></span><br><span class="line"><span class="comment">//     );</span></span><br><span class="line"><span class="comment">//   &#125;);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PromiseVal</span>&lt;T&gt; = T <span class="keyword">extends</span> <span class="title class_">Promise</span>&lt;infer R&gt; ? <span class="title class_">PromiseVal</span>&lt;R&gt; : T;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PromiseReturnVal</span> = <span class="title class_">PromiseVal</span>&lt;<span class="title class_">Promise</span>&lt;<span class="title class_">Promise</span>&lt;<span class="number">200</span>&gt;&gt;&gt;;</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">class</span> <span class="title class_">Cat</span> &#123;</span><br><span class="line">   <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> name: <span class="built_in">string</span></span>) &#123;&#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> name: <span class="built_in">string</span></span>) &#123;&#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">function</span> createInstance&lt;T <span class="keyword">extends</span> &#123; <span class="keyword">new</span> (...<span class="attr">args</span>: <span class="built_in">any</span>[]): <span class="built_in">any</span> &#125;&gt;(</span><br><span class="line">  <span class="attr">clazz</span>: T,</span><br><span class="line">   <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line"> ): <span class="title class_">InstanceType</span>&lt;T&gt; &#123;</span><br><span class="line">   <span class="keyword">let</span> r = <span class="keyword">new</span> <span class="title function_">clazz</span>(name);</span><br><span class="line">   <span class="keyword">return</span> r;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="keyword">const</span> instance = <span class="title function_">createInstance</span>(<span class="title class_">Dog</span>, <span class="string">&quot;tom&quot;</span>);</span><br></pre></td></tr></table></figure><h1 id="7-循环类型"><a href="#7-循环类型" class="headerlink" title="7.循环类型"></a>7.循环类型</h1><blockquote><p>Extract Exclude , NonNullable…</p><p>除了基于条件类型之外，我门还有基于对象类型</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Person1</span> &#123;</span><br><span class="line">  <span class="attr">handsome</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Person2</span> &#123;</span><br><span class="line">  <span class="attr">high</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// for(let key in Object.keys(T) ) &#123; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IKeys1</span> = keyof <span class="built_in">any</span>; <span class="comment">// string | number | symbol  使用场景比较多</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IKeys2</span> = keyof <span class="built_in">unknown</span>; <span class="comment">//  never</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Compute</span>&lt;T <span class="keyword">extends</span> <span class="built_in">object</span>&gt; = &#123;</span><br><span class="line">  [xxxxxxxxx <span class="keyword">in</span> keyof T]: T[xxxxxxxxx];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Person3</span> = <span class="title class_">Compute</span>&lt;<span class="title class_">Person1</span> &amp; <span class="title class_">Person2</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// partial required pick omit.... 内置类型</span></span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IPerson</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ICompany</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">address</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">person</span>: <span class="title class_">IPerson</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Partial</span>&lt;T&gt; = &#123;</span><br><span class="line">  [key <span class="keyword">in</span> keyof T]?: T[key];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">DeepPartial</span>&lt;T&gt; = &#123;</span><br><span class="line">  <span class="comment">// 递归的深度可选</span></span><br><span class="line">  [key <span class="keyword">in</span> keyof T]?: T[key] <span class="keyword">extends</span> <span class="built_in">object</span> ? <span class="title class_">DeepPartial</span>&lt;T[key]&gt; : T[key];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PartialRes1</span> = <span class="title class_">DeepPartial</span>&lt;<span class="title class_">ICompany</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Required</span>&lt;T&gt; = &#123;</span><br><span class="line">  [key <span class="keyword">in</span> keyof T]-?: T[key];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">DeepRequired</span>&lt;T&gt; = &#123;</span><br><span class="line">  <span class="comment">// 递归的深度可选</span></span><br><span class="line">  [key <span class="keyword">in</span> keyof T]-?: T[key] &amp; &#123;&#125; <span class="keyword">extends</span> <span class="built_in">object</span></span><br><span class="line">    ? <span class="title class_">DeepRequired</span>&lt;T[key]&gt;</span><br><span class="line">    : T[key];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PartialRes2</span> = <span class="title class_">DeepRequired</span>&lt;<span class="title class_">PartialRes1</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">company</span>: <span class="title class_">PartialRes2</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;string&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">10</span>,</span><br><span class="line">  <span class="attr">address</span>: <span class="string">&quot;string&quot;</span>,</span><br><span class="line">  <span class="attr">person</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;jw&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">30</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">TypeScript的学习笔记和总结</summary>
    
    
    
    <category term="前端" scheme="https://tom9527c.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="前端" scheme="https://tom9527c.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="TypeScript" scheme="https://tom9527c.github.io/tags/TypeScript/"/>
    
    <category term="笔记" scheme="https://tom9527c.github.io/tags/%E7%AC%94%E8%AE%B0/"/>
    
    <category term="练习" scheme="https://tom9527c.github.io/tags/%E7%BB%83%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>常见的Vue知识点</title>
    <link href="https://tom9527c.github.io/posts/c8d1.html"/>
    <id>https://tom9527c.github.io/posts/c8d1.html</id>
    <published>2023-10-28T09:05:29.000Z</published>
    <updated>2023-10-28T14:09:50.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="总结常见的Vue知识点，看看你在哪个段位-QAQ"><a href="#总结常见的Vue知识点，看看你在哪个段位-QAQ" class="headerlink" title="总结常见的Vue知识点，看看你在哪个段位 QAQ"></a>总结常见的Vue知识点，看看你在哪个段位 QAQ</h1><h2 id="荣耀黄金-⭐️"><a href="#荣耀黄金-⭐️" class="headerlink" title="荣耀黄金 ⭐️"></a>荣耀黄金 ⭐️</h2><h3 id="1-Vue的优缺点"><a href="#1-Vue的优缺点" class="headerlink" title="1.Vue的优缺点?"></a>1.Vue的优缺点?</h3><p><code>优点</code>: 渐进式，组件化，轻量级，虚拟dom,响应式，单页面，数据视图分开<br><code>缺点</code>: 单页面应用不利于SEO,不支持IE8以下，首屏加载时间长</p><h3 id="2-为什么说Vue是一个渐进式框架？"><a href="#2-为什么说Vue是一个渐进式框架？" class="headerlink" title="2.为什么说Vue是一个渐进式框架？"></a>2.为什么说Vue是一个渐进式框架？</h3><p><code>渐进式</code>：通俗点讲就是，你想用啥你就用啥，没有特殊要求，你想用component就用，不用也行，你想用vuex就用，不用也行。</p><h3 id="3-Vue跟React的区别？"><a href="#3-Vue跟React的区别？" class="headerlink" title="3.Vue跟React的区别？"></a>3.Vue跟React的区别？</h3><ul><li><code>相同点</code><ul><li>都使用了<code>虚拟dom</code></li><li><code>组件化</code>开发</li><li>都是<code>单向数据流</code>（父子组件之间，不建议子修改父传下来的数据）</li><li>都支持<code>服务端渲染</code></li></ul></li><li><code>不同点</code><ul><li>React是<code>jsx</code>语法，Vue是<code>template</code></li><li>数据变化React<code>手动</code>（setState）,Vue<code>自动</code>（初始化已把data做响应式处理）</li><li>React单向绑定，Vue双向绑定</li><li>React的<code>Redux</code>,Vue的<code>Vuex</code></li></ul></li></ul><h3 id="4-MVVM是什么？和MVC有何区别呢？"><a href="#4-MVVM是什么？和MVC有何区别呢？" class="headerlink" title="4.MVVM是什么？和MVC有何区别呢？"></a>4.MVVM是什么？和MVC有何区别呢？</h3><p><code>MVC</code>：Controller将Model的数据展示在View上</p><ul><li><code>Model</code>(模型)：负责从数据库取数据</li><li><code>View</code>(视图)：负责展示数据</li><li><code>Controller</code>(控制器)：用户交互的地方，例如点击事件等等</li></ul><p><code>MVVM</code>:实现了 View 和 Model 的自动同步，也就是当 Model 的属性改变时，我们不用再自己手动操作 Dom 元素，来改变 View 的显示，而是改变属性后该属性对应 View 层显示会自动改变（对应Vue<code>数据驱动</code>的思想）</p><ul><li><code>VM</code>(View-Model):做了两件事达到了数据的双向绑定 <ul><li>一是将模型转化成视图，即将后端传递的数据转化成所看到的页面。实现的方式是：<code>数据绑定</code></li><li>二是将视图转化成模型，即将所看到的页面转化成后端的数据。实现的方式是：<code>DOM事件监听</code></li></ul></li></ul><p><code>区别</code><br>整体看来，MVVM 比 MVC 精简很多，不仅简化了业务与界面的依赖，还解决了数据频繁更新的问题，不用再用选择器操作 DOM 元素。因为在 MVVM 中，<code>View 不知道 Model 的存在</code>，<code>Model 和 ViewModel 也观察不到 View</code>，这种低耦合模式提高代码的可重用性</p><p><code>Vue是不是MVVM框架？</code></p><p>Vue是MVVM框架，但是不是严格符合MVVM，因为MVVM规定Model和View不能直接通信，而Vue的ref可以做到这点</p><h2 id="永恒钻石-⭐️⭐️"><a href="#永恒钻石-⭐️⭐️" class="headerlink" title="永恒钻石 ⭐️⭐️"></a>永恒钻石 ⭐️⭐️</h2><h3 id="5-使用过哪些修饰符？"><a href="#5-使用过哪些修饰符？" class="headerlink" title="5.使用过哪些修饰符？"></a>5.使用过哪些修饰符？</h3><p><img src="https://bu.dusays.com/2023/06/24/649700fb94d93.png" alt="Vue常用修饰符"></p><h3 id="6-使用过那些内部指令？"><a href="#6-使用过那些内部指令？" class="headerlink" title="6.使用过那些内部指令？"></a>6.使用过那些内部指令？</h3><p><img src="https://bu.dusays.com/2023/06/24/649700fc64138.png" alt="Vue常用内部指令"></p><h3 id="7-组件通信方式有哪些？"><a href="#7-组件通信方式有哪些？" class="headerlink" title="7.组件通信方式有哪些？"></a>7.组件通信方式有哪些？</h3><ul><li>父组件传值给子组件，子组件使用<code>props</code>进行接受</li><li>子组件传值给父组件，子组件使用<code>$emit+事件</code>对父组件进行传值</li><li>组件中可以使用<code>$parent</code>和<code>$children</code>获取到父组件实例和子组件实例，进而获取数据</li><li>使用<code>$attrs</code>和<code>$listeners</code>，在对一些组件进行二次封装时可以方便传值，例如A-&gt;B-&gt;C</li><li>使用<code>$refs</code>获取组件实例，进而获取数据</li><li>使用<code>Vuex</code>进行状态管理</li><li>使用<code>eventBus</code>进行跨组件触发事件，进而传递数据</li><li>使用<code>provide</code>和<code>inject</code>(没用过)</li><li>使用浏览器缓存，例如<code>localStorage</code></li></ul><h3 id="8-如何设置动态class，动态style？"><a href="#8-如何设置动态class，动态style？" class="headerlink" title="8.如何设置动态class，动态style？"></a>8.如何设置动态class，动态style？</h3><ul><li>动态class对象：<code>&lt;div :class=&quot;&#123; &#39;is-active&#39;: true, &#39;red&#39;: isRed &#125;&quot;&gt;&lt;/div&gt;</code></li><li>动态class数组：<code>&lt;div :class=&quot;[&#39;is-active&#39;, isRed ? &#39;red&#39; : &#39;&#39; ]&quot;&gt;&lt;/div&gt;</code></li><li>动态style对象：<code>&lt;div :style=&quot;&#123; color: textColor, fontSize: &#39;18px&#39; &#125;&quot;&gt;&lt;/div&gt;</code></li><li>动态style数组：<code>&lt;div :style=&quot;[&#123; color: textColor, fontSize: &#39;18px&#39; &#125;, &#123; fontWeight: &#39;300&#39; &#125;]&quot;&gt;&lt;/div&gt;</code></li></ul><h3 id="9-v-if和v-show的区别"><a href="#9-v-if和v-show的区别" class="headerlink" title="9.v-if和v-show的区别"></a>9.v-if和v-show的区别</h3><p><code>v-if</code>是通过控制dom元素的删除和生成来实现显隐，每一次显隐都会使组件重新跑一遍生命周期，因为显隐决定了组件的生成和销毁<br><code>v-show</code>是通过控制dom元素的css样式来实现显隐藏，不会销毁<br><code>频繁或者大数量显隐使用v-show,否则使用v-if</code></p><h3 id="10-计算属性和普通属性的区别"><a href="#10-计算属性和普通属性的区别" class="headerlink" title="10.计算属性和普通属性的区别"></a>10.计算属性和普通属性的区别</h3><p>计算属性是<code>基于</code>他们的<code>依赖进行缓存</code>的，只有相关依赖发生变化时，他们才会重新取值</p><p>计算属性<code>不支持异步</code>，内有异步操作时无效，无法监听数据变化</p><p>声明的<code>计算属性非常大</code>，并且<code>访问量次数很多</code>，<code>改变时间少</code>，就用computed</p><h3 id="11-computed和watch有何区别？"><a href="#11-computed和watch有何区别？" class="headerlink" title="11.computed和watch有何区别？"></a>11.computed和watch有何区别？</h3><ul><li>computed是<code>依赖</code>以有的变量来计算一个目标变量，大多数情况都是<code>多个变量</code>凑在一起计算出<code>一个变量</code>，并且computed具有缓存机制，依赖值不变的情况下会直接读取缓存进行服用，computed<code>不能进行异步操作</code></li><li>watch是监听某一个变量的变化，并执行相对应的回调函数，通常是<code>一个变量</code>的变化决定<code>多个变量</code>的变化，watch可以进行<code>异步操作</code></li><li>简单记就是：一般情况下computed是<code>多对一</code>，watch是<code>一对多</code></li></ul><h3 id="13-Vue的生命周期？"><a href="#13-Vue的生命周期？" class="headerlink" title="13.Vue的生命周期？"></a>13.Vue的生命周期？</h3><p><img src="https://bu.dusays.com/2023/06/24/649700fd23070.png" alt="Vue生命周期"></p><h3 id="14-为什么v-if和v-for不建议用在同一标签？"><a href="#14-为什么v-if和v-for不建议用在同一标签？" class="headerlink" title="14.为什么v-if和v-for不建议用在同一标签？"></a>14.为什么v-if和v-for不建议用在同一标签？</h3><p>在vue2中，<code>v-for优先级</code>是<code>高于v-if</code>的,写在一起会<code>v-for</code>把元素都遍历出来，然后在根据<code>v-if</code>来进行判断，这样<code>会渲染多余的节点</code>，<code>增加无用的dom操作</code>，建议使用computed来解决这个问题</p><h3 id="15-Vuex有哪些属性-用处是什么？"><a href="#15-Vuex有哪些属性-用处是什么？" class="headerlink" title="15.Vuex有哪些属性?用处是什么？"></a>15.Vuex有哪些属性?用处是什么？</h3><p><img src="https://bu.dusays.com/2023/06/24/649700fdca969.png" alt="Vuex"></p><ul><li><code>State</code>: 定义了应用状态的数据结构，可以载这里设置默认的初始状态</li><li><code>Getter</code>: 允许组件从Store中获取数据，mapGetters辅助函数仅仅是将store中的getter映射到局部计算属性</li><li><code>Mutation</code>: 是唯一更改store中状态的方法，且必须是同步函数</li><li><code>Actions</code>: 用于提交mutation,而不是直接变更状态，可以包含任意异步操作</li><li><code>Module</code>: 允许将单一的Store拆分为多个store且同时保存在单一的状态树种</li></ul><h2 id="至尊星耀-⭐️⭐️⭐️"><a href="#至尊星耀-⭐️⭐️⭐️" class="headerlink" title="至尊星耀 ⭐️⭐️⭐️"></a>至尊星耀 ⭐️⭐️⭐️</h2><h3 id="16-不需要响应式的数据应该怎么处理？"><a href="#16-不需要响应式的数据应该怎么处理？" class="headerlink" title="16.不需要响应式的数据应该怎么处理？"></a>16.不需要响应式的数据应该怎么处理？</h3><p>有一些数据，从始至终都<code>未曾改变</code>，这种死数据，既然不改变，那也就<code>不需要</code>对他做<code>响应式处理</code>了，不然只会做一些无用功消耗性能，比如一些写死的下拉框，写死的表格数据，这些数据量大的死数据，如果<code>都进行响应式处</code>理<code>，那会</code>消耗大量性能`</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法一：将数据定义在data之外</span></span><br><span class="line">data () &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">list1</span> = &#123; xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">list2</span> = &#123; xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">list3</span> = &#123; xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">list4</span> = &#123; xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">list5</span> = &#123; xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;&#125;</span><br><span class="line"> &#125;</span><br><span class="line">    </span><br><span class="line"><span class="comment">// 方法二：Object.freeze()</span></span><br><span class="line">data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">list1</span>: <span class="title class_">Object</span>.<span class="title function_">freeze</span>(&#123;xxxxxxxxxxxxxxxxxxxxxxxx&#125;),</span><br><span class="line">        <span class="attr">list2</span>: <span class="title class_">Object</span>.<span class="title function_">freeze</span>(&#123;xxxxxxxxxxxxxxxxxxxxxxxx&#125;),</span><br><span class="line">        <span class="attr">list3</span>: <span class="title class_">Object</span>.<span class="title function_">freeze</span>(&#123;xxxxxxxxxxxxxxxxxxxxxxxx&#125;),</span><br><span class="line">        <span class="attr">list4</span>: <span class="title class_">Object</span>.<span class="title function_">freeze</span>(&#123;xxxxxxxxxxxxxxxxxxxxxxxx&#125;),</span><br><span class="line">        <span class="attr">list5</span>: <span class="title class_">Object</span>.<span class="title function_">freeze</span>(&#123;xxxxxxxxxxxxxxxxxxxxxxxx&#125;),</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="17-父子组件的生命周期顺序"><a href="#17-父子组件的生命周期顺序" class="headerlink" title="17.父子组件的生命周期顺序"></a>17.父子组件的生命周期顺序</h3><p><code>父beforeCreate -&gt; 父created -&gt; 父beforeMount -&gt; 子beforeCreate -&gt; 子created -&gt; 子beforeMounted -&gt; 子mounted -&gt; 父mounted</code></p><h3 id="18-对象新属性无法更新视图，删除属性无法更新视图，为什么？怎么办？"><a href="#18-对象新属性无法更新视图，删除属性无法更新视图，为什么？怎么办？" class="headerlink" title="18.对象新属性无法更新视图，删除属性无法更新视图，为什么？怎么办？"></a>18.对象新属性无法更新视图，删除属性无法更新视图，为什么？怎么办？</h3><ul><li>原因：Object.defineProperty没有对对象的新属性进行属性劫持</li><li>对象新属性无法更新视图：使用 <code>Vue.$set(obj,key,value)</code>,组件中<code>this.$set(obj,key,value)</code></li><li>删除属性无法更新视图：使用<code>Vue.$delete(obj,key)</code>,组件中<code>this.$delete(obj,key)</code></li></ul><h3 id="19-自定义指令"><a href="#19-自定义指令" class="headerlink" title="19.自定义指令"></a>19.自定义指令</h3><p><a href="https://www.cnblogs.com/lzq035/p/14183553.html">8个非常实用的Vue自定义指令</a></p><p><a href="https://juejin.cn/post/6844904199289831437">Vue限制input仅能输入正整数或浮点数指令</a></p><h3 id="20-为什么不建议用index做key-为什么不建议用随机数做key"><a href="#20-为什么不建议用index做key-为什么不建议用随机数做key" class="headerlink" title="20.为什么不建议用index做key?为什么不建议用随机数做key?"></a>20.为什么不建议用index做key?为什么不建议用随机数做key?</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-<span class="keyword">for</span>=<span class="string">&quot;(item, index) in list&quot;</span> :key=<span class="string">&quot;index&quot;</span>&gt;&#123;&#123;item.<span class="property">name</span>&#125;&#125;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="attr">list</span>: [</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;小明&#x27;</span>, <span class="attr">id</span>: <span class="string">&#x27;123&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;小红&#x27;</span>, <span class="attr">id</span>: <span class="string">&#x27;124&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;小花&#x27;</span>, <span class="attr">id</span>: <span class="string">&#x27;125&#x27;</span> &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">渲染为</span><br><span class="line">&lt;div key=<span class="string">&quot;0&quot;</span>&gt;小明&lt;/div&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&quot;1&quot;</span>&gt;</span>小红<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&quot;2&quot;</span>&gt;</span>小花<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">现在我执行 list.<span class="title function_">unshift</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;小林&#x27;</span>, <span class="attr">id</span>: <span class="string">&#x27;122&#x27;</span> &#125;)</span><br><span class="line"></span><br><span class="line">渲染为</span><br><span class="line">&lt;div key=<span class="string">&quot;0&quot;</span>&gt;小林&lt;/div&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&quot;1&quot;</span>&gt;</span>小明<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&quot;2&quot;</span>&gt;</span>小红<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&quot;3&quot;</span>&gt;</span>小花<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">新旧对比</span><br><span class="line"></span><br><span class="line">&lt;div key=<span class="string">&quot;0&quot;</span>&gt;小明&lt;<span class="regexp">/div&gt;  &lt;div key=&quot;0&quot;&gt;小林&lt;/</span>div&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&quot;1&quot;</span>&gt;</span>小红<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&quot;1&quot;</span>&gt;</span>小明<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&quot;2&quot;</span>&gt;</span>小花<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&quot;2&quot;</span>&gt;</span>小红<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">                         <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&quot;3&quot;</span>&gt;</span>小花<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">可以看出，如果用index做key的话，其实是更新了原有的三项，并新增了小花，虽然达到了渲染目的，但是损耗性能</span><br><span class="line"></span><br><span class="line">现在我们使用id来做key，渲染为</span><br><span class="line"></span><br><span class="line">&lt;div key=<span class="string">&quot;123&quot;</span>&gt;小明&lt;/div&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&quot;124&quot;</span>&gt;</span>小红<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&quot;125&quot;</span>&gt;</span>小花<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">现在我执行 list.<span class="title function_">unshift</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;小林&#x27;</span>, <span class="attr">id</span>: <span class="string">&#x27;122&#x27;</span> &#125;)，渲染为</span><br><span class="line"></span><br><span class="line">&lt;div key=<span class="string">&quot;122&quot;</span>&gt;小林&lt;/div&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&quot;123&quot;</span>&gt;</span>小明<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&quot;124&quot;</span>&gt;</span>小红<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&quot;125&quot;</span>&gt;</span>小花<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">新旧对比</span><br><span class="line"></span><br><span class="line">                           &lt;div key=<span class="string">&quot;122&quot;</span>&gt;小林&lt;/div&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&quot;123&quot;</span>&gt;</span>小明<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&quot;123&quot;</span>&gt;</span>小明<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&quot;124&quot;</span>&gt;</span>小红<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&quot;124&quot;</span>&gt;</span>小红<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&quot;125&quot;</span>&gt;</span>小花<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&quot;125&quot;</span>&gt;</span>小花<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">可以看出，原有的三项都不变，只是新增了小林这个人，这才是最理想的结果</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>用<code>index</code>和用<code>随机数</code>都是同理，<code>随机数</code>每次都在<code>变</code>，做不到<code>专一性</code></p><h3 id="21-nextTick的用处"><a href="#21-nextTick的用处" class="headerlink" title="21.nextTick的用处"></a>21.nextTick的用处</h3><p>Vue采用的是<code>异步更新</code>的策略，同一事件循环内<code>多次修改</code>，会统一（<code>批处理</code>）进行一次视图更新，节省性能。所以会出现数据更新，视图还没有更新，这时候拿页面的数据还是<code>上一次的数据</code>，想要拿到<code>最新的数据</code>就需要使用<code>this.$nextTick</code></p><h2 id="最强王者-⭐️⭐️⭐️⭐️"><a href="#最强王者-⭐️⭐️⭐️⭐️" class="headerlink" title="最强王者 ⭐️⭐️⭐️⭐️"></a>最强王者 ⭐️⭐️⭐️⭐️</h2><h3 id="22-Vue响应式是怎么实现的"><a href="#22-Vue响应式是怎么实现的" class="headerlink" title="22.Vue响应式是怎么实现的"></a>22.Vue响应式是怎么实现的</h3><p>整体思路是数据劫持 + 观察者模式</p><p><code>对象</code>内部通过 <code>defineReactive</code> 方法，使用 <code>Object.defineProperty</code> 将属性进行劫持（只会劫持已经存在的属性），数组则是通过<code>重写数组方法</code>来实现。当页面使用对应属性时，每个属性都拥有自己的<code>dep</code>属性，存放他所依赖的 <code>watcher</code>（依赖收集），当属性变化后会通知自己对应的 <code>watcher</code> 去更新(派发更新)。</p><p>可以看我的这篇<a href="https://blog.guozy.online/posts/6.html">Vue响应式原理</a></p><h3 id="23-Vue的模版编译原理"><a href="#23-Vue的模版编译原理" class="headerlink" title="23.Vue的模版编译原理"></a>23.Vue的模版编译原理</h3><p>可以看我的这篇<a href="https://blog.guozy.online/posts/63af.html">Vue模版编译原理</a></p><h3 id="24-watcher和computed的实现"><a href="#24-watcher和computed的实现" class="headerlink" title="24.watcher和computed的实现"></a>24.watcher和computed的实现</h3><p>都是通过watcher来实现的，watcher分为</p><ul><li><code>渲染Watcher</code>：变量修改时，负责通知HTML里的重新渲染</li><li><code>computed Watcher</code>：变量修改时，负责通知computed里依赖此变量的computed属性变量的修改</li><li><code>user Watcher</code>：变量修改时，负责通知watch属性里所对应的变量函数的执行</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// watch时 exprOrFn是一个字符串 cb为watch执行的回调函数 &#123;user:true&#125;</span></span><br><span class="line">watch 是 <span class="keyword">new</span> <span class="title class_">Watcher</span>(vm,exprOrFn,&#123;<span class="attr">user</span>:<span class="literal">true</span>&#125;)</span><br><span class="line"></span><br><span class="line">computed 是 <span class="keyword">new</span> <span class="title class_">Watcher</span>(vm,getter,<span class="function">()=&gt;</span>&#123;&#125;,&#123;<span class="attr">lazy</span>:<span class="literal">true</span>&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>时间长，忘的有点多，随后补充</p></blockquote><h3 id="25-Vue-set方法的原理？"><a href="#25-Vue-set方法的原理？" class="headerlink" title="25.Vue.set方法的原理？"></a>25.Vue.set方法的原理？</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">set</span>(<span class="params">target, key, val</span>) &#123;</span><br><span class="line">    <span class="comment">// 判断是否是数组</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(target)) &#123;</span><br><span class="line">        <span class="comment">// 判断谁大谁小</span></span><br><span class="line">        target.<span class="property">length</span> = <span class="title class_">Math</span>.<span class="title function_">max</span>(target.<span class="property">length</span>, key)</span><br><span class="line">        <span class="comment">// 执行splice</span></span><br><span class="line">        target.<span class="title function_">splice</span>(key, <span class="number">1</span>, val)</span><br><span class="line">        <span class="keyword">return</span> val</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> ob = target.<span class="property">__ob__</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果此对象没有不是响应式对象，直接设置并返回</span></span><br><span class="line">    <span class="keyword">if</span> (key <span class="keyword">in</span> target &amp;&amp; !(key <span class="keyword">in</span> target.<span class="property"><span class="keyword">prototype</span></span>) || !ob) &#123;</span><br><span class="line">        target[key] = val</span><br><span class="line">        <span class="keyword">return</span> val</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 否则，新增属性，并响应式处理</span></span><br><span class="line">    <span class="title function_">defineReactive</span>(target, key, val)</span><br><span class="line">    <span class="keyword">return</span> val</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="26-Vue-delete方法的原理"><a href="#26-Vue-delete方法的原理" class="headerlink" title="26.Vue.delete方法的原理"></a>26.Vue.delete方法的原理</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">del</span> (target, key) &#123;</span><br><span class="line">    <span class="comment">// 判断是否为数组</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(target)) &#123;</span><br><span class="line">        <span class="comment">// 执行splice</span></span><br><span class="line">        target.<span class="title function_">splice</span>(key, <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> ob = target.<span class="property">__ob__</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 对象本身就没有这个属性，直接返回</span></span><br><span class="line">    <span class="keyword">if</span> (!(key <span class="keyword">in</span> target)) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 否则，删除这个属性</span></span><br><span class="line">    <span class="keyword">delete</span> target[key]</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 判断是否是响应式对象，不是的话，直接返回</span></span><br><span class="line">    <span class="keyword">if</span> (!ob) <span class="keyword">return</span></span><br><span class="line">    <span class="comment">// 是的话，删除后要通知视图更新</span></span><br><span class="line">    ob.<span class="property">dep</span>.<span class="title function_">notify</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="27-nextTick的原理？"><a href="#27-nextTick的原理？" class="headerlink" title="27.nextTick的原理？"></a>27.nextTick的原理？</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> callbacks = []; <span class="comment">//回调函数</span></span><br><span class="line"><span class="keyword">let</span> pending = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">flushCallbacks</span>(<span class="params"></span>) &#123;</span><br><span class="line">  pending = <span class="literal">false</span>; <span class="comment">//把标志还原为false</span></span><br><span class="line">  <span class="comment">// 依次执行回调</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; callbacks.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    callbacks[i]();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> timerFunc; <span class="comment">//先采用微任务并按照优先级优雅降级的方式实现异步刷新</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="title class_">Promise</span> !== <span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line">  <span class="comment">// 如果支持promise</span></span><br><span class="line">  <span class="keyword">const</span> p = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>();</span><br><span class="line">  timerFunc = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    p.<span class="title function_">then</span>(flushCallbacks);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="title class_">MutationObserver</span> !== <span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line">  <span class="comment">// MutationObserver 主要是监听dom变化 也是一个异步方法</span></span><br><span class="line">  <span class="keyword">let</span> counter = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">MutationObserver</span>(flushCallbacks);</span><br><span class="line">  <span class="keyword">const</span> textNode = <span class="variable language_">document</span>.<span class="title function_">createTextNode</span>(<span class="title class_">String</span>(counter));</span><br><span class="line">  observer.<span class="title function_">observe</span>(textNode, &#123;</span><br><span class="line">    <span class="attr">characterData</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">  timerFunc = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    counter = (counter + <span class="number">1</span>) % <span class="number">2</span>;</span><br><span class="line">    textNode.<span class="property">data</span> = <span class="title class_">String</span>(counter);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> setImmediate !== <span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line">  <span class="comment">// 如果前面都不支持 判断setImmediate</span></span><br><span class="line">  timerFunc = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">setImmediate</span>(flushCallbacks);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// 最后降级采用setTimeout</span></span><br><span class="line">  timerFunc = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(flushCallbacks, <span class="number">0</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">nextTick</span>(<span class="params">cb</span>) &#123;</span><br><span class="line">  callbacks.<span class="title function_">push</span>(cb);</span><br><span class="line">  <span class="keyword">if</span> (!pending) &#123;</span><br><span class="line">    pending = <span class="literal">true</span>;</span><br><span class="line">    <span class="title function_">timerFunc</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="28-key有什么用？说说diff算法吧？"><a href="#28-key有什么用？说说diff算法吧？" class="headerlink" title="28.key有什么用？说说diff算法吧？"></a>28.key有什么用？说说diff算法吧？</h3><p>看大佬写的 <a href="https://juejin.cn/post/6974293549135167495">为什么 Vue 中不要用 index 作为 key？（diff 算法详解）</a></p><h2 id="荣耀王者-⭐️⭐️⭐️⭐️⭐️"><a href="#荣耀王者-⭐️⭐️⭐️⭐️⭐️" class="headerlink" title="荣耀王者 ⭐️⭐️⭐️⭐️⭐️"></a>荣耀王者 ⭐️⭐️⭐️⭐️⭐️</h2><h3 id="29-子组件改变props里的数据会发生什么"><a href="#29-子组件改变props里的数据会发生什么" class="headerlink" title="29.子组件改变props里的数据会发生什么?"></a>29.子组件改变props里的数据会发生什么?</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">item</span>: &#123;</span><br><span class="line">      <span class="attr">default</span>: <span class="function">() =&gt;</span> (&#123;&#125;),</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 不报错，并且父级数据会跟着变</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">item</span>.<span class="property">name</span> = <span class="string">&#x27;aaa&#x27;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 会报错，跟基础类型报错一样</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">item</span> = <span class="string">&#x27;sss&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="30-watch的immediate属性有什么用？"><a href="#30-watch的immediate属性有什么用？" class="headerlink" title="30.watch的immediate属性有什么用？"></a>30.watch的immediate属性有什么用？</h3><blockquote><p>比如平时created时要请求一次数据，并且当搜索值改变，也要请求数据，我们会这样写</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">created</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">getList</span>()</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">watch</span>: &#123;</span><br><span class="line">  <span class="title function_">searchInputValue</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getList</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>使用<code>immediate</code>完全可以这么写，当它为true时，会初始执行一次</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">watch</span>: &#123;</span><br><span class="line">  <span class="attr">searchInputValue</span>:&#123;</span><br><span class="line">    <span class="attr">handler</span>: <span class="string">&#x27;getList&#x27;</span>,</span><br><span class="line">    <span class="attr">immediate</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="31-watch监听一个对象时，如何排除某些属性的监听"><a href="#31-watch监听一个对象时，如何排除某些属性的监听" class="headerlink" title="31.watch监听一个对象时，如何排除某些属性的监听"></a>31.watch监听一个对象时，如何排除某些属性的监听</h3><blockquote><p>下面代码是，params发生改变就重新请求数据，无论是a，b，c，d属性改变</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">params</span>: &#123;</span><br><span class="line">        <span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">b</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">c</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="attr">d</span>: <span class="number">4</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line"><span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">      <span class="attr">deep</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="title function_">handler</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">getList</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>但是如果我只想要a，b改变时重新请求，c，d改变时不重新请求呢？</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">getList</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">keys</span>(<span class="variable language_">this</span>.<span class="property">params</span>)</span><br><span class="line">      .<span class="title function_">filter</span>(<span class="function">(<span class="params">_</span>) =&gt;</span> ![<span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>].<span class="title function_">includes</span>(_)) <span class="comment">// 排除对c，d属性的监听</span></span><br><span class="line">      .<span class="title function_">forEach</span>(<span class="function">(<span class="params">_</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.$watch(<span class="function">(<span class="params">vm</span>) =&gt;</span> vm.<span class="property">params</span>[_], handler, &#123;</span><br><span class="line">          <span class="attr">deep</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">params</span>: &#123;</span><br><span class="line">        <span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">b</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">c</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="attr">d</span>: <span class="number">4</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line"><span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">      <span class="attr">deep</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="title function_">handler</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">getList</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="32-computed如何实现传参？"><a href="#32-computed如何实现传参？" class="headerlink" title="32.computed如何实现传参？"></a>32.computed如何实现传参？</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// html</span></span><br><span class="line">&lt;div&gt;&#123;&#123; <span class="title function_">total</span>(<span class="number">3</span>) &#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// js</span></span><br><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">  <span class="title function_">total</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">n</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> n * <span class="variable language_">this</span>.<span class="property">num</span></span><br><span class="line">        &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="33-vue的hook的使用"><a href="#33-vue的hook的使用" class="headerlink" title="33.vue的hook的使用"></a>33.vue的hook的使用</h3><ul><li><code>同一组件中使用</code></li></ul><blockquote><p>这是我们常用的定时器的方式</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="attr">timer</span>:<span class="literal">null</span>  </span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">timer</span> = <span class="built_in">setInterval</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">      <span class="comment">//具体执行内容</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">    &#125;,<span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">beforeDestory</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">timer</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">timer</span> = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>上面做法不好的地方在于：得全局多定义一个timer变量，可以使用hook这么做：</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">  <span class="attr">methods</span>:&#123;</span><br><span class="line">    <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="keyword">let</span> timer = <span class="built_in">setInterval</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="comment">//具体执行代码</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">      &#125;,<span class="number">1000</span>);</span><br><span class="line">      <span class="variable language_">this</span>.$once(<span class="string">&#x27;hook:beforeDestroy&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">clearInterval</span>(timer);</span><br><span class="line">        timer = <span class="literal">null</span>;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><code>父子组件使用</code></li></ul><blockquote><p>如果子组件需要在mounted时触发父组件的某一个函数，平时都会这么写：</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//父组件</span></span><br><span class="line">&lt;rl-child @childMounted=<span class="string">&quot;childMountedHandle&quot;</span></span><br><span class="line">/&gt;</span><br><span class="line">method () &#123;</span><br><span class="line">  <span class="title function_">childMountedHandle</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// do something...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// 子组件</span></span><br><span class="line">mounted () &#123;</span><br><span class="line">  <span class="variable language_">this</span>.$emit(<span class="string">&#x27;childMounted&#x27;</span>)</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>使用hook的话可以更方便</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//父组件</span></span><br><span class="line">&lt;rl-child @<span class="attr">hook</span>:mounted=<span class="string">&quot;childMountedHandle&quot;</span></span><br><span class="line">/&gt;</span><br><span class="line">method () &#123;</span><br><span class="line">  <span class="title function_">childMountedHandle</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// do something...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="34-动态指令和参数使用过？"><a href="#34-动态指令和参数使用过？" class="headerlink" title="34.动态指令和参数使用过？"></a>34.动态指令和参数使用过？</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    ...</span><br><span class="line">    &lt;aButton @[someEvent]=<span class="string">&quot;handleSomeEvent()&quot;</span> :[someProps]=<span class="string">&quot;1000&quot;</span> /&gt;...</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  ...</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      ...</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">someEvent</span>: someCondition ? <span class="string">&quot;click&quot;</span> : <span class="string">&quot;dbclick&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">someProps</span>: someCondition ? <span class="string">&quot;num&quot;</span> : <span class="string">&quot;price&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">handleSomeEvent</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// handle some event</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;  </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="35-相同的路由组件如何重新渲染？"><a href="#35-相同的路由组件如何重新渲染？" class="headerlink" title="35.相同的路由组件如何重新渲染？"></a>35.相同的路由组件如何重新渲染？</h3><blockquote><p>开发人员经常遇到的情况是，多个路由解析为同一个Vue组件。问题是，Vue出于性能原因，默认情况下共享组件将不会重新渲染，如果你尝试在使用相同组件的路由之间进行切换，则不会发生任何变化。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/a&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">MyComponent</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/b&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">MyComponent</span></span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>如果依然想重新渲染，怎么办呢？可以使用<code>key</code></p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">router-view</span> <span class="attr">:key</span>=<span class="string">&quot;$route.path&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="36-自定义v-model"><a href="#36-自定义v-model" class="headerlink" title="36.自定义v-model"></a>36.自定义v-model</h3><blockquote><p>默认情况下，v-model 是 @input 事件侦听器和 :value 属性上的语法糖。但是，你可以在你的Vue组件中指定一个模型属性来定义使用什么事件和value属性——非常棒！</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="attr">default</span>: &#123;</span><br><span class="line">  <span class="attr">model</span>: &#123;</span><br><span class="line">    <span class="attr">event</span>: <span class="string">&#x27;change&#x27;</span>,</span><br><span class="line">    <span class="attr">prop</span>: <span class="string">&#x27;checked&#x27;</span>  </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="37-如何将获取data中某一个数据的初始状态？"><a href="#37-如何将获取data中某一个数据的初始状态？" class="headerlink" title="37.如何将获取data中某一个数据的初始状态？"></a>37.如何将获取data中某一个数据的初始状态？</h3><blockquote><p>在开发中，有时候需要拿初始状态去计算。例如</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">num</span>: <span class="number">10</span></span><br><span class="line">  &#125;,</span><br><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">num</span> = <span class="number">1000</span></span><br><span class="line">  &#125;,</span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">howMuch</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 计算出num增加了多少，那就是1000 - 初始值</span></span><br><span class="line">        <span class="comment">// 可以通过this.$options.data().xxx来获取初始值</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1000</span> - <span class="variable language_">this</span>.<span class="property">$options</span>.<span class="title function_">data</span>().<span class="property">num</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h3 id="38-计算变量时，methods和computed哪个好？"><a href="#38-计算变量时，methods和computed哪个好？" class="headerlink" title="38.计算变量时，methods和computed哪个好？"></a>38.计算变量时，methods和computed哪个好？</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;howMuch1()&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;howMuch2&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;index&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="attr">data</span>: () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">         <span class="attr">index</span>: <span class="number">0</span></span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">howMuch1</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">num</span> + <span class="variable language_">this</span>.<span class="property">price</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="title function_">howMuch2</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">num</span> + <span class="variable language_">this</span>.<span class="property">price</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p><code>computed</code>会好一些，因为computed会有<code>缓存</code>。例如index由0变成1，那么<code>会触发视图更新</code>，这时候<code>methods会重新执行一次</code>，而<code>computed不会</code>，因为computed依赖的两个变量num和price都没变。</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="时刻准备着" scheme="https://tom9527c.github.io/categories/%E6%97%B6%E5%88%BB%E5%87%86%E5%A4%87%E7%9D%80/"/>
    
    
    <category term="Vue" scheme="https://tom9527c.github.io/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>TypeScript笔记（一）</title>
    <link href="https://tom9527c.github.io/posts/9d362be7.html"/>
    <id>https://tom9527c.github.io/posts/9d362be7.html</id>
    <published>2023-10-28T03:14:53.000Z</published>
    <updated>2024-07-05T10:06:40.225Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="1-TypeScript的环境搭"><a href="#1-TypeScript的环境搭" class="headerlink" title="1.TypeScript的环境搭"></a>1.TypeScript的环境搭</h1><h2 id="一-什么是TypeScript"><a href="#一-什么是TypeScript" class="headerlink" title="一.什么是TypeScript"></a>一.什么是TypeScript</h2><p> <img src="data:image/jpeg;base64,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" alt="TypeScript"></p><p><code>TypeScript</code>是<code>Javascript</code>的超集，遵循最新的<code>ES5/ES6</code>规范。<code>Typescript</code>扩展了<code>Javascript</code>语法。</p><ul><li>Typescript更像后端JAVA,让<code>JS</code>可以开发大型企业应用</li><li>TS提供的类型系统可以帮助我们在写代码时提供丰富的语法提示</li><li>在编写代码时会对代码进行类型检查从而避免很多线上错误</li></ul><blockquote><p><code>TypeScript</code>不会取代<code>JS</code>, <strong>尤雨溪：</strong> 我认为将类型添加到<code>JS</code>本身是一个漫长的过程 。让委员会设计一个类型系统是（根据<code>TC39</code>的经历来判断）不切实际的 。</p></blockquote><h2 id="二-环境配置"><a href="#二-环境配置" class="headerlink" title="二.环境配置"></a>二.环境配置</h2><h3 id="1-全局编译TS文件"><a href="#1-全局编译TS文件" class="headerlink" title="1.全局编译TS文件"></a>1.全局编译TS文件</h3><p>全局安装<code>typescript</code>对<code>TS</code>进行编译</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install typescript -g</span><br><span class="line">tsc --init <span class="comment"># 生成tsconfig.json</span></span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tsc <span class="comment"># 可以将ts文件编译成js文件</span></span><br><span class="line">tsc --watch <span class="comment"># 监控ts文件变化生成js文件</span></span><br></pre></td></tr></table></figure><h3 id="2-配置-webpack-环境"><a href="#2-配置-webpack-环境" class="headerlink" title="2.配置 webpack 环境"></a>2.配置 <code>webpack</code> 环境</h3><ul><li><p>安装依赖</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install rollup typescript rollup-plugin-typescript2 @rollup/plugin-node-resolve rollup-plugin-serve -D</span><br></pre></td></tr></table></figure></li><li><p>初始化<code>TS</code>配置文件</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx tsc --init</span><br></pre></td></tr></table></figure></li><li><p><code>webpack</code> 配置操作 </p><ul><li><code>rollup.config.js</code> 文件</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 默认rollup 打包的时候会查找当前目录下 rollup.config.js这个文件</span></span><br><span class="line"><span class="comment">// 采用es模块来编写配置文件</span></span><br><span class="line"><span class="comment">// node中有模块规范默认是 commonjs , 也可以改成esm模块规范</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ts <span class="keyword">from</span> <span class="string">&#x27;rollup-plugin-typescript2&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; nodeResolve &#125; <span class="keyword">from</span> <span class="string">&#x27;@rollup/plugin-node-resolve&#x27;</span></span><br><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; fileURLToPath &#125; <span class="keyword">from</span> <span class="string">&quot;url&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 当前文件的绝对路径 file://xxxx/xxx/xxx</span></span><br><span class="line"><span class="keyword">const</span> __filename = <span class="title function_">fileURLToPath</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">url</span>); <span class="comment">// 当前文件的绝对路径</span></span><br><span class="line"><span class="keyword">const</span> __dirname = path.<span class="title function_">dirname</span>(__filename); <span class="comment">// 当前文件所在的文件夹目录 绝对路径</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 打包的配置对象</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">input</span>: <span class="string">&#x27;./src/index.ts&#x27;</span>, <span class="comment">// 项目入口</span></span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">file</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;dist/bundle.js&#x27;</span>), <span class="comment">// 当前的文件在当前目录下的dist目录</span></span><br><span class="line">        <span class="attr">format</span>: <span class="string">&#x27;iife&#x27;</span>, <span class="comment">// (function()&#123;&#125;)()</span></span><br><span class="line">        <span class="attr">sourcemap</span>:<span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title function_">nodeResolve</span>(&#123;</span><br><span class="line">            <span class="attr">extensions</span>: [<span class="string">&#x27;.js&#x27;</span>, <span class="string">&#x27;.ts&#x27;</span>]</span><br><span class="line">        &#125;), <span class="comment">// （第三方包的入口）入口文件可以是js 也可以是ts</span></span><br><span class="line">        <span class="title function_">ts</span>(&#123;</span><br><span class="line">            <span class="attr">tsconfig</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;tsconfig.json&#x27;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>package.json</code>配置</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rollup -c -w&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>我们可以通过<code>npm run start</code>启动服务来使用typescript啦~</p></blockquote><p><code>package.json</code>文件</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@rollup/plugin-node-resolve&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^15.1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@types/node&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^20.5.3&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;rollup&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.27.2&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;rollup-plugin-typescript2&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.35.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;typescript&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^5.1.6&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;module&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rollup -c -w&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@types/jquery&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.5.17&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@types/react&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^18.2.21&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;axios&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;jquery&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.7.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;mitt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;reflect-metadata&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.1.13&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;vue&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.3.4&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p> 我门在使用ts的时候 需要将编写的ts代码转换成js 在运行<br>typescript这个模块 来进行文件的编译<br>npm install typescript -g 全局的包只能在命令行中使用  tsc<br> 最终直接生成js 文件在运行。<br>tsc —init 初始化ts的配置文件<br>比较适合临时测试的方式<br>vscode插件来实现代码的运行<br>code-runner 如果是js文件 内部会直接采用 node + 文件名来执行此文件 ,如果是ts文件 需要通过ts-node     来直接执行<br>sudo npm install ts-node -g<br> 通过构建工具将代码转化成js 在去运行 （webpack,rollup,esbuild） 最终便衣成js执行</p></blockquote></li></ul><h1 id="2-基础类型"><a href="#2-基础类型" class="headerlink" title="2.基础类型"></a>2.基础类型</h1><p>TS中冒号后面的都为类型标识</p><h3 id="布尔类型-boolean"><a href="#布尔类型-boolean" class="headerlink" title="布尔类型 boolean"></a>布尔类型 <code>boolean</code></h3><p>布尔值 最基本的数据类型就是简单的true/false值，在JavaScript和TypeScript里叫做<code>boolean</code>（其它语言中也一样）</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">bool</span>:<span class="built_in">boolean</span> = <span class="literal">true</span>; </span><br></pre></td></tr></table></figure><h3 id="数字类型-number"><a href="#数字类型-number" class="headerlink" title="数字类型 number"></a>数字类型 <code>number</code></h3><p>数字 和JavaScript一样，TypeScript里的所有数字都是浮点数。 这些浮点数的类型是 <code>number</code>。 除了支持十进制和十六进制字面量，TypeScript还支持ECMAScript 2015中引入的二进制和八进制字面量。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">num</span>:<span class="built_in">number</span> = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">hexLiteral</span>: <span class="built_in">number</span> = <span class="number">0xf00d</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">binaryLiteral</span>: <span class="built_in">number</span> = <span class="number">0b1010</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">octalLiteral</span>: <span class="built_in">number</span> = <span class="number">0o744</span>; </span><br></pre></td></tr></table></figure><h3 id="字符串类型-string"><a href="#字符串类型-string" class="headerlink" title="字符串类型 string"></a>字符串类型 <code>string</code></h3><p>字符串 JavaScript程序的另一项基本操作是处理网页或服务器端的文本数据。 像其它语言里一样，我们使用<code>string</code>表示文本数据类型。 和JavaScript一样，可以使用双引号（<code>&quot;</code>）或单引号（<code>&#39;</code>）表示字符串</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">str</span>:<span class="built_in">string</span> = <span class="string">&#x27;hello&#x27;</span>;</span><br></pre></td></tr></table></figure><p>你还可以使用<em>模版字符串</em>，它可以定义多行文本和内嵌表达式。 这种字符串是被反引号包围（<code>``），并且以</code>${ expr }` 这种形式嵌入表达式</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">name</span>: <span class="built_in">string</span> = <span class="string">`Gene`</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">age</span>: <span class="built_in">number</span> = <span class="number">37</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">sentence</span>: <span class="built_in">string</span> = <span class="string">`Hello, my name is <span class="subst">$&#123; name &#125;</span>.I&#x27;ll be <span class="subst">$&#123; age + <span class="number">1</span> &#125;</span> years old next month.`</span>;</span><br></pre></td></tr></table></figure><p>这与下面定义<code>sentence</code>的方式效果相同：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">sentence</span>: <span class="built_in">string</span> = <span class="string">&quot;Hello, my name is &quot;</span> + name + <span class="string">&quot;.\n\n&quot;</span> +<span class="string">&quot;I&#x27;ll be &quot;</span> + (age + <span class="number">1</span>) + <span class="string">&quot; years old next month.&quot;</span>;</span><br></pre></td></tr></table></figure><h3 id="数组-array"><a href="#数组-array" class="headerlink" title="数组 array"></a>数组 <code>array</code></h3><p>TypeScript像JavaScript一样可以操作数组元素。 有两种方式可以定义数组。 第一种，可以在元素类型后面接上<code>[]</code>，表示由此类型元素组成的一个数组</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">list</span>: <span class="built_in">number</span>[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr3</span>: (<span class="built_in">number</span> | <span class="built_in">string</span>)[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>];</span><br></pre></td></tr></table></figure><p>第二种方式是使用数组泛型，<code>Array&lt;元素类型&gt;</code>：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">list</span>: <span class="title class_">Array</span>&lt;<span class="built_in">number</span>&gt; = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr4</span>:<span class="title class_">Array</span>&lt;<span class="built_in">number</span> | <span class="built_in">string</span>&gt; = [<span class="number">1</span>,<span class="string">&#x27;2&#x27;</span>,<span class="number">3</span>];</span><br></pre></td></tr></table></figure><h3 id="元组类型-Tuple"><a href="#元组类型-Tuple" class="headerlink" title="元组类型 Tuple"></a>元组类型 <code>Tuple</code></h3><p>元组类型允许表示一个已知元素数量和类型的数组，各元素的类型不必相同。 比如，你可以定义一对值分别为<code>string</code>和<code>number</code>类型的元组。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 声明一个元组类型</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">x</span>: [<span class="built_in">string</span>, <span class="built_in">number</span>];</span><br><span class="line"><span class="comment">// 初始化</span></span><br><span class="line">x = [<span class="string">&#x27;hello&#x27;</span>, <span class="number">10</span>]; <span class="comment">// OK</span></span><br><span class="line"><span class="comment">// 初始化错误</span></span><br><span class="line">x = [<span class="number">10</span>, <span class="string">&#x27;hello&#x27;</span>]; <span class="comment">// Error</span></span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">tuple</span>:[<span class="built_in">string</span>,<span class="built_in">number</span>,<span class="built_in">boolean</span>] = [<span class="string">&#x27;zf&#x27;</span>,<span class="number">10</span>,<span class="literal">true</span>];</span><br><span class="line"><span class="comment">// 像元组中增加数据，只能增加元组中存放的类型</span></span><br><span class="line">tuple.<span class="title function_">push</span>(<span class="string">&#x27;回龙观&#x27;</span>);</span><br></pre></td></tr></table></figure><p>当访问一个已知索引的元素，会得到正确的类型</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x[<span class="number">0</span>].<span class="title function_">substr</span>(<span class="number">1</span>)); <span class="comment">// OK</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x[<span class="number">1</span>].<span class="title function_">substr</span>(<span class="number">1</span>)); <span class="comment">// Error, &#x27;number&#x27;没有中&#x27;substr&#x27;</span></span><br></pre></td></tr></table></figure><p>当访问一个越界的元素，会使用联合类型替代</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x[<span class="number">3</span>] = <span class="string">&#x27;world&#x27;</span>; <span class="comment">// OK, 字符串可以赋值给(string | number)类型</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x[<span class="number">5</span>].<span class="title function_">toString</span>()); <span class="comment">// OK, &#x27;string&#x27; 和 &#x27;number&#x27; 都有 toString</span></span><br><span class="line">x[<span class="number">6</span>] = <span class="literal">true</span>; <span class="comment">// Error, 布尔不是(string | number)类型</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p> 你赋予的值要求得符合这个结构和顺序, 元组在新增内容的时候 不能增加额外的类型的值，只能是已有的，而且增加后无法访问   </p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">tuple</span>: [<span class="built_in">string</span>, <span class="built_in">number</span>, <span class="built_in">string</span>, <span class="built_in">number</span>] = [<span class="string">&#x27;1&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;1&#x27;</span>, <span class="number">1</span>]</span><br></pre></td></tr></table></figure><p>已经约定好没有第四个，后续增加的不算，访问的时候不能访问后增加，安全问题 </p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">item</span>: <span class="built_in">string</span> = tuple[<span class="number">2</span>]</span><br></pre></td></tr></table></figure><h3 id="3-枚举类型-enum"><a href="#3-枚举类型-enum" class="headerlink" title="3.枚举类型 enum"></a>3.枚举类型 <code>enum</code></h3><p><code>enum</code>类型是对JavaScript标准数据类型的一个补充。 像C#等其它语言一样，使用枚举类型可以为一组数值赋予友好的名字    常用于 状态码 权限 数据格式 标志位</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Color</span> &#123;<span class="title class_">Red</span>, <span class="title class_">Green</span>, <span class="title class_">Blue</span>&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">c</span>: <span class="title class_">Color</span> = <span class="title class_">Color</span>.<span class="property">Green</span>;</span><br></pre></td></tr></table></figure><p>默认情况下，从<code>0</code>开始为元素编号。 你也可以手动的指定成员的数值。 例如，我们将上面的例子改成从<code>1</code>开始编号：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Color</span> &#123;<span class="title class_">Red</span> = <span class="number">1</span>, <span class="title class_">Green</span>, <span class="title class_">Blue</span>&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">c</span>: <span class="title class_">Color</span> = <span class="title class_">Color</span>.<span class="property">Green</span>;</span><br></pre></td></tr></table></figure><p>或者，全部都采用手动赋值：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">enum Color &#123;Red = 1, Green = 2, Blue = 4&#125;</span><br><span class="line">let c: Color = Color.Green;</span><br></pre></td></tr></table></figure><p>枚举类型提供的一个便利是你可以由枚举的值得到它的名字。 例如，我们知道数值为2，但是不确定它映射到Color里的哪个名字，我们可以查找相应的名字：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Color</span> &#123;<span class="title class_">Red</span> = <span class="number">1</span>, <span class="title class_">Green</span>, <span class="title class_">Blue</span>&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">colorName</span>: <span class="built_in">string</span> = <span class="title class_">Color</span>[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="title function_">alert</span>(colorName);  <span class="comment">// 显示&#x27;Green&#x27;因为上面代码里它的值是2</span></span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="variable constant_">USER_ROLE</span> &#123;</span><br><span class="line">    <span class="variable constant_">USER</span>, <span class="comment">// 默认从0开始</span></span><br><span class="line">    <span class="variable constant_">ADMIN</span>,</span><br><span class="line">    <span class="variable constant_">MANAGER</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &#123;0: &quot;USER&quot;, 1: &quot;ADMIN&quot;, 2: &quot;MANAGER&quot;, USER: 0, ADMIN: 1, MANAGER: 2&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p> 可以枚举，也可以反举</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 编译后的结果</span></span><br><span class="line">(<span class="keyword">function</span> (<span class="params">USER_ROLE</span>) &#123;</span><br><span class="line">    <span class="variable constant_">USER_ROLE</span>[<span class="variable constant_">USER_ROLE</span>[<span class="string">&quot;USER&quot;</span>] = <span class="number">0</span>] = <span class="string">&quot;USER&quot;</span>;</span><br><span class="line">    <span class="variable constant_">USER_ROLE</span>[<span class="variable constant_">USER_ROLE</span>[<span class="string">&quot;ADMIN&quot;</span>] = <span class="number">1</span>] = <span class="string">&quot;ADMIN&quot;</span>;</span><br><span class="line">    <span class="variable constant_">USER_ROLE</span>[<span class="variable constant_">USER_ROLE</span>[<span class="string">&quot;MANAGER&quot;</span>] = <span class="number">2</span>] = <span class="string">&quot;MANAGER&quot;</span>;</span><br><span class="line">&#125;)(<span class="variable constant_">USER_ROLE</span> || (<span class="variable constant_">USER_ROLE</span> = &#123;&#125;));</span><br></pre></td></tr></table></figure><ul><li><p>异构枚举</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="variable constant_">USER_ROLE</span> &#123;</span><br><span class="line">    <span class="variable constant_">USER</span> = <span class="string">&#x27;user&#x27;</span>,</span><br><span class="line">    <span class="variable constant_">ADMIN</span> = <span class="number">1</span>,</span><br><span class="line">    <span class="variable constant_">MANAGER</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>常量枚举</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">enum</span> <span class="variable constant_">USER_ROLE</span> &#123;</span><br><span class="line">    <span class="variable constant_">USER</span>,</span><br><span class="line">    <span class="variable constant_">ADMIN</span>,</span><br><span class="line">    <span class="variable constant_">MANAGER</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">USER_ROLE</span>.<span class="property">USER</span>)<span class="comment">// console.log(0 /* USER */);</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="任意值-any"><a href="#任意值-any" class="headerlink" title="任意值 any"></a>任意值 <code>any</code></h3><p>有时候，我们会想要为那些在编程阶段还不清楚类型的变量指定一个类型。 这些值可能来自于动态的内容，比如来自用户输入或第三方代码库。 这种情况下，我们不希望类型检查器对这些值进行检查而是直接让它们通过编译阶段的检查。 那么我们可以使用<code>any</code>类型来标记这些变量：</p><blockquote><p>any 任何类型 能不写any 就不要用any ， any会导致类型丧失检测  anyScript(如果我们的项目是采用ts编写的，一般情况下any的出现场景不多) 放弃检测，出错就怨自己。 没有ts的加持</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">notSure</span>: <span class="built_in">any</span> = <span class="number">4</span>;</span><br><span class="line">notSure = <span class="string">&quot;这是是字符串&quot;</span>;</span><br><span class="line">notSure = <span class="literal">false</span>; <span class="comment">// 可以的，肯定是布尔值</span></span><br></pre></td></tr></table></figure><p>在对现有代码进行改写的时候，<code>any</code>类型是十分有用的，它允许你在编译时可选择地包含或移除类型检查。 你可能认为<code>Object</code>有相似的作用，就像它在其它语言中那样。 但是<code>Object</code>类型的变量只是允许你给它赋任意值 - 但是却不能够在它上面调用任意的方法，即便它真的有这些方法：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">notSure</span>: <span class="built_in">any</span> = <span class="number">4</span>;</span><br><span class="line">notSure.<span class="title function_">ifItExists</span>(); <span class="comment">// ifItExists可能在运行时存在</span></span><br><span class="line">notSure.<span class="title function_">toFixed</span>(); <span class="comment">// 好的，toFixed存在(但编译器不检查)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">prettySure</span>: <span class="title class_">Object</span> = <span class="number">4</span>;</span><br><span class="line">prettySure.<span class="title function_">toFixed</span>(); <span class="comment">// 错误:属性&#x27;toFixed&#x27;在类型&#x27;Object&#x27;上不存在.</span></span><br></pre></td></tr></table></figure><p>当你只知道一部分数据的类型时，<code>any</code>类型也是有用的。 比如，你有一个数组，它包含了不同的类型的数据：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">list</span>: <span class="built_in">any</span>[] = [<span class="number">1</span>, <span class="literal">true</span>, <span class="string">&quot;free&quot;</span>];</span><br><span class="line">list[<span class="number">1</span>] = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr</span>:<span class="built_in">any</span> = [<span class="string">&#x27;jiagou&#x27;</span>,<span class="literal">true</span>,&#123;<span class="attr">name</span>:<span class="string">&#x27;zf&#x27;</span>&#125;]</span><br></pre></td></tr></table></figure><h3 id="空值-void"><a href="#空值-void" class="headerlink" title="空值 void"></a>空值 <code>void</code></h3><p>某种程度上来说，<code>void</code>类型像是与<code>any</code>类型相反，它表示没有任何类型。 当一个函数没有返回值时，你通常会见到其返回值类型是<code>void</code>：</p><p>只能接受<code>null</code>，<code>undefined</code>。一般用于函数的返回值</p><blockquote><p>严格模式下不能将<code>null</code>赋予给void</p><p>void 类型代表的是空类型    undefiend   void  这个void一般值表示函数的返回值</p><p>unefiend 可以赋予给void， 都代表空 (undefiend 是 void的子类型)</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">warnUser</span>(<span class="params"></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;这是我的警告信息&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">a</span>:<span class="built_in">void</span>;</span><br><span class="line">a = <span class="literal">undefined</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>声明一个<code>void</code>类型的变量没有什么大用，因为你只能为它赋予<code>undefined</code>和<code>null</code>：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">unusable</span>: <span class="built_in">void</span> = <span class="literal">undefined</span>;</span><br></pre></td></tr></table></figure><h3 id="Null-和-Undefined"><a href="#Null-和-Undefined" class="headerlink" title="Null 和 Undefined"></a>Null 和 Undefined</h3><p>TypeScript里，<code>undefined</code>和<code>null</code>两者各自有自己的类型分别叫做<code>undefined</code>和<code>null</code>。 和<code>void</code>相似，它们的本身的类型用处不是很大：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Not much else we can assign to these variables!</span></span><br><span class="line"><span class="comment">// 我们不能给这些变量赋多少别的值</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">u</span>: <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">n</span>: <span class="literal">null</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">name</span>:<span class="built_in">number</span> | <span class="built_in">boolean</span>;</span><br><span class="line">name = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure><p>默认情况下<code>null</code>和<code>undefined</code>是所有类型的子类型。 就是说你可以把<code>null</code>和<code>undefined</code>赋值给<code>number</code>类型的变量。</p><blockquote><p>如果禁用非严格null检测，null和undefiend 可以赋予给任何类型 （null,undefiend任何类型的子类型）</p><p> 如果<code>strictNullChecks</code>的值为true，则不能把null 和 undefined付给其他类型</p></blockquote><p>然而，当你指定了<code>--strictNullChecks</code>标记，<code>null</code>和<code>undefined</code>只能赋值给<code>void</code>和它们各自。 这能避免<em>很多</em>常见的问题。 也许在某处你想传入一个<code>string</code>或<code>null</code>或<code>undefined</code>，你可以使用联合类型<code>string | null | undefined</code>。 再次说明，稍后我们会介绍联合类型。</p><blockquote><p>注意：我们鼓励尽可能地使用<code>--strictNullChecks</code>，但在本手册里我们假设这个标记是关闭的。</p></blockquote><h3 id="Never"><a href="#Never" class="headerlink" title="Never"></a>Never</h3><p><code>never</code>类型表示的是那些永不存在的值的类型。 例如，<code>never</code>类型是那些总是会抛出异常或根本就不会有返回值的函数表达式或箭头函数表达式的返回值类型； 变量也可能是<code>never</code>类型，当它们被永不为真的类型保护所约束时。</p><p><code>never</code>类型是任何类型的子类型，也可以赋值给任何类型；</p><blockquote><p>never代表不会出现的值。不能把其他类型赋值给never</p></blockquote><p>然而，<em>没有</em>类型是<code>never</code>的子类型或可以赋值给<code>never</code>类型（除了<code>never</code>本身之外）。 即使<code>any</code>也不可以赋值给<code>never</code>。</p><p>下面是一些返回<code>never</code>类型的函数：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回never的函数必须存在无法达到的终点</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">error</span>(<span class="params">message: <span class="built_in">string</span></span>): <span class="built_in">never</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(message);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 推断的返回值类型为never</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fail</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">error</span>(<span class="string">&quot;Something failed&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回never的函数必须存在无法达到的终点</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">infiniteLoop</span>(<span class="params"></span>): <span class="built_in">never</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  never 永远不，永远达到不了的地方就是never</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">error</span>(<span class="params">message: <span class="built_in">string</span></span>): <span class="built_in">never</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;err&quot;</span>); <span class="comment">// 出错函数无法执行完毕</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 函数无法执行完毕</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">loop</span>(<span class="params"></span>): <span class="built_in">never</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123; &#125; <span class="comment">// 函数无法达到执行完毕的状态</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 如果if/else 条件都走完了， 没有遗漏的 后面的类型就是never (完整性保护)</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">x:<span class="built_in">number</span> | <span class="built_in">string</span></span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> x == <span class="string">&#x27;number&#x27;</span>)&#123;</span><br><span class="line"></span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="keyword">typeof</span> x === <span class="string">&#x27;string&#x27;</span>)&#123;</span><br><span class="line"></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(x); <span class="comment">// never</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>   never类型 只能被never类型来赋予值</p></blockquote><h3 id="Symbol类型"><a href="#Symbol类型" class="headerlink" title="Symbol类型"></a>Symbol类型</h3><p>Symbol表示独一无二</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> s1 = <span class="title class_">Symbol</span>(<span class="string">&#x27;key&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> s2 = <span class="title class_">Symbol</span>(<span class="string">&#x27;key&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(s1 == s2); <span class="comment">// false</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">symbol</span>:<span class="built_in">symbol</span> = <span class="title class_">Symbol</span>()</span><br></pre></td></tr></table></figure><h3 id="BigInt类型"><a href="#BigInt类型" class="headerlink" title="BigInt类型"></a><code>BigInt</code>类型</h3><blockquote><p><code>number</code>类型和<code>bigInt</code>类型是不兼容的</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> num1 = <span class="title class_">Number</span>.<span class="property">MAX_SAFE_INTEGER</span> + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> num2 = <span class="title class_">Number</span>.<span class="property">MAX_SAFE_INTEGER</span> + <span class="number">2</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num1 == num2)<span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">max</span>: <span class="built_in">bigint</span> = <span class="title class_">BigInt</span>(<span class="title class_">Number</span>.<span class="property">MAX_SAFE_INTEGER</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(max + <span class="title class_">BigInt</span>(<span class="number">1</span>) === max + <span class="title class_">BigInt</span>(<span class="number">2</span>))</span><br></pre></td></tr></table></figure><h3 id="object对象类型"><a href="#object对象类型" class="headerlink" title="object对象类型"></a><code>object</code>对象类型</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> create = (<span class="attr">obj</span>:<span class="built_in">object</span>):<span class="function"><span class="params">void</span>=&gt;</span>&#123;&#125;</span><br><span class="line"><span class="title function_">create</span>(&#123;&#125;);</span><br><span class="line"><span class="title function_">create</span>([]);</span><br><span class="line"><span class="title function_">create</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;)</span><br></pre></td></tr></table></figure><ul><li><p>练习代码</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ts关注的是类型，不是业务逻辑） </span></span><br><span class="line"><span class="comment">// 类型的分类： 基础类型、高级类型、内置类型、自定义类型、类型体操</span></span><br><span class="line"><span class="comment">// TS的类型都是在变量后面来写 ：后面是类型 = 后面是值 (ts语法，不是js对象)</span></span><br><span class="line"><span class="comment">// ts的特点，如何来学习？</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1).ts的目的是什么？从安全角度来考虑使用 (考虑我在赋予结果的时候 是否会发生错误)  error lens</span></span><br><span class="line"><span class="comment">// 2).ts是用来检测类型的，只是提示作用，不是在运行的时候发生的 (运行的时候和ts无关，“代码没有被执行”)</span></span><br><span class="line"><span class="comment">// 3).编译ts之后 类型就消失了，不存在类型了（写的都是空气） 最终生生产环境下 可以增添.d.ts 来对js文件增加类型声明</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ts的特点：在编写代码的时候 并不是所有的变量都要添加类型。 （ts中支持类型推导，根据赋的值来猜测他的类型） 如果猜测的类型是对的不用给类型, 如果猜测的不对，或者类型无法正确的推导 自己写类型</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1） string number boolean</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">name</span>: <span class="built_in">string</span> = <span class="string">&#x27;jw&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">age</span>: <span class="built_in">number</span> = <span class="number">30</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">gender</span>: <span class="built_in">boolean</span> = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 基础类型， 包装类型  规范 小写的类型一般用于描述基本类型 大写的用来描述的是实例类型</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">s1</span>: <span class="built_in">string</span> = <span class="string">&#x27;abc&#x27;</span>;</span><br><span class="line"><span class="comment">// let s2:string = new String(&#x27;abc&#x27;)</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">s3</span>: <span class="title class_">String</span> = <span class="string">&#x27;1&#x27;</span>; <span class="comment">// 在赋予值的时候 子集可以赋予给父级</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">s4</span>: <span class="title class_">String</span> = <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&#x27;1&#x27;</span>); <span class="comment">// 类的类型，类类型，用来描述实例的</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 我们在使用基本类型的时候 需要采用的时候 小写类型来标识</span></span><br><span class="line"><span class="comment">// 数组的概念：用于存储多个类型相同的集合</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 类型[]  Array&lt;类型&gt; 都可以用于声明数组</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr1</span>: <span class="built_in">number</span>[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr2</span>: <span class="title class_">Array</span>&lt;<span class="built_in">number</span>&gt; = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr3</span>: (<span class="built_in">number</span> | <span class="built_in">string</span>)[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组要求的是存储的格式按照特定类型来存储，不关心位置  </span></span><br><span class="line"><span class="comment">// 元组  tuple</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 你赋予的值要求得符合这个结构和顺序, 元组在新增内容的时候 不能增加额外的类型的值，只能是已有的，而且增加后无法访问</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">tuple</span>: [<span class="built_in">string</span>, <span class="built_in">number</span>, <span class="built_in">string</span>, <span class="built_in">number</span>] = [<span class="string">&#x27;1&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;1&#x27;</span>, <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 已经约定好没有第四个，后续增加的不算，访问的时候不能访问后增加，安全问题</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">item</span>: <span class="built_in">string</span> = tuple[<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 枚举： 自带类型的对象（自己有类型，就是一个对象）</span></span><br><span class="line"><span class="comment">// 约定一组格式我们会用枚举  状态码 权限 数据格式 标志位</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 维护一组常量的时候 可以采用枚举</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">enum</span> <span class="variable constant_">STATUS</span> &#123; <span class="comment">// 常量枚举 不会额外编译成对象， 所以更节约</span></span><br><span class="line">    <span class="string">&#x27;OK&#x27;</span> = <span class="string">&#x27;ok&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;NO_OK&#x27;</span> = <span class="number">100</span>,</span><br><span class="line">    <span class="string">&#x27;NOT_FOUND&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 类型可以进行反举 （值是数字的时候 可以反过来枚举）, 枚举没有值会根据上面的索引来自动累加</span></span><br><span class="line"><span class="comment">// 异构枚举 就是枚举中不光有数字 还有字符串. 异构枚举上一个是字符串下一个无法推导</span></span><br><span class="line"><span class="keyword">const</span> r = <span class="variable constant_">STATUS</span>[<span class="string">&#x27;OK&#x27;</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(r)</span><br><span class="line"></span><br><span class="line"><span class="comment">// null  undefined  基本类型 ，正常情况下只能赋予给null 和 undefined </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">u</span>: <span class="literal">undefined</span> = <span class="literal">undefined</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">n</span>: <span class="literal">null</span> = <span class="literal">null</span></span><br><span class="line"><span class="comment">// 如果禁用非严格null检测，null和undefiend 可以赋予给任何类型 （null,undefiend任何类型的子类型）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// void 类型代表的是空类型    undefiend   void  这个void一般值表示函数的返回值</span></span><br><span class="line"><span class="comment">// unefiend 可以赋予给void， 都代表空 (undefiend 是 void的子类型)</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// never 永远不，永远达到不了的地方就是never</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数无法执行完毕</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">whileTrue</span>(<span class="params"></span>): <span class="built_in">never</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123; &#125;; <span class="comment">// 函数无法达到执行完毕的状态</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">throwError</span>(<span class="params"></span>): <span class="built_in">never</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="title class_">Error</span>(); <span class="comment">// 出错函数无法执行完毕</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果if/else 条件都走完了， 没有遗漏的 后面的类型就是never (完整性保护)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 111  [1,1,1]</span></span><br><span class="line"><span class="comment">// &#x27;111&#x27; [&#x27;1&#x27;,&#x27;1&#x27;,&#x27;1&#x27;]</span></span><br><span class="line"><span class="comment">// true [&#x27;t&#x27;,&#x27;r&#x27;,&#x27;u&#x27;,&#x27;e&#x27;]</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">validateCheck</span>(<span class="params">v:<span class="built_in">never</span></span>)&#123;&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">toArray</span>(<span class="params">val:<span class="built_in">number</span> | <span class="built_in">string</span> | <span class="built_in">boolean</span></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> val === <span class="string">&#x27;number&#x27;</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> val.<span class="title function_">toString</span>().<span class="title function_">split</span>(<span class="string">&#x27;&#x27;</span>).<span class="title function_">map</span>(<span class="title class_">Number</span>) <span class="comment">// [1,1,1]</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> val === <span class="string">&#x27;string&#x27;</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> val.<span class="title function_">split</span>(<span class="string">&#x27;&#x27;</span>)<span class="comment">// [1,1,1]</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> val === <span class="string">&#x27;boolean&#x27;</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> val.<span class="title function_">toString</span>().<span class="title function_">split</span>(<span class="string">&#x27;&#x27;</span>) <span class="comment">// [1,1,1]</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// never类型 只能被never类型来赋予值</span></span><br><span class="line">    <span class="title function_">validateCheck</span>(val); <span class="comment">// 代码的完整性保护</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">toArray</span>(<span class="string">&#x27;abc&#x27;</span>)</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// any 任何类型 能不写any 就不要用any ， any会导致类型丧失检测  anyScript(如果我们的项目是采用ts编写的，一般情况下any的出现场景不多) 放弃检测，出错就怨自己。 没有ts的加持</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// let a1:any = 1;</span></span><br><span class="line"><span class="comment">// a1 = &#x27;1&#x27;;</span></span><br><span class="line"><span class="comment">// a2 = function()&#123;&#125;</span></span><br><span class="line"><span class="comment">// object 引用类型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">create</span>(<span class="params">val:<span class="built_in">object</span></span>)&#123; <span class="comment">// &#123;&#125; object Object的区别</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">create</span>(&#123;&#125;)</span><br><span class="line"><span class="title function_">create</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;)</span><br><span class="line"><span class="title function_">create</span>([])</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">symbol</span>:<span class="built_in">symbol</span> = <span class="title class_">Symbol</span>()..</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">bigint</span>:<span class="built_in">bigint</span> = <span class="title class_">BigInt</span>(<span class="title class_">Number</span>.<span class="property">MAX_SAFE_INTEGER</span> + <span class="number">1</span>)</span><br><span class="line"><span class="comment">// symbol bigInt</span></span><br><span class="line"><span class="comment">// 非严格模式在关闭的时候 null可以赋予给undefiend</span></span><br><span class="line"><span class="comment">// string number boolean 数组  元组 枚举  null undefiend void never any objectr symbol bigInt </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; &#125; <span class="comment">// 这是一个独立的模块，不好影响其他人</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h1 id="3-类型推导-type-inference"><a href="#3-类型推导-type-inference" class="headerlink" title="3.类型推导(type inference)"></a>3.类型推导(type inference)</h1><h2 id="一-类型推导"><a href="#一-类型推导" class="headerlink" title="一. 类型推导"></a>一. 类型推导</h2><p>声明变量没有赋予值时默认变量是<code>any</code>类型</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name; <span class="comment">// 类型为any</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>声明变量赋值时则以赋值类型为准</strong></p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&#x27;hello&#x27;</span>; <span class="comment">// name被推导为字符串类型 </span></span><br><span class="line">name = <span class="number">10</span>;</span><br></pre></td></tr></table></figure><p>TypeScript里，在有些没有明确指出类型的地方，类型推论会帮助提供类型。如下面的例子</p> <figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">3</span>;  <span class="comment">// 类型被推导为 number</span></span><br></pre></td></tr></table></figure><blockquote><p>变量<code>x</code>的类型被推断为数字。 这种推断发生在初始化变量和成员，设置默认参数值和决定函数返回值时</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = [<span class="number">0</span>, <span class="number">1</span>, <span class="literal">null</span>]; <span class="comment">// 类型被推导为 number | null</span></span><br></pre></td></tr></table></figure><blockquote><p>为了推断<code>x</code>的类型，我们必须考虑所有元素的类型。 这里有两种选择：<code>number</code>和<code>null</code>。 计算通用类型算法会考虑所有的候选类型，并给出一个兼容所有候选类型的类型。</p></blockquote><p>由于最终的通用类型取自候选类型，有些时候候选类型共享相同的通用类型，但是却没有一个类型能做为所有候选类型的类型。例如</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> zoo = [<span class="keyword">new</span> <span class="title class_">Rhino</span>(), <span class="keyword">new</span> <span class="title class_">Elephant</span>(), <span class="keyword">new</span> <span class="title class_">Snake</span>()];  <span class="comment">// (Rhino | Elephant | Snake)[]</span></span><br></pre></td></tr></table></figure><blockquote><p>这里，我们想让zoo被推断为<code>Animal[]</code>类型，但是这个数组里没有对象是<code>Animal</code>类型的，因此不能推断出这个结果。 为了更正，当候选类型不能使用的时候我们需要明确的指出类型：</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">zoo</span>: <span class="title class_">Animal</span>[] = [<span class="keyword">new</span> <span class="title class_">Rhino</span>(), <span class="keyword">new</span> <span class="title class_">Elephant</span>(), <span class="keyword">new</span> <span class="title class_">Snake</span>()];</span><br></pre></td></tr></table></figure><p> const 是常量意味着定义的值不会修改所以他的类型是一个字面量类型 . const声明变量必须复制 </p><p> let 声明变量 可以修改所以类型范围推到的结果会变大</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a1 = <span class="number">1</span> <span class="comment">// const a1: 1</span></span><br><span class="line"><span class="keyword">let</span> a2  = <span class="number">1</span>  <span class="comment">// let a2: number</span></span><br></pre></td></tr></table></figure><h4 id="上下文类型"><a href="#上下文类型" class="headerlink" title="上下文类型"></a>上下文类型</h4><p>TypeScript类型推论也可能按照相反的方向进行。 这被叫做“按上下文归类”。按上下文归类会发生在表达式的类型与所处的位置相关时。比如：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onmousedown</span> = <span class="keyword">function</span>(<span class="params">mouseEvent</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(mouseEvent.<span class="property">button</span>);  <span class="comment">//&lt;- Error</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>这个例子会得到一个类型错误，TypeScript类型检查器使用<code>Window.onmousedown</code>函数的类型来推断右边函数表达式的类型。 因此，就能推断出<code>mouseEvent</code>参数的类型了。 如果函数表达式不是在上下文类型的位置，<code>mouseEvent</code>参数的类型需要指定为<code>any</code>，这样也不会报错了。</p><p>如果上下文类型表达式包含了明确的类型信息，上下文的类型被忽略。 重写上面的例子：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onmousedown</span> = <span class="keyword">function</span>(<span class="params">mouseEvent: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(mouseEvent.<span class="property">button</span>);  <span class="comment">//&lt;- Now, no error is given</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>这个函数表达式有明确的参数类型注解，上下文类型被忽略。 这样的话就不报错了，因为这里不会使用到上下文类型。</p><p>上下文归类会在很多情况下使用到。 通常包含函数的参数，赋值表达式的右边，类型断言，对象成员和数组字面量和返回值语句。 上下文类型也会做为最佳通用类型的候选类型。比如：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">createZoo</span>(<span class="params"></span>): <span class="title class_">Animal</span>[] &#123;</span><br><span class="line">    <span class="keyword">return</span> [<span class="keyword">new</span> <span class="title class_">Rhino</span>(), <span class="keyword">new</span> <span class="title class_">Elephant</span>(), <span class="keyword">new</span> <span class="title class_">Snake</span>()];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个例子里，最佳通用类型有4个候选者：<code>Animal</code>，<code>Rhino</code>，<code>Elephant</code>和<code>Snake</code>。 当然，<code>Animal</code>会被做为最佳通用类型。</p><h3 id="二-包装对象"><a href="#二-包装对象" class="headerlink" title="二.包装对象"></a>二.包装对象</h3><p>我们在使用基本数据类型时，调用基本数据类型上的方法，默认会将原始数据类型包装成对象类型</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">bool1</span>:<span class="built_in">boolean</span> = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">bool2</span>:<span class="built_in">boolean</span> = <span class="title class_">Boolean</span>(<span class="number">1</span>); </span><br><span class="line"><span class="keyword">let</span> <span class="attr">bool3</span>:<span class="title class_">Boolean</span> = <span class="keyword">new</span> <span class="title class_">Boolean</span>(<span class="number">2</span>);</span><br></pre></td></tr></table></figure><blockquote><p><em>boolean</em>是基本数据类型 , <em>Boolean</em>是他的封装类</p></blockquote><h3 id="三-联合类型（Union-Types）"><a href="#三-联合类型（Union-Types）" class="headerlink" title="三.联合类型（Union Types）"></a>三.联合类型（Union Types）</h3><p>联合类型与交叉类型很有关联，但是使用上却完全不同。 偶尔你会遇到这种情况，一个代码库希望传入<code>number</code>或<code>string</code>类型的参数。 例如下面的函数</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取一个字符串，并在左侧添加“padding”.</span></span><br><span class="line"><span class="comment"> * 如果&#x27;padding&#x27;是一个字符串，那么&#x27;padding&#x27;会被添加到左侧.</span></span><br><span class="line"><span class="comment"> * 如果&#x27;padding&#x27;是一个数字，那么这个数量的空格将被添加到左侧</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">padLeft</span>(<span class="params">value: <span class="built_in">string</span>, padding: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> padding === <span class="string">&quot;number&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Array</span>(padding + <span class="number">1</span>).<span class="title function_">join</span>(<span class="string">&quot; &quot;</span>) + value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> padding === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> padding + value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`Expected string or number, got &#x27;<span class="subst">$&#123;padding&#125;</span>&#x27;.`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">padLeft</span>(<span class="string">&quot;Hello world&quot;</span>, <span class="number">4</span>); <span class="comment">// returns &quot;    Hello world&quot;</span></span><br></pre></td></tr></table></figure><p><code>padLeft</code>存在一个问题，<code>padding</code>参数的类型指定成了<code>any</code>。 这就是说我们可以传入一个既不是<code>number</code>也不是<code>string</code>类型的参数，但是TypeScript却不报错。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> indentedString = <span class="title function_">padLeft</span>(<span class="string">&quot;Hello world&quot;</span>, <span class="literal">true</span>); <span class="comment">// 编译阶段通过，运行时报错</span></span><br></pre></td></tr></table></figure><p>在传统的面向对象语言里，我们可能会将这两种类型抽象成有层级的类型。 这么做显然是非常清晰的，但同时也存在了过度设计。 <code>padLeft</code>原始版本的好处之一是允许我们传入原始类型。 这样做的话使用起来既简单又方便。 如果我们就是想使用已经存在的函数的话，这种新的方式就不适用了。</p><p>代替<code>any</code>， 我们可以使用<em>联合类型</em>做为<code>padding</code>的参数：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Takes a string and adds &quot;padding&quot; to the left.</span></span><br><span class="line"><span class="comment"> * If &#x27;padding&#x27; is a string, then &#x27;padding&#x27; is appended to the left side.</span></span><br><span class="line"><span class="comment"> * If &#x27;padding&#x27; is a number, then that number of spaces is added to the left side.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">padLeft</span>(<span class="params">value: <span class="built_in">string</span>, padding: <span class="built_in">string</span> | <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> indentedString = <span class="title function_">padLeft</span>(<span class="string">&quot;Hello world&quot;</span>, <span class="literal">true</span>); <span class="comment">// errors during compilation</span></span><br></pre></td></tr></table></figure><p>联合类型表示一个值可以是几种类型之一。 我们用竖线（<code>|</code>）分隔每个类型，所以<code>number | string | boolean</code>表示一个值可以是<code>number</code>，<code>string</code>，或<code>boolean</code>。</p><p>如果一个值是联合类型，我们只能访问此联合类型的所有类型里共有的成员。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Bird</span> &#123;</span><br><span class="line">    <span class="title function_">fly</span>();</span><br><span class="line">    <span class="title function_">layEggs</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Fish</span> &#123;</span><br><span class="line">    <span class="title function_">swim</span>();</span><br><span class="line">    <span class="title function_">layEggs</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getSmallPet</span>(<span class="params"></span>): <span class="title class_">Fish</span> | <span class="title class_">Bird</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> pet = <span class="title function_">getSmallPet</span>();</span><br><span class="line">pet.<span class="title function_">layEggs</span>(); <span class="comment">// okay</span></span><br><span class="line">pet.<span class="title function_">swim</span>();    <span class="comment">// errors</span></span><br></pre></td></tr></table></figure><p>这里的联合类型可能有点复杂，但是你很容易就习惯了。 如果一个值的类型是<code>A | B</code>，我们能够<em>确定</em>的是它包含了<code>A</code><em>和</em><code>B</code>中共有的成员。 这个例子里，<code>Bird</code>具有一个<code>fly</code>成员。 我们不能确定一个<code>Bird | Fish</code>类型的变量是否有<code>fly</code>方法。 如果变量在运行时是<code>Fish</code>类型，那么调用<code>pet.fly()</code>就出错了。</p><p>在使用联合类型时，没有赋值只能访问联合类型中共有的方法和属性</p><blockquote><p>如果是联合类型在使用方法的时候 只能采用公共的方法来使用</p><p> 还是从安全性考虑， 在使用联合类型的时候 我门通过会先定义值，在使用保证安全</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">name</span>:<span class="built_in">string</span> | <span class="built_in">number</span> <span class="comment">// 联合类型  </span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name!.<span class="title function_">toString</span>()); <span class="comment">// 公共方法</span></span><br><span class="line">name = <span class="number">10</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name!.<span class="title function_">toFixed</span>(<span class="number">2</span>)); <span class="comment">// number方法</span></span><br><span class="line">name = <span class="string">&#x27;zf&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name!.<span class="title function_">toLowerCase</span>()); <span class="comment">// 字符串方法</span></span><br></pre></td></tr></table></figure><blockquote><p>这里的!表示此值非空</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">ele</span>: <span class="title class_">HTMLElement</span> | <span class="literal">null</span> = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;#app&#x27;</span>);</span><br><span class="line">ele!.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;red&#x27;</span>; <span class="comment">// 断定ele元素一定有值</span></span><br></pre></td></tr></table></figure><h4 id="可辨识联合（Discriminated-Unions）"><a href="#可辨识联合（Discriminated-Unions）" class="headerlink" title="可辨识联合（Discriminated Unions）"></a>可辨识联合（Discriminated Unions）</h4><p>你可以合并单例类型，联合类型，类型保护和类型别名来创建一个叫做<em>可辨识联合</em>的高级模式，它也称做<em>标签联合</em>或<em>代数数据类型</em>。 可辨识联合在函数式编程很有用处。 一些语言会自动地为你辨识联合；而TypeScript则基于已有的JavaScript模式。 它具有3个要素：</p><ol><li>具有普通的单例类型属性—<em>可辨识的特征</em>。</li><li>一个类型别名包含了那些类型的联合—<em>联合</em>。</li><li>此属性上的类型保护。</li></ol><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Square</span> &#123;</span><br><span class="line">    <span class="attr">kind</span>: <span class="string">&quot;square&quot;</span>;</span><br><span class="line">    <span class="attr">size</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Rectangle</span> &#123;</span><br><span class="line">    <span class="attr">kind</span>: <span class="string">&quot;rectangle&quot;</span>;</span><br><span class="line">    <span class="attr">width</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="attr">height</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Circle</span> &#123;</span><br><span class="line">    <span class="attr">kind</span>: <span class="string">&quot;circle&quot;</span>;</span><br><span class="line">    <span class="attr">radius</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>首先我们声明了将要联合的接口。 每个接口都有<code>kind</code>属性但有不同的字符串字面量类型。 <code>kind</code>属性称做<em>可辨识的特征</em>或<em>标签</em>。 其它的属性则特定于各个接口。 注意，目前各个接口间是没有联系的。 下面我们把它们联合到一起：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Shape</span> = <span class="title class_">Square</span> | <span class="title class_">Rectangle</span> | <span class="title class_">Circle</span>;</span><br></pre></td></tr></table></figure><p>现在我们使用可辨识联合:</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">area</span>(<span class="params">s: Shape</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (s.<span class="property">kind</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;square&quot;</span>: <span class="keyword">return</span> s.<span class="property">size</span> * s.<span class="property">size</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;rectangle&quot;</span>: <span class="keyword">return</span> s.<span class="property">height</span> * s.<span class="property">width</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;circle&quot;</span>: <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="property">PI</span> * s.<span class="property">radius</span> ** <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="四-类型断言"><a href="#四-类型断言" class="headerlink" title="四.类型断言"></a>四.类型断言</h3><ul><li>类型断言</li></ul><p>​        类型断言有两种形式。 其一是“尖括号”语法</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">someValue</span>: <span class="built_in">any</span> = <span class="string">&quot;this is a string&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">strLength</span>: <span class="built_in">number</span> = (&lt;<span class="built_in">string</span>&gt;someValue).<span class="property">length</span>;</span><br></pre></td></tr></table></figure><p>​    另一个为<code>as</code>语法：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">someValue</span>: <span class="built_in">any</span> = <span class="string">&quot;this is a string&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">strLength</span>: <span class="built_in">number</span> = (someValue <span class="keyword">as</span> <span class="built_in">string</span>).<span class="property">length</span>;</span><br></pre></td></tr></table></figure><p>我门断言类型后在使用 as断言成某种类型（一定是联合类型中的某一个） ! (非空断言， 表示这个值一定不是空的)不存在结果你自己承担， ts不管了，你认为的一定有值</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">name</span>: <span class="built_in">string</span> | <span class="built_in">number</span>;</span><br><span class="line">(name! <span class="keyword">as</span> <span class="built_in">number</span>).<span class="title function_">toFixed</span>(<span class="number">2</span>); <span class="comment">// 强制</span></span><br><span class="line">((&lt;<span class="built_in">number</span>&gt;name!).<span class="title function_">toFixed</span>(<span class="number">2</span>));</span><br></pre></td></tr></table></figure><blockquote><p>!TS语法  ?js语法 链判断运算符（如果值有再去取值</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ele = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;app&#x27;</span>);</span><br><span class="line"><span class="comment">// ele!.style.background = &#x27;red&#x27;;</span></span><br><span class="line">(ele <span class="keyword">as</span> <span class="title class_">HTMLElement</span>).<span class="property">style</span>.<span class="property">background</span> = <span class="string">&#x27;red&#x27;</span>;</span><br></pre></td></tr></table></figure><blockquote><p>? 表示的是取值操作，不能赋值  ， ！表示某个变量一定存在</p><p> ele?.style.background</p><p> ?? js语法 合并空值运算符， 三元表达式 但是 false || 取的结果 </p><p> let val = 0 || 100 // 除了 null 和 undefiend 其他都是<strong>true</strong></p></blockquote><ul><li>双重断言</li></ul><blockquote><p>尽量不要使用双重断言，会破坏原有类型关系，断言为any是因为any类型可以被赋值给其他类型</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Direction</span> = <span class="string">&#x27;Up&#x27;</span> | <span class="string">&#x27;Down&#x27;</span> | <span class="string">&#x27;Left&#x27;</span> | <span class="string">&#x27;Right&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">direction</span>:<span class="title class_">Direction</span> = <span class="string">&#x27;Down&#x27;</span>;</span><br></pre></td></tr></table></figure><h3 id="五-字面量类型"><a href="#五-字面量类型" class="headerlink" title="五.字面量类型"></a>五.字面量类型</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Direction</span> = <span class="string">&#x27;Up&#x27;</span> | <span class="string">&#x27;Down&#x27;</span> | <span class="string">&#x27;Left&#x27;</span> | <span class="string">&#x27;Right&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">direction</span>:<span class="title class_">Direction</span> = <span class="string">&#x27;Down&#x27;</span>;</span><br></pre></td></tr></table></figure><blockquote><p>可以用字面量当做类型，同时也表明只能采用这几个值（限定值）。类似枚举。</p></blockquote><h4 id="字符串字面量类型"><a href="#字符串字面量类型" class="headerlink" title="字符串字面量类型"></a>字符串字面量类型</h4><p>字符串字面量类型允许你指定字符串必须的固定值。 在实际应用中，字符串字面量类型可以与联合类型，类型保护和类型别名很好的配合。 通过结合使用这些特性，你可以实现类似枚举类型的字符串。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Easing</span> = <span class="string">&quot;ease-in&quot;</span> | <span class="string">&quot;ease-out&quot;</span> | <span class="string">&quot;ease-in-out&quot;</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UIElement</span> &#123;</span><br><span class="line">    <span class="title function_">animate</span>(<span class="params">dx: <span class="built_in">number</span>, dy: <span class="built_in">number</span>, easing: Easing</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (easing === <span class="string">&quot;ease-in&quot;</span>) &#123;</span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (easing === <span class="string">&quot;ease-out&quot;</span>) &#123;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (easing === <span class="string">&quot;ease-in-out&quot;</span>) &#123;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// error! should not pass null or undefined.</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> button = <span class="keyword">new</span> <span class="title class_">UIElement</span>();</span><br><span class="line">button.<span class="title function_">animate</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="string">&quot;ease-in&quot;</span>);</span><br><span class="line">button.<span class="title function_">animate</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="string">&quot;uneasy&quot;</span>); <span class="comment">// 错误:此处不允许使用“uneasy”</span></span><br></pre></td></tr></table></figure><p>你只能从三种允许的字符中选择其一来做为参数传递，传入其它值则会产生错误。</p><blockquote><p>类型“uneasy”的参数不能赋值给类型“ease-in”|“ease-out”|“ease-in-out”的参数</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Argument</span> <span class="keyword">of</span> <span class="keyword">type</span> <span class="string">&#x27;&quot;uneasy&quot;&#x27;</span> is not assignable to parameter <span class="keyword">of</span> <span class="keyword">type</span> <span class="string">&#x27;&quot;ease-in&quot; | &quot;ease-out&quot; | &quot;ease-in-out&quot;&#x27;</span></span><br></pre></td></tr></table></figure><p>字符串字面量类型还可以用于区分函数重载：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">createElement</span>(<span class="params">tagName: <span class="string">&quot;img&quot;</span></span>): <span class="title class_">HTMLImageElement</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createElement</span>(<span class="params">tagName: <span class="string">&quot;input&quot;</span></span>): <span class="title class_">HTMLInputElement</span>;</span><br><span class="line"><span class="comment">// ... more overloads ...</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createElement</span>(<span class="params">tagName: <span class="built_in">string</span></span>): <span class="title class_">Element</span> &#123;</span><br><span class="line">    <span class="comment">// ... code goes here ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="数字字面量类型"><a href="#数字字面量类型" class="headerlink" title="数字字面量类型"></a>数字字面量类型</h4><p>TypeScript还具有数字字面量类型。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">rollDie</span>(<span class="params"></span>): <span class="number">1</span> | <span class="number">2</span> | <span class="number">3</span> | <span class="number">4</span> | <span class="number">5</span> | <span class="number">6</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们很少直接这样使用，但它们可以用在缩小范围调试bug的时候：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params">x: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (x !== <span class="number">1</span> || x !== <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="comment">//         ~~~~~~~</span></span><br><span class="line">        <span class="comment">// Operator &#x27;!==&#x27; cannot be applied to types &#x27;1&#x27; and &#x27;2&#x27;.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>换句话说，当<code>x</code>与<code>2</code>进行比较的时候，它的值必须为<code>1</code>，这就意味着上面的比较检查是非法的。</p><h3 id="类型别名"><a href="#类型别名" class="headerlink" title="类型别名"></a>类型别名</h3><p>类型别名会给一个类型起个新名字。 类型别名有时和接口很像，但是可以作用于原始值，联合类型，元组以及其它任何你需要手写的类型。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Name</span> = <span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">NameResolver</span> = <span class="function">() =&gt;</span> <span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">NameOrResolver</span> = <span class="title class_">Name</span> | <span class="title class_">NameResolver</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getName</span>(<span class="params">n: NameOrResolver</span>): <span class="title class_">Name</span> &#123;   <span class="comment">// NameOrResolver 起别名 n’=</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> n === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> n;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">n</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>起别名不会新建一个类型 - 它创建了一个新<em>名字</em>来引用那个类型。 给原始类型起别名通常没什么用，尽管可以做为文档的一种形式使用。</p><p>同接口一样，类型别名也可以是泛型 - 我们可以添加类型参数并且在别名声明的右侧传入：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Container</span>&lt;T&gt; = &#123; <span class="attr">value</span>: T &#125;; <span class="comment">// T 起别名 value</span></span><br></pre></td></tr></table></figure><p>我们也可以使用类型别名来在属性里引用自己：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Tree</span>&lt;T&gt; = &#123;</span><br><span class="line">    <span class="attr">value</span>: T;</span><br><span class="line">    <span class="attr">left</span>: <span class="title class_">Tree</span>&lt;T&gt;;</span><br><span class="line">    <span class="attr">right</span>: <span class="title class_">Tree</span>&lt;T&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>与交叉类型一起使用，我们可以创建出一些十分稀奇古怪的类型。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">LinkedList</span>&lt;T&gt; = T &amp; &#123; <span class="attr">next</span>: <span class="title class_">LinkedList</span>&lt;T&gt; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="attr">people</span>: <span class="title class_">LinkedList</span>&lt;<span class="title class_">Person</span>&gt;;</span><br><span class="line"><span class="keyword">var</span> s = people.<span class="property">name</span>;</span><br><span class="line"><span class="keyword">var</span> s = people.<span class="property">next</span>.<span class="property">name</span>;</span><br><span class="line"><span class="keyword">var</span> s = people.<span class="property">next</span>.<span class="property">next</span>.<span class="property">name</span>;</span><br><span class="line"><span class="keyword">var</span> s = people.<span class="property">next</span>.<span class="property">next</span>.<span class="property">next</span>.<span class="property">name</span></span><br></pre></td></tr></table></figure><p>然而，类型别名不能出现在声明右侧的任何地方。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Yikes</span> = <span class="title class_">Array</span>&lt;<span class="title class_">Yikes</span>&gt;; <span class="comment">// error 报错</span></span><br></pre></td></tr></table></figure><h4 id="接口-vs-类型别名"><a href="#接口-vs-类型别名" class="headerlink" title="接口 vs 类型别名"></a>接口 vs 类型别名</h4><p>像我们提到的，类型别名可以像接口一样；然而，仍有一些细微差别。</p><p>其一，接口创建了一个新的名字，可以在其它任何地方使用。 类型别名并不创建新名字—比如，错误信息就不会使用别名。 在下面的示例代码里，在编译器中将鼠标悬停在<code>interfaced</code>上，显示它返回的是<code>Interface</code>，但悬停在<code>aliased</code>上时，显示的却是对象字面量类型。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Alias</span> = &#123; <span class="attr">num</span>: <span class="built_in">number</span> &#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Interface</span> &#123;</span><br><span class="line">    <span class="attr">num</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">function</span> <span class="title function_">aliased</span>(<span class="params">arg: Alias</span>): <span class="title class_">Alias</span>;</span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">function</span> <span class="title function_">interfaced</span>(<span class="params">arg: Interface</span>): <span class="title class_">Interface</span>;</span><br></pre></td></tr></table></figure><p>另一个重要区别是类型别名不能被<code>extends</code>和<code>implements</code>（自己也不能<code>extends</code>和<code>implements</code>其它类型）。 因为<a href="https://en.wikipedia.org/wiki/Open/closed_principle">软件中的对象应该对于扩展是开放的，但是对于修改是封闭的</a>，你应该尽量去使用接口代替类型别名。</p><p>另一方面，如果你无法通过接口来描述一个类型并且需要使用联合类型或元组类型，这时通常会使用类型别名。</p><h3 id="赋值推断"><a href="#赋值推断" class="headerlink" title="赋值推断"></a>赋值推断</h3><p>赋值时推断，类型从右像左流动,会根据赋值推断出变量类型</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;zhufeng&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> age = <span class="number">11</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="built_in">boolean</span> = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><h3 id="返回值推断"><a href="#返回值推断" class="headerlink" title="返回值推断"></a>返回值推断</h3><p>自动推断函数返回值类型</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">a: <span class="built_in">string</span>, b: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">sum</span>(<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="函数推断"><a href="#函数推断" class="headerlink" title="函数推断"></a>函数推断</h3><p>函数从左到右进行推断</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Sum</span> = <span class="function">(<span class="params">a: <span class="built_in">string</span>, b: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">sum</span>: <span class="title class_">Sum</span> = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b;</span><br></pre></td></tr></table></figure><h3 id="属性推断"><a href="#属性推断" class="headerlink" title="属性推断"></a>属性推断</h3><p>可以通过属性值,推断出属性的类型</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;zf&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">11</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> &#123;name,age&#125; = person;</span><br></pre></td></tr></table></figure><h3 id="类型反推"><a href="#类型反推" class="headerlink" title="类型反推"></a>类型反推</h3><p>可以使用<code>typeof</code>关键字反推变量类型</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;zf&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">11</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Person</span> = <span class="keyword">typeof</span> person</span><br></pre></td></tr></table></figure><h3 id="索引访问操作符"><a href="#索引访问操作符" class="headerlink" title="索引访问操作符"></a>索引访问操作符</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IPerson</span> &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="built_in">number</span>,</span><br><span class="line">    <span class="attr">job</span>:&#123;</span><br><span class="line">        <span class="attr">address</span>:<span class="built_in">string</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> job = <span class="title class_">IPerson</span>[<span class="string">&#x27;job&#x27;</span>]</span><br></pre></td></tr></table></figure><h3 id="类型映射"><a href="#类型映射" class="headerlink" title="类型映射"></a>类型映射</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IPerson</span> &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">MapPerson</span> = &#123;[key <span class="keyword">in</span> keyof <span class="title class_">IPerson</span>]:<span class="title class_">IPerson</span>[key]&#125;</span><br></pre></td></tr></table></figure><ul><li><p>练习代码</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 声明类型的时候 如果没有标识类型 他是什么类型？  </span></span><br><span class="line"><span class="comment">// 没有复制的变量默认值是undefined 但是类型是any</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// const 是常量意味着定义的值不会修改所以他的类型是一个字面量类型 . const声明变量必须复制 </span></span><br><span class="line"><span class="comment">// let 声明变量 可以修改所以类型范围推到的结果会变大</span></span><br><span class="line"><span class="keyword">const</span> a1 = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> a2  = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 断言的问题</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> strOrNum :<span class="built_in">string</span> | <span class="built_in">number</span>; <span class="comment">// 如果是联合类型在使用方法的时候 只能采用公共的方法来使用</span></span><br><span class="line"><span class="comment">// 还是从安全性考虑， 在使用联合类型的时候 我门通过会先定义值，在使用. 保证安全</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1） 指定类型在使用</span></span><br><span class="line"><span class="comment">// strOrNum = &#x27;1&#x27;</span></span><br><span class="line"><span class="comment">// strOrNum.endsWith();</span></span><br><span class="line"><span class="comment">// strOrNum = 1</span></span><br><span class="line"><span class="comment">// strOrNum.toFixed()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2) 我门断言类型后在使用 as断言成某种类型（一定是联合类型中的某一个） ! (非空断言， 表示这个值一定不是空的)</span></span><br><span class="line"><span class="comment">// 不存在结果你自己承担， ts不管了，你认为的一定有值</span></span><br><span class="line">(strOrNum! <span class="keyword">as</span> <span class="built_in">string</span>).<span class="title function_">charCodeAt</span>(<span class="number">0</span>);</span><br><span class="line">(&lt;<span class="built_in">number</span>&gt;strOrNum!).<span class="title function_">toFixed</span>(<span class="number">3</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">// !TS语法  ?js语法 链判断运算符（如果值有再去取值）</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> ele = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;app&#x27;</span>);</span><br><span class="line"><span class="comment">// ele!.style.background = &#x27;red&#x27;;</span></span><br><span class="line">(ele <span class="keyword">as</span> <span class="title class_">HTMLElement</span>).<span class="property">style</span>.<span class="property">background</span> = <span class="string">&#x27;red&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ? 表示的是取值操作，不能赋值  ， ！表示某个变量一定存在</span></span><br><span class="line"><span class="comment">// ele?.style.background</span></span><br><span class="line"><span class="comment">// ?? js语法 合并空值运算符， 三元表达式 但是 false || 取的结果 </span></span><br><span class="line"><span class="comment">// let val = 0 || 100 // 除了 null 和 undefiend 其他都是true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 值  as xxx 或者 &lt;xxx&gt;值  一般用于联合类型. 将大范围的类型 断言成子类型</span></span><br><span class="line"></span><br><span class="line">(strOrNum! <span class="keyword">as</span> <span class="built_in">unknown</span> <span class="keyword">as</span> <span class="built_in">boolean</span>); <span class="comment">// 双重断言，一般不建议使用，但是还会用到，破坏原有的关系</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 类型别名将类型提取出来</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Direction</span> = <span class="string">&#x27;up&#x27;</span>|<span class="string">&#x27;down&#x27;</span>|<span class="string">&#x27;left&#x27;</span>|<span class="string">&#x27;right&#x27;</span>; <span class="comment">// 快速构建一个可以复用的类型</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">direction</span>:<span class="title class_">Direction</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">up</span>:<span class="string">&#x27;down&#x27;</span> = direction! <span class="keyword">as</span> <span class="string">&#x27;down&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;&#125;</span><br></pre></td></tr></table></figure></li></ul><h1 id="4-函数-function"><a href="#4-函数-function" class="headerlink" title="4.函数 (function)"></a>4.函数 (function)</h1><p>​    函数中的类型 1）函数的声明方式 2） 函数的参数  3） 函数的返回值</p><p>​    function关键字来声明的函数可以提升到当前作用域顶部</p><p>​    对于ts来说有区别： 函数关键字声明的函数 不能标注函数类型</p><p>​    通过表达式来声明的函数： 必须赋予的值要满足定义的类型 (要求有一个兼容性在里面)</p><h3 id="函数的两种声明方式"><a href="#函数的两种声明方式" class="headerlink" title="函数的两种声明方式"></a>函数的两种声明方式</h3><ul><li><p>通过function关键字来进行声明</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">a: <span class="built_in">string</span>, b: <span class="built_in">string</span></span>):<span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a+b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">sum</span>(<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>)</span><br></pre></td></tr></table></figure><blockquote><p><strong>可以用来限制函数的参数和返回值类型</strong></p></blockquote></li><li><p>通过表达式方式声明</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Sum</span> = <span class="function">(<span class="params">a1: <span class="built_in">string</span>, b1: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">sum</span>: <span class="title class_">Sum</span> = <span class="function">(<span class="params">a: <span class="built_in">string</span>, b: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ul><h3 id="为函数定义类型"><a href="#为函数定义类型" class="headerlink" title="为函数定义类型"></a>为函数定义类型</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">x: <span class="built_in">number</span>, y: <span class="built_in">number</span></span>): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myAdd = <span class="keyword">function</span>(<span class="params">x: <span class="built_in">number</span>, y: <span class="built_in">number</span></span>): <span class="built_in">number</span> &#123; <span class="keyword">return</span> x + y; &#125;;</span><br></pre></td></tr></table></figure><p>书写完整函数类型</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">myAdd</span>: <span class="function">(<span class="params">x:<span class="built_in">number</span>, y:<span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">number</span> =</span><br><span class="line">    <span class="keyword">function</span>(<span class="params">x: <span class="built_in">number</span>, y: <span class="built_in">number</span></span>): <span class="built_in">number</span> &#123; <span class="keyword">return</span> x + y; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1)函数类型的定义  (a: any, b: any) =&gt; any  ｜   (a: any, b: any) : any</span></span><br><span class="line"> <span class="keyword">type</span> <span class="title class_">ISum</span> = &#123;(<span class="attr">a</span>: <span class="built_in">any</span>, <span class="attr">b</span>: <span class="built_in">any</span>) : <span class="built_in">any</span>&#125;</span><br><span class="line"> <span class="keyword">type</span> <span class="title class_">ISum</span> =  <span class="function">(<span class="params">a: <span class="built_in">any</span>, b: <span class="built_in">any</span></span>) =&gt;</span> <span class="built_in">any</span></span><br><span class="line"> <span class="keyword">const</span> <span class="attr">sum</span>:<span class="title class_">ISum</span>  = <span class="keyword">function</span>(<span class="params">a:<span class="built_in">string</span>,b:<span class="built_in">string</span></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> a+b</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><blockquote><p> 如果标明函数的类型，在使用函数的时候以标明的为准</p></blockquote><p>只要参数类型是匹配的，那么就认为它是有效的函数类型，而不在乎参数名是否正确。</p><p>第二部分是返回值类型。 对于返回值，我们在函数和返回值类型之前使用(<code>=&gt;</code>)符号，使之清晰明了。 如之前提到的，返回值类型是函数类型的必要部分，如果函数没有返回任何值，你也必须指定返回值类型为<code>void</code>而不能留空。</p><p>函数的类型只是由参数类型和返回值组成的。 函数中使用的捕获变量不会体现在类型里。 实际上，这些变量是函数的隐藏状态并不是组成API的一部分。</p><h3 id="函数的推断类型"><a href="#函数的推断类型" class="headerlink" title="函数的推断类型"></a>函数的推断类型</h3><p>尝试这个例子的时候，你会发现如果你在赋值语句的一边指定了类型但是另一边没有类型的话，TypeScript编译器会自动识别出类型：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// myAdd has the full function type  myAdd具有完整的函数类型</span></span><br><span class="line"><span class="keyword">let</span> myAdd = <span class="keyword">function</span>(<span class="params">x: <span class="built_in">number</span>, y: <span class="built_in">number</span></span>): <span class="built_in">number</span> &#123; <span class="keyword">return</span> x + y; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// The parameters `x` and `y` have the type number 参数&#x27; x &#x27;和&#x27; y &#x27;的类型是number</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">myAdd</span>: <span class="function">(<span class="params">baseValue: <span class="built_in">number</span>, increment: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">number</span> =</span><br><span class="line">    <span class="keyword">function</span>(<span class="params">x, y</span>) &#123; <span class="keyword">return</span> x + y; &#125;;</span><br></pre></td></tr></table></figure><p>这叫做“按上下文归类”，是类型推论的一种。 它帮助我们更好地为程序指定类型</p><h3 id="可选参数和默认参数"><a href="#可选参数和默认参数" class="headerlink" title="可选参数和默认参数"></a>可选参数和默认参数</h3><p>TypeScript里的每个函数参数都是必须的。 这不是指不能传递<code>null</code>或<code>undefined</code>作为参数，而是说编译器检查用户是否为每个参数都传入了值。 编译器还会假设只有这些参数会被传递进函数。 简短地说，传递给一个函数的参数个数必须与函数期望的参数个数一致。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">buildName</span>(<span class="params">firstName: <span class="built_in">string</span>, lastName: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> firstName + <span class="string">&quot; &quot;</span> + lastName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result1 = <span class="title function_">buildName</span>(<span class="string">&quot;Bob&quot;</span>);                  <span class="comment">// error, 缺少参数</span></span><br><span class="line"><span class="keyword">let</span> result2 = <span class="title function_">buildName</span>(<span class="string">&quot;Bob&quot;</span>, <span class="string">&quot;Adams&quot;</span>, <span class="string">&quot;Sr.&quot;</span>);  <span class="comment">// error, 多余参数</span></span><br><span class="line"><span class="keyword">let</span> result3 = <span class="title function_">buildName</span>(<span class="string">&quot;Bob&quot;</span>, <span class="string">&quot;Adams&quot;</span>);         <span class="comment">// ah, 刚刚好</span></span><br></pre></td></tr></table></figure><ul><li><p>可选参数</p><p>JavaScript里，每个参数都是可选的，可传可不传。 没传参的时候，它的值就是undefined。 在TypeScript里我们可以在参数名旁使用<code>?</code>实现可选参数的功能。 比如，我们想让last name是可选的：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">buildName</span>(<span class="params">firstName: <span class="built_in">string</span>, lastName?: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (lastName)</span><br><span class="line">        <span class="keyword">return</span> firstName + <span class="string">&quot; &quot;</span> + lastName;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> firstName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result1 = <span class="title function_">buildName</span>(<span class="string">&quot;Bob&quot;</span>);  <span class="comment">// 现在可以正常工作了</span></span><br><span class="line"><span class="keyword">let</span> result2 = <span class="title function_">buildName</span>(<span class="string">&quot;Bob&quot;</span>, <span class="string">&quot;Adams&quot;</span>, <span class="string">&quot;Sr.&quot;</span>);  <span class="comment">// error, 参数太多</span></span><br><span class="line"><span class="keyword">let</span> result3 = <span class="title function_">buildName</span>(<span class="string">&quot;Bob&quot;</span>, <span class="string">&quot;Adams&quot;</span>);  <span class="comment">// ah, 刚刚好</span></span><br></pre></td></tr></table></figure><blockquote><p>可选参数必须跟在必须参数后面。 如果上例我们想让first name是可选的，那么就必须调整它们的位置，把first name放在后面。</p></blockquote><p>参数 可选参数<code>?</code>可选参数 意味着可以不传  和 string | undefiend 必须得传。 可选参数只能在参数列表中的后面</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">ISum</span> =  <span class="function">(<span class="params">a: <span class="built_in">string</span>, b?: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">string</span> <span class="comment">// 可选参数必须在其他参数的最后面</span></span><br><span class="line"><span class="keyword">const</span> sum = <span class="keyword">function</span>(<span class="params">a:<span class="built_in">string</span>,b:<span class="built_in">string</span> = <span class="string">&#x27;abc&#x27;</span></span>)&#123;</span><br><span class="line">     <span class="keyword">return</span> a+b</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 这里如果是兼容处理 采用的是自己标识的  不是你复制的类型</span></span><br><span class="line"><span class="title function_">sum</span>(<span class="string">&#x27;a&#x27;</span>); <span class="comment">// 可选参数必须在其他参数的最后面</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>默认参数</p><p>在TypeScript里，我们也可以为参数提供一个默认值当用户没有传递这个参数或传递的值是<code>undefined</code>时。 它们叫做有默认初始化值的参数。 让我们修改上例，把last name的默认值设置为<code>&quot;Smith&quot;</code>。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">buildName</span>(<span class="params">firstName: <span class="built_in">string</span>, lastName = <span class="string">&quot;Smith&quot;</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> firstName + <span class="string">&quot; &quot;</span> + lastName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result1 = <span class="title function_">buildName</span>(<span class="string">&quot;Bob&quot;</span>);                  <span class="comment">// 现在工作正常，返回“Bob” Smith&quot;</span></span><br><span class="line"><span class="keyword">let</span> result2 = <span class="title function_">buildName</span>(<span class="string">&quot;Bob&quot;</span>, <span class="literal">undefined</span>);       <span class="comment">// 仍然有效，也返回“ &quot;Bob Smith&quot;</span></span><br><span class="line"><span class="keyword">let</span> result3 = <span class="title function_">buildName</span>(<span class="string">&quot;Bob&quot;</span>, <span class="string">&quot;Adams&quot;</span>, <span class="string">&quot;Sr.&quot;</span>);  <span class="comment">// error, 参数太多</span></span><br><span class="line"><span class="keyword">let</span> result4 = <span class="title function_">buildName</span>(<span class="string">&quot;Bob&quot;</span>, <span class="string">&quot;Adams&quot;</span>);         <span class="comment">// ah, 刚刚好</span></span><br></pre></td></tr></table></figure><p>在所有必须参数后面的带默认初始化的参数都是可选的，与可选参数一样，在调用函数的时候可以省略。 也就是说可选参数与末尾的默认参数共享参数类型</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">buildName</span>(<span class="params">firstName: <span class="built_in">string</span>, lastName?: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>和</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">buildName</span>(<span class="params">firstName: <span class="built_in">string</span>, lastName = <span class="string">&quot;Smith&quot;</span></span>) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>共享同样的类型<code>(firstName: string, lastName?: string) =&gt; string</code>。 默认参数的默认值消失了，只保留了它是一个可选参数的信息。</p><p>与普通可选参数不同的是，带默认值的参数不需要放在必须参数的后面。 如果带默认值的参数出现在必须参数前面，用户必须明确的传入<code>undefined</code>值来获得默认值。 例如，我们重写最后一个例子，让<code>firstName</code>是带默认值的参数：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">buildName</span>(<span class="params">firstName = <span class="string">&quot;Will&quot;</span>, lastName: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> firstName + <span class="string">&quot; &quot;</span> + lastName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result1 = <span class="title function_">buildName</span>(<span class="string">&quot;Bob&quot;</span>);                  <span class="comment">// error, 参数太少</span></span><br><span class="line"><span class="keyword">let</span> result2 = <span class="title function_">buildName</span>(<span class="string">&quot;Bob&quot;</span>, <span class="string">&quot;Adams&quot;</span>, <span class="string">&quot;Sr.&quot;</span>);  <span class="comment">// error, 参数太多</span></span><br><span class="line"><span class="keyword">let</span> result3 = <span class="title function_">buildName</span>(<span class="string">&quot;Bob&quot;</span>, <span class="string">&quot;Adams&quot;</span>);         <span class="comment">// okay 返回 &quot;Bob Adams&quot;</span></span><br><span class="line"><span class="keyword">let</span> result4 = <span class="title function_">buildName</span>(<span class="literal">undefined</span>, <span class="string">&quot;Adams&quot;</span>);     <span class="comment">// okay 返回 &quot;Will Adams&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sum = (<span class="attr">a</span>: <span class="built_in">string</span>, <span class="attr">b</span>: <span class="built_in">string</span> = <span class="string">&#x27;b&#x27;</span>): <span class="function"><span class="params">string</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title function_">sum</span>(<span class="string">&#x27;a&#x27;</span>); <span class="comment">// 默认参数必须在其他参数的最后面</span></span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数中有arguments 但是我们不建议使用</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">...args:<span class="built_in">number</span>[]</span>):<span class="built_in">number</span>&#123; <span class="comment">// （函数式编程 入参和返回值 组合式api） 函数 （不考虑使用this 和 arguments）</span></span><br><span class="line">    <span class="keyword">return</span> args.<span class="title function_">reduce</span>(<span class="function">(<span class="params">memo,current</span>)=&gt;</span>(memo += current,memo),<span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 参数的类型直接参数后面:标识  函数的返回值在 &#123;&#125;前面来标识</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">sum</span>: <span class="function">(<span class="params">...args:<span class="built_in">any</span>[]</span>)=&gt;</span> <span class="built_in">any</span> = (...<span class="attr">args</span>:<span class="built_in">any</span>[]) :<span class="function"><span class="params">any</span>=&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="剩余参数"><a href="#剩余参数" class="headerlink" title="剩余参数"></a>剩余参数</h3><p>必要参数，默认参数和可选参数有个共同点：它们表示某一个参数。 有时，你想同时操作多个参数，或者你并不知道会有多少参数传递进来。 在JavaScript里，你可以使用<code>arguments</code>来访问所有传入的参数。</p><blockquote><p>函数中有arguments 但是我们不建议使用</p></blockquote><p>在TypeScript里，你可以把所有参数收集到一个变量里：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">buildName</span>(<span class="params">firstName: <span class="built_in">string</span>, ...restOfName: <span class="built_in">string</span>[]</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> firstName + <span class="string">&quot; &quot;</span> + restOfName.<span class="title function_">join</span>(<span class="string">&quot; &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> employeeName = <span class="title function_">buildName</span>(<span class="string">&quot;Joseph&quot;</span>, <span class="string">&quot;Samuel&quot;</span>, <span class="string">&quot;Lucas&quot;</span>, <span class="string">&quot;MacKinzie&quot;</span>);</span><br></pre></td></tr></table></figure><p>剩余参数会被当做个数不限的可选参数。 可以一个都没有，同样也可以有任意个。 编译器创建参数数组，名字是你在省略号（<code>...</code>）后面给定的名字，你可以在函数体内使用这个数组。</p><p>这个省略号也会在带有剩余参数的函数类型定义上使用到：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">buildName</span>(<span class="params">firstName: <span class="built_in">string</span>, ...restOfName: <span class="built_in">string</span>[]</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> firstName + <span class="string">&quot; &quot;</span> + restOfName.<span class="title function_">join</span>(<span class="string">&quot; &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">buildNameFun</span>: <span class="function">(<span class="params">fname: <span class="built_in">string</span>, ...rest: <span class="built_in">string</span>[]</span>) =&gt;</span> <span class="built_in">string</span> = buildName;</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sum = (...<span class="attr">args</span>: <span class="built_in">string</span>[]): <span class="function"><span class="params">string</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> args.<span class="title function_">reduce</span>(<span class="function">(<span class="params">memo, current</span>) =&gt;</span> memo += current, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">sum</span>(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">...args:<span class="built_in">number</span>[]</span>):<span class="built_in">number</span>&#123; <span class="comment">// （函数式编程 入参和返回值 组合式api） 函数 （不考虑使用this 和 arguments）</span></span><br><span class="line">    <span class="keyword">return</span> args.<span class="title function_">reduce</span>(<span class="function">(<span class="params">memo,current</span>)=&gt;</span>(memo += current,memo),<span class="number">0</span>)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 参数的类型直接参数后面:标识  函数的返回值在 &#123;&#125;前面来标识</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">sum</span>: <span class="function">(<span class="params">...args:<span class="built_in">any</span>[]</span>)=&gt;</span> <span class="built_in">any</span> = (...<span class="attr">args</span>:<span class="built_in">any</span>[]) :<span class="function"><span class="params">any</span>=&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> </span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h3 id="this"><a href="#this" class="headerlink" title="this"></a><code>this</code></h3><p>学习如何在JavaScript里正确使用<code>this</code>就好比一场成年礼。 由于TypeScript是JavaScript的超集，TypeScript程序员也需要弄清<code>this</code>工作机制并且当有bug的时候能够找出错误所在。 幸运的是，TypeScript能通知你错误地使用了<code>this</code>的地方。 如果你想了解JavaScript里的<code>this</code>是如何工作的，那么首先阅读Yehuda Katz写的<a href="http://yehudakatz.com/2011/08/11/understanding-javascript-function-invocation-and-this/">Understanding JavaScript Function Invocation and “this”</a>。 Yehuda的文章详细的阐述了<code>this</code>的内部工作原理，因此我们这里只做简单介绍。</p><ul><li><p><code>this</code>和箭头函数</p><p>JavaScript里，<code>this</code>的值在函数被调用的时候才会指定。 这是个既强大又灵活的特点，但是你需要花点时间弄清楚函数调用的上下文是什么。 但众所周知，这不是一件很简单的事，尤其是在返回一个函数或将函数当做参数传递的时候。</p><p>下面看一个例子：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> deck = &#123;</span><br><span class="line">    <span class="attr">suits</span>: [<span class="string">&quot;hearts&quot;</span>, <span class="string">&quot;spades&quot;</span>, <span class="string">&quot;clubs&quot;</span>, <span class="string">&quot;diamonds&quot;</span>],</span><br><span class="line">    <span class="attr">cards</span>: <span class="title class_">Array</span>(<span class="number">52</span>),</span><br><span class="line">    <span class="attr">createCardPicker</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> pickedCard = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">52</span>);</span><br><span class="line">            <span class="keyword">let</span> pickedSuit = <span class="title class_">Math</span>.<span class="title function_">floor</span>(pickedCard / <span class="number">13</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> &#123;<span class="attr">suit</span>: <span class="variable language_">this</span>.<span class="property">suits</span>[pickedSuit], <span class="attr">card</span>: pickedCard % <span class="number">13</span>&#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> cardPicker = deck.<span class="title function_">createCardPicker</span>();</span><br><span class="line"><span class="keyword">let</span> pickedCard = <span class="title function_">cardPicker</span>();</span><br><span class="line"></span><br><span class="line"><span class="title function_">alert</span>(<span class="string">&quot;card: &quot;</span> + pickedCard.<span class="property">card</span> + <span class="string">&quot; of &quot;</span> + pickedCard.<span class="property">suit</span>);</span><br></pre></td></tr></table></figure><p>可以看到<code>createCardPicker</code>是个函数，并且它又返回了一个函数。 如果我们尝试运行这个程序，会发现它并没有弹出对话框而是报错了。 因为<code>createCardPicker</code>返回的函数里的<code>this</code>被设置成了<code>window</code>而不是<code>deck</code>对象。 因为我们只是独立的调用了<code>cardPicker()</code>。 顶级的非方法式调用会将<code>this</code>视为<code>window</code>。 （注意：在严格模式下，<code>this</code>为<code>undefined</code>而不是<code>window</code>）。</p><p>为了解决这个问题，我们可以在函数被返回时就绑好正确的<code>this</code>。 这样的话，无论之后怎么使用它，都会引用绑定的‘deck’对象。 我们需要改变函数表达式来使用ECMAScript 6箭头语法。 箭头函数能保存函数创建时的<code>this</code>值，而不是调用时的值：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> deck = &#123;</span><br><span class="line">    <span class="attr">suits</span>: [<span class="string">&quot;hearts&quot;</span>, <span class="string">&quot;spades&quot;</span>, <span class="string">&quot;clubs&quot;</span>, <span class="string">&quot;diamonds&quot;</span>],</span><br><span class="line">    <span class="attr">cards</span>: <span class="title class_">Array</span>(<span class="number">52</span>),</span><br><span class="line">    <span class="attr">createCardPicker</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">NOTE:</span> the line below is now an arrow function, allowing us to capture &#x27;this&#x27; right here</span></span><br><span class="line">        <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> pickedCard = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">52</span>);</span><br><span class="line">            <span class="keyword">let</span> pickedSuit = <span class="title class_">Math</span>.<span class="title function_">floor</span>(pickedCard / <span class="number">13</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> &#123;<span class="attr">suit</span>: <span class="variable language_">this</span>.<span class="property">suits</span>[pickedSuit], <span class="attr">card</span>: pickedCard % <span class="number">13</span>&#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> cardPicker = deck.<span class="title function_">createCardPicker</span>();</span><br><span class="line"><span class="keyword">let</span> pickedCard = <span class="title function_">cardPicker</span>();</span><br><span class="line"></span><br><span class="line"><span class="title function_">alert</span>(<span class="string">&quot;card: &quot;</span> + pickedCard.<span class="property">card</span> + <span class="string">&quot; of &quot;</span> + pickedCard.<span class="property">suit</span>);</span><br></pre></td></tr></table></figure><p>更好事情是，TypeScript会警告你犯了一个错误，如果你给编译器设置了<code>--noImplicitThis</code>标记。 它会指出<code>this.suits[pickedSuit]</code>里的<code>this</code>的类型为<code>any</code>。</p></li></ul><h4 id="this参数"><a href="#this参数" class="headerlink" title="this参数"></a><code>this</code>参数</h4><blockquote><p>尽量不采用this 来作为函数的上下文， this的缺陷就是类型推导问题</p><p>如果想限制this类型 那么需要手动指定this类型</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getValue</span>(<span class="params"><span class="variable language_">this</span>: IPerson, key: IKeys</span>) &#123; <span class="comment">// this不是行参 是标明this的类型</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>[key];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>不幸的是，<code>this.suits[pickedSuit]</code>的类型依旧为<code>any</code>。 这是因为<code>this</code>来自对象字面量里的函数表达式。 修改的方法是，提供一个显式的<code>this</code>参数。 <code>this</code>参数是个假的参数，它出现在参数列表的最前面：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"><span class="variable language_">this</span>: <span class="built_in">void</span></span>) &#123;</span><br><span class="line">    <span class="comment">// make sure `this` is unusable in this standalone function</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>让我们往例子里添加一些接口，<code>Card</code> 和 <code>Deck</code>，让类型重用能够变得清晰简单些：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Card</span> &#123;</span><br><span class="line">    <span class="attr">suit</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">card</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Deck</span> &#123;</span><br><span class="line">    <span class="attr">suits</span>: <span class="built_in">string</span>[];</span><br><span class="line">    <span class="attr">cards</span>: <span class="built_in">number</span>[];</span><br><span class="line">    <span class="title function_">createCardPicker</span>(<span class="attr">this</span>: <span class="title class_">Deck</span>): <span class="function">() =&gt;</span> <span class="title class_">Card</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">deck</span>: <span class="title class_">Deck</span> = &#123;</span><br><span class="line">    <span class="attr">suits</span>: [<span class="string">&quot;hearts&quot;</span>, <span class="string">&quot;spades&quot;</span>, <span class="string">&quot;clubs&quot;</span>, <span class="string">&quot;diamonds&quot;</span>],</span><br><span class="line">    <span class="attr">cards</span>: <span class="title class_">Array</span>(<span class="number">52</span>),</span><br><span class="line">    <span class="comment">// <span class="doctag">NOTE:</span> The function now explicitly specifies that its callee must be of type Deck</span></span><br><span class="line">    <span class="attr">createCardPicker</span>: <span class="keyword">function</span>(<span class="params"><span class="variable language_">this</span>: Deck</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> pickedCard = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">52</span>);</span><br><span class="line">            <span class="keyword">let</span> pickedSuit = <span class="title class_">Math</span>.<span class="title function_">floor</span>(pickedCard / <span class="number">13</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> &#123;<span class="attr">suit</span>: <span class="variable language_">this</span>.<span class="property">suits</span>[pickedSuit], <span class="attr">card</span>: pickedCard % <span class="number">13</span>&#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> cardPicker = deck.<span class="title function_">createCardPicker</span>();</span><br><span class="line"><span class="keyword">let</span> pickedCard = <span class="title function_">cardPicker</span>();</span><br><span class="line"></span><br><span class="line"><span class="title function_">alert</span>(<span class="string">&quot;card: &quot;</span> + pickedCard.<span class="property">card</span> + <span class="string">&quot; of &quot;</span> + pickedCard.<span class="property">suit</span>);</span><br></pre></td></tr></table></figure><p>现在TypeScript知道<code>createCardPicker</code>期望在某个<code>Deck</code>对象上调用。 也就是说<code>this</code>是<code>Deck</code>类型的，而非<code>any</code>，因此<code>--noImplicitThis</code>不会报错了。</p><h4 id="回调函数里的this参数"><a href="#回调函数里的this参数" class="headerlink" title="回调函数里的this参数"></a>回调函数里的<code>this</code>参数</h4><p>当你将一个函数传递到某个库函数里在稍后被调用时，你可能也见到过回调函数里的<code>this</code>会报错。 因为当回调函数被调用时，它会被当成一个普通函数调用，<code>this</code>将为<code>undefined</code>。 稍做改动，你就可以通过<code>this</code>参数来避免错误。 首先，库函数的作者要指定<code>this</code>的类型：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">UIElement</span> &#123;</span><br><span class="line">    <span class="title function_">addClickListener</span>(<span class="attr">onclick</span>: <span class="function">(<span class="params"><span class="variable language_">this</span>: <span class="built_in">void</span>, e: Event</span>) =&gt;</span> <span class="built_in">void</span>): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>this: void</code>意味着<code>addClickListener</code>期望<code>onclick</code>是一个函数且它不需要一个<code>this</code>类型。 然后，为调用代码里的<code>this</code>添加类型注解：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Handler</span> &#123;</span><br><span class="line">    <span class="attr">info</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="title function_">onClickBad</span>(<span class="params"><span class="variable language_">this</span>: Handler, e: Event</span>) &#123;</span><br><span class="line">        <span class="comment">// oops, used this here. using this callback would crash at runtime</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">info</span> = e.<span class="property">message</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> h = <span class="keyword">new</span> <span class="title class_">Handler</span>();</span><br><span class="line">uiElement.<span class="title function_">addClickListener</span>(h.<span class="property">onClickBad</span>); <span class="comment">// error!</span></span><br></pre></td></tr></table></figure><p>指定了<code>this</code>类型后，你显式声明<code>onClickBad</code>必须在<code>Handler</code>的实例上调用。 然后TypeScript会检测到<code>addClickListener</code>要求函数带有<code>this: void</code>。 改变<code>this</code>类型来修复这个错误：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Handler</span> &#123;</span><br><span class="line">    <span class="attr">info</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="title function_">onClickGood</span>(<span class="params"><span class="variable language_">this</span>: <span class="built_in">void</span>, e: Event</span>) &#123;</span><br><span class="line">        <span class="comment">// can&#x27;t use this here because it&#x27;s of type void!</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;clicked!&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> h = <span class="keyword">new</span> <span class="title class_">Handler</span>();</span><br><span class="line">uiElement.<span class="title function_">addClickListener</span>(h.<span class="property">onClickGood</span>);</span><br></pre></td></tr></table></figure><p>因为<code>onClickGood</code>指定了<code>this</code>类型为<code>void</code>，因此传递<code>addClickListener</code>是合法的。 当然了，这也意味着不能使用<code>this.info</code>. 如果你两者都想要，你不得不使用箭头函数了：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Handler</span> &#123;</span><br><span class="line">    <span class="attr">info</span>: <span class="built_in">string</span>;</span><br><span class="line">    onClickGood = <span class="function">(<span class="params">e: Event</span>) =&gt;</span> &#123; <span class="variable language_">this</span>.<span class="property">info</span> = e.<span class="property">message</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这是可行的因为箭头函数不会捕获<code>this</code>，所以你总是可以把它们传给期望<code>this: void</code>的函数。 缺点是每个<code>Handler</code>对象都会创建一个箭头函数。 另一方面，方法只会被创建一次，添加到<code>Handler</code>的原型链上。 它们在不同<code>Handler</code>对象间是共享的。</p><h3 id="函数的重载"><a href="#函数的重载" class="headerlink" title="函数的重载"></a>函数的重载</h3><p>JavaScript本身是个动态语言。 JavaScript里函数根据传入不同的参数而返回不同类型的数据是很常见的。</p><p>ts 中函数有一个概念 叫重载(类型的重载)， 对于强类型语言可以一个函数写多遍（参数不同） js实现重载考的是arguments</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> suits = [<span class="string">&quot;hearts&quot;</span>, <span class="string">&quot;spades&quot;</span>, <span class="string">&quot;clubs&quot;</span>, <span class="string">&quot;diamonds&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">pickCard</span>(<span class="params">x</span>): <span class="built_in">any</span> &#123;</span><br><span class="line">    <span class="comment">// Check to see if we&#x27;re working with an object/array</span></span><br><span class="line">    <span class="comment">// if so, they gave us the deck and we&#x27;ll pick the card</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> x == <span class="string">&quot;object&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> pickedCard = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * x.<span class="property">length</span>);</span><br><span class="line">        <span class="keyword">return</span> pickedCard;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Otherwise just let them pick the card</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> x == <span class="string">&quot;number&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> pickedSuit = <span class="title class_">Math</span>.<span class="title function_">floor</span>(x / <span class="number">13</span>);</span><br><span class="line">        <span class="keyword">return</span> &#123; <span class="attr">suit</span>: suits[pickedSuit], <span class="attr">card</span>: x % <span class="number">13</span> &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myDeck = [&#123; <span class="attr">suit</span>: <span class="string">&quot;diamonds&quot;</span>, <span class="attr">card</span>: <span class="number">2</span> &#125;, &#123; <span class="attr">suit</span>: <span class="string">&quot;spades&quot;</span>, <span class="attr">card</span>: <span class="number">10</span> &#125;, &#123; <span class="attr">suit</span>: <span class="string">&quot;hearts&quot;</span>, <span class="attr">card</span>: <span class="number">4</span> &#125;];</span><br><span class="line"><span class="keyword">let</span> pickedCard1 = myDeck[<span class="title function_">pickCard</span>(myDeck)];</span><br><span class="line"><span class="title function_">alert</span>(<span class="string">&quot;card: &quot;</span> + pickedCard1.<span class="property">card</span> + <span class="string">&quot; of &quot;</span> + pickedCard1.<span class="property">suit</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> pickedCard2 = <span class="title function_">pickCard</span>(<span class="number">15</span>);</span><br><span class="line"><span class="title function_">alert</span>(<span class="string">&quot;card: &quot;</span> + pickedCard2.<span class="property">card</span> + <span class="string">&quot; of &quot;</span> + pickedCard2.<span class="property">suit</span>);</span><br></pre></td></tr></table></figure><p><code>pickCard</code>方法根据传入参数的不同会返回两种不同的类型。 如果传入的是代表纸牌的对象，函数作用是从中抓一张牌。 如果用户想抓牌，我们告诉他抓到了什么牌。 但是这怎么在类型系统里表示呢。</p><p>方法是为同一个函数提供多个函数类型定义来进行函数重载。 编译器会根据这个列表去处理函数的调用。 下面我们来重载<code>pickCard</code>函数。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> suits = [<span class="string">&quot;hearts&quot;</span>, <span class="string">&quot;spades&quot;</span>, <span class="string">&quot;clubs&quot;</span>, <span class="string">&quot;diamonds&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">pickCard</span>(<span class="params">x: &#123;suit: <span class="built_in">string</span>; card: <span class="built_in">number</span>; &#125;[]</span>): <span class="built_in">number</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">pickCard</span>(<span class="params">x: <span class="built_in">number</span></span>): &#123;<span class="attr">suit</span>: <span class="built_in">string</span>; <span class="attr">card</span>: <span class="built_in">number</span>; &#125;;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">pickCard</span>(<span class="params">x</span>): <span class="built_in">any</span> &#123;</span><br><span class="line">    <span class="comment">// Check to see if we&#x27;re working with an object/array</span></span><br><span class="line">    <span class="comment">// if so, they gave us the deck and we&#x27;ll pick the card</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> x == <span class="string">&quot;object&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> pickedCard = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * x.<span class="property">length</span>);</span><br><span class="line">        <span class="keyword">return</span> pickedCard;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Otherwise just let them pick the card</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> x == <span class="string">&quot;number&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> pickedSuit = <span class="title class_">Math</span>.<span class="title function_">floor</span>(x / <span class="number">13</span>);</span><br><span class="line">        <span class="keyword">return</span> &#123; <span class="attr">suit</span>: suits[pickedSuit], <span class="attr">card</span>: x % <span class="number">13</span> &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myDeck = [&#123; <span class="attr">suit</span>: <span class="string">&quot;diamonds&quot;</span>, <span class="attr">card</span>: <span class="number">2</span> &#125;, &#123; <span class="attr">suit</span>: <span class="string">&quot;spades&quot;</span>, <span class="attr">card</span>: <span class="number">10</span> &#125;, &#123; <span class="attr">suit</span>: <span class="string">&quot;hearts&quot;</span>, <span class="attr">card</span>: <span class="number">4</span> &#125;];</span><br><span class="line"><span class="keyword">let</span> pickedCard1 = myDeck[<span class="title function_">pickCard</span>(myDeck)];</span><br><span class="line"><span class="title function_">alert</span>(<span class="string">&quot;card: &quot;</span> + pickedCard1.<span class="property">card</span> + <span class="string">&quot; of &quot;</span> + pickedCard1.<span class="property">suit</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> pickedCard2 = <span class="title function_">pickCard</span>(<span class="number">15</span>);</span><br><span class="line"><span class="title function_">alert</span>(<span class="string">&quot;card: &quot;</span> + pickedCard2.<span class="property">card</span> + <span class="string">&quot; of &quot;</span> + pickedCard2.<span class="property">suit</span>);</span><br></pre></td></tr></table></figure><p>这样改变后，重载的<code>pickCard</code>函数在调用的时候会进行正确的类型检查。</p><p>为了让编译器能够选择正确的检查类型，它与JavaScript里的处理流程相似。 它查找重载列表，尝试使用第一个重载定义。 如果匹配的话就使用这个。 因此，在定义重载的时候，一定要把最精确的定义放在最前面。</p><p>注意，<code>function pickCard(x): any</code>并不是重载列表的一部分，因此这里只有两个重载：一个是接收对象另一个接收数字。 以其它参数调用<code>pickCard</code>会产生错误。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">toArray</span>(<span class="params">value: <span class="built_in">string</span></span>): <span class="built_in">string</span>[]<span class="comment">// 具体的某一种方案</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">toArray</span>(<span class="params">value: <span class="built_in">number</span></span>): <span class="built_in">number</span>[];</span><br><span class="line"><span class="comment">// 上面的声明仅仅是类型上的重载</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">toArray</span>(<span class="params">value: <span class="built_in">string</span> | <span class="built_in">number</span></span>): <span class="built_in">string</span>[] | <span class="built_in">number</span>[] &#123; <span class="comment">// 所有的实现</span></span><br><span class="line">    <span class="keyword">return</span> []</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> arr1 = <span class="title function_">toArray</span>(<span class="string">&#x27;abc&#x27;</span>)<span class="comment">// 根据传入不同类型的数据 返回不同的结果</span></span><br><span class="line"><span class="keyword">let</span> arr2 = <span class="title function_">toArray</span>(<span class="number">123</span>)</span><br></pre></td></tr></table></figure><ul><li><p>练习代码</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数中的类型 1）函数的声明方式 2） 函数的参数  3） 函数的返回值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// function关键字来声明的函数可以提升到当前作用域顶部</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 对于ts来说有区别： 函数关键字声明的函数 不能标注函数类型</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过表达式来声明的函数： 必须赋予的值要满足定义的类型 (要求有一个兼容性在里面)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// function sum(a,b)&#123;</span></span><br><span class="line"><span class="comment">//     return a+b</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1)函数类型的定义  (a: any, b: any) =&gt; any  ｜   (a: any, b: any) : any</span></span><br><span class="line"><span class="comment">// type ISum = &#123;(a: any, b: any) : any&#125;</span></span><br><span class="line"><span class="comment">// type ISum =  (a: any, b: any) =&gt; any</span></span><br><span class="line"><span class="comment">// const sum:ISum  = function(a:string,b:string)&#123;</span></span><br><span class="line"><span class="comment">//     return a+b</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// 如果标明函数的类型，在使用函数的时候以标明的为准</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2)参数 可选参数 ? 可选参数 意味着可以不传 和 string | undefiend 必须得传。 可选参数只能在参数列表中的后面</span></span><br><span class="line"><span class="comment">// 默认值 = </span></span><br><span class="line"><span class="comment">// type ISum =  (a: string, b?: string) =&gt; string</span></span><br><span class="line"><span class="comment">// const sum = function(a:string,b:string = &#x27;abc&#x27;)&#123;</span></span><br><span class="line"><span class="comment">//     return a+b</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// // 这里如果是兼容处理 采用的是自己标识的  不是你复制的类型</span></span><br><span class="line"><span class="comment">// sum(&#x27;1&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3) 参数this问题</span></span><br><span class="line"><span class="comment">// 尽量不采用this 来作为函数的上下文， this的缺陷就是类型推导问题</span></span><br><span class="line"><span class="comment">// 如果想限制this类型 那么需要手动指定this类型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getValue</span>(<span class="params"><span class="variable language_">this</span>: IPerson, key: IKeys</span>) &#123; <span class="comment">// this不是行参 是标明this的类型</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>[key];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 我想根据值来获得类型  typeof， 配合type来声明新的类型</span></span><br><span class="line"><span class="comment">// keyof 可以获取对象中的类型 作为联合类型</span></span><br><span class="line"><span class="keyword">const</span> person = &#123; <span class="attr">name</span>: <span class="string">&#x27;jw&#x27;</span>, <span class="attr">age</span>: <span class="number">30</span>, <span class="attr">address</span>: <span class="string">&#x27;昌平霍营&#x27;</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IPerson</span> = <span class="keyword">typeof</span> person; <span class="comment">// 提取对象的类型为IPerson, type类型会提升到顶部</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IKeys</span> = keyof <span class="title class_">IPerson</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以将子类型赋予给父类型 </span></span><br><span class="line">getValue.<span class="title function_">call</span>(person, <span class="string">&#x27;age&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数中有arguments 但是我们不建议使用</span></span><br><span class="line"><span class="comment">// function sum(...args:number[]):number&#123; // （函数式编程 入参和返回值 组合式api） 函数 （不考虑使用this 和 arguments）</span></span><br><span class="line"><span class="comment">//     return args.reduce((memo,current)=&gt;(memo += current,memo),0)</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 参数的类型直接参数后面:标识  函数的返回值在 &#123;&#125;前面来标识</span></span><br><span class="line"><span class="comment">// const sum: (...args:any[])=&gt; any = (...args:any[]) :any=&gt; &#123;</span></span><br><span class="line"><span class="comment">//     return </span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ts 中函数有一个概念 叫重载(类型的重载)， 对于强类型语言可以一个函数写多遍（参数不同） js实现重载考的是arguments</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 入参是一个字符串 或者是数字  -》 【‘字符串’】  【‘数字’】</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// string[] | number[]    (number|string)[]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">toArray</span>(<span class="params">value: <span class="built_in">string</span></span>): <span class="built_in">string</span>[]<span class="comment">// 具体的某一种方案</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">toArray</span>(<span class="params">value: <span class="built_in">number</span></span>): <span class="built_in">number</span>[];</span><br><span class="line"><span class="comment">// 上面的声明仅仅是类型上的重载</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">toArray</span>(<span class="params">value: <span class="built_in">string</span> | <span class="built_in">number</span></span>): <span class="built_in">string</span>[] | <span class="built_in">number</span>[] &#123; <span class="comment">// 所有的实现</span></span><br><span class="line">    <span class="keyword">return</span> []</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> arr1 = <span class="title function_">toArray</span>(<span class="string">&#x27;abc&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> arr2 = <span class="title function_">toArray</span>(<span class="number">123</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; &#125;</span><br></pre></td></tr></table></figure></li></ul><h1 id="4-类-class"><a href="#4-类-class" class="headerlink" title="4.类(class)"></a>4.类(class)</h1><p>类： 类的组成： 构造函数、属性（实例属性，原型属性、静态属性）、方法 （实例的方法，原型方法，静态方法） 访问器， 静态相关的配置</p><h3 id="TS中定义类"><a href="#TS中定义类" class="headerlink" title="TS中定义类"></a>TS中定义类</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Pointer</span>&#123;</span><br><span class="line">    x!:<span class="built_in">number</span>; <span class="comment">// 实例上的属性必须先声明</span></span><br><span class="line">    y!:<span class="built_in">number</span>;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">x:<span class="built_in">number</span>,y?:<span class="built_in">number</span>,...args:<span class="built_in">number</span>[]</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">x</span> = x;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">y</span> = y <span class="keyword">as</span> <span class="built_in">number</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Pointer</span>(<span class="number">100</span>,<span class="number">200</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span> &#123;</span><br><span class="line">    <span class="comment">// 给这个类来声明属性 </span></span><br><span class="line">    <span class="keyword">private</span> <span class="attr">x</span>:<span class="built_in">number</span></span><br><span class="line">    <span class="keyword">public</span> <span class="attr">y</span>:<span class="built_in">number</span></span><br><span class="line">    <span class="keyword">public</span> <span class="attr">fn</span>: <span class="function">()=&gt;</span> <span class="built_in">void</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">x:<span class="built_in">number</span>,y:<span class="built_in">number</span> = <span class="number">200</span></span>)&#123; <span class="comment">// 函数</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">x</span> = x;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">y</span> = y;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">fn</span> = <span class="function">()=&gt;</span>&#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>实例上的属性需要先声明在使用，构造函数中的参数可以使用可选参数和剩余参数</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Greeter</span> &#123;</span><br><span class="line">    <span class="attr">greeting</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">message: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">greeting</span> = message;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">greet</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello, &quot;</span> + <span class="variable language_">this</span>.<span class="property">greeting</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> greeter = <span class="keyword">new</span> <span class="title class_">Greeter</span>(<span class="string">&quot;world&quot;</span>);</span><br></pre></td></tr></table></figure><p>如果你使用过C#或Java，你会对这种语法非常熟悉。 我们声明一个<code>Greeter</code>类。这个类有3个成员：一个叫做<code>greeting</code>的属性，一个构造函数和一个<code>greet</code>方法。</p><p>你会注意到，我们在引用任何一个类成员的时候都用了<code>this</code>。 它表示我们访问的是类的成员。</p><p>最后一行，我们使用<code>new</code>构造了<code>Greeter</code>类的一个实例。 它会调用之前定义的构造函数，创建一个<code>Greeter</code>类型的新对象，并执行构造函数初始化它。</p><h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><p>在TypeScript里，我们可以使用常用的面向对象模式。 基于类的程序设计中一种最基本的模式是允许使用继承来扩展现有的类。</p><p>看下面的例子：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="title function_">move</span>(<span class="params">distanceInMeters: <span class="built_in">number</span> = <span class="number">0</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Animal moved <span class="subst">$&#123;distanceInMeters&#125;</span>m.`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span> &#123;</span><br><span class="line">    <span class="title function_">bark</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Woof! Woof!&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dog = <span class="keyword">new</span> <span class="title class_">Dog</span>();</span><br><span class="line">dog.<span class="title function_">bark</span>();</span><br><span class="line">dog.<span class="title function_">move</span>(<span class="number">10</span>);</span><br><span class="line">dog.<span class="title function_">bark</span>();</span><br></pre></td></tr></table></figure><p>这个例子展示了最基本的继承：类从基类中继承了属性和方法。 这里，<code>Dog</code>是一个<em>派生类</em>，它派生自<code>Animal</code><em>基类</em>，通过<code>extends</code>关键字。 派生类通常被称作<em>子类</em>，基类通常被称作<em>超类</em>。</p><p>因为<code>Dog</code>继承了<code>Animal</code>的功能，因此我们可以创建一个<code>Dog</code>的实例，它能够<code>bark()</code>和<code>move()</code>。</p><p>下面我们来看个更加复杂的例子。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">theName: <span class="built_in">string</span></span>) &#123; <span class="variable language_">this</span>.<span class="property">name</span> = theName; &#125;</span><br><span class="line">    <span class="title function_">move</span>(<span class="params">distanceInMeters: <span class="built_in">number</span> = <span class="number">0</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span> moved <span class="subst">$&#123;distanceInMeters&#125;</span>m.`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Snake</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123; <span class="variable language_">super</span>(name); &#125;</span><br><span class="line">    <span class="title function_">move</span>(<span class="params">distanceInMeters = <span class="number">5</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Slithering...&quot;</span>);</span><br><span class="line">        <span class="variable language_">super</span>.<span class="title function_">move</span>(distanceInMeters);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Horse</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123; <span class="variable language_">super</span>(name); &#125;</span><br><span class="line">    <span class="title function_">move</span>(<span class="params">distanceInMeters = <span class="number">45</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Galloping...&quot;</span>);</span><br><span class="line">        <span class="variable language_">super</span>.<span class="title function_">move</span>(distanceInMeters);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sam = <span class="keyword">new</span> <span class="title class_">Snake</span>(<span class="string">&quot;Sammy the Python&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="attr">tom</span>: <span class="title class_">Animal</span> = <span class="keyword">new</span> <span class="title class_">Horse</span>(<span class="string">&quot;Tommy the Palomino&quot;</span>);</span><br><span class="line"></span><br><span class="line">sam.<span class="title function_">move</span>();</span><br><span class="line">tom.<span class="title function_">move</span>(<span class="number">34</span>);</span><br></pre></td></tr></table></figure><p>这个例子展示了一些上面没有提到的特性。 这一次，我们使用<code>extends</code>关键字创建了<code>Animal</code>的两个子类：<code>Horse</code>和<code>Snake</code>。</p><p>与前一个例子的不同点是，派生类包含了一个构造函数，它<em>必须</em>调用<code>super()</code>，它会执行基类的构造函数。 而且，在构造函数里访问<code>this</code>的属性之前，我们<em>一定</em>要调用<code>super()</code>。 这个是TypeScript强制执行的一条重要规则。</p><p>这个例子演示了如何在子类里可以重写父类的方法。 <code>Snake</code>类和<code>Horse</code>类都创建了<code>move</code>方法，它们重写了从<code>Animal</code>继承来的<code>move</code>方法，使得<code>move</code>方法根据不同的类而具有不同的功能。 注意，即使<code>tom</code>被声明为<code>Animal</code>类型，但因为它的值是<code>Horse</code>，调用<code>tom.move(34)</code>时，它会调用<code>Horse</code>里重写的方法：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Slithering</span>...</span><br><span class="line"><span class="title class_">Sammy</span> the <span class="title class_">Python</span> moved 5m.</span><br><span class="line"><span class="title class_">Galloping</span>...</span><br><span class="line"><span class="title class_">Tommy</span> the <span class="title class_">Palomino</span> moved 34m.</span><br></pre></td></tr></table></figure><h3 id="类中的修饰符"><a href="#类中的修饰符" class="headerlink" title="类中的修饰符"></a>类中的修饰符</h3><h4 id="public-修饰符（公开属性"><a href="#public-修饰符（公开属性" class="headerlink" title="public  修饰符（公开属性)"></a><code>public</code>  修饰符（公开属性)</h4><p>public 公开属性，类的实例在外部可以访问这个属性，类的内部也可以访问，继承的子类也可以访问</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> name!: <span class="built_in">string</span>; <span class="comment">// 不写public默认也是公开的</span></span><br><span class="line">    <span class="keyword">public</span> age!: <span class="built_in">number</span>;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span>, age: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span>, age: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(name, age);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>,<span class="variable language_">this</span>.<span class="property">age</span>); <span class="comment">// 子类访问</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Cat</span>(<span class="string">&#x27;Tom&#x27;</span>, <span class="number">18</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p.<span class="property">name</span>,p.<span class="property">age</span>); <span class="comment">// 外层访问</span></span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> name: <span class="built_in">string</span>, <span class="keyword">public</span> age: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>我们可以通过参数属性来简化父类中的代码</p></blockquote><h4 id="protected修饰符-自己和子类可以访问到"><a href="#protected修饰符-自己和子类可以访问到" class="headerlink" title="protected修饰符 (自己和子类可以访问到)"></a><code>protected</code>修饰符 (自己和子类可以访问到)</h4><p>我自己能访问，儿子能访问，外部无法访问</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">protected</span> name: <span class="built_in">string</span>, <span class="keyword">protected</span> age: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span>, age: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(name, age);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>, <span class="variable language_">this</span>.<span class="property">age</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Cat</span>(<span class="string">&#x27;Tom&#x27;</span>, <span class="number">18</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p.<span class="property">name</span>,p.<span class="property">age</span>);<span class="comment">// 无法访问</span></span><br></pre></td></tr></table></figure><h4 id="private修饰符-（私有的）"><a href="#private修饰符-（私有的）" class="headerlink" title="private修饰符 （私有的）"></a><code>private</code>修饰符 （私有的）</h4><p>除了自己都访问不到</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">private</span> name: <span class="built_in">string</span>, <span class="keyword">private</span> age: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span>, age: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(name, age);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>, <span class="variable language_">this</span>.<span class="property">age</span>); <span class="comment">// 无法访问</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Cat</span>(<span class="string">&#x27;Tom&#x27;</span>, <span class="number">18</span>); </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p.<span class="property">name</span>,p.<span class="property">age</span>);<span class="comment">// 无法访问</span></span><br></pre></td></tr></table></figure><h4 id="readonly修饰符-（仅读）"><a href="#readonly修饰符-（仅读）" class="headerlink" title="readonly修饰符 （仅读）"></a><code>readonly</code>修饰符 （仅读）</h4><p>readonly 标识仅读属性，意味着如果初始化后，不能被修改</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> <span class="keyword">readonly</span> name: <span class="built_in">string</span>, <span class="keyword">public</span> age: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">changeName</span>(<span class="params">name:<span class="built_in">string</span></span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name; <span class="comment">// 仅读属性只能在constructor中被赋值</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span>, age: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(name, age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Cat</span>(<span class="string">&#x27;Tom&#x27;</span>, <span class="number">18</span>); </span><br><span class="line">p.<span class="title function_">changeName</span>(<span class="string">&#x27;Jerry&#x27;</span>);</span><br></pre></td></tr></table></figure><h4 id="参数属性"><a href="#参数属性" class="headerlink" title="参数属性"></a>参数属性</h4><p>在上面的例子中，我们不得不定义一个受保护的成员<code>name</code>和一个构造函数参数<code>theName</code>在<code>Person</code>类里，并且立刻给<code>name</code>和<code>theName</code>赋值。 这种情况经常会遇到。<em>参数属性</em>可以方便地让我们在一个地方定义并初始化一个成员。 下面的例子是对之前<code>Animal</code>类的修改版，使用了参数属性：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">private</span> name: <span class="built_in">string</span></span>) &#123; &#125;</span><br><span class="line">    <span class="title function_">move</span>(<span class="params">distanceInMeters: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span> moved <span class="subst">$&#123;distanceInMeters&#125;</span>m.`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注意看我们是如何舍弃了<code>theName</code>，仅在构造函数里使用<code>private name: string</code>参数来创建和初始化<code>name</code>成员。 我们把声明和赋值合并至一处。</p><p>参数属性通过给构造函数参数添加一个访问限定符来声明。 使用<code>private</code>限定一个参数属性会声明并初始化一个私有成员；对于<code>public</code>和<code>protected</code>来说也是一样。</p><h4 id="存取器"><a href="#存取器" class="headerlink" title="存取器"></a>存取器</h4><p>TypeScript支持通过getters/setters来截取对对象成员的访问。 它能帮助你有效的控制对对象成员的访问。</p><p>下面来看如何把一个简单的类改写成使用<code>get</code>和<code>set</code>。 首先，我们从一个没有使用存取器的例子开始。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line">    <span class="attr">fullName</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> employee = <span class="keyword">new</span> <span class="title class_">Employee</span>();</span><br><span class="line">employee.<span class="property">fullName</span> = <span class="string">&quot;Bob Smith&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (employee.<span class="property">fullName</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(employee.<span class="property">fullName</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们可以随意的设置<code>fullName</code>，这是非常方便的，但是这也可能会带来麻烦。</p><p>下面这个版本里，我们先检查用户密码是否正确，然后再允许其修改员工信息。 我们把对<code>fullName</code>的直接访问改成了可以检查密码的<code>set</code>方法。 我们也加了一个<code>get</code>方法，让上面的例子仍然可以工作。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> passcode = <span class="string">&quot;secret passcode&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="attr">_fullName</span>: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">fullName</span>(): <span class="built_in">string</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_fullName</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">fullName</span>(<span class="params">newName: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (passcode &amp;&amp; passcode == <span class="string">&quot;secret passcode&quot;</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">_fullName</span> = newName;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Error: Unauthorized update of employee!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> employee = <span class="keyword">new</span> <span class="title class_">Employee</span>();</span><br><span class="line">employee.<span class="property">fullName</span> = <span class="string">&quot;Bob Smith&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (employee.<span class="property">fullName</span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(employee.<span class="property">fullName</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们可以修改一下密码，来验证一下存取器是否是工作的。当密码不对时，会提示我们没有权限去修改员工。</p><p>对于存取器有下面几点需要注意的：</p><p>首先，存取器要求你将编译器设置为输出ECMAScript 5或更高。 不支持降级到ECMAScript 3。 其次，只带有<code>get</code>不带有<code>set</code>的存取器自动被推断为<code>readonly</code>。 这在从代码生成<code>.d.ts</code>文件时是有帮助的，因为利用这个属性的用户会看到不允许够改变它的值。</p><h4 id="静态属性和方法"><a href="#静态属性和方法" class="headerlink" title="静态属性和方法"></a>静态属性和方法</h4><p>创建类的静态成员，这些属性存在于类本身上面而不是类的实例上。 在这个例子里，我们使用<code>static</code>定义<code>origin</code>，因为它是所有网格都会用到的属性。 每个实例想要访问这个属性的时候，都要在<code>origin</code>前面加上类名。 如同在实例属性上使用<code>this.</code>前缀来访问属性一样，这里我们使用<code>Grid.</code>来访问静态属性。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Grid</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> origin = &#123;<span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span>&#125;;</span><br><span class="line">    <span class="title function_">calculateDistanceFromOrigin</span>(<span class="params">point: &#123;x: <span class="built_in">number</span>; y: <span class="built_in">number</span>;&#125;</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> xDist = (point.<span class="property">x</span> - <span class="title class_">Grid</span>.<span class="property">origin</span>.<span class="property">x</span>);</span><br><span class="line">        <span class="keyword">let</span> yDist = (point.<span class="property">y</span> - <span class="title class_">Grid</span>.<span class="property">origin</span>.<span class="property">y</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">sqrt</span>(xDist * xDist + yDist * yDist) / <span class="variable language_">this</span>.<span class="property">scale</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">constructor</span> (<span class="keyword">public</span> <span class="attr">scale</span>: <span class="built_in">number</span>) &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> grid1 = <span class="keyword">new</span> <span class="title class_">Grid</span>(<span class="number">1.0</span>);  <span class="comment">// 1x scale</span></span><br><span class="line"><span class="keyword">let</span> grid2 = <span class="keyword">new</span> <span class="title class_">Grid</span>(<span class="number">5.0</span>);  <span class="comment">// 5x scale</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(grid1.<span class="title function_">calculateDistanceFromOrigin</span>(&#123;<span class="attr">x</span>: <span class="number">10</span>, <span class="attr">y</span>: <span class="number">10</span>&#125;));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(grid2.<span class="title function_">calculateDistanceFromOrigin</span>(&#123;<span class="attr">x</span>: <span class="number">10</span>, <span class="attr">y</span>: <span class="number">10</span>&#125;));</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">type</span> = <span class="string">&#x27;哺乳动物&#x27;</span>; <span class="comment">// 静态属性</span></span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">getName</span>(<span class="params"></span>) &#123; <span class="comment">// 静态方法</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;动物类&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="attr">_name</span>: <span class="built_in">string</span> = <span class="string">&#x27;Tom&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">name</span>() &#123; <span class="comment">// 属性访问器</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_name</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">name</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_name</span> = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> animal = <span class="keyword">new</span> <span class="title class_">Animal</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(animal.<span class="property">name</span>);</span><br></pre></td></tr></table></figure><blockquote><p>静态属性和静态方法是可以被子类所继承的</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">protected</span>  name:<span class="built_in">string</span></span>)&#123; <span class="comment">// 等价于 每个属性增添了public</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 原型方法 就是每一个实例共享的方法 , 父类提供的方法 子类是可以进行方法重写的</span></span><br><span class="line">    <span class="comment">// 原型的函数：void 意味着是不关心函数的返回值，并不是空的意思</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="title function_">changeName</span>(<span class="attr">value</span>:<span class="built_in">string</span>,<span class="attr">age</span>:<span class="built_in">number</span>):<span class="built_in">void</span>&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = value</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 原型属性 需要通过访问器来实现</span></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">aliasName</span>()&#123; </span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;$&#x27;</span> + <span class="variable language_">this</span>.<span class="property">name</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">alisName</span>(<span class="params">name:<span class="built_in">string</span></span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> a = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">getA</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">a</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Super属性-继承-extends"><a href="#Super属性-继承-extends" class="headerlink" title="Super属性 (继承 extends)"></a>Super属性 (继承 extends)</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="title function_">say</span>(<span class="params">message:<span class="built_in">string</span></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(message);</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">getType</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;动物&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span> &#123;</span><br><span class="line">    <span class="title function_">say</span>(<span class="params"></span>)&#123; <span class="comment">// 原型方法中的super指代的是父类的原型</span></span><br><span class="line">        <span class="variable language_">super</span>.<span class="title function_">say</span>(<span class="string">&#x27;猫猫叫&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">getType</span>(<span class="params"></span>)&#123; <span class="comment">// 静态方法中的super指代的是父类</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">super</span>.<span class="title function_">getType</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> cat = <span class="keyword">new</span> <span class="title class_">Cat</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Cat</span>.<span class="title function_">getType</span>())</span><br></pre></td></tr></table></figure><blockquote><p>super在构造函数 指向的是父类，在原型的方法中调用的时候指向的是父类的原型</p><p>super在 类中访问 constructor / static函数中执指向的都是父类  ,在原型方法中， 属性访问器都是 父类的原型</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// super在构造函数 指向的是父类，在原型的方法中调用的时候指向的是父类的原型</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name:<span class="built_in">string</span>,<span class="keyword">public</span> <span class="keyword">readonly</span> age:<span class="built_in">number</span></span>)&#123;</span><br><span class="line">        <span class="variable language_">super</span>(name); <span class="comment">// Animal.call(this)</span></span><br><span class="line">        <span class="comment">// this.age = age;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 子类在重写父类方法要兼容, 赋予的函数可以兼容父类</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="title function_">changeName</span>(<span class="params">value:<span class="built_in">string</span></span>)&#123;</span><br><span class="line">        <span class="variable language_">super</span>.<span class="title function_">changeName</span>(value,<span class="number">100</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;abc&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> tom1 = <span class="keyword">new</span> <span class="title class_">Cat</span>(<span class="string">&#x27;tom&#x27;</span>,<span class="number">30</span>)</span><br><span class="line"><span class="keyword">const</span> tom2 = <span class="keyword">new</span> <span class="title class_">Cat</span>(<span class="string">&#x27;tom&#x27;</span>,<span class="number">30</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Cat</span>.<span class="title function_">getA</span>()); </span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span>&#123;</span><br><span class="line">    <span class="keyword">static</span> instance = <span class="keyword">new</span> <span class="title class_">Singleton</span>(); <span class="comment">// 自己本身创造一个实例，后续一致用这一个，不产生多个</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="title function_">constructor</span>(<span class="params"></span>)&#123; &#125; <span class="comment">// 增加protected之后 构造函数不能被new了</span></span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">getInstance</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">instance</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 类在什么时候 不用外面new</span></span><br><span class="line"><span class="keyword">let</span> instance = <span class="title class_">Singleton</span>.<span class="title function_">getInstance</span>();</span><br></pre></td></tr></table></figure><p>在TypeScript里，我们可以使用常用的面向对象模式。 基于类的程序设计中一种最基本的模式是允许使用继承来扩展现有的类。</p><p>看下面的例子：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="title function_">move</span>(<span class="params">distanceInMeters: <span class="built_in">number</span> = <span class="number">0</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Animal moved <span class="subst">$&#123;distanceInMeters&#125;</span>m.`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span> &#123;</span><br><span class="line">    <span class="title function_">bark</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Woof! Woof!&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dog = <span class="keyword">new</span> <span class="title class_">Dog</span>();</span><br><span class="line">dog.<span class="title function_">bark</span>();</span><br><span class="line">dog.<span class="title function_">move</span>(<span class="number">10</span>);</span><br><span class="line">dog.<span class="title function_">bark</span>();</span><br></pre></td></tr></table></figure><p>这个例子展示了最基本的继承：类从基类中继承了属性和方法。 这里，<code>Dog</code>是一个<em>派生类</em>，它派生自<code>Animal</code><em>基类</em>，通过<code>extends</code>关键字。 派生类通常被称作<em>子类</em>，基类通常被称作<em>超类</em>。</p><p>因为<code>Dog</code>继承了<code>Animal</code>的功能，因此我们可以创建一个<code>Dog</code>的实例，它能够<code>bark()</code>和<code>move()</code>。</p><p>下面我们来看个更加复杂的例子。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">theName: <span class="built_in">string</span></span>) &#123; <span class="variable language_">this</span>.<span class="property">name</span> = theName; &#125;</span><br><span class="line">    <span class="title function_">move</span>(<span class="params">distanceInMeters: <span class="built_in">number</span> = <span class="number">0</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span> moved <span class="subst">$&#123;distanceInMeters&#125;</span>m.`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Snake</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123; <span class="variable language_">super</span>(name); &#125;</span><br><span class="line">    <span class="title function_">move</span>(<span class="params">distanceInMeters = <span class="number">5</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Slithering...&quot;</span>);</span><br><span class="line">        <span class="variable language_">super</span>.<span class="title function_">move</span>(distanceInMeters);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Horse</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123; <span class="variable language_">super</span>(name); &#125;</span><br><span class="line">    <span class="title function_">move</span>(<span class="params">distanceInMeters = <span class="number">45</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Galloping...&quot;</span>);</span><br><span class="line">        <span class="variable language_">super</span>.<span class="title function_">move</span>(distanceInMeters);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sam = <span class="keyword">new</span> <span class="title class_">Snake</span>(<span class="string">&quot;Sammy the Python&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="attr">tom</span>: <span class="title class_">Animal</span> = <span class="keyword">new</span> <span class="title class_">Horse</span>(<span class="string">&quot;Tommy the Palomino&quot;</span>);</span><br><span class="line"></span><br><span class="line">sam.<span class="title function_">move</span>();</span><br><span class="line">tom.<span class="title function_">move</span>(<span class="number">34</span>);</span><br></pre></td></tr></table></figure><p>这个例子展示了一些上面没有提到的特性。 这一次，我们使用<code>extends</code>关键字创建了<code>Animal</code>的两个子类：<code>Horse</code>和<code>Snake</code>。</p><p>与前一个例子的不同点是，派生类包含了一个构造函数，它<em>必须</em>调用<code>super()</code>，它会执行基类的构造函数。 而且，在构造函数里访问<code>this</code>的属性之前，我们<em>一定</em>要调用<code>super()</code>。 这个是TypeScript强制执行的一条重要规则。</p><p>这个例子演示了如何在子类里可以重写父类的方法。 <code>Snake</code>类和<code>Horse</code>类都创建了<code>move</code>方法，它们重写了从<code>Animal</code>继承来的<code>move</code>方法，使得<code>move</code>方法根据不同的类而具有不同的功能。 注意，即使<code>tom</code>被声明为<code>Animal</code>类型，但因为它的值是<code>Horse</code>，调用<code>tom.move(34)</code>时，它会调用<code>Horse</code>里重写的方法：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Slithering</span>...</span><br><span class="line"><span class="title class_">Sammy</span> the <span class="title class_">Python</span> moved 5m.</span><br><span class="line"><span class="title class_">Galloping</span>...</span><br><span class="line"><span class="title class_">Tommy</span> the <span class="title class_">Palomino</span> moved 34m.</span><br></pre></td></tr></table></figure><h3 id="类的装饰器"><a href="#类的装饰器" class="headerlink" title="类的装饰器"></a>类的装饰器</h3><h4 id="装饰类"><a href="#装饰类" class="headerlink" title="装饰类"></a><strong>装饰类</strong></h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">addSay</span>(<span class="params">target:<span class="built_in">any</span></span>)&#123;</span><br><span class="line">    target.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">say</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;say&#x27;</span>)&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@addSay</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    say!:<span class="title class_">Function</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> <span class="title class_">Person</span></span><br><span class="line">person.<span class="title function_">say</span>();</span><br></pre></td></tr></table></figure><blockquote><p>装饰类可以给类扩展功能,需要开启<code>experimentalDecorators:true</code></p></blockquote><h4 id="装饰类中属性"><a href="#装饰类中属性" class="headerlink" title="装饰类中属性"></a>装饰类中属性</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">toUpperCase</span>(<span class="params">target:<span class="built_in">any</span>,key:<span class="built_in">string</span></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> value = target[key]; </span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(target,key,&#123;</span><br><span class="line">        <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> value.<span class="title function_">toUpperCase</span>();</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">set</span>(<span class="params">newValue</span>)&#123;</span><br><span class="line">            value = newValue</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">double</span>(<span class="params">target: <span class="built_in">any</span>, key: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> value = target[key];</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(target, key, &#123;</span><br><span class="line">        <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> value * <span class="number">2</span>;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">set</span>(<span class="params">newValue</span>) &#123;value = newValue&#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="meta">@toUpperCase</span></span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span> = <span class="string">&#x27;JiangWen&#x27;</span></span><br><span class="line"><span class="meta">@double</span></span><br><span class="line">    <span class="keyword">static</span> <span class="attr">age</span>: <span class="built_in">number</span> = <span class="number">10</span>;</span><br><span class="line">    <span class="title function_">getName</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="title function_">getName</span>(),<span class="title class_">Person</span>.<span class="property">age</span>)</span><br></pre></td></tr></table></figure><blockquote><p>装饰属性可以对属性的内容进行改写，装饰的是实例属性则target指向类的原型、装饰的是静态属性则target执行类本身~</p></blockquote><h4 id="装饰类中方法"><a href="#装饰类中方法" class="headerlink" title="装饰类中方法"></a>装饰类中方法</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">noEnum</span>(<span class="params">target:<span class="built_in">any</span>,key:<span class="built_in">string</span>,descriptor:PropertyDescriptor</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(descriptor)</span><br><span class="line">    descriptor.<span class="property">enumerable</span> = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="meta">@toUpperCase</span></span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span> = <span class="string">&#x27;JiangWen&#x27;</span></span><br><span class="line">    <span class="meta">@double</span></span><br><span class="line">    <span class="keyword">static</span> <span class="attr">age</span>: <span class="built_in">number</span> = <span class="number">10</span>;</span><br><span class="line">    <span class="meta">@noEnum</span></span><br><span class="line">    <span class="title function_">getName</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person); <span class="comment">// getName 不可枚举</span></span><br></pre></td></tr></table></figure><h4 id="装饰参数"><a href="#装饰参数" class="headerlink" title="装饰参数"></a>装饰参数</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">addPrefix</span>(<span class="params">target:<span class="built_in">any</span>,key:<span class="built_in">string</span>,paramIndex:<span class="built_in">number</span></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(target,key,paramIndex); <span class="comment">// Person.prototype getName  0 </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="meta">@toUpperCase</span></span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span> = <span class="string">&#x27;JiangWen&#x27;</span></span><br><span class="line">    <span class="meta">@double</span></span><br><span class="line">    <span class="keyword">static</span> <span class="attr">age</span>: <span class="built_in">number</span> = <span class="number">10</span>;</span><br><span class="line">    prefix!:<span class="built_in">string</span></span><br><span class="line">    <span class="meta">@noEnum</span></span><br><span class="line">    <span class="title function_">getName</span>(<span class="params"><span class="meta">@addPrefix</span> prefix:<span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h3><p>抽象类做为其它派生类的基类使用。 它们一般不会直接被实例化。 不同于接口，抽象类可以包含成员的实现细节。 <code>abstract</code>关键字是用于定义抽象类和在抽象类内部定义抽象方法。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">abstract class Animal &#123;</span><br><span class="line">    abstract makeSound(): void;</span><br><span class="line">    move(): void &#123;</span><br><span class="line">        console.log(&#x27;roaming the earch...&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>抽象类中的抽象方法不包含具体实现并且必须在派生类中实现。 抽象方法的语法与接口方法相似。 两者都是定义方法签名但不包含方法体。 然而，抽象方法必须包含<code>abstract</code>关键字并且可以包含访问修饰符。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Department</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">printName</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Department name: &#x27;</span> + <span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">abstract</span> <span class="title function_">printMeeting</span>(): <span class="built_in">void</span>; <span class="comment">// 必须在派生类中实现</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AccountingDepartment</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Department</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(<span class="string">&#x27;Accounting and Auditing&#x27;</span>); <span class="comment">// 在派生类的构造函数中必须调用 super()</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">printMeeting</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;The Accounting Department meets each Monday at 10am.&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">generateReports</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Generating accounting reports...&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">department</span>: <span class="title class_">Department</span>; <span class="comment">// 允许创建一个对抽象类型的引用</span></span><br><span class="line">department = <span class="keyword">new</span> <span class="title class_">Department</span>(); <span class="comment">// 错误: 不能创建一个抽象类的实例</span></span><br><span class="line">department = <span class="keyword">new</span> <span class="title class_">AccountingDepartment</span>(); <span class="comment">// 允许对一个抽象子类进行实例化和赋值</span></span><br><span class="line">department.<span class="title function_">printName</span>();</span><br><span class="line">department.<span class="title function_">printMeeting</span>();</span><br><span class="line">department.<span class="title function_">generateReports</span>(); <span class="comment">// 错误: 方法在声明的抽象类中不存在</span></span><br></pre></td></tr></table></figure><p>抽象类无法被实例化，只能被继承，抽象方法不能在抽象类中实现，只能在抽象类的具体子类中实现,而且必须实现。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Animal</span>&#123;</span><br><span class="line">    name!:<span class="built_in">string</span>;</span><br><span class="line">    <span class="keyword">abstract</span> <span class="title function_">speak</span>():<span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span> &#123;</span><br><span class="line">    <span class="title function_">speak</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;猫猫叫&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span>&#123;</span><br><span class="line">    <span class="title function_">speak</span>():<span class="built_in">string</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;汪汪叫&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;wangwang&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>定义类型时<code>void</code>表示函数的返回值为空（不关心返回值类型，所有在定义函数时也不关心函数返回值类型）</p></blockquote><p>ts 中有抽象类概念， abstract 不存在的</p><p>抽象类 可以含义非抽象的方法和属性 ， 不会new它 , 抽象类可以被继承，抽象类中抽象方法子类必须要实现</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Animal</span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="attr">a</span>:<span class="built_in">string</span></span><br><span class="line">        <span class="title function_">drink</span>(<span class="params"></span>)&#123; <span class="comment">// 非抽象，已经有实现了</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;喝水&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">abstract</span> <span class="title function_">eat</span>():<span class="built_in">void</span> <span class="comment">// 抽象的方法，父类没有实现，那么子类必须实现</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Cat</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span>&#123;</span><br><span class="line">        <span class="keyword">public</span> a!: <span class="built_in">string</span>;</span><br><span class="line">        <span class="title function_">eat</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Method not implemented.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 因为我们编写的代码的时候 ， 慢慢的脱离继承了。 组合优于继承。   类的装饰器（redux，nest， mobx）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="高级技巧"><a href="#高级技巧" class="headerlink" title="高级技巧"></a>高级技巧</h3><h4 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h4><p>当你在TypeScript里声明了一个类的时候，实际上同时声明了很多东西。 首先就是类的<em>实例</em>的类型。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Greeter</span> &#123;</span><br><span class="line">    <span class="attr">greeting</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">message: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">greeting</span> = message;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">greet</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello, &quot;</span> + <span class="variable language_">this</span>.<span class="property">greeting</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">greeter</span>: <span class="title class_">Greeter</span>;</span><br><span class="line">greeter = <span class="keyword">new</span> <span class="title class_">Greeter</span>(<span class="string">&quot;world&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(greeter.<span class="title function_">greet</span>());</span><br></pre></td></tr></table></figure><p>这里，我们写了<code>let greeter: Greeter</code>，意思是<code>Greeter</code>类的实例的类型是<code>Greeter</code>。 这对于用过其它面向对象语言的程序员来讲已经是老习惯了。</p><p>我们也创建了一个叫做<em>构造函数</em>的值。 这个函数会在我们使用<code>new</code>创建类实例的时候被调用。 下面我们来看看，上面的代码被编译成JavaScript后是什么样子的：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title class_">Greeter</span> = (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">Greeter</span>(<span class="params">message</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">greeting</span> = message;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title class_">Greeter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">greet</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello, &quot;</span> + <span class="variable language_">this</span>.<span class="property">greeting</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Greeter</span>;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> greeter;</span><br><span class="line">greeter = <span class="keyword">new</span> <span class="title class_">Greeter</span>(<span class="string">&quot;world&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(greeter.<span class="title function_">greet</span>());</span><br></pre></td></tr></table></figure><p>上面的代码里，<code>let Greeter</code>将被赋值为构造函数。 当我们调用<code>new</code>并执行了这个函数后，便会得到一个类的实例。 这个构造函数也包含了类的所有静态属性。 换个角度说，我们可以认为类具有<em>实例部分</em>与<em>静态部分</em>这两个部分。</p><p>让我们稍微改写一下这个例子，看看它们之前的区别：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Greeter</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> standardGreeting = <span class="string">&quot;Hello, there&quot;</span>;</span><br><span class="line">    <span class="attr">greeting</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="title function_">greet</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">greeting</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;Hello, &quot;</span> + <span class="variable language_">this</span>.<span class="property">greeting</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title class_">Greeter</span>.<span class="property">standardGreeting</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">greeter1</span>: <span class="title class_">Greeter</span>;</span><br><span class="line">greeter1 = <span class="keyword">new</span> <span class="title class_">Greeter</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(greeter1.<span class="title function_">greet</span>());</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">greeterMaker</span>: <span class="keyword">typeof</span> <span class="title class_">Greeter</span> = <span class="title class_">Greeter</span>;</span><br><span class="line">greeterMaker.<span class="property">standardGreeting</span> = <span class="string">&quot;Hey there!&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">greeter2</span>: <span class="title class_">Greeter</span> = <span class="keyword">new</span> <span class="title function_">greeterMaker</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(greeter2.<span class="title function_">greet</span>());</span><br></pre></td></tr></table></figure><p>这个例子里，<code>greeter1</code>与之前看到的一样。 我们实例化<code>Greeter</code>类，并使用这个对象。 与我们之前看到的一样。</p><p>再之后，我们直接使用类。 我们创建了一个叫做<code>greeterMaker</code>的变量。 这个变量保存了这个类或者说保存了类构造函数。 然后我们使用<code>typeof Greeter</code>，意思是取Greeter类的类型，而不是实例的类型。 或者更确切的说，”告诉我<code>Greeter</code>标识符的类型”，也就是构造函数的类型。 这个类型包含了类的所有静态成员和构造函数。 之后，就和前面一样，我们在<code>greeterMaker</code>上使用<code>new</code>，创建<code>Greeter</code>的实例。</p><h4 id="把类当做接口使用"><a href="#把类当做接口使用" class="headerlink" title="把类当做接口使用"></a>把类当做接口使用</h4><p>如上一节里所讲的，类定义会创建两个东西：类的实例类型和一个构造函数。 因为类可以创建出类型，所以你能够在允许使用接口的地方使用类。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">    <span class="attr">x</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="attr">y</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Point3</span>d <span class="keyword">extends</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">    <span class="attr">z</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">point3d</span>: <span class="title class_">Point3</span>d = &#123;<span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">z</span>: <span class="number">3</span>&#125;;</span><br></pre></td></tr></table></figure><ul><li><p>练习代码</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 类： 类的组成： 构造函数、属性（实例属性，原型属性、静态属性）、方法 （实例的方法，原型方法，静态方法） 访问器， 静态相关的配置</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span> &#123;</span><br><span class="line">    <span class="comment">// 给这个类来声明属性 </span></span><br><span class="line">    <span class="keyword">private</span> <span class="attr">x</span>:<span class="built_in">number</span></span><br><span class="line">    <span class="keyword">public</span> <span class="attr">y</span>:<span class="built_in">number</span></span><br><span class="line">    <span class="keyword">public</span> <span class="attr">fn</span>: <span class="function">()=&gt;</span> <span class="built_in">void</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">x:<span class="built_in">number</span>,y:<span class="built_in">number</span> = <span class="number">200</span></span>)&#123; <span class="comment">// 函数</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">x</span> = x;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">y</span> = y;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">fn</span> = <span class="function">()=&gt;</span>&#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 类的修饰符</span></span><br><span class="line"><span class="comment">// public 公开属性，类的实例在外部可以访问这个属性，类的内部也可以访问，继承的子类也可以访问</span></span><br><span class="line"><span class="comment">// protected (我自己能访问，儿子能访问，外部无法访问)</span></span><br><span class="line"><span class="comment">// private (私有的 自己能访问)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 平时我们一般采用public 或者private的场景比较多.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// readonly 标识仅读属性，意味着如果初始化后，不能被修改</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// let circle = new Circle(100,100)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">protected</span>  name:<span class="built_in">string</span></span>)&#123; <span class="comment">// 等价于 每个属性增添了public</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 原型方法 就是每一个实例共享的方法 , 父类提供的方法 子类是可以进行方法重写的</span></span><br><span class="line">    <span class="comment">// 原型的函数：void 意味着是不关心函数的返回值，并不是空的意思</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="title function_">changeName</span>(<span class="attr">value</span>:<span class="built_in">string</span>,<span class="attr">age</span>:<span class="built_in">number</span>):<span class="built_in">void</span>&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = value</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 原型属性 需要通过访问器来实现</span></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">aliasName</span>()&#123; </span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;$&#x27;</span> + <span class="variable language_">this</span>.<span class="property">name</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">alisName</span>(<span class="params">name:<span class="built_in">string</span></span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> a = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">getA</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">a</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// super在构造函数 指向的是父类，在原型的方法中调用的时候指向的是父类的原型</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name:<span class="built_in">string</span>,<span class="keyword">public</span> <span class="keyword">readonly</span> age:<span class="built_in">number</span></span>)&#123;</span><br><span class="line">        <span class="variable language_">super</span>(name); <span class="comment">// Animal.call(this)</span></span><br><span class="line">        <span class="comment">// this.age = age;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 子类在重写父类方法要兼容, 赋予的函数可以兼容父类</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="title function_">changeName</span>(<span class="params">value:<span class="built_in">string</span></span>)&#123;</span><br><span class="line">        <span class="variable language_">super</span>.<span class="title function_">changeName</span>(value,<span class="number">100</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;abc&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> tom1 = <span class="keyword">new</span> <span class="title class_">Cat</span>(<span class="string">&#x27;tom&#x27;</span>,<span class="number">30</span>)</span><br><span class="line"><span class="keyword">const</span> tom2 = <span class="keyword">new</span> <span class="title class_">Cat</span>(<span class="string">&#x27;tom&#x27;</span>,<span class="number">30</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Cat</span>.<span class="title function_">getA</span>()); </span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log(tom1.aliasName === tom2.aliasName)</span></span><br><span class="line"><span class="comment">// tom.changeName(&#x27;jerry&#x27;)</span></span><br><span class="line"><span class="comment">// 以上用法同es6</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// super在 类中访问 constructor / static函数中执指向的都是父类  ,在原型方法中， 属性访问器都是 父类的原型</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span>&#123;</span><br><span class="line">    <span class="keyword">static</span> instance = <span class="keyword">new</span> <span class="title class_">Singleton</span>(); <span class="comment">// 自己本身创造一个实例，后续一致用这一个，不产生多个</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="title function_">constructor</span>(<span class="params"></span>)&#123; &#125; <span class="comment">// 增加protected之后 构造函数不能被new了</span></span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">getInstance</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">instance</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 类在什么时候 不用外面new</span></span><br><span class="line"><span class="keyword">let</span> instance = <span class="title class_">Singleton</span>.<span class="title function_">getInstance</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ts 中有抽象类概念， abstract 不存在的</span></span><br><span class="line"><span class="comment">// 抽象类 可以含义非抽象的方法和属性 ， 不会new它 , 抽象类可以被继承，抽象类中抽象方法子类必须要实现</span></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Animal</span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="attr">a</span>:<span class="built_in">string</span></span><br><span class="line">        <span class="title function_">drink</span>(<span class="params"></span>)&#123; <span class="comment">// 非抽象，已经有实现了</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;喝水&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">abstract</span> <span class="title function_">eat</span>():<span class="built_in">void</span> <span class="comment">// 抽象的方法，父类没有实现，那么子类必须实现</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Cat</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span>&#123;</span><br><span class="line">        <span class="keyword">public</span> a!: <span class="built_in">string</span>;</span><br><span class="line">        <span class="title function_">eat</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Method not implemented.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 因为我们编写的代码的时候 ， 慢慢的脱离继承了。 组合优于继承。   类的装饰器（redux，nest， mobx）</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h1 id="5-接口-interface"><a href="#5-接口-interface" class="headerlink" title="5.接口(interface)"></a>5.接口(interface)</h1><h3 id="文档的解释"><a href="#文档的解释" class="headerlink" title="文档的解释"></a>文档的解释</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">printLabel</span>(<span class="params">labelledObj: &#123; label: <span class="built_in">string</span> &#125;</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(labelledObj.<span class="property">label</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myObj = &#123; <span class="attr">size</span>: <span class="number">10</span>, <span class="attr">label</span>: <span class="string">&quot;Size 10 Object&quot;</span> &#125;;</span><br><span class="line"><span class="title function_">printLabel</span>(myObj);</span><br></pre></td></tr></table></figure><p>类型检查器会查看<code>printLabel</code>的调用。 <code>printLabel</code>有一个参数，并要求这个对象参数有一个名为<code>label</code>类型为<code>string</code>的属性。 需要注意的是，我们传入的对象参数实际上会包含很多属性，但是编译器只会检查那些必需的属性是否存在，并且其类型是否匹配。 然而，有些时候TypeScript却并不会这么宽松，我们下面会稍做讲解。</p><p>下面我们重写上面的例子，这次使用接口来描述：必须包含一个<code>label</code>属性且类型为<code>string</code>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">interface LabelledValue &#123;</span><br><span class="line">  label: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function printLabel(labelledObj: LabelledValue) &#123;</span><br><span class="line">  console.log(labelledObj.label);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let myObj = &#123;size: 10, label: &quot;Size 10 Object&quot;&#125;;</span><br><span class="line">printLabel(myObj);</span><br></pre></td></tr></table></figure><p><code>LabelledValue</code>接口就好比一个名字，用来描述上面例子里的要求。 它代表了有一个<code>label</code>属性且类型为<code>string</code>的对象。 需要注意的是，我们在这里并不能像在其它语言里一样，说传给<code>printLabel</code>的对象实现了这个接口。我们只会去关注值的外形。 只要传入的对象满足上面提到的必要条件，那么它就是被允许的。</p><p>还有一点值得提的是，类型检查器不会去检查属性的顺序，只要相应的属性存在并且类型也是对的就可以。</p><h4 id="可选属性"><a href="#可选属性" class="headerlink" title="可选属性"></a>可选属性</h4><p>接口里的属性不全都是必需的。 有些是只在某些条件下存在，或者根本不存在。 可选属性在应用“option bags”模式时很常用，即给函数传入的参数对象中只有部分属性赋值了。</p><p>下面是应用了“option bags”的例子：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">SquareConfig</span> &#123;</span><br><span class="line">  color?: <span class="built_in">string</span>;</span><br><span class="line">  width?: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createSquare</span>(<span class="params">config: SquareConfig</span>): &#123;<span class="attr">color</span>: <span class="built_in">string</span>; <span class="attr">area</span>: <span class="built_in">number</span>&#125; &#123;</span><br><span class="line">  <span class="keyword">let</span> newSquare = &#123;<span class="attr">color</span>: <span class="string">&quot;white&quot;</span>, <span class="attr">area</span>: <span class="number">100</span>&#125;;</span><br><span class="line">  <span class="keyword">if</span> (config.<span class="property">color</span>) &#123;</span><br><span class="line">    newSquare.<span class="property">color</span> = config.<span class="property">color</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (config.<span class="property">width</span>) &#123;</span><br><span class="line">    newSquare.<span class="property">area</span> = config.<span class="property">width</span> * config.<span class="property">width</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> newSquare;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> mySquare = <span class="title function_">createSquare</span>(&#123;<span class="attr">color</span>: <span class="string">&quot;black&quot;</span>&#125;);</span><br></pre></td></tr></table></figure><p>带有可选属性的接口与普通的接口定义差不多，只是在可选属性名字定义的后面加一个<code>?</code>符号。</p><p>可选属性的好处之一是可以对可能存在的属性进行预定义，好处之二是可以捕获引用了不存在的属性时的错误。 比如，我们故意将<code>createSquare</code>里的<code>color</code>属性名拼错，就会得到一个错误提示：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">interface SquareConfig &#123;</span><br><span class="line">  color?: string;</span><br><span class="line">  width?: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function createSquare(config: SquareConfig): &#123; color: string; area: number &#125; &#123;</span><br><span class="line">  let newSquare = &#123;color: &quot;white&quot;, area: 100&#125;;</span><br><span class="line">  if (config.color) &#123;</span><br><span class="line">    // Error: Property &#x27;clor&#x27; does not exist on type &#x27;SquareConfig&#x27;</span><br><span class="line">    newSquare.color = config.clor;</span><br><span class="line">  &#125;</span><br><span class="line">  if (config.width) &#123;</span><br><span class="line">    newSquare.area = config.width * config.width;</span><br><span class="line">  &#125;</span><br><span class="line">  return newSquare;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let mySquare = createSquare(&#123;color: &quot;black&quot;&#125;);</span><br></pre></td></tr></table></figure><h4 id="只读属性"><a href="#只读属性" class="headerlink" title="只读属性"></a>只读属性</h4><p>一些对象属性只能在对象刚刚创建的时候修改其值。 你可以在属性名前用<code>readonly</code>来指定只读属性:</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">    <span class="keyword">readonly</span> <span class="attr">x</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="keyword">readonly</span> <span class="attr">y</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>你可以通过赋值一个对象字面量来构造一个<code>Point</code>。 赋值后，<code>x</code>和<code>y</code>再也不能被改变了。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">p1</span>: <span class="title class_">Point</span> = &#123; <span class="attr">x</span>: <span class="number">10</span>, <span class="attr">y</span>: <span class="number">20</span> &#125;;</span><br><span class="line">p1.<span class="property">x</span> = <span class="number">5</span>; <span class="comment">// error!</span></span><br></pre></td></tr></table></figure><p>TypeScript具有<code>ReadonlyArray&lt;T&gt;</code>类型，它与<code>Array&lt;T&gt;</code>相似，只是把所有可变方法去掉了，因此可以确保数组创建后再也不能被修改：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="built_in">number</span>[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="attr">ro</span>: <span class="title class_">ReadonlyArray</span>&lt;<span class="built_in">number</span>&gt; = a;</span><br><span class="line">ro[<span class="number">0</span>] = <span class="number">12</span>; <span class="comment">// error!</span></span><br><span class="line">ro.<span class="title function_">push</span>(<span class="number">5</span>); <span class="comment">// error!</span></span><br><span class="line">ro.<span class="property">length</span> = <span class="number">100</span>; <span class="comment">// error!</span></span><br><span class="line">a = ro; <span class="comment">// error!</span></span><br></pre></td></tr></table></figure><p>上面代码的最后一行，可以看到就算把整个<code>ReadonlyArray</code>赋值到一个普通数组也是不可以的。 但是你可以用类型断言重写：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a = ro as number[];</span><br></pre></td></tr></table></figure><h4 id="readonly-vs-const"><a href="#readonly-vs-const" class="headerlink" title="readonly vs const"></a><code>readonly</code> vs <code>const</code></h4><p>最简单判断该用<code>readonly</code>还是<code>const</code>的方法是看要把它做为变量使用还是做为一个属性。 做为变量使用的话用<code>const</code>，若做为属性则使用<code>readonly</code>。</p><h4 id="额外的属性检查"><a href="#额外的属性检查" class="headerlink" title="额外的属性检查"></a>额外的属性检查</h4><p>我们在第一个例子里使用了接口，TypeScript让我们传入<code>&#123; size: number; label: string; &#125;</code>到仅期望得到<code>&#123; label: string; &#125;</code>的函数里。 我们已经学过了可选属性，并且知道他们在“option bags”模式里很有用。</p><p>然而，天真地将这两者结合的话就会像在JavaScript里那样搬起石头砸自己的脚。 比如，拿<code>createSquare</code>例子来说：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">SquareConfig</span> &#123;</span><br><span class="line">    color?: <span class="built_in">string</span>;</span><br><span class="line">    width?: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createSquare</span>(<span class="params">config: SquareConfig</span>): &#123; <span class="attr">color</span>: <span class="built_in">string</span>; <span class="attr">area</span>: <span class="built_in">number</span> &#125; &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> mySquare = <span class="title function_">createSquare</span>(&#123; <span class="attr">colour</span>: <span class="string">&quot;red&quot;</span>, <span class="attr">width</span>: <span class="number">100</span> &#125;);</span><br></pre></td></tr></table></figure><p>注意传入<code>createSquare</code>的参数拼写为<code>colour</code>而不是<code>color</code>。 在JavaScript里，这会默默地失败。</p><p>你可能会争辩这个程序已经正确地类型化了，因为<code>width</code>属性是兼容的，不存在<code>color</code>属性，而且额外的<code>colour</code>属性是无意义的。</p><p>然而，TypeScript会认为这段代码可能存在bug。 对象字面量会被特殊对待而且会经过<em>额外属性检查</em>，当将它们赋值给变量或作为参数传递的时候。 如果一个对象字面量存在任何“目标类型”不包含的属性时，你会得到一个错误。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// error: &#x27;colour&#x27; not expected in type &#x27;SquareConfig&#x27;</span></span><br><span class="line"><span class="keyword">let</span> mySquare = <span class="title function_">createSquare</span>(&#123; <span class="attr">colour</span>: <span class="string">&quot;red&quot;</span>, <span class="attr">width</span>: <span class="number">100</span> &#125;);</span><br></pre></td></tr></table></figure><p>绕开这些检查非常简单。 最简便的方法是使用类型断言：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> mySquare = <span class="title function_">createSquare</span>(&#123; <span class="attr">width</span>: <span class="number">100</span>, <span class="attr">opacity</span>: <span class="number">0.5</span> &#125; <span class="keyword">as</span> <span class="title class_">SquareConfig</span>);</span><br></pre></td></tr></table></figure><p>然而，最佳的方式是能够添加一个字符串索引签名，前提是你能够确定这个对象可能具有某些做为特殊用途使用的额外属性。 如果<code>SquareConfig</code>带有上面定义的类型的<code>color</code>和<code>width</code>属性，并且<em>还会</em>带有任意数量的其它属性，那么我们可以这样定义它：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">SquareConfig</span> &#123;</span><br><span class="line">    color?: <span class="built_in">string</span>;</span><br><span class="line">    width?: <span class="built_in">number</span>;</span><br><span class="line">    [<span class="attr">propName</span>: <span class="built_in">string</span>]: <span class="built_in">any</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们稍后会讲到索引签名，但在这我们要表示的是<code>SquareConfig</code>可以有任意数量的属性，并且只要它们不是<code>color</code>和<code>width</code>，那么就无所谓它们的类型是什么。</p><p>还有最后一种跳过这些检查的方式，这可能会让你感到惊讶，它就是将这个对象赋值给一个另一个变量： 因为<code>squareOptions</code>不会经过额外属性检查，所以编译器不会报错。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> squareOptions = &#123; <span class="attr">colour</span>: <span class="string">&quot;red&quot;</span>, <span class="attr">width</span>: <span class="number">100</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> mySquare = <span class="title function_">createSquare</span>(squareOptions);</span><br></pre></td></tr></table></figure><p>要留意，在像上面一样的简单代码里，你可能不应该去绕开这些检查。 对于包含方法和内部状态的复杂对象字面量来讲，你可能需要使用这些技巧，但是大部额外属性检查错误是真正的bug。 就是说你遇到了额外类型检查出的错误，比如“option bags”，你应该去审查一下你的类型声明。 在这里，如果支持传入<code>color</code>或<code>colour</code>属性到<code>createSquare</code>，你应该修改<code>SquareConfig</code>定义来体现出这一点。</p><h4 id="函数类型"><a href="#函数类型" class="headerlink" title="函数类型"></a>函数类型</h4><p>接口能够描述JavaScript中对象拥有的各种各样的外形。 除了描述带有属性的普通对象外，接口也可以描述函数类型。</p><p>为了使用接口表示函数类型，我们需要给接口定义一个调用签名。 它就像是一个只有参数列表和返回值类型的函数定义。参数列表里的每个参数都需要名字和类型。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">SearchFunc</span> &#123;</span><br><span class="line">  (<span class="attr">source</span>: <span class="built_in">string</span>, <span class="attr">subString</span>: <span class="built_in">string</span>): <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这样定义后，我们可以像使用其它接口一样使用这个函数类型的接口。 下例展示了如何创建一个函数类型的变量，并将一个同类型的函数赋值给这个变量。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">mySearch</span>: <span class="title class_">SearchFunc</span>;</span><br><span class="line">mySearch = <span class="keyword">function</span>(<span class="params">source: <span class="built_in">string</span>, subString: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> result = source.<span class="title function_">search</span>(subString);</span><br><span class="line">  <span class="keyword">return</span> result &gt; -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>对于函数类型的类型检查来说，函数的参数名不需要与接口里定义的名字相匹配。 比如，我们使用下面的代码重写上面的例子：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">mySearch</span>: <span class="title class_">SearchFunc</span>;</span><br><span class="line">mySearch = <span class="keyword">function</span>(<span class="params">src: <span class="built_in">string</span>, sub: <span class="built_in">string</span></span>): <span class="built_in">boolean</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> result = src.<span class="title function_">search</span>(sub);</span><br><span class="line">  <span class="keyword">return</span> result &gt; -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>函数的参数会逐个进行检查，要求对应位置上的参数类型是兼容的。 如果你不想指定类型，TypeScript的类型系统会推断出参数类型，因为函数直接赋值给了<code>SearchFunc</code>类型变量。 函数的返回值类型是通过其返回值推断出来的（此例是<code>false</code>和<code>true</code>）。 如果让这个函数返回数字或字符串，类型检查器会警告我们函数的返回值类型与<code>SearchFunc</code>接口中的定义不匹配。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">mySearch</span>: <span class="title class_">SearchFunc</span>;</span><br><span class="line">mySearch = <span class="keyword">function</span>(<span class="params">src, sub</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> result = src.<span class="title function_">search</span>(sub);</span><br><span class="line">    <span class="keyword">return</span> result &gt; -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="可索引的类型"><a href="#可索引的类型" class="headerlink" title="可索引的类型"></a>可索引的类型</h4><p>与使用接口描述函数类型差不多，我们也可以描述那些能够“通过索引得到”的类型，比如<code>a[10]</code>或<code>ageMap[&quot;daniel&quot;]</code>。 可索引类型具有一个<em>索引签名</em>，它描述了对象索引的类型，还有相应的索引返回值类型。 让我们看一个例子：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">StringArray</span> &#123;</span><br><span class="line">  [<span class="attr">index</span>: <span class="built_in">number</span>]: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">myArray</span>: <span class="title class_">StringArray</span>;</span><br><span class="line">myArray = [<span class="string">&quot;Bob&quot;</span>, <span class="string">&quot;Fred&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">myStr</span>: <span class="built_in">string</span> = myArray[<span class="number">0</span>];</span><br></pre></td></tr></table></figure><p>上面例子里，我们定义了<code>StringArray</code>接口，它具有索引签名。 这个索引签名表示了当用<code>number</code>去索引<code>StringArray</code>时会得到<code>string</code>类型的返回值。</p><p>共有支持两种索引签名：字符串和数字。 可以同时使用两种类型的索引，但是数字索引的返回值必须是字符串索引返回值类型的子类型。 这是因为当使用<code>number</code>来索引时，JavaScript会将它转换成<code>string</code>然后再去索引对象。 也就是说用<code>100</code>（一个<code>number</code>）去索引等同于使用<code>&quot;100&quot;</code>（一个<code>string</code>）去索引，因此两者需要保持一致。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span> &#123;</span><br><span class="line">    <span class="attr">breed</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 错误：使用&#x27;string&#x27;索引，有时会得到Animal!</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">NotOkay</span> &#123;</span><br><span class="line">    [<span class="attr">x</span>: <span class="built_in">number</span>]: <span class="title class_">Animal</span>;</span><br><span class="line">    [<span class="attr">x</span>: <span class="built_in">string</span>]: <span class="title class_">Dog</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>字符串索引签名能够很好的描述<code>dictionary</code>模式，并且它们也会确保所有属性与其返回值类型相匹配。 因为字符串索引声明了<code>obj.property</code>和<code>obj[&quot;property&quot;]</code>两种形式都可以。 下面的例子里，<code>name</code>的类型与字符串索引类型不匹配，所以类型检查器给出一个错误提示：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">NumberDictionary</span> &#123;</span><br><span class="line">  [<span class="attr">index</span>: <span class="built_in">string</span>]: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">length</span>: <span class="built_in">number</span>;    <span class="comment">// 可以，length是number类型</span></span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>       <span class="comment">// 错误，`name`的类型与索引类型返回值的类型不匹配</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>最后，你可以将索引签名设置为只读，这样就防止了给索引赋值：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">interface ReadonlyStringArray &#123;</span><br><span class="line">    readonly [index: number]: string;</span><br><span class="line">&#125;</span><br><span class="line">let myArray: ReadonlyStringArray = [&quot;Alice&quot;, &quot;Bob&quot;];</span><br><span class="line">myArray[2] = &quot;Mallory&quot;; // error!</span><br></pre></td></tr></table></figure><p>你不能设置<code>myArray[2]</code>，因为索引签名是只读的。</p><h4 id="类-类型"><a href="#类-类型" class="headerlink" title="类 类型"></a>类 类型</h4><h5 id="实现接口"><a href="#实现接口" class="headerlink" title="实现接口"></a>实现接口</h5><p>与C#或Java里接口的基本作用一样，TypeScript也能够用它来明确的强制一个类去符合某种契约。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">ClockInterface</span> &#123;</span><br><span class="line">    <span class="attr">currentTime</span>: <span class="title class_">Date</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Clock</span> <span class="keyword">implements</span> <span class="title class_">ClockInterface</span> &#123;</span><br><span class="line">    <span class="attr">currentTime</span>: <span class="title class_">Date</span>;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">h: <span class="built_in">number</span>, m: <span class="built_in">number</span></span>) &#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>你也可以在接口中描述一个方法，在类里实现它，如同下面的<code>setTime</code>方法一样：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">ClockInterface</span> &#123;</span><br><span class="line">    <span class="attr">currentTime</span>: <span class="title class_">Date</span>;</span><br><span class="line">    <span class="title function_">setTime</span>(<span class="attr">d</span>: <span class="title class_">Date</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Clock</span> <span class="keyword">implements</span> <span class="title class_">ClockInterface</span> &#123;</span><br><span class="line">    <span class="attr">currentTime</span>: <span class="title class_">Date</span>;</span><br><span class="line">    <span class="title function_">setTime</span>(<span class="params">d: <span class="built_in">Date</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">currentTime</span> = d;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">h: <span class="built_in">number</span>, m: <span class="built_in">number</span></span>) &#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接口描述了类的公共部分，而不是公共和私有两部分。 它不会帮你检查类是否具有某些私有成员。</p><h5 id="类静态部分与实例部分的区别"><a href="#类静态部分与实例部分的区别" class="headerlink" title="类静态部分与实例部分的区别"></a>类静态部分与实例部分的区别</h5><p>当你操作类和接口的时候，你要知道类是具有两个类型的：静态部分的类型和实例的类型。 你会注意到，当你用构造器签名去定义一个接口并试图定义一个类去实现这个接口时会得到一个错误：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">ClockConstructor</span> &#123;</span><br><span class="line">    <span class="keyword">new</span> (<span class="attr">hour</span>: <span class="built_in">number</span>, <span class="attr">minute</span>: <span class="built_in">number</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Clock</span> <span class="keyword">implements</span> <span class="title class_">ClockConstructor</span> &#123;</span><br><span class="line">    <span class="attr">currentTime</span>: <span class="title class_">Date</span>;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">h: <span class="built_in">number</span>, m: <span class="built_in">number</span></span>) &#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里因为当一个类实现了一个接口时，只对其实例部分进行类型检查。 constructor存在于类的静态部分，所以不在检查的范围内。</p><p>因此，我们应该直接操作类的静态部分。 看下面的例子，我们定义了两个接口，<code>ClockConstructor</code>为构造函数所用和<code>ClockInterface</code>为实例方法所用。 为了方便我们定义一个构造函数<code>createClock</code>，它用传入的类型创建实例。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">ClockConstructor</span> &#123;</span><br><span class="line">    <span class="keyword">new</span> (<span class="attr">hour</span>: <span class="built_in">number</span>, <span class="attr">minute</span>: <span class="built_in">number</span>): <span class="title class_">ClockInterface</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ClockInterface</span> &#123;</span><br><span class="line">    <span class="title function_">tick</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createClock</span>(<span class="params">ctor: ClockConstructor, hour: <span class="built_in">number</span>, minute: <span class="built_in">number</span></span>): <span class="title class_">ClockInterface</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title function_">ctor</span>(hour, minute);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DigitalClock</span> <span class="keyword">implements</span> <span class="title class_">ClockInterface</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">h: <span class="built_in">number</span>, m: <span class="built_in">number</span></span>) &#123; &#125;</span><br><span class="line">    <span class="title function_">tick</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;beep beep&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AnalogClock</span> <span class="keyword">implements</span> <span class="title class_">ClockInterface</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">h: <span class="built_in">number</span>, m: <span class="built_in">number</span></span>) &#123; &#125;</span><br><span class="line">    <span class="title function_">tick</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;tick tock&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> digital = <span class="title function_">createClock</span>(<span class="title class_">DigitalClock</span>, <span class="number">12</span>, <span class="number">17</span>);</span><br><span class="line"><span class="keyword">let</span> analog = <span class="title function_">createClock</span>(<span class="title class_">AnalogClock</span>, <span class="number">7</span>, <span class="number">32</span>);</span><br></pre></td></tr></table></figure><p>因为<code>createClock</code>的第一个参数是<code>ClockConstructor</code>类型，在<code>createClock(AnalogClock, 7, 32)</code>里，会检查<code>AnalogClock</code>是否符合构造函数签名。</p><h4 id="继承接口"><a href="#继承接口" class="headerlink" title="继承接口"></a>继承接口</h4><p>和类一样，接口也可以相互继承。 这让我们能够从一个接口里复制成员到另一个接口里，可以更灵活地将接口分割到可重用的模块里。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">    <span class="attr">color</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Square</span> <span class="keyword">extends</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">    <span class="attr">sideLength</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> square = &lt;<span class="title class_">Square</span>&gt;&#123;&#125;;</span><br><span class="line">square.<span class="property">color</span> = <span class="string">&quot;blue&quot;</span>;</span><br><span class="line">square.<span class="property">sideLength</span> = <span class="number">10</span>;</span><br></pre></td></tr></table></figure><p>一个接口可以继承多个接口，创建出多个接口的合成接口。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">    <span class="attr">color</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">PenStroke</span> &#123;</span><br><span class="line">    <span class="attr">penWidth</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Square</span> <span class="keyword">extends</span> <span class="title class_">Shape</span>, <span class="title class_">PenStroke</span> &#123;</span><br><span class="line">    <span class="attr">sideLength</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> square = &lt;<span class="title class_">Square</span>&gt;&#123;&#125;;</span><br><span class="line">square.<span class="property">color</span> = <span class="string">&quot;blue&quot;</span>;</span><br><span class="line">square.<span class="property">sideLength</span> = <span class="number">10</span>;</span><br><span class="line">square.<span class="property">penWidth</span> = <span class="number">5.0</span>;</span><br></pre></td></tr></table></figure><h4 id="混合类型"><a href="#混合类型" class="headerlink" title="混合类型"></a>混合类型</h4><p>先前我们提过，接口能够描述JavaScript里丰富的类型。 因为JavaScript其动态灵活的特点，有时你会希望一个对象可以同时具有上面提到的多种类型。</p><p>一个例子就是，一个对象可以同时做为函数和对象使用，并带有额外的属性。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Counter</span> &#123;</span><br><span class="line">    (<span class="attr">start</span>: <span class="built_in">number</span>): <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">interval</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="title function_">reset</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getCounter</span>(<span class="params"></span>): <span class="title class_">Counter</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> counter = &lt;<span class="title class_">Counter</span>&gt;<span class="keyword">function</span> (<span class="params">start: <span class="built_in">number</span></span>) &#123; &#125;;</span><br><span class="line">    counter.<span class="property">interval</span> = <span class="number">123</span>;</span><br><span class="line">    counter.<span class="property">reset</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123; &#125;;</span><br><span class="line">    <span class="keyword">return</span> counter;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> c = <span class="title function_">getCounter</span>();</span><br><span class="line"><span class="title function_">c</span>(<span class="number">10</span>);</span><br><span class="line">c.<span class="title function_">reset</span>();</span><br><span class="line">c.<span class="property">interval</span> = <span class="number">5.0</span>;</span><br></pre></td></tr></table></figure><p>在使用JavaScript第三方库的时候，你可能需要像上面那样去完整地定义类型。</p><h4 id="接口继承类"><a href="#接口继承类" class="headerlink" title="接口继承类"></a>接口继承类</h4><p>当接口继承了一个类类型时，它会继承类的成员但不包括其实现。 就好像接口声明了所有类中存在的成员，但并没有提供具体实现一样。 接口同样会继承到类的private和protected成员。 这意味着当你创建了一个接口继承了一个拥有私有或受保护的成员的类时，这个接口类型只能被这个类或其子类所实现（implement）。</p><p>当你有一个庞大的继承结构时这很有用，但要指出的是你的代码只在子类拥有特定属性时起作用。 这个子类除了继承至基类外与基类没有任何关系。 例：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Control</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="attr">state</span>: <span class="built_in">any</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">SelectableControl</span> <span class="keyword">extends</span> <span class="title class_">Control</span> &#123;</span><br><span class="line">    <span class="title function_">select</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Button</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Control</span> <span class="keyword">implements</span> <span class="title class_">SelectableControl</span> &#123;</span><br><span class="line">    <span class="title function_">select</span>(<span class="params"></span>) &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TextBox</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Control</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Error: Property &#x27;state&#x27; is missing in type &#x27;Image&#x27;.</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Image</span> <span class="keyword">implements</span> <span class="title class_">SelectableControl</span> &#123;</span><br><span class="line">    <span class="title function_">select</span>(<span class="params"></span>) &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Location</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上面的例子里，<code>SelectableControl</code>包含了<code>Control</code>的所有成员，包括私有成员<code>state</code>。 因为<code>state</code>是私有成员，所以只能够是<code>Control</code>的子类们才能实现<code>SelectableControl</code>接口。 因为只有<code>Control</code>的子类才能够拥有一个声明于<code>Control</code>的私有成员<code>state</code>，这对私有成员的兼容性是必需的。</p><p>在<code>Control</code>类内部，是允许通过<code>SelectableControl</code>的实例来访问私有成员<code>state</code>的。 实际上，<code>SelectableControl</code>就像<code>Control</code>一样，并拥有一个<code>select</code>方法。 <code>Button</code>和<code>TextBox</code>类是<code>SelectableControl</code>的子类（因为它们都继承自<code>Control</code>并有<code>select</code>方法），但<code>Image</code>和<code>Location</code>类并不是这样的。</p><h3 id="学习的解释"><a href="#学习的解释" class="headerlink" title="学习的解释"></a>学习的解释</h3><p>接口可以在面向对象编程中表示行为的抽象，也可以描述对象的形状。 <em>接口</em>的作用就是为这些类型命名和为你的代码或第三方代码定义契约。 (接口中不能含有具体的实现逻辑)</p><blockquote><p>接口： 抽象类（有抽象的也有非抽象）  接口必须都是抽象的（没有具体的实现）</p><p>接口的概念 就是描述数据的结构、或者形状的， 定义好结构，在去针对结构来进行实现</p><p>type 和 interface 区别</p><p>一般情况下 描述对象,类 我门采用interface更多一些 ，interface无法声明联合类型</p><p> type 可以快速声明类型 联合类型，工具类型只能采用type  , type不能重名</p><p>type用的更多，能用type 就type 不能用interface. 复杂类型采用type</p></blockquote><h4 id="函数接口参数"><a href="#函数接口参数" class="headerlink" title="函数接口参数"></a>函数接口参数</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fullName = (&#123;firstName,lastName&#125;:&#123;<span class="attr">firstName</span>:<span class="built_in">string</span>,<span class="attr">lastName</span>:<span class="built_in">string</span>&#125;):<span class="function"><span class="params">string</span> =&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> firstName + lastName</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>我们可以约束函数中的参数，但是类型无法复用</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IFullName</span> &#123;</span><br><span class="line">    <span class="attr">firstName</span>:<span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">lastName</span>:<span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> fullName = (&#123;firstName,lastName&#125;:<span class="title class_">IFullName</span>):<span class="function"><span class="params">string</span> =&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> firstName + lastName</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 接口可以描述对象结构 （子可以赋予给父）</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IPerson</span> &#123;</span><br><span class="line">     <span class="attr">username</span>: <span class="built_in">string</span> <span class="comment">// 类型，不是具体实现</span></span><br><span class="line">     <span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 子可以赋予给父亲。 我们需要把一个值赋予给另一个值。 如果是声明的必须必须一致</span></span><br><span class="line"> <span class="keyword">let</span> obj = &#123;</span><br><span class="line">     <span class="attr">username</span>:<span class="string">&#x27;abc&#x27;</span>,</span><br><span class="line">     <span class="attr">age</span>:<span class="number">30</span>,</span><br><span class="line">     <span class="attr">address</span>:<span class="string">&#x27;地址&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>:<span class="title class_">IPerson</span> = obj; <span class="comment">// 赋值的时候 会产生兼容性  （儿子可以赋予给父亲）</span></span><br></pre></td></tr></table></figure><blockquote><p>我们可以通过接口进行描述</p></blockquote><h4 id="函数类型接口"><a href="#函数类型接口" class="headerlink" title="函数类型接口"></a>函数类型接口</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IFullName</span> &#123;</span><br><span class="line">    <span class="attr">firstName</span>:<span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">lastName</span>:<span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IFn</span> &#123;</span><br><span class="line">    (<span class="attr">obj</span>:<span class="title class_">IFullName</span>):<span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">fullName</span>:<span class="title class_">IFn</span> = <span class="function">(<span class="params">&#123;firstName,lastName&#125;</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> firstName + lastName</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ICounter</span> &#123;</span><br><span class="line">     ():<span class="built_in">number</span></span><br><span class="line">     <span class="attr">count</span>:<span class="built_in">number</span></span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">// const 标识此值不能修改  let 可以修改的 (如果给函数增加类型定义 函数不能被修改时只能用const)</span></span><br><span class="line"> <span class="keyword">const</span> <span class="attr">counter</span>:<span class="title class_">ICounter</span> = <span class="function">() =&gt;</span>&#123;</span><br><span class="line">     <span class="keyword">return</span> counter.<span class="property">count</span>++</span><br><span class="line">&#125;</span><br><span class="line">counter.<span class="property">count</span> = <span class="number">0</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>通过接口限制函数的参数类型和返回值类型</p></blockquote><h4 id="函数混合类型"><a href="#函数混合类型" class="headerlink" title="函数混合类型"></a>函数混合类型</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">ICounter</span> &#123;</span><br><span class="line">    (): <span class="built_in">number</span>; <span class="comment">// 限制函数类型</span></span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span> <span class="comment">// 限制函数上的属性</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">fn</span>: <span class="built_in">any</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    fn.<span class="property">count</span>++;</span><br><span class="line">    <span class="keyword">return</span> fn.<span class="property">count</span>;</span><br><span class="line">&#125;</span><br><span class="line">fn.<span class="property">count</span> = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">counter</span>:<span class="title class_">ICounter</span> = fn;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">counter</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">counter</span>());</span><br></pre></td></tr></table></figure><h4 id="对象接口"><a href="#对象接口" class="headerlink" title="对象接口"></a>对象接口</h4><p>对象接口可以用来描述对象的形状结构</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IVegetables</span> &#123;</span><br><span class="line">    <span class="keyword">readonly</span> <span class="attr">color</span>:<span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">size</span>:<span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 可以通过?表示接口的属性 可有可无</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IVegetables</span>&#123;</span><br><span class="line">    age?:<span class="built_in">number</span>,</span><br><span class="line">    <span class="attr">taste</span>:<span class="string">&#x27;sour&#x27;</span>|<span class="string">&#x27;sweet&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">tomato</span>:<span class="title class_">IVegetables</span> = &#123;</span><br><span class="line">    <span class="attr">color</span>:<span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">    <span class="attr">size</span>:<span class="string">&#x27;10&#x27;</span>,</span><br><span class="line">    <span class="attr">taste</span>:<span class="string">&#x27;sour&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">tomato.<span class="property">color</span> = <span class="string">&#x27;green&#x27;</span>; <span class="comment">// 仅读属性不能进行修改</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>？标识的属性为可选属性, <code>readOnly</code>标识的属性则不能修改。多个同名的接口会自动合并</p><p>断言的方式来进行赋值, 用的最多 as IVeg</p><p>接口的合并 同名的会进行合并,自定义类型的时候 会使用。 自己的业务逻辑用的比较少</p><p>可以扩展一个新类型 在来使用。 可以扩展属性</p><p>任意类型  随机的属性  描述数字索引的  (除了必有的属性之外 ，其他任意)</p><p>兼容性</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">tomato</span>:<span class="title class_">IVegetables</span> = &#123;</span><br><span class="line">    <span class="attr">color</span>:<span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">    <span class="attr">size</span>:<span class="string">&#x27;10&#x27;</span>,</span><br><span class="line">    <span class="attr">taste</span>:<span class="string">&#x27;sour&#x27;</span>,</span><br><span class="line">    <span class="attr">type</span>:<span class="string">&#x27;蔬菜&#x27;</span></span><br><span class="line">&#125; <span class="keyword">as</span> <span class="title class_">IVegetables</span>; <span class="comment">// 多余的属性可以使用类型断言</span></span><br><span class="line"></span><br><span class="line">nterface <span class="title class_">IVeg</span> &#123;</span><br><span class="line">    <span class="keyword">readonly</span> <span class="attr">name</span>: <span class="built_in">string</span> <span class="comment">// 只读属性</span></span><br><span class="line">    <span class="attr">taste</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">size</span>: <span class="built_in">number</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IVegetable</span> <span class="keyword">extends</span> <span class="title class_">IVeg</span> &#123;</span><br><span class="line">    color?: <span class="string">&#x27;红色&#x27;</span>,</span><br><span class="line">    [<span class="attr">prop</span>: <span class="built_in">string</span>]: <span class="built_in">any</span> <span class="comment">// 任意接口 key 随意，值随意</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">veg</span>: <span class="title class_">IVegetable</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;西红柿&#x27;</span>,</span><br><span class="line">    <span class="attr">taste</span>: <span class="string">&#x27;甜&#x27;</span>,</span><br><span class="line">    <span class="attr">size</span>: <span class="number">50</span>,</span><br><span class="line">    <span class="attr">color</span>: <span class="string">&#x27;红色&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;b&#x27;</span>: <span class="string">&#x27;2&#x27;</span>,</span><br><span class="line">    [<span class="title class_">Symbol</span>()]: <span class="string">&#x27;ABC&#x27;</span>,</span><br><span class="line">    <span class="number">0</span>: <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="任意属性、可索引接口"><a href="#任意属性、可索引接口" class="headerlink" title="任意属性、可索引接口"></a>任意属性、可索引接口</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    [<span class="attr">key</span>: <span class="built_in">string</span>]: <span class="built_in">any</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">p</span>: <span class="title class_">Person</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;zhufeng&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">10</span>,</span><br><span class="line">    [<span class="title class_">Symbol</span>()]:<span class="string">&#x27;回龙观&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IArray</span> &#123; <span class="comment">// 索引接口</span></span><br><span class="line">    [<span class="attr">key</span>: <span class="built_in">number</span>]: <span class="built_in">any</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// let arr:IArray = [1,2,3]</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr</span>: <span class="title class_">IArray</span> = &#123; <span class="number">0</span>: <span class="number">1</span>, <span class="number">1</span>: <span class="number">2</span>, <span class="number">2</span>: <span class="string">&#x27;abc&#x27;</span>, <span class="number">3</span>: <span class="literal">true</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ResponseData</span> &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">token</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ReturnVal</span> &#123;</span><br><span class="line">    <span class="attr">code</span>: <span class="built_in">number</span>,</span><br><span class="line">    <span class="attr">data</span>: <span class="title class_">ResponseData</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过索引访问符 来获取内部类型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ICode</span> = <span class="title class_">ReturnVal</span>[<span class="string">&#x27;code&#x27;</span>];</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IUsername</span> = <span class="title class_">ReturnVal</span>[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;username&#x27;</span>]; <span class="comment">// 可以用于取值的类型</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IKeys</span> = <span class="title class_">ReturnVal</span>[keyof <span class="title class_">ReturnVal</span>]; <span class="comment">// 取值的类型, 可以采用这种方式</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>任意属性可以对某一部分必填属性做限制，其余的可以随意增减</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IArr</span> &#123;</span><br><span class="line">    [<span class="attr">key</span>: <span class="built_in">number</span>]: <span class="built_in">any</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">p</span>: <span class="title class_">IArr</span> = &#123;</span><br><span class="line">    <span class="number">0</span>:<span class="string">&#x27;1&#x27;</span>,<span class="number">1</span>:<span class="string">&#x27;2&#x27;</span>,<span class="number">3</span>:<span class="string">&#x27;3&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr</span>:<span class="title class_">IArr</span> = [<span class="number">1</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;c&#x27;</span>];</span><br></pre></td></tr></table></figure><blockquote><p>可索引接口可以用于标识数组</p></blockquote><h4 id="类接口"><a href="#类接口" class="headerlink" title="类接口"></a>类接口</h4><p>这里先来强调一下抽象类和接口的区别,抽象类中可以包含具体方法实现。接口中不能包含实现</p><blockquote><p>接口可以实现， 接口的实现都是通过类来实现 , 接口中一个类 可以实现多个接口</p><p>一个接口可以继承多个接口， 接口可以用于继承类</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Speakable</span> &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="built_in">string</span>;</span><br><span class="line">    <span class="title function_">speak</span>():<span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ChineseSpeakable</span>&#123;</span><br><span class="line">    <span class="title function_">speakChinese</span>():<span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Speak</span> <span class="keyword">implements</span> <span class="title class_">Speakable</span>,<span class="title class_">ChineseSpeakable</span>&#123;</span><br><span class="line">    name!:<span class="built_in">string</span></span><br><span class="line">    <span class="title function_">speak</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">    <span class="title function_">speakChinese</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>一个类可以实现多个接口，在类中必须实现接口中的方法和属性</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">SpeakChinese</span> &#123;</span><br><span class="line">    <span class="title function_">speakChinese</span>(): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">SpeakEnglish</span> &#123;</span><br><span class="line">    <span class="title function_">speakEnglish</span>(): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Speak</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> a!: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Speakable</span> <span class="keyword">extends</span> <span class="title class_">SpeakEnglish</span>, <span class="title class_">SpeakChinese</span>, <span class="title class_">Speak</span> &#123;</span><br><span class="line">    <span class="title function_">speak</span>(): <span class="built_in">void</span> <span class="comment">// 实现的是原型方法</span></span><br><span class="line">    <span class="comment">//  speak:()=&gt;void // 实现的是实例方法</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Speaker</span> <span class="keyword">implements</span> <span class="title class_">Speakable</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> a!: <span class="built_in">string</span>;</span><br><span class="line">    <span class="title function_">speakEnglish</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Method not implemented.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">speakChinese</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Method not implemented.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">100</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 我门如何表示我要传入的是一个类</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> name: <span class="built_in">string</span></span>) &#123; &#125; <span class="comment">// new</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> name: <span class="built_in">string</span></span>) &#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>类类型， 不能藐视类本身，描述的是实例</p><p> 类的类型 需要通过typeof 来取类型</p><p> ts的校验规则  鸭子类型检测</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 描述构造函数 </span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IClazz</span>&lt;T&gt;&#123;</span><br><span class="line">    <span class="keyword">new</span> (<span class="attr">name</span>:<span class="built_in">string</span>): T</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IClazz</span>&lt;T&gt; = <span class="keyword">new</span> (<span class="attr">name</span>: <span class="built_in">string</span>) =&gt; T</span><br><span class="line"><span class="keyword">function</span> createInstance&lt;T&gt;(<span class="attr">clazz</span>: <span class="title class_">IClazz</span>&lt;T&gt;, <span class="attr">name</span>: <span class="built_in">string</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title function_">clazz</span>(name)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> instance = <span class="title function_">createInstance</span>(<span class="title class_">Cat</span>, <span class="string">&#x27;tom&#x27;</span>)</span><br><span class="line"><span class="comment">// 泛型： 泛型坑位 （函数的形式参数） 刚开始类型不确定，通过使用的时候 来确定类型</span></span><br></pre></td></tr></table></figure><h4 id="接口继承"><a href="#接口继承" class="headerlink" title="接口继承"></a>接口继承</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Speakable</span> &#123;</span><br><span class="line">    <span class="title function_">speak</span>():<span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">SpeakChinese</span> <span class="keyword">extends</span> <span class="title class_">Speakable</span>&#123;</span><br><span class="line">    <span class="title function_">speakChinese</span>():<span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Speak</span> <span class="keyword">implements</span> <span class="title class_">SpeakChinese</span>&#123;</span><br><span class="line">    <span class="title function_">speakChinese</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Method not implemented.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">speak</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Method not implemented.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="构造函数类型"><a href="#构造函数类型" class="headerlink" title="构造函数类型"></a>构造函数类型</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Clazz</span> &#123;</span><br><span class="line">    <span class="keyword">new</span> (<span class="attr">name</span>:<span class="built_in">string</span>):<span class="built_in">any</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createClass</span>(<span class="params">target:Clazz,name:<span class="built_in">string</span></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title function_">target</span>(name); <span class="comment">// 传入的是一个构造函数</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> name:<span class="built_in">string</span></span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> r = <span class="title function_">createClass</span>(<span class="title class_">Animal</span>,<span class="string">&#x27;Tom&#x27;</span>);</span><br></pre></td></tr></table></figure><blockquote><p>这里无法标识返回值类型</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Clazz</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="title function_">new</span>(<span class="attr">name</span>: <span class="built_in">string</span>): T</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> createClass&lt;T&gt;(<span class="attr">target</span>: <span class="title class_">Clazz</span>&lt;T&gt;, <span class="attr">name</span>: <span class="built_in">string</span>):T &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title function_">target</span>(name)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> r = <span class="title function_">createClass</span>(<span class="title class_">Animal</span>, <span class="string">&#x27;Tom&#x27;</span>);</span><br></pre></td></tr></table></figure><blockquote><p>new() 表示当前是一个构造函数类型,这里捎带使用了下泛型。 在使用<code>createClass</code>时动态传入类型</p></blockquote><ul><li><p>练习代码</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 接口： 抽象类（有抽象的也有非抽象）  接口必须都是抽象的（没有具体的实现）</span></span><br><span class="line"><span class="comment">// 接口的概念 就是描述数据的结构、或者形状的， 定义好结构，在去针对结构来进行实现</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// type 和 interface 区别</span></span><br><span class="line"><span class="comment">// 一般情况下 描述对象,类 我门采用interface更多一些 ，interface无法声明联合类型</span></span><br><span class="line"><span class="comment">// type 可以快速声明类型 联合类型，工具类型只能采用type  , type不能重名</span></span><br><span class="line"><span class="comment">// type用的更多，能用type 就type 不能用interface. 复杂类型采用type</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1) 接口可以描述对象结构 （子可以赋予给父）</span></span><br><span class="line"><span class="comment">// interface IPerson &#123;</span></span><br><span class="line"><span class="comment">//     username: string // 类型，不是具体实现</span></span><br><span class="line"><span class="comment">//     age:number</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// // 子可以赋予给父亲。 我们需要把一个值赋予给另一个值。 如果是声明的必须必须一致</span></span><br><span class="line"><span class="comment">// let obj = &#123;</span></span><br><span class="line"><span class="comment">//     username:&#x27;abc&#x27;,</span></span><br><span class="line"><span class="comment">//     age:30,</span></span><br><span class="line"><span class="comment">//     address:&#x27;地址&#x27;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// let person:IPerson = obj; // 赋值的时候 会产生兼容性  （儿子可以赋予给父亲）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2） 接口可以描述函数</span></span><br><span class="line"><span class="comment">// interface ICounter &#123;</span></span><br><span class="line"><span class="comment">//     ():number</span></span><br><span class="line"><span class="comment">//     count:number</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// // const 标识此值不能修改  let 可以修改的 (如果给函数增加类型定义 函数不能被修改时只能用const)</span></span><br><span class="line"><span class="comment">// const counter:ICounter = () =&gt;&#123;</span></span><br><span class="line"><span class="comment">//     return counter.count++</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// counter.count = 0;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1）可以通过?表示接口的属性 可有可无</span></span><br><span class="line"><span class="comment">// interface IVeg &#123;</span></span><br><span class="line"><span class="comment">//     name: string</span></span><br><span class="line"><span class="comment">//     taste: string;</span></span><br><span class="line"><span class="comment">//     size: number,</span></span><br><span class="line"><span class="comment">//     color?: string</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// 2）断言的方式来进行赋值, 用的最多 as IVeg</span></span><br><span class="line"><span class="comment">// 3）接口的合并 同名的会进行合并,自定义类型的时候 会使用。 自己的业务逻辑用的比较少</span></span><br><span class="line"><span class="comment">// 4) 可以扩展一个新类型 在来使用。 可以扩展属性</span></span><br><span class="line"><span class="comment">// 5）任意类型  随机的属性  描述数字索引的  (除了必有的属性之外 ，其他任意)</span></span><br><span class="line"><span class="comment">// 6）兼容性 </span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IVeg</span> &#123;</span><br><span class="line">    <span class="keyword">readonly</span> <span class="attr">name</span>: <span class="built_in">string</span> <span class="comment">// 只读属性</span></span><br><span class="line">    <span class="attr">taste</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">size</span>: <span class="built_in">number</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IVegetable</span> <span class="keyword">extends</span> <span class="title class_">IVeg</span> &#123;</span><br><span class="line">    color?: <span class="string">&#x27;红色&#x27;</span>,</span><br><span class="line">    [<span class="attr">prop</span>: <span class="built_in">string</span>]: <span class="built_in">any</span> <span class="comment">// 任意接口 key 随意，值随意</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">veg</span>: <span class="title class_">IVegetable</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;西红柿&#x27;</span>,</span><br><span class="line">    <span class="attr">taste</span>: <span class="string">&#x27;甜&#x27;</span>,</span><br><span class="line">    <span class="attr">size</span>: <span class="number">50</span>,</span><br><span class="line">    <span class="attr">color</span>: <span class="string">&#x27;红色&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;b&#x27;</span>: <span class="string">&#x27;2&#x27;</span>,</span><br><span class="line">    [<span class="title class_">Symbol</span>()]: <span class="string">&#x27;ABC&#x27;</span>,</span><br><span class="line">    <span class="number">0</span>: <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IArray</span> &#123; <span class="comment">// 索引接口</span></span><br><span class="line">    [<span class="attr">key</span>: <span class="built_in">number</span>]: <span class="built_in">any</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// let arr:IArray = [1,2,3]</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr</span>: <span class="title class_">IArray</span> = &#123; <span class="number">0</span>: <span class="number">1</span>, <span class="number">1</span>: <span class="number">2</span>, <span class="number">2</span>: <span class="string">&#x27;abc&#x27;</span>, <span class="number">3</span>: <span class="literal">true</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ResponseData</span> &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">token</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ReturnVal</span> &#123;</span><br><span class="line">    <span class="attr">code</span>: <span class="built_in">number</span>,</span><br><span class="line">    <span class="attr">data</span>: <span class="title class_">ResponseData</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过索引访问符 来获取内部类型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ICode</span> = <span class="title class_">ReturnVal</span>[<span class="string">&#x27;code&#x27;</span>];</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IUsername</span> = <span class="title class_">ReturnVal</span>[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;username&#x27;</span>]; <span class="comment">// 可以用于取值的类型</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IKeys</span> = <span class="title class_">ReturnVal</span>[keyof <span class="title class_">ReturnVal</span>]; <span class="comment">// 取值的类型, 可以采用这种方式</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 接口可以实现， 接口的实现都是通过类来实现 , 接口中一个类 可以实现多个接口</span></span><br><span class="line"><span class="comment">// 一个接口可以继承多个接口， 接口可以用于继承类</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">SpeakChinese</span> &#123;</span><br><span class="line">    <span class="title function_">speakChinese</span>(): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">SpeakEnglish</span> &#123;</span><br><span class="line">    <span class="title function_">speakEnglish</span>(): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Speak</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> a!: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Speakable</span> <span class="keyword">extends</span> <span class="title class_">SpeakEnglish</span>, <span class="title class_">SpeakChinese</span>, <span class="title class_">Speak</span> &#123;</span><br><span class="line">    <span class="title function_">speak</span>(): <span class="built_in">void</span> <span class="comment">// 实现的是原型方法</span></span><br><span class="line">    <span class="comment">//  speak:()=&gt;void // 实现的是实例方法</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Speaker</span> <span class="keyword">implements</span> <span class="title class_">Speakable</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> a!: <span class="built_in">string</span>;</span><br><span class="line">    <span class="title function_">speakEnglish</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Method not implemented.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">speakChinese</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Method not implemented.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">100</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 我门如何表示我要传入的是一个类</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> name: <span class="built_in">string</span></span>) &#123; &#125; <span class="comment">// new</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> name: <span class="built_in">string</span></span>) &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 类类型， 不能藐视类本身，描述的是实例</span></span><br><span class="line"><span class="comment">// 类的类型 需要通过typeof 来取类型</span></span><br><span class="line"><span class="comment">// ts的校验规则  鸭子类型检测</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 描述构造函数 </span></span><br><span class="line"><span class="comment">// interface IClazz&lt;T&gt;&#123;</span></span><br><span class="line"><span class="comment">//     new (name:string): T</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IClazz</span>&lt;T&gt; = <span class="keyword">new</span> (<span class="attr">name</span>: <span class="built_in">string</span>) =&gt; T</span><br><span class="line"><span class="keyword">function</span> createInstance&lt;T&gt;(<span class="attr">clazz</span>: <span class="title class_">IClazz</span>&lt;T&gt;, <span class="attr">name</span>: <span class="built_in">string</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title function_">clazz</span>(name)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> instance = <span class="title function_">createInstance</span>(<span class="title class_">Cat</span>, <span class="string">&#x27;tom&#x27;</span>)</span><br><span class="line"><span class="comment">// 泛型： 泛型坑位 （函数的形式参数） 刚开始类型不确定，通过使用的时候 来确定类型</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; &#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <summary type="html">TypeScript的学习笔记和总结</summary>
    
    
    
    <category term="前端" scheme="https://tom9527c.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="前端" scheme="https://tom9527c.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="TypeScript" scheme="https://tom9527c.github.io/tags/TypeScript/"/>
    
    <category term="笔记" scheme="https://tom9527c.github.io/tags/%E7%AC%94%E8%AE%B0/"/>
    
    <category term="练习" scheme="https://tom9527c.github.io/tags/%E7%BB%83%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>Vue3IX-组件渲染</title>
    <link href="https://tom9527c.github.io/posts/5459.html"/>
    <id>https://tom9527c.github.io/posts/5459.html</id>
    <published>2023-10-04T10:46:50.000Z</published>
    <updated>2023-10-15T11:18:16.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="组件渲染"><a href="#组件渲染" class="headerlink" title="组件渲染"></a>组件渲染</h1><blockquote><p>浏览器（也称为<code>网络浏览器</code>或<code>互联网浏览器</code>）是安装在我们设备商的软件应用程序，使我们能够访问万维网。在阅读这篇文字时，你实际上正在使用一个浏览器</p></blockquote><p>有许多浏览器正在被使用，截止2022年，使用最多的是：<code>谷歌浏览器</code>，苹果的<code>Safari</code>，微软的<code>Edge</code>和<code>火狐</code>。</p><p>但是，它们实际上是如何工作的，从我们在地址栏中<code>键入网络地址开始</code>，到我们试图访问的<code>页面显示在屏幕</code>上，会发生什么？</p><p>这个看似超级简单的过程中涉及更多的内容，在下面我们将<code>导航</code>、<code>获取数据</code>、<code>解析</code> 和 <code>渲染</code>等步骤，来探究浏览器工作原理</p><h2 id="1-导航"><a href="#1-导航" class="headerlink" title="1.导航"></a>1.导航</h2><p>导航是加载网页的第一步。它指的是当用户通过<code>点击一个链接</code>、<code>在浏览器地址栏中写下一个网址</code>、<code>提交一个表格</code>等方式请求一个网页时发生的过程</p><h3 id="DNS查询（解决网址问题）"><a href="#DNS查询（解决网址问题）" class="headerlink" title="DNS查询（解决网址问题）"></a>DNS查询（解决网址问题）</h3><p>导航到一个网页的第一步是找到该网页的<code>静态资源</code>位置（HTML、CSS、Javascript和其他类型的文件）。如果我们导航到 example.com ，HTML 页面位于 IP 地址为 93.184.216.34 的服务器上（对我们来说，网站是域名，但对计算机来说，它们是 <code>IP 地址</code>）。如果我们以前从未访问过这个网站，就必须进行域名系统（DNS）查询。</p><blockquote><p>DNS 服务器是包含<code>公共 IP 地址</code>及其相关<code>主机名</code>数据库的计算机服务器（这通常被比作<code>电话簿</code>，因为人们的名字与一个特定的电话号码相关联）。在大多数情况下，这些服务器按照要求将这些名字解析或翻译成 IP 地址（现在有 600 多个不同的 DNS 根服务器分布在世界各地）。</p></blockquote><p><img src="https://bu.dusays.com/2023/06/14/6489cb726ecac.png" alt=""></p><p>因此，当我们请求进行 DNS 查询时，我们<code>实际做的是与这些服务器中的一个进行对话</code>，要求找出与example.com 名称相对应的IP地址。如果<code>找到</code>了一个<code>对应的 IP</code>，就会返回。如果发生了一些情况，查找不成功，我们会在浏览器中看到一些错误信息。</p><p><img src="https://bu.dusays.com/2023/06/14/6489cb74815be.png" alt=""></p><p>在这个最初的查询之后，IP 地址可能会被<code>缓存一段时间</code>，所以下次访问同一个网站会更快，因为不需要进行 DNS 查询（记住，<code>DNS 查询只发生在我们第一次访问一个网站时</code>）。</p><h3 id="TCP-Transmission-Control-Protocol-握手"><a href="#TCP-Transmission-Control-Protocol-握手" class="headerlink" title="TCP(Transmission Control Protocol)握手"></a>TCP(Transmission Control Protocol)握手</h3><p>一旦浏览器知道了网站的 IP 地址，它将尝试通过 TCP <code>三次握手</code>（也称为 SYN-SYN-ACK，或者更准确的说是 SYN、SYN-ACK、ACK，因为 TCP 有三个消息传输，用于协商和启动两台计算机之间的TCP 会话），与持有资源的服务器建立连接。</p><blockquote><p>TCP 是<code>传输控制协议</code>的缩写，是一种通信标准，使应用程序和计算设备能够在网络上交换信息。它被设计用来在互联网上发送数据包，并确保数据和信息在网络上成功传递。</p></blockquote><p>TCP 握手是一种机制，旨在让<code>两个想要相互传递信息的实体</code>（在我们的例子中是浏览器和服务器）在<code>传输数据之前协商好连接的参数</code>。</p><p>因此，如果浏览器和服务器是两个人，他们之前的对话会是这样的：</p><p><img src="https://bu.dusays.com/2023/06/14/6489cb7ca650a.png" alt=""></p><p>浏览器向服务器发送一个 <strong>SYNC</strong>消息，要求进行同步（同步意味着链接）</p><p><img src="https://bu.dusays.com/2023/06/14/6489cb7dc4ac2.png" alt=""></p><p>然后，服务器将回复一个 <strong>SYNC-ACK</strong> 消息（SYNChorization 和 ACKnowledgement）</p><p><img src="https://bu.dusays.com/2023/06/14/6489cb7dd211e.png" alt=""></p><p>在最后一步，浏览器将回复一个 <strong>ACK</strong> 信息</p><p>现在，TCP链接 （双向链接）已经通过3次握手建立，TLS协商可以开始。</p><h3 id="TLS协商"><a href="#TLS协商" class="headerlink" title="TLS协商"></a>TLS协商</h3><p>对于通过<code>HTTPS</code>建立的安全链接，需要进行另一次握手。这种握手（<code>TLS协商</code>）决定了那个密码将被用于<code>加密通信</code>，验证服务器，并在开始实际的<code>数据传输之前建立一个安全的连接</code></p><blockquote><p><code>传输层安全</code>（TLS）是现已废弃的安全套接字层 （SSL）的继任者，是一种加密协议，<code>旨在通过计算机网络提供通信安全</code>。该协议被广泛用于电子邮件和即时通讯等应用，但它在确保HTTPS安全方面的应用仍然是<code>最公开的</code>。由于应用程序可以使用或不使用TLS(或SSL)进行通信，因此客户（浏览器）有必要要求服务器建立TLS连接。</p></blockquote><p><img src="https://bu.dusays.com/2023/06/14/6489cb7dd211e.png" alt=""></p><p>在这一步骤中，浏览器和服务器之间还交换了一些信息</p><ol><li><strong>客户端hello</strong>。 浏览器向服务器发送一条信息，其中包括它所支持的TLS版本和密码套件，以及一串随机字节，称为<code>客户端随机数</code></li><li><strong>服务器hello和证书</strong>。服务器发回一条信息，其中包括服务器的SSL证书、服务器选择的密码套件和<code>服务器随机数</code>，这是服务器生成的另一个随机字节串。</li><li><strong>认证</strong>。 浏览器会向颁发证书的机构核实服务器的SSL证书。这样，浏览器就可以确定服务器就是它所说的那个人。</li><li><strong>预主密码</strong>。浏览器会再发送一串随机的字节，称为<code>主密钥</code>，用浏览器从服务器的 <code>SSL 证书</code>上获取的 <code>公钥</code> 进行加密。 主密码只能由服务器用 <code>私钥</code> 解密。</li><li><strong>使用私钥</strong>。 服务器解密<code>预主密码</code>。</li><li><strong>创建会话秘钥</strong>。 浏览器和服务器从<code>客户端随机数</code>、<code>服务器随机数</code>和<code>预主密码</code>中<code>生成会话密钥</code>。</li><li><strong>客户端完成</strong>。浏览器向服务器发送一个消息，说它已经完成。</li><li><strong>服务器完成</strong>。服务器向浏览器发送一个消息，表示它也完成了。</li><li><strong>安全对称加密实现</strong>。 握手完成，通信可以继续使用会话密钥。</li></ol><p><code>现在可以开始从服务器请求和接受数据了</code></p><h2 id="2-获取数据"><a href="#2-获取数据" class="headerlink" title="2.获取数据"></a>2.获取数据</h2><h3 id="HTTP-请求"><a href="#HTTP-请求" class="headerlink" title="HTTP 请求"></a>HTTP 请求</h3><p>在我们与服务器<code>建立安全连接后</code>，浏览器将<code>发送</code>一个初始的 <code>HTTP GET</code> 请求。首先，浏览器将<code>请求页面的 HTML 文件</code>。它将使用 <code>HTTP 协议</code> 来做这件事。</p><blockquote><p>HTTP (超文本传输协议) 是一个<code>获取资源的协议</code>， 如HTML文件。它是网络上任何<code>数据交换的基础</code>，它是一个<code>客户-服务器协议</code>，这意味着请求是由接受者发起的，通常是网络浏览器。</p></blockquote><p><img src="https://bu.dusays.com/2023/06/14/6489cb7dc4ea1.png" alt=""></p><p><strong>请求方法</strong> HTTP 请求方式一共有 9 种，分别为 POST 、GET 、HEAD、PUT 、PATCH 、 OPTIONS 、DELETE 、CONNECT 、 TRACE 。其中前三种 POST 、GET 、HEAD 是 HTTP 1.0 定义的，后六种 PUT 、PATCH 、 OPTIONS 、DELETE 、CONNECT 、 TRACE 是 HTTP 1.1 定义的。</p><p><strong>URI</strong> 是<code>统一资源识别符</code>的缩写，一个URI最多可以有5个部分</p><ul><li><code>scheme</code> : 用于说明使用的事什么协议</li><li><code>authority</code>: 用于识别域名</li><li><code>path</code>: 用于显示资源的确切路径</li><li><code>query</code>: 用于表示一个请求动作</li><li><code>fragment</code>: 用来指代资源的一部分</li></ul><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// URI parts</span></span><br><span class="line">scheme :<span class="comment">// authority path ? query # fragment</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//URI example</span></span><br><span class="line">&lt;https:<span class="comment">//example.com/users/user?name=Alice#address&gt;</span></span><br><span class="line"></span><br><span class="line">https: <span class="comment">// scheme name</span></span><br><span class="line">example.com <span class="comment">// authority</span></span><br><span class="line">users/user <span class="comment">// path</span></span><br><span class="line">name=Alice <span class="comment">// query</span></span><br><span class="line">address <span class="comment">// fragment</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>HTTP头字段</strong> 是浏览器和服务器在每个 HTTP 请求和响应中发送和接受的字符串列表（它们通常对终端用户是不可见的）。在请求的情况下，它们包含关于要获取的资源或请求组员的浏览器的更多信息。</p><p>如果你想看看这些请求头字段是什么样子的，请进入 Chrome 浏览器并打开开发者工具（F12）。进入 Network 标签，选择 <code>FETCH/XHR</code>。在下面的屏幕截图中，我刚刚在搜索引擎上搜索了Palm Springs，这就是请求头的样子。</p><p><img src="https://bu.dusays.com/2023/06/14/6489cb7e18a64.png" alt=""></p><h3 id="HTTP响应"><a href="#HTTP响应" class="headerlink" title="HTTP响应"></a>HTTP响应</h3><p>一旦服务器收到请求，它将对其进行处理并回复一个 <code>HTTP 响应</code> 。在响应的正文中，我们可以找到所有相关的响应头和我们请求的HTML文档的内容</p><p><img src="https://bu.dusays.com/2023/06/14/6489cb7e53664.png" alt=""></p><p><strong>状态代码</strong> 200、400、401、504网关超时等（我们的目标是 200 状态代码，因为它告诉我们一切正常，请求是成功的）</p><p><strong>响应头字段</strong> 保存关于响应的额外信息，如它的位置或提供它的服务器。</p><p>一个 <strong>HTML</strong> 文档的例子是这样的</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="keyword">HTML</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>我的页面<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">src</span>=<span class="string">&quot;styles.css&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;mainScripts.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;heading&quot;</span>&gt;</span>这个是我的页面<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>一个段落和一个 <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&lt;https://example.com/about&gt;&quot;</span>&gt;</span>链接<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;myImage.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;image description&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;sideEffectsScripts.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>对于我前面提到的同一个搜索，响应头是这样的</p><p><img src="https://bu.dusays.com/2023/06/14/6489cb7e577c7.png" alt=""></p><p>如果我们看一下HTML文档，我们会发现它<code>引用了不同的 CSS 和 Javascript</code> 文件。这些文件<code>不会被请求</code>。在这个时候，只有 HTML 被请求并从服务器接收。</p><p>这个初始请求的响应包含收到的第一个字节的数据。第一个字节的时间（TTFB）是指从<code>用户提出请求（在地址栏中输入网站名称）</code>到<code>收到第一个 HTML 数据包</code>（通常为<code>14kb</code>）的时间。</p><h3 id="TCP-慢启动和拥塞算法"><a href="#TCP-慢启动和拥塞算法" class="headerlink" title="TCP 慢启动和拥塞算法"></a>TCP 慢启动和拥塞算法</h3><p><code>TCP 慢启动</code> 是一种<code>平衡网络连接速度</code>的算法。 第一个数据包将是 <code>14kb（或更小）</code>，其工作方式是<code>逐渐增加传输的数据量</code>，直到<code>达到预定的阈值</code>。 从服务器接收到每个数据包后，客户端以 <code>ACK 消息</code>响应。 由于连接容量有限，如果服务器发送太多数据包太快，它们将被丢弃。 客户端不会发送任何 ACK 消息，因此服务器会将此解释为<code>拥塞</code>。 这就是<code>拥塞算法</code>发挥作用的地方。 他们监控发送的数据包和 ACK 消息的流，以确定流量的最佳速率并创建稳定的流量流。</p><h2 id="3-HTML解析"><a href="#3-HTML解析" class="headerlink" title="3.HTML解析"></a>3.HTML解析</h2><p>在向服务器发出初始请求后，浏览器如何收到包含我们尝试访问的网页的 HTML 资源 （第一块数据）的响应。现在浏览器的工作就是开始解析数据。</p><blockquote><p>解析是指将程序<code>分析</code>并<code>转换</code>为运行时环境实际可以运行的内部格式</p></blockquote><p>换句话说，解析意味着将我们编写的代码作为文本（HTML、CSS）并将其<code>转换为浏览器可以使用的内容</code>。解析将由<code>浏览器引擎</code>完成（不要与浏览器的 Javascript 引擎混淆）</p><p>有许多浏览器引擎，但大多数浏览器使用这三个活跃且完整引擎之一：</p><p><strong>Gecko</strong> 它是由 Mozilla 为 Firefox 开发的。 过去，它曾为其他几种浏览器提供支持，但目前，除了 Firefox，Tor 和 Waterfox 是唯一仍在使用 Gecko 的浏览器。 它是用 C++ 和 JavaScript 编写的，自 2016 年起，还用 Rust 编写。</p><p><strong>WebKit</strong> 它主要由 Apple 为 Safari 开发。 它还为 GNOME Web (Epiphany) 和 Otter 提供支持。 （令人惊讶的是，在 iOS 上，包括 Firefox 和 Chrome 在内的所有浏览器也由 WebKit 提供支持）。 它是用 C++ 编写的。</p><p><strong>Blink，Chromium</strong> 的一部分 它最初是 WebKit 的一个分支，主要由 Google 为 Chrome 开发。 它还为 Edge、Brave、Silk、Vivaldi、Opera 和大多数其他浏览器项目（一些通过 QtWebEngine）提供支持。 它是用 C++ 编写的。</p><p>现在我们了解了谁将进行解析，让我们看看在从服务器接收到第一个 HTML 文档后到底发生了什么。 让我们假设文档如下所示：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="keyword">HTML</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>This is my page<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>This is my page<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>This is a H3 header.<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>This is a paragraph.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>This is another paragraph,<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>即使请求页面的 HTML 大于初始的 14KB 数据包， 浏览器也会开始解析并尝试根据其拥有的数据呈现体验。 HTML 解析涉及两个步骤: <code>词法分析</code> 和 <code>树构造</code> （构建称为 DOM 树的东西）。</p><h3 id="词法分析"><a href="#词法分析" class="headerlink" title="词法分析"></a>词法分析</h3><blockquote><p>它将一些输入转换为标签 （源代码的基本组件）。 想象一下，我们将一段英文文本分解成单词，其中单词就是标签。</p></blockquote><p>词法分析过程结束时的结果是一系列 0 个或多个以下标签: DOCTYPE、开始标签（<code>&lt;tag&gt;</code>）、结束标签（<code>&lt;/tag&gt;</code>）、自闭合标签（<code>&lt;tag/&gt;</code>）、<code>属性名称</code>、<code>值</code>、<code>注释</code>、<code>字符</code>、<code>文件结尾</code>或<code>元素中的纯文本内容</code>。</p><p><img src="https://bu.dusays.com/2023/06/14/6489cb7e9aa9c.png" alt=""></p><h3 id="构建-DOM"><a href="#构建-DOM" class="headerlink" title="构建 DOM"></a>构建 DOM</h3><p>创建第一个 token 后，<code>树构建</code>开始。这实质上是基于先前解析的标签创建 <code>树状结构</code> （称为文档对象模型）。</p><p>DOM 树描述了 HTML 文档的内容。 <code>&lt;html&gt;</code> 元素时文档树的第一个标签和根节点。树反映了不同标签之间的<code>关系</code>和<code>层次结构</code>。我们有<code>父节点</code>，嵌套在其他标签中的标签是<code>子节点</code>。节点数越多，构建 DOM 树所需的时间就越长。下面是我们从服务器获取的 HTML 文档示例的 DOM 树:</p><p><img src="https://bu.dusays.com/2023/06/14/6489cb7e9960c.png" alt=""></p><p>实际上，DOM 比我们在该模式中看到的更<code>复杂</code>，但我保持简单以便更好地理解（另外，我们将在以后的文章中更详细地讨论 DOM 及其重要性）。</p><p>此构建阶段是 <code>可重入</code> 的，这意味着在处理一个 token 时，分词器可能会恢复，导致在第一个 token 处理完成之前触发并处理更多 token。 从字节到创建 DOM，整个过程如下所示：</p><p><img src="https://bu.dusays.com/2023/06/14/6489cb7ec45eb.png" alt=""></p><p>解析器从上到下逐行工作。 当解析器遇到<code>非阻塞资源</code>（例如图像）时，浏览器会向服务器请求这些图像并<code>继续解析</code>。 另一方面，如果它遇到<code>阻塞资源</code>（<strong>CSS 样式表</strong>、在 HTML 的  部分添加的 <strong>Javascrpt 文件</strong>或从 <strong>CDN 添加的字体</strong>），解析器将<code>停止执行</code>，直到所有这些阻塞资源<code>都被下载</code>。 这就是为什么，如果你正在使用 Javascript，建议在 HTML 文件的末尾添加</p><h3 id="预加载器-amp-使页面更快"><a href="#预加载器-amp-使页面更快" class="headerlink" title="预加载器 &amp; 使页面更快"></a>预加载器 &amp; 使页面更快</h3><p>Internet Explorer、WebKit 和 Mozilla 都在 2008 年实现了预加载器，作为处理阻塞资源的一种方式，尤其是脚本（我们之前说过，当遇到脚本标签时，HTML 解析将停止，直到脚本被下载并执行）。<br>使用预加载器，当浏览器卡在脚本上时，第二个较轻的解析器会扫描 HTML 以查找需要检索的资源（样式表、脚本等）。 然后预加载器开始在后台检索这些资源，目的是在主 HTML 解析器到达它们时它们可能已经被下载（如果这些资源已经被缓存，则跳过此步骤）。</p><h2 id="4-解析CSS"><a href="#4-解析CSS" class="headerlink" title="4.解析CSS"></a>4.解析CSS</h2><p>解析完 HTML 之后，就该解析 CSS（在外部 CSS 文件和样式元素中找到）并构建 <code>CSSDOM 树</code>（CSS 对象模型）。</p><p>当浏览器遇到 CSS 样式表时，无论是<code>外部样式</code>表还是<code>嵌入式样式表</code>，它都需要将文本解析为可用于设置布局样式的内容。 浏览器将 <code>CSS 变成的数据结构称为 CSSOM</code>。 DOM 和 CSSOM 遵循相似的概念，因为它们都是树，但它们是<code>不同的数据结构</code>。 就像从我们的 HTML 构建 DOM 一样，从 CSS 构建 CSSOM 被认为是一个<code>「渲染阻塞 」</code>过程。</p><h3 id="词法分析和构建-CSSOM"><a href="#词法分析和构建-CSSOM" class="headerlink" title="词法分析和构建 CSSOM"></a>词法分析和构建 CSSOM</h3><p>与 HTML 解析类似，CSS 解析从词法分析开始。 CSS 解析器<code>获取字节</code>并将它们<code>转换为字符</code>，然后是<code>标签</code>，然后是<code>节点</code>，最后它们被<code>链接到 CSSOM</code> 中。 浏览器会执行一些称为 <code>选择器匹配</code> 的操作，这意味着每组<code>样式都将与页面上的所有节点（元素）匹配</code>。</p><p><img src="https://bu.dusays.com/2023/06/14/6489cb7ec4e0d.png" alt=""></p><p>浏览器从适用于节点的最通用规则开始（例如：如果节点是 body 元素的子节点，则所有 body 样式都由该节点继承），然后通过应用更具体的规则<code>递归地优化计算出的样式</code>。 这就是为什么我们说<code>样式规则</code>是<code>级联</code>的。</p><p>假设我们有下面的 HTML 和 CSS：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">32px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">section</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: tomato;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">section</span> <span class="selector-class">.mainTitle</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">5px</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>:  <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">color</span>: yellow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>这段代码的 CSSOM 看起来像这样：</p><p><img src="https://bu.dusays.com/2023/06/14/6489cb7ecb1e6.png" alt=""></p><p>请注意，在上面的模式中，嵌套元素既有<code>继承的样式</code>（来自父级 - 例如：h1 从 body 继承其颜色，section 从 body 继承其字体大小）和它们自己的样式（可以覆盖继承的规则 是否来自父节点 - 例如：p 覆盖了从 div 继承的颜色和字体大小，而 mainTitle 没有从父节点获得其左边距）。</p><p>由于我们的 CSS 可以有多个来源，并且它们可以包含适用于同一节点的规则，因此浏览器必须决定<code>最终应用哪个规则</code>。 这就是 <code>优先级</code> 发挥作用的时候，如果您想了解更多相关信息，可以访问此<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Specificity">页面</a>。</p><p>想象一下，您在机场寻找您的朋友 John。 如果你想通过喊他的名字找到他，你可以喊 “ John ”。 可能不止一个 John 会同时出现在机场，所以他们可能都会做出回应。 更好的方法是用他的全名打电话给你的朋友，这样当你喊“John Doe”时，你就有更好的机会找到他，因为“ John Doe ”比“ John ”更具体。</p><p>同样，假设我们有这个元素：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&lt;https://dev.to/&gt;&quot;</span>&gt;</span>This is just a link!<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>以及这些CSS样式：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">   <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">p</span>  <span class="selector-tag">a</span> &#123;</span><br><span class="line">   <span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>您认为浏览器会应用哪条规则？ 答案是第二条规则，因为 p 标签中的所有 a 标签选择器比所有a 标签选择器都具有<code>更高的优先级</code>。 </p><h3 id="重点"><a href="#重点" class="headerlink" title="重点"></a>重点</h3><p>CSS 规则是<code>从右到左</code>阅读的，这意味着如果我们有这样的代码： <code>section p &#123; color: blue; &#125;</code>, 浏览器将首先查找页面上的所有 <code>p</code> 标签，然后它会查看这些 p 标签中是否有一个 <code>section 标签</code>作为<code>父标</code>签。 如果查找能够命中，它将应用这个 CSS 规则</p><h2 id="5-执行Javascript"><a href="#5-执行Javascript" class="headerlink" title="5.执行Javascript"></a>5.执行Javascript</h2><p>在解析 CSS 并创建 CSSOM 的<code>同时</code>，还会<code>下载其他资产</code>，包括 JavaScript 文件。 这要归功于我们在之前文章中提到的<code>预加载器</code>。</p><blockquote><p><code>预加载器</code>就像一个解析器，它在主解析器处理 HTML 代码时扫描 HTML 文件。 它的作用是<code>查找样式表</code>、<code>脚本</code>或<code>图片</code>（也需要从服务器检索）等资源并<code>请求</code>它们。 希望在解析 HTML 时，这些资源已经<code>下载</code>并准备好进行处理。</p></blockquote><p>所以，当我们从服务器获取 Javascript 文件后，代码被<strong>解释</strong>、<strong>编译</strong>、<strong>解析和执行</strong>。 计算机无法理解 Javascript 代码，只有<code>浏览器可以</code>。 JS 代码需要被<code>翻译成计算机可以使用的东西</code>，这是 Javascript 浏览器引擎的工作（不要与浏览器引擎混淆）。 根据浏览器的不同，JS 引擎可以有不同的名称和不同的工作方式。</p><h3 id="Javascript-引擎"><a href="#Javascript-引擎" class="headerlink" title="Javascript 引擎"></a>Javascript 引擎</h3><p>javascript 引擎（有时也称为 ECMAScript 引擎）是一种在浏览器中执行（运行）Javascript 代码的软件，而不仅仅是零部件（例如，V8 引擎是 Node.js 环境的核心组件）。</p><p>JavaScript 引擎通常由 Web 浏览器供应商开发，每个主要浏览器都有一个。 我们说过，目前使用最多的浏览器是 Chrome、Safari、Edge 和 Firefox。 每个都使用不同的 Javascript 引擎，它们是：</p><p><strong>V8</strong> V8 是 Google 的高性能 JavaScript 引擎。 它是用 C++ 编写的，用于 Chrome 和 Node.js 等。 它实现了 ECMAScript（一种 JavaScript 标准，旨在确保网页在不同 Web 浏览器之间的互操作性）和 WebAssembley。 它实现了 ECMA-262。</p><p><strong>JavaScriptCore</strong> JavaScriptCore 是 WebKit 的内置 JavaScript 引擎，它为 Safari 浏览器、邮件和 macOS 上使用的其他应用程序提供支持。 它目前按照 ECMA-262 规范实现 ECMAScript。 它也被称为 SquirrelFish 或 SquirrelFish Extreme。</p><p><strong>Chakra</strong> Chakra 是微软为其 Microsoft Edge 网络浏览器和其他 Windows 应用程序开发的 Javascript 引擎。 它实现了 ECMAScript 5.1，并且对 ECMAScript 6 有部分（不断增加的）支持。它是用 C++ 编写的。</p><p><strong>SpiderMonkey</strong> SpiderMonkey 是 Mozilla 的 Javascript 和 WebAssembly 引擎。 它是用 C++、Javascript 和 Rust 编写的，用于为 Firefox、Servo 和其他项目提供支持。</p><p>一开始，Javascript 引擎只是简单的解释器。 我们今天使用的现代浏览器能够执行称为即时 (JIT) 编译的功能，这是编译和解释的混合体。</p><p><strong>编译</strong></p><p>在编译过程中，一个称为 <code>编译器</code> 的软件将用高级语言编写的代码一次性转换为机器代码。 创建一个<code>目标文件</code>，该文件可以在任何机器上运行。 采取这些步骤后，就可以执行代码了。</p><p><img src="https://bu.dusays.com/2023/06/14/6489cb7ed7421.png" alt=""></p><p><strong>解释</strong></p><p>在解释过程中，解释器逐行检查 Javascript 代码并立即执行。 没有进行编译，因此没有创建目标代码（代码的输出由解释器本身使用其内部机制创建）。 旧版本的 Javascript 使用这种类型的代码执行。</p><p><img src="https://bu.dusays.com/2023/06/14/6489cb7edf85e.png" alt=""></p><p><strong>即时编译( JIT Compilation )</strong></p><p>即时编译是给定语言的解释器的一个特性，它试图<code>同时利用编译和解释</code>。 是在纯编译期间，代码是在执行之前被编译，然而在 JIT 编译中，代码在执行时（在运行时）被编译。 所以我们可以说源代码是动态转换为机器代码的。 较新版本的 Javascript 使用这种类型的代码执行。</p><p><img src="https://bu.dusays.com/2023/06/14/6489cb7f1de8a.png" alt=""></p><p>JIT 编译的一个很重要的方面就是将源代码编译成当前正在运行的机器的机器码指令。 这意味着生成的机器代码是针对正在运行的机器的 CPU 架构进行了优化。</p><p>简而言之，这三个过程可以总结为：</p><ul><li>编译器：编译代码</li><li>解释器：运行代码</li><li>JIT 编译器：在运行代码时进行编译</li></ul><p>今天，<code>编译</code>和<code>解释</code>这两个术语之间的界限已经变得非常模糊，因此这个主题可以进行广泛的辩论。</p><p>请注意，我提到了旧版本和新版本的 Javascript。 不支持较新版本语言的浏览器将解释代码，而支持的浏览器将使用某些版本的 JIT 来执行代码（V8、Chakra JavaScriptCore 和 SpiderMonkey 引擎都使用 JIT）。 事实上，尽管 Javascript 是一种解释型语言（它不需要编译），但如今大多数浏览器都会使用 JIT 编译来运行代码，而不是纯粹的解释型语言。</p><h3 id="Javascript-代码是如何处理的"><a href="#Javascript-代码是如何处理的" class="headerlink" title="Javascript 代码是如何处理的"></a>Javascript 代码是如何处理的</h3><p>当 Javascript 代码进入 Javascript 引擎时，它首先被<code>解析</code>。 这意味着代码被读取，并且在这种情况下，代码被转换为称为<code>抽象语法树</code> (<code>AST</code>) 的数据结构。 代码将被拆分成与语言相关的部分（如 <code>function</code> 或 <code>const</code> 关键字），然后所有这些部分将构建抽象语法树。</p><p>假设我们有一个文件，其中包含一个只做一件事的程序，那就是定义一个变量：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> age = <span class="number">25</span>;</span><br></pre></td></tr></table></figure><p>这就是这行非常简单的代码<code>看起来像抽象语法树</code>的方式（我正在使用@babel/parser-7.16.12）</p><p><img src="https://bu.dusays.com/2023/06/14/6489cb7f2e5b4.png" alt=""></p><p>如果你想将一些 Javascript 转换为抽象语法树，你可以使用这个<a href="https://astexplorer.net/">工具</a>。 编写变量后得到的 AST 实际上要大得多，在屏幕截图中隐藏了更多节点。</p><p><code>构建 AST</code>后，它会被翻译成机器代码并<code>立即执行</code>，因为现代 Javascript 使用即时编译。 这段代码的执行将由 Javascript 引擎完成，利用称为<code>“调用堆栈”</code>的东西。</p><blockquote><p>调用堆栈是解释器（如 Web 浏览器中的 JavaScript 解释器）跟踪其在调用多个函数的脚本中的位置的机制——当前正在运行的函数以及从该函数中调用的函数等。</p></blockquote><h2 id="6-创建可访问（无障碍）树"><a href="#6-创建可访问（无障碍）树" class="headerlink" title="6.创建可访问（无障碍）树"></a>6.创建可访问（无障碍）树</h2><p>除了我们一直在讨论的所有这些树（DOM、CSSOM 和 AST）之外，浏览器还构建了一种称为<code>可访问（无障碍）树</code>的东西。</p><blockquote><p>Web 开发中的可访问性（通常缩写为 A11y — 如“a”，然后是 11 个字符，然后是“y”）意味着让尽可能多的人能够使用网站，即使这些人的能力在某种程度上受到限制。 对很多人来说，技术让事情变得更容易。 对于残障人士，技术使事情成为可能。 可访问性意味着开发尽可能易于访问的内容，无论个人的身体和认知能力以及他们如何访问网络 (ACT)。</p></blockquote><p>一般而言，残疾用户可以并且确实在使用具有各种辅助技术的网页。 他们使用屏幕阅读器、放大镜、眼动追踪、语音命令等。 为了让这些技术发挥作用，它们需要能够访问页面的内容。 由于他们无法直接读取 DOM，因此 ACT 开始发挥作用。<br>可访问性树是使用 DOM 构建的，稍后辅助设备将使用它来解析和解释我们正在访问的网页的内容。 ACT 就像 DOM 的语义版本，每次 DOM 更新时它都会更新。 每个需要暴露给辅助技术的 DOM 元素都会在 ACT 中有一个对应节点。 在未构建 ACT 之前，屏幕阅读器无法访问内容。</p><p><img src="https://bu.dusays.com/2023/06/14/6489cb7f4e49e.png" alt=""></p><p>要查看可访问性树的实际的样子，您可以通过 Google Chrome 浏览器。 打开调试器 (F12) 并转到“元素”选项卡。 从那里，你可以在右侧选择“辅助功能”窗格。</p><p><img src="https://bu.dusays.com/2023/06/14/6489cb7f6cf4f.png" alt=""></p><p>我去 Google 并检查了搜索输入，这是我在“计算”属性下的“辅助功能”窗格中得到的：</p><p><img src="https://bu.dusays.com/2023/06/14/6489cb7f7a09e.png" alt=""></p><p>使用语义 HTML 的重要性超出了本文的范围，但作为开发人员，我们都应该记住，我们构建的网站应该可供所有希望使用它们的人使用。 如果您想阅读有关该主题的更多信息，可以在此处找到一篇关于 Web 可访问性的很好的介绍性文章。 据 <code>互联网协会无障碍访问特别兴趣小组</code> 称，目前全世界有超过 13 亿人（约占世界人口的 <code>15%</code>）患有某种形式的残疾。</p><h2 id="7-渲染树"><a href="#7-渲染树" class="headerlink" title="7.渲染树"></a>7.渲染树</h2><p>在解析阶段构建的树（DOM、CSSOM）被组合成一种叫做 <code>渲染树</code> 的东西。 这用于计算最终将绘制到屏幕上的所有可见元素的布局。 渲染树的目的是确保页面内容以正确的顺序绘制元素。 它将作为在屏幕上显示像素的绘画过程的输入。</p><p>DOM 和 CSSOM 是使用 HTML 和 CSS 文件创建的。 这两个文件包含不同类型的信息，树的结构也不同，那么渲染树是如何创建的呢？</p><h3 id="结合-DOM-和-CSSOM"><a href="#结合-DOM-和-CSSOM" class="headerlink" title="结合 DOM 和 CSSOM"></a>结合 DOM 和 CSSOM</h3><ul><li>浏览器将开始在 DOM 树的根部施展魔法并遍历每个可见节点。 一些节点，如脚本或元标记是不可见的，因此它们被忽略。 还有一些节点会被 CSS 隐藏（例如 display: “none” 属性），它们也会被忽略。 我们只对可见节点感兴趣，因为只有它们对屏幕上的输入有影响。</li><li>对于在 DOM 中找到的每个可见节点，将在 CSSOM 中找到相应的规则并应用它们。</li></ul><p>以上步骤的结果将是一个包含所有可见节点、内容和样式的<code>渲染树</code>。</p><p><img src="https://bu.dusays.com/2023/06/14/6489cb7f86fe3.png" alt=""></p><h3 id="布局（回流）阶段"><a href="#布局（回流）阶段" class="headerlink" title="布局（回流）阶段"></a>布局（回流）阶段</h3><p>渲染树包含有关显示哪些节点及其计算样式的信息，但不包含每个节点的尺寸或位置。</p><p>接下来需要做的是计算这些节点在设备视口（浏览器窗口内）内的确切位置及其大小。 这个阶段称为布局（在 Chrome、Opera、Safari 和 Internet Explorer 中）或重排（在 Firefox 中），但它们的意思相同。 浏览器在渲染树的根部开始这个过程并遍历它。</p><p><img src="https://bu.dusays.com/2023/06/14/6489cb7fa93c0.png" alt=""></p><p>回流步骤不会只发生一次，而是每次我们<code>更改 DOM</code> 中<code>影响页面布局的</code>某些内容时，即使是<code>部分更改</code>，都会触发回流。 重新计算元素位置的情况示例如下：</p><ul><li>在 DOM 中添加或删除元素</li><li>调整浏览器窗口大小</li><li>更改元素的宽度、位置或使其浮动</li></ul><p>让我们来看一个非常基本的 HTML 示例，其中内嵌了一些 CSS：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width,initial-scale=1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Reflow<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%; height: 50%&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 50%; height: 50%&quot;</span>&gt;</span>This is the reflow stage!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>上面的代码只是说在视口内我们应该有两个 div，其中第二个嵌套在第一个里面。 父 div 占据视口宽度的 100%和高度的 50%。第二个 div 占据父 div 的 50% 这看起来像这样：</p><p><img src="https://bu.dusays.com/2023/06/14/6489cb801a105.png" alt=""></p><p>这个过程的输出是一个 <code>类似盒子的模型</code> ，它准确地捕获了每个元素需要在屏幕上的位置及其大小。 完成此步骤后，输出就可以传递到下一步，称为<code>绘画阶段</code>。</p><h3 id="绘画（重绘）阶段"><a href="#绘画（重绘）阶段" class="headerlink" title="绘画（重绘）阶段"></a>绘画（重绘）阶段</h3><p>在浏览器决定哪些节点需要可见并计算出它们在视口中的位置后，就可以在屏幕上绘制它们（渲染像素）了。 这个阶段也被称为 <code>光栅化阶段</code> ，浏览器将在布局阶段计算的每个盒子转换为屏幕上的实际像素。</p><p><img src="https://bu.dusays.com/2023/06/14/6489cb801c683.png" alt=""></p><p>就像布局阶段一样，绘画阶段不会只发生一次，而是每次我们改变屏幕上元素的<code>外观</code>时。 这些情况的例子是：</p><ul><li>改变元素的轮廓</li><li>改变背景颜色</li><li>改变不透明度或可见性</li></ul><p>绘画意味着浏览器需要将元素的每个视觉部分绘制到屏幕上，包括文本、颜色、边框、阴影和替换元素（如按钮和图像），并且需要超快地完成。 为了确保重绘可以比初始绘制更快地完成，屏幕上的绘图通常被<code>分解成几层</code>。 如果发生这种情况，则需要进行<code>合成</code>。</p><h3 id="分层和合成"><a href="#分层和合成" class="headerlink" title="分层和合成"></a>分层和合成</h3><p>传统意义上，网络浏览器完全依赖 CPU 来呈现网页内容。 但现在即使是最小的设备也有高性能的 GPU，所有大部分实现方案都围绕着 GPU 来寻求更好的体验。</p><p><img src="https://bu.dusays.com/2023/06/14/6489cb80540cc.png" alt=""></p><blockquote><p>合成是一种将页面的各个部分分成层的技术，分别绘制它们并在称为合成器线程的单独线程中合成为页面。 当文档的各个部分绘制在不同的层中并相互重叠时，合成是必要的，以确保它们以正确的顺序绘制到屏幕上并且内容被正确呈现。</p></blockquote><p>通常，只有特定的任务会被重定向到 GPU，而这些任务可以由合成器线程单独处理。<br>为了找出哪些元素需要在哪一层，主线程遍历布局树并创建层树。 默认情况下，只有一层（这些层的实现方式因浏览器而异），但我们可以找到会触发重绘的元素，并为每个元素创建一个单独的层。 这样，重绘不应应用于整个页面，而且此过程将可以使用到 GPU</p><p><img src="https://bu.dusays.com/2023/06/14/6489cb8059efa.png" alt=""></p><p>如果我们想向浏览器提示某些元素应该在一个单独的层上，我们可以使用 <code>will-change</code> CSS 属性。 实际上有一些特定的属性和元素表示新层的创建。 其中一些是 <code>&lt;video&gt;</code>、<code>&lt;canvas&gt;</code> 和任何具有 CSS <code>opacity</code> 属性、3D <code>transform</code>、<code>will-change</code> 和其他一些属性的元素。 这些节点连同它们的后代将被绘制到它们自己的图层上。</p><h3 id="谨记"><a href="#谨记" class="headerlink" title="谨记"></a>谨记</h3><p>上面讨论的两种操作，回流和重绘，都是<code>昂贵</code>的，尤其是在像手机这样处理能力低的设备上。 这就是为什么在处理 DOM 更改时我们应该尝试<code>优化</code>它们。 <code>有些动作只会触发重绘，有些动作会同时触发回流和重绘</code>。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="人类补完计划" scheme="https://tom9527c.github.io/categories/%E4%BA%BA%E7%B1%BB%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/"/>
    
    
    <category term="Vue3" scheme="https://tom9527c.github.io/tags/Vue3/"/>
    
    <category term="源码" scheme="https://tom9527c.github.io/tags/%E6%BA%90%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>Linux</title>
    <link href="https://tom9527c.github.io/posts/53d0684b.html"/>
    <id>https://tom9527c.github.io/posts/53d0684b.html</id>
    <published>2023-09-15T17:30:29.000Z</published>
    <updated>2024-07-05T10:05:15.121Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="Linux-常用命令"><a href="#Linux-常用命令" class="headerlink" title="Linux 常用命令"></a>Linux 常用命令</h2><h3 id="文件操作命令"><a href="#文件操作命令" class="headerlink" title="文件操作命令"></a>文件操作命令</h3><blockquote><p>学习优先级最高，Linux 一切皆文件</p></blockquote><ul><li><code>pwd</code>：显示当前所在目录</li><li><code>ls</code>：查看目录下的文件</li><li><code>mkdir</code>：创建目录</li><li><code>cd</code>：切换当前目录</li><li><code>mv</code>：移动文件或目录</li><li><code>cp</code>：复制文件或目录</li><li><code>rm</code>：删除文件或目录</li><li><code>zip</code>：压缩文件</li><li><code>unzip</code>：解压文件</li></ul><h3 id="系统信息命令"><a href="#系统信息命令" class="headerlink" title="系统信息命令"></a>系统信息命令</h3><blockquote><p>后端开发重点，可使用这些命令进行异常分析</p></blockquote><ul><li><code>top</code>：查看进程及资源占用情况</li><li><code>ps</code>：查看进程信息</li><li><code>free</code>：查看内存占用情况</li><li><code>df</code>：查看磁盘占用情况</li><li><code>ifconfig</code>：查看网络接口信息</li><li><code>netstat</code>：查看网络状态信息</li></ul><h3 id="文件查看命令"><a href="#文件查看命令" class="headerlink" title="文件查看命令"></a>文件查看命令</h3><blockquote><p>后端开发重点，可使用这些命令快速定位项目日志中的异常信息</p></blockquote><ul><li><code>cat</code>：查看文件内容</li><li><code>head</code>：查看文件开头内容</li><li><code>tail</code>：查看文件末尾内容</li><li><code>grep</code>、<code>sed</code>、<code>awk</code> 三剑客：灵活查找和处理文件内容</li></ul><h3 id="用户权限命令"><a href="#用户权限命令" class="headerlink" title="用户权限命令"></a>用户权限命令</h3><blockquote><p>一般是给 Linux 运维（管理员）使用</p></blockquote><ul><li><code>useradd</code>：添加用户</li><li><code>userdel</code>：删除用户</li><li><code>chmod</code>：修改文件或目录权限</li><li><code>chown</code>：修改文件或目录所有者</li></ul><h3 id="综合"><a href="#综合" class="headerlink" title="综合"></a>综合</h3><h4 id="系统信息"><a href="#系统信息" class="headerlink" title="系统信息"></a>系统信息</h4><ul><li><code>uname</code> 查看系统信息</li><li><code>hostname</code> 查看主机名</li><li><code>cat</code> /<code>proc</code>/<code>cpuinfo</code> 查看 CPU 信息</li><li><code>lsmod</code> 查看已加载的系统模块</li><li><code>top</code> 查看系统使用情况</li><li><code>df</code> 查看磁盘使用情况</li><li><code>fdisk</code> 查看磁盘分区</li><li><code>du</code> 查看目录使用情况</li><li><code>iostat</code> 查看 I / O 使用情况</li><li><code>free</code> 显示系统内存情况</li><li><code>env</code> 查看环境变量</li><li><code>uptime</code> 查看系统运行时间、用户数、负载</li></ul><h4 id="系统操作"><a href="#系统操作" class="headerlink" title="系统操作"></a>系统操作</h4><ul><li><code>shutdown</code> 关机</li><li><code>reboot</code> 重启</li><li><code>mount</code> 挂载设备</li><li><code>umount</code> 卸载设备</li></ul><h4 id="用户相关"><a href="#用户相关" class="headerlink" title="用户相关"></a>用户相关</h4><ul><li><code>su</code> 切换用户</li><li><code>sudo</code> 以管理员身份执行</li><li><code>who</code> 查看当前用户名</li><li><code>ssh</code> 远程连接</li><li><code>logout</code> 注销</li><li><code>useradd</code> 创建用户</li><li><code>userdel</code> 删除用户</li><li><code>usermod</code> 修改用户</li><li><code>groupadd</code> 创建用户组</li><li><code>groupdel</code> 删除用户组</li><li><code>groupmod</code> 修改用户组</li><li><code>passwd</code> 修改密码</li><li><code>last</code> 显示用户或终端的登录情况</li></ul><h4 id="文件相关"><a href="#文件相关" class="headerlink" title="文件相关"></a>文件相关</h4><ul><li><code>cd</code> 切换目录</li><li><code>ls</code> 查看目录列表</li><li><code>tree</code> 打印目录树</li><li><code>mkdir</code> 创建目录</li><li><code>rm</code> 删除目录</li><li><code>touch</code> 新建文件</li><li><code>cp</code> 复制文件</li><li><code>mv</code> 移动文件</li><li><code>ln</code> 创建文件链接</li><li><code>find</code> 搜索文件</li><li><code>locate</code> 定位文件</li><li><code>whereis</code> 查看可执行文件路径</li><li><code>which</code> 在 PATH 指定的路径中，搜索某系统命令的位置</li><li><code>chmod</code> 设置目录权限</li><li><code>cat</code> / <code>more</code> / <code>less</code> 查看文件</li><li><code>tac</code> 倒序查看文件</li><li><code>head</code> / <code>tail</code> 查看文件开头 / 结尾</li><li><code>paste</code> 合并文件</li><li><code>zip</code> / <code>tar</code> / <code>gzip</code> 压缩文件</li><li><code>unzip</code> / <code>tar</code> / <code>gunzip</code> 解压文件</li><li><code>grep</code> / <code>sed</code> / <code>awk</code> 文本处理</li><li><code>vim</code> 文本编辑</li></ul><h4 id="程序相关"><a href="#程序相关" class="headerlink" title="程序相关"></a>程序相关</h4><ul><li><code>crontab</code> 计划任务</li><li><code>nohup</code> 后台运行程序</li><li><code>jobs</code> 查看系统任务</li><li><code>ps</code> 查看进程</li><li><code>kill</code> 杀死进程</li><li><code>rpm</code> / <code>yum</code> / <code>apt</code> / <code>apt-get</code> / <code>dpkg</code> 软件包管理</li><li><code>service</code> / <code>systemctl</code> 服务管理</li></ul><h4 id="网络相关"><a href="#网络相关" class="headerlink" title="网络相关"></a>网络相关</h4><ul><li><code>ifconfig</code> 查看网络属性</li><li><code>netstat</code> 查看网络状态</li><li><code>iptables</code> 查看 iptables 规则</li></ul><h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><ul><li><code>date</code> 显示系统时间</li><li><code>cal</code> 显示日历</li><li><code>history</code> 显示与操作历史</li><li><code>help</code> 帮助</li><li><code>alias</code> 别名</li></ul>]]></content>
    
    
    <summary type="html">Linux常用命令</summary>
    
    
    
    
    <category term="Linux" scheme="https://tom9527c.github.io/tags/Linux/"/>
    
    <category term="命令" scheme="https://tom9527c.github.io/tags/%E5%91%BD%E4%BB%A4/"/>
    
  </entry>
  
  <entry>
    <title>eggjs</title>
    <link href="https://tom9527c.github.io/posts/2a87be94.html"/>
    <id>https://tom9527c.github.io/posts/2a87be94.html</id>
    <published>2023-09-15T17:24:31.000Z</published>
    <updated>2024-07-05T10:04:58.413Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="eggjs"><a href="#eggjs" class="headerlink" title="eggjs"></a>eggjs</h2><p><a href="https://eggjs.org/zh-cn/">eggjs官网</a></p><h2 id="项目搭建"><a href="#项目搭建" class="headerlink" title="项目搭建"></a>项目搭建</h2><ol><li><p>创建项目</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir egg-example &amp;&amp; cd egg-example</span><br><span class="line">$ npm init egg --type=simple</span><br><span class="line">$ npm i</span><br></pre></td></tr></table></figure><blockquote><p>该示例中类库版本 </p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span> </span><br><span class="line"><span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;egg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.15.1&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;egg-scripts&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.11.0&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;autod&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;autod-egg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;egg-bin&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.11.0&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;egg-ci&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.11.0&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;egg-mock&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.21.0&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;eslint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^5.13.0&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;eslint-config-egg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^7.1.0&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;engines&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;node&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&gt;=10.0.0&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></blockquote></li><li><p>启动项目</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm run dev</span><br><span class="line">$ open http://localhost:7001</span><br></pre></td></tr></table></figure></li></ol><h3 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">egg-project</span><br><span class="line">├── package.json</span><br><span class="line">├── app.js (可选)</span><br><span class="line">├── agent.js (可选)</span><br><span class="line">├── app</span><br><span class="line">|   ├── router.js</span><br><span class="line">│   ├── controller</span><br><span class="line">│   |   └── home.js</span><br><span class="line">│   ├── service (可选)</span><br><span class="line">│   |   └── user.js</span><br><span class="line">│   ├── middleware (可选)</span><br><span class="line">│   |   └── response_time.js</span><br><span class="line">│   ├── schedule (可选)</span><br><span class="line">│   |   └── my_task.js</span><br><span class="line">│   ├── public (可选)</span><br><span class="line">│   |   └── reset.css</span><br><span class="line">│   ├── view (可选)</span><br><span class="line">│   |   └── home.tpl</span><br><span class="line">│   └── extend (可选)</span><br><span class="line">│       ├── helper.js (可选)</span><br><span class="line">│       ├── request.js (可选)</span><br><span class="line">│       ├── response.js (可选)</span><br><span class="line">│       ├── context.js (可选)</span><br><span class="line">│       ├── application.js (可选)</span><br><span class="line">│       └── agent.js (可选)</span><br><span class="line">├── config</span><br><span class="line">|   ├── plugin.js</span><br><span class="line">|   ├── config.default.js</span><br><span class="line">│   ├── config.prod.js</span><br><span class="line">|   ├── config.test.js (可选)</span><br><span class="line">|   ├── config.local.js (可选)</span><br><span class="line">|   └── config.unittest.js (可选)</span><br><span class="line">└── test</span><br><span class="line">    ├── middleware</span><br><span class="line">    |   └── response_time.test.js</span><br><span class="line">    └── controller</span><br><span class="line">        └── home.test.js</span><br></pre></td></tr></table></figure><p>如上，由框架约定的目录：</p><ul><li><code>app/router.js</code> 用于配置 URL 路由规则，具体参见 <a href="https://eggjs.org/zh-cn/basics/router.html">Router</a>。</li><li><code>app/controller/**</code> 用于解析用户的输入，处理后返回相应的结果，具体参见 <a href="https://eggjs.org/zh-cn/basics/controller.html">Controller</a>。</li><li><code>app/service/**</code> 用于编写业务逻辑层，可选，建议使用，具体参见 <a href="https://eggjs.org/zh-cn/basics/service.html">Service</a>。</li><li><code>app/middleware/**</code> 用于编写中间件，可选，具体参见 <a href="https://eggjs.org/zh-cn/basics/middleware.html">Middleware</a>。</li><li><code>app/public/**</code> 用于放置静态资源，可选，具体参见内置插件 <a href="https://github.com/eggjs/egg-static">egg-static</a>。</li><li><code>app/extend/**</code> 用于框架的扩展，可选，具体参见<a href="https://eggjs.org/zh-cn/basics/extend.html">框架扩展</a>。</li><li><code>config/config.&#123;env&#125;.js</code> 用于编写配置文件，具体参见<a href="https://eggjs.org/zh-cn/basics/config.html">配置</a>。</li><li><code>config/plugin.js</code> 用于配置需要加载的插件，具体参见<a href="https://eggjs.org/zh-cn/basics/plugin.html">插件</a>。</li><li><code>test/**</code> 用于单元测试，具体参见<a href="https://eggjs.org/zh-cn/core/unittest.html">单元测试</a>。</li><li><code>app.js</code> 和 <code>agent.js</code> 用于自定义启动时的初始化工作，可选，具体参见<a href="https://eggjs.org/zh-cn/basics/app-start.html">启动自定义</a>。关于<code>agent.js</code>的作用参见<a href="https://eggjs.org/zh-cn/core/cluster-and-ipc.html#agent-机制">Agent机制</a>。</li></ul><p>由内置插件约定的目录：</p><ul><li><code>app/public/**</code> 用于放置静态资源，可选，具体参见内置插件 <a href="https://github.com/eggjs/egg-static">egg-static</a>。</li><li><code>app/schedule/**</code> 用于定时任务，可选，具体参见<a href="https://eggjs.org/zh-cn/basics/schedule.html">定时任务</a>。</li></ul><p><strong>若需自定义自己的目录规范，参见 <a href="https://eggjs.org/zh-cn/advanced/loader.html">Loader API</a></strong></p><ul><li><code>app/view/**</code> 用于放置模板文件，可选，由模板插件约定，具体参见<a href="https://eggjs.org/zh-cn/core/view.html">模板渲染</a>。</li><li><code>app/model/**</code> 用于放置领域模型，可选，由领域类相关插件约定，如 <a href="https://github.com/eggjs/egg-sequelize">egg-sequelize</a>。</li></ul><blockquote><p>使用 eggjs时需要重点注意的两个目录，<strong>app</strong> （工作目录，业务逻辑）和<strong>config</strong>（项目配置）</p></blockquote><h2 id="eggjs使用"><a href="#eggjs使用" class="headerlink" title="eggjs使用"></a>eggjs使用</h2><ol><li>路由 Router ：<strong>app/router.js</strong>  匹配请求URL与控制器Controller的对应关系。</li><li>控制器 Controller：在 <strong>app/controller</strong> 目录下可以根据 请求 作出不同的响应。</li><li>服务 Service：在复杂业务场景下用于做业务逻辑封装的一个抽象层，提供这个抽象有以下几个好处：<ol><li>保持 Controller 中的逻辑更加简洁。</li><li>保持业务逻辑的独立性，抽象出来的 Service 可以被多个 Controller 重复调用。</li><li>将逻辑和展现分离，更容易编写测试用例，测试用例的编写具体可以查看这里。</li></ol></li></ol><h3 id="post-get"><a href="#post-get" class="headerlink" title="post/get"></a>post/get</h3><p>在路由配置文件<code>app\router.js</code> 中可以通过  <strong>router</strong> 对象设置接收客户端的get或post请求。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app\router.js</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="function"><span class="params">app</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; router, controller &#125; = app;</span><br><span class="line">  router.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, controller.<span class="property">home</span>.<span class="property">index</span>);</span><br><span class="line">  router.<span class="title function_">post</span>(<span class="string">&#x27;/pd&#x27;</span>,koaBody,controller.<span class="property">home</span>.<span class="property">postdemo</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><ol><li><code>router.get()</code> <code>router.post()</code> 只能接收对应的请求方式。</li><li><code>get()</code>/<code>post()</code>中两个参数第一个参数为 url路径规则， 第二个参数 <code>controller.home.index</code> 则对应  <code>controller/home.js</code> 中 <strong>index</strong> 方法。</li></ol></blockquote><p>当路由规则匹配到在 <strong>controller</strong> 中所对应的方法后，就可以在这个方法中根据请求者的参数作出相应的响应。</p><ol><li><p>get 请求时获取参数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; ctx &#125; = <span class="variable language_">this</span>;</span><br><span class="line"><span class="comment">//获取 get 请求参数</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ctx.<span class="property">query</span>)</span><br></pre></td></tr></table></figure></li><li><p>post请求时  需要通过 中间件 <strong> koa-body</strong> 否则不能正常获取到post请求参数，可参考后面 <em>koa-body 中间件配置</em></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; ctx &#125; = <span class="variable language_">this</span>;</span><br><span class="line"><span class="comment">// 获取post请求的 请求参数</span></span><br><span class="line"><span class="keyword">const</span> param = ctx.<span class="property">request</span>.<span class="property">body</span></span><br></pre></td></tr></table></figure></li></ol><p>在 controller 中需要返回必须返回数据给调用者，否则程序将出错 返回数据 可以通过  <code>ctx.body</code></p><h2 id="eggjs常用设置"><a href="#eggjs常用设置" class="headerlink" title="eggjs常用设置"></a>eggjs常用设置</h2><h3 id="端口设置"><a href="#端口设置" class="headerlink" title="端口设置"></a>端口设置</h3><ol><li><p>在 <code>config\config.default.js</code> 文件中设置IP和端口</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// config\config.default.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="function"><span class="params">appInfo</span> =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">  config.<span class="property">cluster</span> = &#123;</span><br><span class="line">    <span class="attr">listen</span>: &#123;</span><br><span class="line">      <span class="attr">hostname</span>: <span class="string">&#x27;192.168.1.8&#x27;</span>, <span class="comment">//也就是“localhost”,不能在前面添加协议</span></span><br><span class="line">      <span class="attr">port</span>: <span class="number">3000</span>  <span class="comment">//默认值是7001</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    ...config,</span><br><span class="line">    ...userConfig,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><h3 id="跨域设置"><a href="#跨域设置" class="headerlink" title="跨域设置"></a>跨域设置</h3><ol><li><p>安装跨域所依赖的插件 egg-cors</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;egg-cors&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.2.3&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure></li><li><p>开启 egg-cors </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//打开文件 ...\config\plugin.js</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line"> <span class="comment">//使能插件</span></span><br><span class="line">  <span class="attr">cors</span>: &#123;</span><br><span class="line">    <span class="attr">enable</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">package</span>: <span class="string">&#x27;egg-cors&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><ol><li><p>配置egg-cors插件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// config\config.default.js</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="function"><span class="params">appInfo</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">/***************设置可以跨域 Start*****************/</span></span><br><span class="line">  config.<span class="property">security</span> = &#123;</span><br><span class="line">    <span class="attr">csrf</span>: &#123;</span><br><span class="line">      <span class="attr">enable</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">csrf</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">domainWhiteList</span>: [<span class="string">&#x27;*&#x27;</span>]  <span class="comment">//白名单</span></span><br><span class="line">  &#125;;</span><br><span class="line">  config.<span class="property">cors</span> = &#123;</span><br><span class="line">    <span class="attr">origin</span>: <span class="string">&#x27;*&#x27;</span>,</span><br><span class="line">    <span class="attr">allowMethods</span>: <span class="string">&#x27;GET,HEAD,PUT,POST,DELETE,PATCH,OPTIONS&#x27;</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">/***************设置可以跨域 end*****************/</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    ...config,</span><br><span class="line">    ...userConfig,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ol><h3 id="koa-body-中间件使用"><a href="#koa-body-中间件使用" class="headerlink" title="koa-body 中间件使用"></a>koa-body 中间件使用</h3><ol><li><p>安装插件 koa-body</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;koa-body&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.2.0&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure></li></ol><ol><li><p>在 <em>…\app\router.js</em> 路由文件中配置 koa-body 中间件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//app\router.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//中间件 支持post请求获取参数</span></span><br><span class="line"><span class="keyword">const</span> koaBody = <span class="built_in">require</span>(<span class="string">&#x27;koa-body&#x27;</span>)(&#123;</span><br><span class="line">  <span class="attr">multipart</span>: <span class="literal">true</span>,  <span class="comment">// 允许上传多个文件</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="function"><span class="params">app</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; router, controller &#125; = app;</span><br><span class="line">  <span class="comment">//配置post 请求方式支持中间件</span></span><br><span class="line">  router.<span class="title function_">post</span>(<span class="string">&#x27;/&#x27;</span>, koaBody ,controller.<span class="property">home</span>.<span class="property">index</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p>在控制器Controller中获取 post 请求参数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">HomeController</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Controller</span> &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">index</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; ctx &#125; = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="comment">// 获取post请求的 请求参数</span></span><br><span class="line">    <span class="keyword">const</span> param = ctx.<span class="property">request</span>.<span class="property">body</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(param)</span><br><span class="line">    </span><br><span class="line">    ctx.<span class="property">body</span> = <span class="string">&#x27;hi, egg&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h3><ol><li><p>安装 插件</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;egg-mysql&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.0.0&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure></li><li><p>开启 egg-mysql </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//config\plugin.js</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 开启 egg-mysql</span></span><br><span class="line">  <span class="attr">mysql</span>: &#123;</span><br><span class="line">    <span class="attr">enable</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">package</span>: <span class="string">&#x27;egg-mysql&#x27;</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>配置mysql </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//config\config.default.js</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="function"><span class="params">appInfo</span> =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 配置egg-mysql </span></span><br><span class="line">  config.<span class="property">mysql</span> = &#123;</span><br><span class="line">    <span class="attr">client</span>: &#123;</span><br><span class="line">      <span class="comment">// host</span></span><br><span class="line">      <span class="attr">host</span>: <span class="string">&#x27;192.168.1.8&#x27;</span>,</span><br><span class="line">      <span class="comment">// 端口号</span></span><br><span class="line">      <span class="attr">port</span>: <span class="string">&#x27;3306&#x27;</span>,</span><br><span class="line">      <span class="comment">// 用户名</span></span><br><span class="line">      <span class="attr">user</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">      <span class="comment">// 密码</span></span><br><span class="line">      <span class="attr">password</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">      <span class="comment">// 数据库名</span></span><br><span class="line">      <span class="attr">database</span>: <span class="string">&#x27;mydb&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 是否加载到 app 上，默认开启</span></span><br><span class="line">    <span class="attr">app</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// 是否加载到 agent 上，默认关闭</span></span><br><span class="line">    <span class="attr">agent</span>: <span class="literal">false</span>,</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    ...config,</span><br><span class="line">    ...userConfig,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol></li></ol><ol><li><p>设置 mysql  可以远程连接</p><ol><li><p>cmd 打开命令行窗口 进入 mysql</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure></li><li><p>进入要远程的数据库 <code>use mydb</code></p></li><li><p>创建远程访问用户</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRANT ALL PRIVILEGES ON *.* TO &#x27;root&#x27;@&#x27;%&#x27;IDENTIFIED BY &#x27;123456&#x27; WITH GRANT OPTION;</span><br></pre></td></tr></table></figure><blockquote><p>root 是用户名， 123456 是密码根据需要更改</p></blockquote></li><li><p>更新权限</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flush privileges;</span><br></pre></td></tr></table></figure></li><li><p>可以远程访问mysql 了</p></li></ol></li></ol><h3 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h3><ol><li>安装 插件 <code>npm install fs-extra</code><ol><li><a href="//https://github.com/jprichardson/node-fs-extra">node-fs-extra</a></li></ol></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> fse = <span class="built_in">require</span>(<span class="string">&#x27;fs-extra&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Controller</span> = <span class="built_in">require</span>(<span class="string">&#x27;egg&#x27;</span>).<span class="property">Controller</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Upload</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Controller</span> &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">index</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; ctx &#125; = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="comment">//获取上传的文件</span></span><br><span class="line">    <span class="keyword">const</span> &#123; name, <span class="attr">path</span>: filePath, size, type &#125; = ctx.<span class="property">request</span>.<span class="property">files</span>.<span class="property">pic</span></span><br><span class="line">    <span class="keyword">const</span> dest = path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;../public/upload&#x27;</span>, name) <span class="comment">// 目标目录，没有没有这个文件夹会自动创建</span></span><br><span class="line">    <span class="keyword">await</span> fse.<span class="title function_">move</span>(filePath, dest) <span class="comment">// 移动文件</span></span><br><span class="line"></span><br><span class="line">    ctx.<span class="property">body</span> = &#123;</span><br><span class="line">      name, <span class="comment">// 文件名称</span></span><br><span class="line">      filePath, <span class="comment">// 临时路径</span></span><br><span class="line">      size, <span class="comment">// 文件大小</span></span><br><span class="line">      type <span class="comment">// 文件类型</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title class_">Upload</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">eggjs</summary>
    
    
    
    <category term="前端" scheme="https://tom9527c.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="前端" scheme="https://tom9527c.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="eggjs" scheme="https://tom9527c.github.io/tags/eggjs/"/>
    
    <category term="mysql" scheme="https://tom9527c.github.io/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>NPM</title>
    <link href="https://tom9527c.github.io/posts/379319a1.html"/>
    <id>https://tom9527c.github.io/posts/379319a1.html</id>
    <published>2023-09-15T17:20:16.000Z</published>
    <updated>2024-07-05T10:05:26.614Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="NPM"><a href="#NPM" class="headerlink" title="NPM"></a>NPM</h2><p>NPM是随同 Node.js 一起安装的包管理工具：</p><ul><li>允许用户从NPM服务器下载别人编写的第三方包到本地使用。</li><li>允许用户从NPM服务器下载并安装别人编写的命令行程序到本地使用。</li><li>允许用户将自己编写的包或命令行程序上传到NPM服务器供别人使用。</li></ul><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ol><li><p><a href="https://nodejs.org/zh-cn/download/">下载地址：nodejs.org/zh-cn/download/</a></p></li><li><p>检查安装是否成功：</p><ul><li><p>运行（win + r）窗口 <code>cmd</code> 打开命令行窗口。</p></li><li><p>命令行窗口输入命令：<code>node --version</code> 查看到当前node.js安装的版本信息。</p></li><li><p>命令行窗口输入命令：<code>npm --version</code> 查看到当前npm 安装的版本信息。</p><p><img src="data:image/png;base64,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" alt=""></p></li></ul></li></ol><h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><h4 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h4><p>package.json 配置文件可以设置当前工程的描述信息以及所用到的依赖包。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;my-work&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A Vue.js project&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dfdf &lt;123@456.com&gt;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;private&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack-dev-server --inline --progress --config build/webpack.dev.conf.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npm run dev&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node build/build.js&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;vue&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.5.2&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;vue-router&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.3.4&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;vuex&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.4.0&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;autoprefixer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^7.1.2&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;babel-core&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^6.22.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;babel-helper-vue-jsx-merge-props&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.0.3&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;babel-loader&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^7.1.1&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>package.json 文件是一个JSON格式的文件，必须严格的json语法。</p><ol><li>属性名必须使用 <strong>双引号</strong> “”</li><li>最后一个子元素后不允许写 <strong>逗号</strong> ，</li><li>不允许在文件中添加与 json 无关的字符，如注释等</li><li>package.json 文件可以使用命令 <code>npm init --yes</code>生成</li></ol></blockquote><p><code>dependencies</code> 表示项目依赖（整个项目运行过程中都需要），<code>devDependencies</code>表示开发依赖（只有在开发过程中需要）。</p><p>添加包的版本规则：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;vue&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.5.2&quot;</span><span class="punctuation">,</span> <span class="comment">//与最新主要版本（1.x.x）匹配</span></span><br><span class="line">    <span class="attr">&quot;vue-router&quot;</span><span class="punctuation">:</span><span class="string">&quot;~3.3.4&quot;</span><span class="punctuation">,</span> <span class="comment">////与最新次要版本（1.2.x）匹配</span></span><br><span class="line">    <span class="attr">&quot;vuex&quot;</span><span class="punctuation">:</span> <span class="string">&quot;3.4.0&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><h4 id="package-lock-json"><a href="#package-lock-json" class="headerlink" title="package-lock.json"></a>package-lock.json</h4><p><code>package.json</code> 是指定的包存在版本匹配问题，具体安装包的版本信息将在 <code>package-lock.json</code>文件中进行锁定。该文件在 <code>npm install</code>安装包时自动生成并修改，用户不需要手动修改。</p><h3 id="CLI命令"><a href="#CLI命令" class="headerlink" title="CLI命令"></a>CLI命令</h3><ol><li><p><code>npm init</code> 在当前位置初始化包配置文件 <code>package.json</code>，该命令会提示你输入项目名称，项目描述、项目版本待。</p></li><li><p><code>npm init --yes</code>  在当前位置初始化一个默认的 <code>package.json</code>。</p><blockquote><p>别名：<code>npm init -y</code></p></blockquote></li><li><p><code>npm install</code>    安装 <code>package.json</code>文件中的指定的包。</p><blockquote><p>别名：<code>npm i</code> 或 <code>npm add</code></p></blockquote></li><li><p><code>npm install &lt;packageName&gt;</code> 安装指定名称的包。例如安装jquery <code>npm install jquery</code>,当安装完成后会在当前目录下的<code>node_modules</code>（如果没有会自动创建·<code>node_modules</code>）的目录中就会包一个名称jquery的目录。</p></li><li><p><code>npm install &lt;packageName&gt; -g</code> -g 表示全局安装。全局安装的包会被放在 <em>C:\Users\&lt;当前用户..&gt;\AppData\Roaming\npm</em></p></li><li><p><code>npm install &lt;packageName@version&gt;</code>安装指定版本号的包：例如：<code>npm install jquery@3.1.0</code></p></li><li><p><code>npm install &lt;packageName&gt; --save</code> —save 参数表示安装包成功后，并将包信息自动添加到package.json文件 dependencies(项目依赖) 项中。</p></li><li><p><code>npm install &lt;packageName&gt; --save-dev</code> —save-dev 参数表示将包信息自动添加到package.json文件 的devDependencies（开发依赖）中。</p></li><li><p><code>npm uninstall &lt;packageName&gt;</code> — 卸载指定的包。</p><blockquote><p>别名：<code>npm remove</code> , <code>npm rm</code> , <code>npm un</code></p></blockquote></li><li><p><code>npm list</code> 查看当前项目中安装的所有包。</p><blockquote><p>别名：<code>npm ls</code> , <code>npm la</code> , <code>npm ll</code></p></blockquote></li><li><p><code>npm list -g</code> 查看所有全局安装的包。</p></li><li><p><code>npm view &lt;packageName&gt;</code> 查看当前包的信息</p><blockquote><ul><li>别名：<code>npm info</code> , <code>npm show</code> , <code>npm v</code></li><li>不指定包名的话则输入当前项目信息</li></ul></blockquote></li><li><p><code>npm view &lt;packageName&gt; versions --json</code> 加入参数 —json可以将所的所有版本都输出</p></li><li><p><code>npm view &lt;packageName&gt; dependencies</code> 查看指定包的依赖。</p></li><li><p><code>npm config list</code> 查看 npm 配置信息</p></li><li><p><code>npm config list -l</code> 查看 npm 详细配置信息</p></li><li><p><code>npm config set registry &lt;URL&gt;</code> 更改镜像源地址：</p><blockquote><ul><li>设置淘宝镜像源: <code>npm config set registry http://registry.npm.taobao.org</code></li><li>默认镜像源：<code>npm config set registry https://registry.npmjs.org</code></li></ul></blockquote></li><li><p><code>npm help</code> 获取帮助信息，例如：<code>npm help ls</code>查看 ls命令的帮助文档</p></li></ol><p><a href="https://docs.npmjs.com/cli-documentation/">cli-命令参数文档</a></p><p><a href="https://www.npmjs.com/">npmjs官方网站</a></p><h2 id="yarn"><a href="#yarn" class="headerlink" title="yarn"></a>yarn</h2><p>yarn也是目前比较流行的一款包管理工具。npm与yarn 选择一个使用即可。</p><p><a href="https://yarn.bootcss.com/">yarn使用文档</a></p><h2 id="DOS-命令"><a href="#DOS-命令" class="headerlink" title="DOS 命令"></a>DOS 命令</h2><p>npm 及 yarn的操作都是在命令行中进行的。需要掌握几个常用的dos命令</p><ol><li><p><code>ping &lt;ipAddr&gt;</code> 测试网络连接状况以及信息包发送和接收状况非常有用</p><ul><li><code>-t</code> 表示将不间断向目标IP发送数据包，直到我们强迫其停止</li></ul></li><li><p><code>ipconfig</code> 查看当前的网络信息</p></li><li><p><code>dir</code>  查看当前目录下所有目录及文件</p></li><li><p>windows 系统中磁盘切换：盘符: + <code>enter</code>  </p></li><li><p><code>cd &lt;url&gt;</code> 进入指定目录</p><blockquote><ol><li><code>cd .</code> 进入当前目录</li><li><code>cd ..</code> 进入上一级目录</li><li>在输入目录路径时可以使用 <code>tab</code>键补全</li></ol></blockquote></li><li><p><code>cls</code> 清屏</p></li><li><p>结束当前命令：<code>ctrl</code> + <code>c</code></p></li><li><p>上下箭头可调出历史命令</p></li></ol>]]></content>
    
    
    <summary type="html">NPM</summary>
    
    
    
    <category term="前端" scheme="https://tom9527c.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="前端" scheme="https://tom9527c.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="NPM" scheme="https://tom9527c.github.io/tags/NPM/"/>
    
    <category term="包管理工具" scheme="https://tom9527c.github.io/tags/%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/"/>
    
    <category term="node" scheme="https://tom9527c.github.io/tags/node/"/>
    
    <category term="yarn" scheme="https://tom9527c.github.io/tags/yarn/"/>
    
    <category term="DOS 命令" scheme="https://tom9527c.github.io/tags/DOS-%E5%91%BD%E4%BB%A4/"/>
    
  </entry>
  
  <entry>
    <title>Webpack</title>
    <link href="https://tom9527c.github.io/posts/764f33bc.html"/>
    <id>https://tom9527c.github.io/posts/764f33bc.html</id>
    <published>2023-09-15T17:11:29.000Z</published>
    <updated>2024-07-05T10:06:11.707Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="webpack介绍"><a href="#webpack介绍" class="headerlink" title="webpack介绍"></a>webpack介绍</h2><p><em>webpack</em> 是一个现代 JavaScript 应用程序的<em>静态模块打包器(module bundler)</em>。当 webpack 处理应用程序时，它会递归地构建一个<em>依赖关系图(dependency graph)</em>，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 <em>bundle</em>。</p><p><a href="https://www.webpackjs.com/">webpack中文网站</a></p><blockquote><p>使用webpack前需要先安装 node.js</p></blockquote><h3 id="webpack-模块"><a href="#webpack-模块" class="headerlink" title="webpack 模块"></a>webpack 模块</h3><p>在模块化编程中，开发者将程序分解成离散功能块，并称之为<strong>模块</strong>。</p><p>webpack 模块能够以各种方式表达它们的依赖关系，几个例子如下：</p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import">ES2015 <code>import</code></a> 语句</li><li><a href="http://www.commonjs.org/specs/modules/1.0/">CommonJS</a> <code>require()</code> 语句</li><li><a href="https://github.com/amdjs/amdjs-api/blob/master/AMD.md">AMD</a> <code>define</code> 和 <code>require</code> 语句</li><li><strong>css/sass/less</strong> 文件中的 <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@import"><code>@import</code> 语句</a>。</li><li>样式(<code>url(...)</code>)或 HTML 文件(<code>&lt;img src=...&gt;</code>)中的图片链接(image url)</li></ul><p>webpack 通过 <strong>loader</strong> 可以支持各种语言和预处理器编写模块。<strong>loader</strong> 描述了 webpack <strong>如何</strong>处理 非 JavaScript(non-JavaScript) <em>模块</em>，并且在 <strong>bundle</strong> 中引入这些 <strong>依赖</strong>。 webpack 社区已经为各种流行语言和语言处理器构建了 <strong>loader</strong></p><h3 id="核心概念"><a href="#核心概念" class="headerlink" title="核心概念"></a>核心概念</h3><ul><li><p>入口(entry)</p><ul><li><strong>入口起点(entry point)</strong> 指示 webpack 应该使用哪个模块，来作为构建其内部<em>依赖图</em>的开始。进入入口起点后，webpack 会找出有哪些模块和库是入口起点（直接和间接）依赖的。</li></ul></li><li><p>输出(output)</p><ul><li><strong>output</strong> 属性告诉 webpack 在哪里输出它所创建的 <strong>bundles</strong>，以及如何命名这些文件，默认值为 <code>./dist</code>。</li></ul></li><li><p>loader</p><ul><li><strong>loader</strong> 让 webpack 能够去处理那些非 JavaScript 文件（webpack 自身只理解 JavaScript）。loader 可以将所有类型的文件转换为 webpack 能够处理的有效<a href="https://www.webpackjs.com/concepts/modules">模块</a>，然后你就可以利用 webpack 的打包能力，对它们进行处理。</li></ul></li><li><p>插件(plugins)</p><ul><li>插件的范围包括，从打包优化和压缩，一直到重新定义环境中的变量。<a href="https://www.webpackjs.com/api/plugins">插件接口</a>功能极其强大，可以用来处理各种各样的任务。</li></ul></li></ul><h2 id="webpack4-0使用示例"><a href="#webpack4-0使用示例" class="headerlink" title="webpack4.0使用示例"></a>webpack4.0使用示例</h2><h3 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h3><ol><li>修改内容浏览器自动刷新</li><li>es6转es5</li><li>支持 <strong>less</strong>,<strong>scss</strong> 扩展语言</li><li><strong>less,suss,css</strong> 抽取为独立文件</li><li><strong>js,css</strong>压缩</li><li>可生成<strong>source-map</strong>文件</li><li>目录拷贝</li><li>引入第三方库 <strong>jquery</strong></li></ol><h3 id="CLI"><a href="#CLI" class="headerlink" title="CLI"></a>CLI</h3><ol><li>启动：<code>npm start</code></li><li>打包：<code>npm run build</code></li></ol><h3 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h3><ul><li><code>img</code>  <em>存储项目要中使用的图片</em></li><li><code>src</code> <em>工作目录</em><ul><li><code>index</code> <ul><li><code>index.html</code></li><li><code>index.js</code></li><li><code>index.css</code></li><li><code>index.less</code></li><li><code>index.scss</code></li></ul></li></ul></li><li><code>package.json</code> </li><li><code>webpack.common.js</code> <em>主配置文件</em></li><li><code>webpack.dev.js</code> <em>开发环境配置文件</em></li><li><code>webpack.prod.js</code> <em>生产环境配置文件</em></li></ul><h4 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;mybook&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;private&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@babel/runtime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^7.0.0-beta.51&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;jquery&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.3.1&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@babel/core&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^7.0.0-beta.51&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@babel/plugin-transform-runtime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^7.0.0-beta.51&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@babel/preset-env&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^7.0.0-beta.51&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;babel-loader&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^8.0.0-beta.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;babel-preset-env&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.7.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;clean-webpack-plugin&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.1.19&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;copy-webpack-plugin&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.5.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;css-loader&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.28.11&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;extract-text-webpack-plugin&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.0.0-beta.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;file-loader&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.1.11&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;html-webpack-plugin&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;less&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.9.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;less-loader&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^5.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;node-sass&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.12.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;sass-loader&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^7.1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;style-loader&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.21.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;uglifyjs-webpack-plugin&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.1.2&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;webpack&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.35.2&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;webpack-cli&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.0.6&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;webpack-dev-server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.1.4&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;webpack-merge&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.1.3&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack --config webpack.prod.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack-dev-server --open --config webpack.dev.js&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;keywords&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ISC&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="webpack-common-js"><a href="#webpack-common-js" class="headerlink" title="webpack.common.js"></a>webpack.common.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.common.js 通用配置</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>); <span class="comment">//生成html</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ExtractTextPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;extract-text-webpack-plugin&quot;</span>); <span class="comment">//将css作为单独文件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CopyWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;copy-webpack-plugin&#x27;</span>); <span class="comment">//复制文件</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="comment">// 入口</span></span><br><span class="line">    <span class="attr">entry</span>: &#123;</span><br><span class="line">        <span class="attr">index</span>: <span class="string">&#x27;./src/index/index.js&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 出口</span></span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;src/[name].[chunkhash].js&#x27;</span>,</span><br><span class="line">        <span class="attr">publicPath</span>:<span class="string">&#x27;./&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// loader 配置</span></span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">            &#123; <span class="comment">// 配置 babel-loader</span></span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">                <span class="attr">exclude</span>: <span class="regexp">/(node_modules|bower_components)/</span>, <span class="comment">//此模块中的js不转码</span></span><br><span class="line">                <span class="attr">use</span>: &#123;</span><br><span class="line">                    <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">                    <span class="attr">options</span>: &#123;</span><br><span class="line">                        <span class="attr">presets</span>: [<span class="string">&#x27;@babel/preset-env&#x27;</span>],</span><br><span class="line">                        <span class="attr">cacheDirectory</span>: <span class="literal">true</span>, <span class="comment">//缓存转换结果以提高执行效率</span></span><br><span class="line">                        <span class="attr">plugins</span>: [<span class="string">&quot;@babel/plugin-transform-runtime&quot;</span>]</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123; <span class="comment">//配置 css-loader</span></span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">                <span class="attr">use</span>: <span class="title class_">ExtractTextPlugin</span>.<span class="title function_">extract</span>(&#123;</span><br><span class="line">                    <span class="attr">fallback</span>: <span class="string">&quot;style-loader&quot;</span>,</span><br><span class="line">                    <span class="attr">use</span>: [&#123;</span><br><span class="line">                        <span class="attr">loader</span>: <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">                        <span class="attr">options</span>: &#123;</span><br><span class="line">                            <span class="attr">minimize</span>: <span class="literal">true</span>, <span class="comment">//压缩css</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;]</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;   <span class="comment">//配置 less-loader</span></span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">                <span class="attr">use</span>: <span class="title class_">ExtractTextPlugin</span>.<span class="title function_">extract</span>(&#123;</span><br><span class="line">                    <span class="attr">fallback</span>: <span class="string">&quot;style-loader&quot;</span>,</span><br><span class="line">                    <span class="attr">use</span>: [&#123;</span><br><span class="line">                        <span class="attr">loader</span>: <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">                        <span class="attr">options</span>: &#123;</span><br><span class="line">                            <span class="attr">sourceMap</span>: <span class="literal">true</span>,</span><br><span class="line">                            <span class="attr">minimize</span>: <span class="literal">true</span>, <span class="comment">//压缩css</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;, &#123;</span><br><span class="line">                        <span class="attr">loader</span>: <span class="string">&quot;less-loader&quot;</span></span><br><span class="line">                    &#125;],</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;,</span><br><span class="line"></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">                <span class="attr">use</span>: <span class="title class_">ExtractTextPlugin</span>.<span class="title function_">extract</span>(&#123;</span><br><span class="line">                    <span class="attr">fallback</span>: <span class="string">&quot;style-loader&quot;</span>,</span><br><span class="line">                    <span class="attr">use</span>: [&#123;</span><br><span class="line">                        <span class="attr">loader</span>: <span class="string">&quot;css-loader&quot;</span>, <span class="attr">options</span>: &#123;</span><br><span class="line">                            <span class="attr">sourceMap</span>: <span class="literal">true</span>,</span><br><span class="line">                            <span class="attr">minimize</span>: <span class="literal">true</span>, <span class="comment">//压缩css</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;, &#123;</span><br><span class="line">                        <span class="attr">loader</span>: <span class="string">&quot;sass-loader&quot;</span>, <span class="attr">options</span>: &#123;</span><br><span class="line">                            <span class="attr">sourceMap</span>: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;]</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 插件配置</span></span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="comment">// 自动生成HTML文件,可以生成多个</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">filename</span>: <span class="string">&#x27;index.html&#x27;</span>,</span><br><span class="line">            <span class="attr">template</span>: <span class="string">&#x27;./src/index/index.html&#x27;</span>, <span class="comment">//指定html模板</span></span><br><span class="line">            <span class="attr">chunks</span>: [<span class="string">&#x27;index&#x27;</span>], <span class="comment">//指定要包含那些打包后的js</span></span><br><span class="line">            <span class="attr">hash</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">inject</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">minify</span>: &#123;</span><br><span class="line">                <span class="attr">removeComments</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">collapseWhitespace</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">removeAttributeQuotes</span>: <span class="literal">true</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;),</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 将js引入的css分离出然后注入到html页面中</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">ExtractTextPlugin</span>(<span class="string">&quot;css/[name].[chunkhash].css&quot;</span>),</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 拷贝插件，可以设置多个参数</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">CopyWebpackPlugin</span>([</span><br><span class="line">            <span class="comment">// 复制图片目录</span></span><br><span class="line">            &#123; </span><br><span class="line">                <span class="attr">from</span>: <span class="string">&#x27;./img&#x27;</span>,</span><br><span class="line">                <span class="attr">to</span>: <span class="string">&#x27;img&#x27;</span></span><br><span class="line">            &#125;, </span><br><span class="line">            <span class="comment">//  拷贝字体图片库</span></span><br><span class="line">            <span class="comment">// &#123;from: &#x27;./iconfont&#x27;,to: &#x27;iconfont&#x27;&#125;  </span></span><br><span class="line">        ]),</span><br><span class="line"></span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="webpack-dev-js"><a href="#webpack-dev-js" class="headerlink" title="webpack.dev.js"></a>webpack.dev.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.dev.js</span></span><br><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">&#x27;webpack-merge&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> common = <span class="built_in">require</span>(<span class="string">&#x27;./webpack.common.js&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">merge</span>(common, &#123;</span><br><span class="line">    <span class="comment">// devtool: &#x27;inline-source-map&#x27;,</span></span><br><span class="line">    <span class="attr">devServer</span>: &#123;</span><br><span class="line">        <span class="attr">stats</span>: <span class="string">&quot;errors-only&quot;</span>, <span class="comment">//信息输出，只有出错时输出</span></span><br><span class="line">        <span class="attr">contentBase</span>: <span class="string">&#x27;./dist&#x27;</span>,</span><br><span class="line">        <span class="comment">// compress: true, // 一切服务都启用gzip 压缩</span></span><br><span class="line">        <span class="attr">port</span>: <span class="number">8090</span>, <span class="comment">//端口号</span></span><br><span class="line">        <span class="comment">// host: &quot;192.168.1.6&quot;, //设置IP地址</span></span><br><span class="line">        <span class="attr">publicPath</span>:<span class="string">&#x27;/&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="webpack-prod-js"><a href="#webpack-prod-js" class="headerlink" title="webpack.prod.js"></a>webpack.prod.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.prod.js</span></span><br><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">&#x27;webpack-merge&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">UglifyJSPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;uglifyjs-webpack-plugin&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CleanWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>); <span class="comment">//清空目录</span></span><br><span class="line"><span class="keyword">const</span> common = <span class="built_in">require</span>(<span class="string">&#x27;./webpack.common.js&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">merge</span>(common, &#123;</span><br><span class="line">    <span class="attr">devtool</span>: <span class="string">&#x27;source-map&#x27;</span>, <span class="comment">//开启生成代码映射文件功能</span></span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">UglifyJSPlugin</span>(&#123;<span class="attr">sourceMap</span>: <span class="literal">true</span>&#125;),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">CleanWebpackPlugin</span>([<span class="string">&#x27;dist&#x27;</span>]), <span class="comment">//清理 dist 目录</span></span><br><span class="line">    ]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><ol><li><p>在项目根目录下创建文件 <code>package.json</code> ,<code>webpack.common.js</code>, <code>webpack.dev.js</code> ,<code>webpack.prod.js</code>并复制其内容。</p></li><li><p>项目根目录下新建: </p><ul><li><p><code>src/index/index.html</code></p></li><li><p><code>src/index/index.css</code></p></li><li><p><code>src/index/index.less</code></p></li><li><p><code>src/index/index.scss</code></p></li><li><p><code>src/index/index.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入依赖的样式模块</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.css&#x27;</span> </span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.less&#x27;</span> </span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.scss&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入第三方库jquery</span></span><br><span class="line"><span class="keyword">import</span> $ <span class="keyword">from</span> <span class="string">&#x27;jquery&#x27;</span></span><br></pre></td></tr></table></figure><blockquote><p>样式文件作为 js 文件的依赖，需要在 <code>index.js</code>文件中引入。</p></blockquote></li></ul></li><li><p>进入DOS命令行，在项目根目录下执行 <code>npm install</code> ,安装当前项目所需要的包。</p></li><li><p><code>npm start</code> 启动项目。</p></li></ol><h2 id="webpack-配置文件优化"><a href="#webpack-配置文件优化" class="headerlink" title="webpack 配置文件优化"></a>webpack 配置文件优化</h2><h3 id="webpack-common-js-1"><a href="#webpack-common-js-1" class="headerlink" title="webpack.common.js"></a>webpack.common.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.common.js 通用配置</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>); <span class="comment">//生成html</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ExtractTextPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;extract-text-webpack-plugin&quot;</span>); <span class="comment">//将css作为单独文件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CopyWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;copy-webpack-plugin&#x27;</span>); <span class="comment">//复制文件</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 页面配置</span></span><br><span class="line"><span class="keyword">let</span> config = &#123;</span><br><span class="line">    <span class="attr">publicDir</span>: [<span class="string">&#x27;image&#x27;</span>], <span class="comment">//公共目录 ,该目录中内容不需要编译, 会自动生成 并且添加到配置项</span></span><br><span class="line">    <span class="attr">less</span>: <span class="literal">true</span>, <span class="comment">//是否支持 less</span></span><br><span class="line">    <span class="attr">sass</span>: <span class="literal">false</span>, <span class="comment">//是否支持sass</span></span><br><span class="line">    <span class="comment">// 该配置的目录及文件如果不存在会自动生成</span></span><br><span class="line">    <span class="attr">page</span>: [ <span class="comment">//页面配置 ，所有内容在 src 目录下</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">dirName</span>: <span class="string">&#x27;index&#x27;</span>, <span class="comment">//目录名称，</span></span><br><span class="line">            <span class="attr">filsName</span>: <span class="string">&#x27;index&#x27;</span>, <span class="comment">//要生成的文件名称，html, js,css</span></span><br><span class="line">            <span class="attr">createLess</span>: <span class="literal">true</span>, <span class="comment">//生成less文件</span></span><br><span class="line">            <span class="attr">createScss</span>: <span class="literal">false</span>, <span class="comment">//生成scss文件</span></span><br><span class="line">        &#125;,</span><br><span class="line">        </span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> commonConfig = &#123;</span><br><span class="line">    <span class="comment">// 入口</span></span><br><span class="line">    <span class="attr">entry</span>: &#123;</span><br><span class="line">        <span class="comment">// index: &#x27;./src/index/index.js&#x27;,</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 出口</span></span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;src/[name].[chunkhash].js&#x27;</span>,</span><br><span class="line">        <span class="attr">publicPath</span>: <span class="string">&#x27;./&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// loader 配置</span></span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">            &#123; <span class="comment">// 配置 babel-loader</span></span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">                <span class="attr">exclude</span>: <span class="regexp">/(node_modules|bower_components)/</span>, <span class="comment">//此模块中的js不转码</span></span><br><span class="line">                <span class="attr">use</span>: &#123;</span><br><span class="line">                    <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">                    <span class="attr">options</span>: &#123;</span><br><span class="line">                        <span class="attr">presets</span>: [<span class="string">&#x27;@babel/preset-env&#x27;</span>],</span><br><span class="line">                        <span class="attr">cacheDirectory</span>: <span class="literal">true</span>, <span class="comment">//缓存转换结果以提高执行效率</span></span><br><span class="line">                        <span class="attr">plugins</span>: [<span class="string">&quot;@babel/plugin-transform-runtime&quot;</span>]</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123; <span class="comment">//配置 css-loader</span></span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">                <span class="attr">use</span>: <span class="title class_">ExtractTextPlugin</span>.<span class="title function_">extract</span>(&#123;</span><br><span class="line">                    <span class="attr">fallback</span>: <span class="string">&quot;style-loader&quot;</span>,</span><br><span class="line">                    <span class="attr">use</span>: [&#123;</span><br><span class="line">                        <span class="attr">loader</span>: <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">                        <span class="attr">options</span>: &#123;</span><br><span class="line">                            <span class="attr">minimize</span>: <span class="literal">true</span>, <span class="comment">//压缩css</span></span><br><span class="line">                            <span class="attr">sourceMap</span>: <span class="literal">true</span>,</span><br><span class="line">                            <span class="attr">url</span>: <span class="literal">false</span>,</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;]</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 插件配置</span></span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="comment">// 将 css 抽取为独立文件</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">ExtractTextPlugin</span>(<span class="string">&quot;css/[name].[chunkhash].css&quot;</span>),</span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化配置</span></span><br><span class="line"><span class="title function_">initConfig</span>(config)</span><br><span class="line"><span class="comment">// 读取配置参数并设置</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">initConfig</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="title function_">mkPageDir</span>(config.<span class="property">page</span>) <span class="comment">//创建页面目录及文件</span></span><br><span class="line">    <span class="title function_">publicDirSet</span>(config.<span class="property">publicDir</span>) <span class="comment">//生成公共目录并配置</span></span><br><span class="line">    <span class="comment">//开启 less sass的支持</span></span><br><span class="line">    <span class="title function_">lessAndSassSet</span>(&#123;</span><br><span class="line">        <span class="attr">less</span>: config.<span class="property">less</span>,</span><br><span class="line">        <span class="attr">sass</span>: config.<span class="property">sass</span></span><br><span class="line">    &#125;) <span class="comment">//设置是否支持 less sass</span></span><br><span class="line"></span><br><span class="line">    <span class="title function_">pageSet</span>(config.<span class="property">page</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 配置 less sass</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">lessAndSassSet</span>(<span class="params">set</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (set.<span class="property">less</span>) &#123;</span><br><span class="line">        commonConfig.<span class="property">module</span>.<span class="property">rules</span>.<span class="title function_">push</span>(</span><br><span class="line">            &#123;   <span class="comment">//配置 less-loader</span></span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">                <span class="attr">use</span>: <span class="title class_">ExtractTextPlugin</span>.<span class="title function_">extract</span>(&#123;</span><br><span class="line">                    <span class="attr">fallback</span>: <span class="string">&quot;style-loader&quot;</span>,</span><br><span class="line">                    <span class="attr">use</span>: [&#123;</span><br><span class="line">                        <span class="attr">loader</span>: <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">                        <span class="attr">options</span>: &#123;</span><br><span class="line">                            <span class="attr">sourceMap</span>: <span class="literal">true</span>,</span><br><span class="line">                            <span class="attr">minimize</span>: <span class="literal">true</span>, <span class="comment">//压缩css</span></span><br><span class="line">                            <span class="attr">url</span>: <span class="literal">false</span>,</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;, &#123;</span><br><span class="line">                        <span class="attr">loader</span>: <span class="string">&quot;less-loader&quot;</span></span><br><span class="line">                    &#125;],</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;,</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (set.<span class="property">sass</span>) &#123;</span><br><span class="line">        commonConfig.<span class="property">module</span>.<span class="property">rules</span>.<span class="title function_">push</span>(</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">                <span class="attr">use</span>: <span class="title class_">ExtractTextPlugin</span>.<span class="title function_">extract</span>(&#123;</span><br><span class="line">                    <span class="attr">fallback</span>: <span class="string">&quot;style-loader&quot;</span>,</span><br><span class="line">                    <span class="attr">use</span>: [&#123;</span><br><span class="line">                        <span class="attr">loader</span>: <span class="string">&quot;css-loader&quot;</span>, <span class="attr">options</span>: &#123;</span><br><span class="line">                            <span class="attr">sourceMap</span>: <span class="literal">true</span>,</span><br><span class="line">                            <span class="attr">minimize</span>: <span class="literal">true</span>, <span class="comment">//压缩css</span></span><br><span class="line">                            <span class="attr">url</span>: <span class="literal">false</span>,</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;, &#123;</span><br><span class="line">                        <span class="attr">loader</span>: <span class="string">&quot;sass-loader&quot;</span>, <span class="attr">options</span>: &#123;</span><br><span class="line">                            <span class="attr">sourceMap</span>: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;]</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;,</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 页面配置</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">pageSet</span>(<span class="params">page</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> val <span class="keyword">of</span> page) &#123;</span><br><span class="line">        commonConfig.<span class="property">entry</span>[val.<span class="property">filsName</span>] = <span class="string">`./src/<span class="subst">$&#123;val.dirName&#125;</span>/<span class="subst">$&#123;val.filsName&#125;</span>.js`</span></span><br><span class="line">        commonConfig.<span class="property">plugins</span>.<span class="title function_">push</span>(<span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">filename</span>: <span class="string">`<span class="subst">$&#123;val.filsName&#125;</span>.html`</span>,</span><br><span class="line">            <span class="attr">template</span>: <span class="string">`./src/<span class="subst">$&#123;val.dirName&#125;</span>/<span class="subst">$&#123;val.filsName&#125;</span>.html`</span>,</span><br><span class="line">            <span class="attr">chunks</span>: [val.<span class="property">filsName</span>],</span><br><span class="line">            <span class="attr">hash</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">inject</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">minify</span>: &#123;</span><br><span class="line">                <span class="attr">removeComments</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">collapseWhitespace</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">removeAttributeQuotes</span>: <span class="literal">true</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;))</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生成页面所需要文件</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">mkPageDir</span>(<span class="params">pageDir</span>) &#123;</span><br><span class="line">    <span class="comment">// 写入到html文件的模板内容</span></span><br><span class="line">    <span class="keyword">let</span> htmlCode = <span class="string">`&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">&lt;html lang=&quot;zh&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;head&gt;</span></span><br><span class="line"><span class="string">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;title&gt;Document&lt;/title&gt;</span></span><br><span class="line"><span class="string">&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;`</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; pageDir.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> fName = [</span><br><span class="line">            <span class="string">`src/<span class="subst">$&#123;pageDir[i].dirName&#125;</span>/<span class="subst">$&#123;pageDir[i].filsName&#125;</span>.html`</span>,</span><br><span class="line">            <span class="string">`src/<span class="subst">$&#123;pageDir[i].dirName&#125;</span>/<span class="subst">$&#123;pageDir[i].filsName&#125;</span>.css`</span>,</span><br><span class="line">            <span class="string">`src/<span class="subst">$&#123;pageDir[i].dirName&#125;</span>/<span class="subst">$&#123;pageDir[i].filsName&#125;</span>.js`</span>,</span><br><span class="line">        ]</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//检查目录是否存在</span></span><br><span class="line">            <span class="keyword">let</span> stats = fs.<span class="title function_">statSync</span>(<span class="string">`src/<span class="subst">$&#123;pageDir[i].dirName&#125;</span>`</span>)</span><br><span class="line">            <span class="keyword">if</span> (!stats.<span class="title function_">isDirectory</span>()) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`src/<span class="subst">$&#123;pageDir[i].dirName&#125;</span> 不是目录，请手动删除后再试`</span>)</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; fName.<span class="property">length</span>; j++) &#123;</span><br><span class="line">                <span class="comment">// 目录存在但文件缺少时，创建出缺少的文件</span></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    fs.<span class="title function_">accessSync</span>(fName[j], fs.<span class="property">constants</span>.<span class="property">R_OK</span> | fs.<span class="property">constants</span>.<span class="property">W_OK</span>)</span><br><span class="line">                &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">                    fs.<span class="title function_">writeFileSync</span>(fName[j], <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">                    <span class="comment">// 在html 中写入模板</span></span><br><span class="line">                    <span class="keyword">if</span>(<span class="regexp">/\.html/g</span>.<span class="title function_">test</span>(fName[j]))&#123;</span><br><span class="line">                        fs.<span class="title function_">appendFile</span>(fName[j], htmlCode, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">                            <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">                        &#125;);</span><br><span class="line">                        <span class="comment">// 将css 文件 引入到 js文件中</span></span><br><span class="line">                    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="regexp">/\.js/g</span>.<span class="title function_">test</span>(fName[j]))&#123; </span><br><span class="line">                        <span class="keyword">let</span> cssFile = <span class="string">`import  &#x27;./<span class="subst">$&#123;pageDir[i].filsName&#125;</span>.css&#x27;\r\n`</span></span><br><span class="line">                        fs.<span class="title function_">appendFile</span>(fName[j], cssFile, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">                            <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">                        &#125;);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;=====================&#x27;</span>)</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123; <span class="comment">//目录 不存在</span></span><br><span class="line">            <span class="comment">// 创建目录及文件</span></span><br><span class="line">            fs.<span class="title function_">mkdirSync</span>(<span class="string">`src/<span class="subst">$&#123;pageDir[i].dirName&#125;</span>`</span>, &#123; <span class="attr">recursive</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;创建目录：&#x27;</span>,pageDir[i].<span class="property">dirName</span> )</span><br><span class="line">            <span class="comment">// 创建文件：html css js</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; fName.<span class="property">length</span>; j++) &#123;</span><br><span class="line">                fs.<span class="title function_">writeFileSync</span>(fName[j], <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;创建文件：&#x27;</span>, fName[j])</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;+++++++++++++++++++++&#x27;</span>)</span><br><span class="line">            <span class="comment">// 写入html文件中写入模板</span></span><br><span class="line">            <span class="keyword">let</span> htmlFile = <span class="string">`src/<span class="subst">$&#123;pageDir[i].dirName&#125;</span>/<span class="subst">$&#123;pageDir[i].filsName&#125;</span>.html`</span></span><br><span class="line">            fs.<span class="title function_">appendFile</span>(htmlFile, htmlCode, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="comment">// 将css 文件 引入到 js文件中</span></span><br><span class="line">            <span class="keyword">let</span> jsFile = <span class="string">`src/<span class="subst">$&#123;pageDir[i].dirName&#125;</span>/<span class="subst">$&#123;pageDir[i].filsName&#125;</span>.js`</span></span><br><span class="line">            <span class="keyword">let</span> cssFile = <span class="string">`import  &#x27;./<span class="subst">$&#123;pageDir[i].filsName&#125;</span>.css&#x27;\r\n`</span></span><br><span class="line">            fs.<span class="title function_">appendFile</span>(jsFile, cssFile, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 创建less scss文件</span></span><br><span class="line">        <span class="keyword">if</span> (pageDir[i].<span class="property">createLess</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> lessName = <span class="string">`src/<span class="subst">$&#123;pageDir[i].dirName&#125;</span>/<span class="subst">$&#123;pageDir[i].filsName&#125;</span>.less`</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fs.<span class="title function_">accessSync</span>(lessName, fs.<span class="property">constants</span>.<span class="property">R_OK</span> | fs.<span class="property">constants</span>.<span class="property">W_OK</span>)</span><br><span class="line">            &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">                fs.<span class="title function_">writeFileSync</span>(lessName, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">                <span class="comment">// 将less 文件 引入到 js文件中</span></span><br><span class="line">                <span class="keyword">let</span> jsFile = <span class="string">`src/<span class="subst">$&#123;pageDir[i].dirName&#125;</span>/<span class="subst">$&#123;pageDir[i].filsName&#125;</span>.js`</span></span><br><span class="line">                <span class="keyword">let</span> lessFile = <span class="string">`import  &#x27;./<span class="subst">$&#123;pageDir[i].filsName&#125;</span>.less&#x27;\r\n`</span></span><br><span class="line">                fs.<span class="title function_">appendFile</span>(jsFile, lessFile, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (pageDir[i].<span class="property">createScss</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> scssName = <span class="string">`src/<span class="subst">$&#123;pageDir[i].dirName&#125;</span>/<span class="subst">$&#123;pageDir[i].filsName&#125;</span>.scss`</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fs.<span class="title function_">accessSync</span>(scssName, fs.<span class="property">constants</span>.<span class="property">R_OK</span> | fs.<span class="property">constants</span>.<span class="property">W_OK</span>)</span><br><span class="line">            &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">                fs.<span class="title function_">writeFileSync</span>(scssName, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">                <span class="comment">// 将scss 文件 引入到 js文件中</span></span><br><span class="line">                <span class="keyword">let</span> jsFile = <span class="string">`src/<span class="subst">$&#123;pageDir[i].dirName&#125;</span>/<span class="subst">$&#123;pageDir[i].filsName&#125;</span>.js`</span></span><br><span class="line">                <span class="keyword">let</span> scssFile = <span class="string">`import  &#x27;./<span class="subst">$&#123;pageDir[i].filsName&#125;</span>.scss&#x27;\r\n`</span></span><br><span class="line">                fs.<span class="title function_">appendFile</span>(jsFile, scssFile, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//生成公共目录并配置</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">publicDirSet</span>(<span class="params">dirs</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> dNames = []</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> dName <span class="keyword">of</span> dirs) &#123;</span><br><span class="line">        fs.<span class="title function_">mkdirSync</span>(dName, &#123; <span class="attr">recursive</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">        dNames.<span class="title function_">push</span>(&#123; <span class="attr">from</span>: <span class="string">`./<span class="subst">$&#123;dName&#125;</span>`</span>, <span class="attr">to</span>: <span class="string">`<span class="subst">$&#123;dName&#125;</span>`</span> &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    commonConfig.<span class="property">plugins</span>.<span class="title function_">push</span>(<span class="keyword">new</span> <span class="title class_">CopyWebpackPlugin</span>(dNames))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = commonConfig;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">Webpack</summary>
    
    
    
    <category term="前端" scheme="https://tom9527c.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="前端" scheme="https://tom9527c.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="Webpack" scheme="https://tom9527c.github.io/tags/Webpack/"/>
    
    <category term="静态模块打包器" scheme="https://tom9527c.github.io/tags/%E9%9D%99%E6%80%81%E6%A8%A1%E5%9D%97%E6%89%93%E5%8C%85%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>Sass</title>
    <link href="https://tom9527c.github.io/posts/7cf7d4f4.html"/>
    <id>https://tom9527c.github.io/posts/7cf7d4f4.html</id>
    <published>2023-09-15T17:08:29.000Z</published>
    <updated>2024-07-05T10:05:43.201Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="sass"><a href="#sass" class="headerlink" title="sass"></a>sass</h2><blockquote><p>sass同less 一样也是 CSS 预处理语言。其语法也极其相似。<br><a href="https://www.sass.hk/">sass中文网</a></p></blockquote><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><h4 id="vscode-插件"><a href="#vscode-插件" class="headerlink" title="vscode 插件"></a>vscode 插件</h4><ol><li>vscode 中安装插件 <strong>Live Sass Compiler</strong></li><li><code>ctrl+shift+P</code>键入<code>Live Sass: Watch Sass</code>以开始实时编译，或者按键入<code>Live Sass: Stop Watching Sass</code>以停止实时编译。</li></ol><h4 id="webpack环境"><a href="#webpack环境" class="headerlink" title="webpack环境"></a>webpack环境</h4><p>在webpack4中使用 <code>node-sass</code>和 <code>sass-loader</code>。详情请参考webpack 开发环境配置。</p><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p>sass 文件后缀有两种 : <code>.scss</code> 和更早期的 <code>.sass</code>。这两种后缀在语法上是有差异的。<strong>建议使用</strong>  <code>.scss</code> ，这种格式仅在 CSS3 语法的基础上进行拓展，所有 CSS3 语法在 SCSS 中都是通用的，同时加入 Sass 的特色功能。</p><h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 这是多行注释 */</span></span><br><span class="line"><span class="comment">// 这是单行注释</span></span><br></pre></td></tr></table></figure><blockquote><p>// 这种注释内容不会出现在生成的css文件中</p><p>/<em> 这种注释内容会出现在生成的css文件中 </em>/</p></blockquote><h3 id="import"><a href="#import" class="headerlink" title="@import"></a>@import</h3><p>使用 <code>@import</code> 导入 css或 <code>.scss</code>文件，如果是 <code>.scss</code>文件后缀可以省略。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;./index.css&#x27;</span>;</span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;./public&#x27;</span>; <span class="comment">//public.scss</span></span><br></pre></td></tr></table></figure><h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p>Sass 支持 6 种主要的数据类型：</p><ul><li>数字，<code>1, 2, 13, 10px</code></li><li>字符串，有引号字符串与无引号字符串，<code>&quot;foo&quot;, &#39;bar&#39;, baz</code></li><li>颜色，<code>blue, #04a3f9, rgba(255,0,0,0.5)</code></li><li>布尔型，<code>true, false</code></li><li>空值，<code>null</code></li><li>数组 (list)，用空格或逗号作分隔符，<code>1.5em 1em 0 2em, Helvetica, Arial, sans-serif</code></li><li>maps, 相当于 JavaScript 的 object，<code>(key1: value1, key2: value2)</code></li></ul><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p>使用 <code>$</code> 声明变量</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明变量</span></span><br><span class="line"><span class="variable">$bg-color</span>: yellow;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">    <span class="comment">// 引用变量</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="variable">$bg-color</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="运算"><a href="#运算" class="headerlink" title="运算"></a>运算</h3><h4 id="算术运算"><a href="#算术运算" class="headerlink" title="算术运算"></a>算术运算</h4><p>支持数字的加减乘除、取整等运算 (<code>+, -, *, /, %</code>)，如果必要会在不同单位间转换值。计算的结果以最左侧操作数的单位类型为准。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$box-size</span>: <span class="number">20px</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="variable">$box-size</span> - <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="字符串运算"><a href="#字符串运算" class="headerlink" title="字符串运算"></a>字符串运算</h4><p><code>+</code> 可用于连接字符串</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$text</span>: <span class="string">&#x27;-resize&#x27;</span>;</span><br><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">    <span class="attribute">cursor</span>: e + <span class="variable">$text</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译输出：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">cursor</span>: e-resize;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="运算优先级（）"><a href="#运算优先级（）" class="headerlink" title="运算优先级（）"></a>运算优先级（）</h4><p>圆括号（）可以用来影响运算的顺序</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">1em</span> + (<span class="number">2em</span> * <span class="number">3</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译输出为：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">7em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Mixin-混入"><a href="#Mixin-混入" class="headerlink" title="Mixin 混入"></a>Mixin 混入</h3><p>使用<code>@mixin</code> 声明要混入数据，<code>@include</code> 使用混入数据。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明要混入样式</span></span><br><span class="line"><span class="keyword">@mixin</span> box-border &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid gray ;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">8px</span> gray;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box2</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="comment">// 混入数据</span></span><br><span class="line">    <span class="keyword">@include</span> box-border;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="带参数的Mixin"><a href="#带参数的Mixin" class="headerlink" title="带参数的Mixin"></a>带参数的Mixin</h4><p>带参数的Mixin类型 js 中的函数传参。 在 <code>@mixin</code> 中定义参数列表，在 <code>@include</code> 时传入对应的参数。</p><blockquote><p>注意在传入参数时需要和定义时一一对应。</p></blockquote><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明要混入样式</span></span><br><span class="line"><span class="keyword">@mixin</span> box-border(<span class="variable">$border-width</span>,<span class="variable">$color</span>) &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="variable">$border-width</span> solid <span class="variable">$color</span> ;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">8px</span> <span class="variable">$color</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box2</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="comment">// 混入数据</span></span><br><span class="line">    <span class="keyword">@include</span> box-border(<span class="number">1px</span>, red);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>sass 允许使用 <code>$name: value</code>的方式向 <code>@mixin</code> 传参，这种语法可以不理会参数的先后 顺序。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明要混入样式</span></span><br><span class="line"><span class="keyword">@mixin</span> box-border(<span class="variable">$border-width</span>,<span class="variable">$color</span>) &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="variable">$border-width</span> solid <span class="variable">$color</span> ;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">8px</span> <span class="variable">$color</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box3</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="comment">// 混入数据</span></span><br><span class="line">    <span class="keyword">@include</span> box-border(<span class="variable">$color</span>:yellow , <span class="variable">$border-width</span>:<span class="number">10px</span> )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="嵌套CSS-规则"><a href="#嵌套CSS-规则" class="headerlink" title="嵌套CSS 规则"></a>嵌套CSS 规则</h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#content</span> &#123;</span><br><span class="line">  <span class="selector-tag">article</span> &#123;</span><br><span class="line">    <span class="selector-tag">h1</span> &#123; <span class="attribute">color</span>: <span class="number">#333</span> &#125;</span><br><span class="line">    <span class="selector-tag">p</span> &#123; <span class="attribute">margin-bottom</span>: <span class="number">1.4em</span> &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">aside</span> &#123; <span class="attribute">background-color</span>: <span class="number">#EEE</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译输出为：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/* 编译后 */</span></span><br><span class="line"><span class="selector-id">#content</span> <span class="selector-tag">article</span> <span class="selector-tag">h1</span> &#123; <span class="attribute">color</span>: <span class="number">#333</span> &#125;</span><br><span class="line"><span class="selector-id">#content</span> <span class="selector-tag">article</span> <span class="selector-tag">p</span> &#123; <span class="attribute">margin-bottom</span>: <span class="number">1.4em</span> &#125;</span><br><span class="line"><span class="selector-id">#content</span> <span class="selector-tag">aside</span> &#123; <span class="attribute">background-color</span>: <span class="number">#EEE</span> &#125;</span><br></pre></td></tr></table></figure><h4 id="amp-父选择器"><a href="#amp-父选择器" class="headerlink" title="&amp; 父选择器"></a>&amp; 父选择器</h4><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">article</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: blue;</span><br><span class="line">  &amp;<span class="selector-pseudo">:hover</span> &#123; <span class="attribute">color</span>: red &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译输出为：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">article</span> <span class="selector-tag">a</span> &#123; <span class="attribute">color</span>: blue &#125;</span><br><span class="line"><span class="selector-tag">article</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123; <span class="attribute">color</span>: red &#125;</span><br></pre></td></tr></table></figure><h4 id="关系选择器"><a href="#关系选择器" class="headerlink" title="关系选择器"></a>关系选择器</h4><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">article</span> &#123;</span><br><span class="line">  ~ <span class="selector-tag">article</span> &#123; <span class="attribute">border-top</span>: <span class="number">1px</span> dashed <span class="number">#ccc</span> &#125;</span><br><span class="line">  &gt; <span class="selector-tag">section</span> &#123; <span class="attribute">background</span>: <span class="number">#eee</span> &#125;</span><br><span class="line">  <span class="selector-tag">dl</span> &gt; &#123;</span><br><span class="line">    <span class="selector-tag">dt</span> &#123; <span class="attribute">color</span>: <span class="number">#333</span> &#125;</span><br><span class="line">    <span class="selector-tag">dd</span> &#123; <span class="attribute">color</span>: <span class="number">#555</span> &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">nav</span> + &amp; &#123; <span class="attribute">margin-top</span>: <span class="number">0</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译输出为：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">article</span> ~ <span class="selector-tag">article</span> &#123; <span class="attribute">border-top</span>: <span class="number">1px</span> dashed <span class="number">#ccc</span> &#125;</span><br><span class="line"><span class="selector-tag">article</span> &gt; <span class="selector-tag">footer</span> &#123; <span class="attribute">background</span>: <span class="number">#eee</span> &#125;</span><br><span class="line"><span class="selector-tag">article</span> <span class="selector-tag">dl</span> &gt; <span class="selector-tag">dt</span> &#123; <span class="attribute">color</span>: <span class="number">#333</span> &#125;</span><br><span class="line"><span class="selector-tag">article</span> <span class="selector-tag">dl</span> &gt; <span class="selector-tag">dd</span> &#123; <span class="attribute">color</span>: <span class="number">#555</span> &#125;</span><br><span class="line"><span class="selector-tag">nav</span> + <span class="selector-tag">article</span> &#123; <span class="attribute">margin-top</span>: <span class="number">0</span> &#125;</span><br></pre></td></tr></table></figure><h3 id="继承-extend"><a href="#继承-extend" class="headerlink" title="继承 @extend"></a>继承 @extend</h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过选择器继承继承样式</span></span><br><span class="line"><span class="selector-class">.error</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fdd</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.seriousError</span> &#123;</span><br><span class="line">    <span class="comment">// 继承</span></span><br><span class="line">  <span class="keyword">@extend</span> .error;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译输出为：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.error</span>, <span class="selector-class">.seriousError</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fdd</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.seriousError</span> &#123;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>混合器<code>@mixin</code>主要用于展示性样式的重用，而  <code>@extend</code> 类名用于语义化样式的重用。因为继承是基于类的（有时是基于其他类型的选择器），所以继承应该是建立在语义化的关系上。当一个元素拥有的类（比如说.seriousError）表明它属于另一个类（比如说.error），这时使用继承再合适不过了。</p>]]></content>
    
    
    <summary type="html">Sass</summary>
    
    
    
    <category term="前端" scheme="https://tom9527c.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="前端" scheme="https://tom9527c.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="Sass" scheme="https://tom9527c.github.io/tags/Sass/"/>
    
  </entry>
  
  <entry>
    <title>Less</title>
    <link href="https://tom9527c.github.io/posts/73843be1.html"/>
    <id>https://tom9527c.github.io/posts/73843be1.html</id>
    <published>2023-09-15T17:05:06.000Z</published>
    <updated>2024-07-05T10:05:10.300Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="less"><a href="#less" class="headerlink" title="less"></a>less</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>Less 是一门 CSS 预处理语言，它扩展了 CSS 语言，增加了变量、Mixin、函数等特性，使 CSS 更易维护和扩展。</p><p>less 编写的代码需要先编译浏览器才能识别。</p><p><a href="http://lesscss.cn/">lesscss.cn中文网</a></p><p><a href="https://less.bootcss.com/">less.bootcss.com中文网</a></p><h3 id="使用less"><a href="#使用less" class="headerlink" title="使用less"></a>使用less</h3><h4 id="浏览器环境"><a href="#浏览器环境" class="headerlink" title="浏览器环境"></a>浏览器环境</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet/less&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;styles.less&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 编译less文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;//cdnjs.cloudflare.com/ajax/libs/less.js/3.11.1/less.min.js&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><a href="https://codeload.github.com/less/less.js/zip/master">less.js下载</a></p><h4 id="Node-js环境"><a href="#Node-js环境" class="headerlink" title="Node.js环境"></a>Node.js环境</h4><ol><li>安装less 工具： <code>npm install -g less</code></li><li>编译：<code>lessc styles.less styles.css</code></li></ol><blockquote><p>win10系统可能会出现错误</p><p><img src="data:image/png;base64,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" alt="错误"></p><ol><li>打开 <strong>powerShell</strong> 用管理员身份运行</li><li>输入命令： <code>set-ExecutionPolicy RemoteSigned</code></li><li>输入A</li><li>重新输入编译命令即可</li></ol></blockquote><h4 id="webpack环境"><a href="#webpack环境" class="headerlink" title="webpack环境"></a>webpack环境</h4><p>在webpack4中使用 <code>less</code>和 <code>less-loader</code>。详情请参考webpack 开发环境配置。</p><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p>less文件后缀为<code>.less</code></p><h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    多行注释</span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="comment">// 单选注释</span></span><br></pre></td></tr></table></figure><h3 id="import"><a href="#import" class="headerlink" title="@import"></a>@import</h3><p>你可以导入一个 <code>.less</code> 文件，此文件中的所有变量就可以全部使用了。如果导入的文件是 <code>.less</code> 扩展名，则可以将扩展名省略掉</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&quot;library&quot;</span>; <span class="comment">// library.less</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;typo.css&quot;</span>;</span><br></pre></td></tr></table></figure><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p>使用 <code>@</code> 声明变量。</p><p>算术运算符 <code>+</code>、<code>-</code>、<code>*</code>、<code>/</code> 可以对任何数字、颜色或变量进行运算。如果可能的话，算术运算符在加、减或比较之前会进行单位换算。计算的结果以最左侧操作数的单位类型为准。如果单位换算无效或失去意义，则忽略单位。无效的单位换算例如：px 到 cm 或 rad 到 % 的转换。</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明变量</span></span><br><span class="line"><span class="variable">@bg:</span>green;</span><br><span class="line"><span class="comment">//使用运算符加法运算</span></span><br><span class="line"><span class="variable">@bg2:</span><span class="variable">@bg</span> + <span class="number">#f34242</span>;</span><br><span class="line"><span class="variable">@fz:</span> <span class="number">36px</span>;</span><br><span class="line"><span class="selector-tag">h2</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="variable">@bg2</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="variable">@fz</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">h3</span>&#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="variable">@fz</span> - <span class="number">10</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="混入（Mixins）"><a href="#混入（Mixins）" class="headerlink" title="混入（Mixins）"></a>混入（Mixins）</h3><p>混入（Mixin）是一种将一组属性从一个规则集包含（或混入）到另一个规则集的方法。</p><ol><li>样式在混入时圆括号（）是可选的。</li><li>定义待混入样式时后面加上圆括号，在编译时将不再输出该样式。</li></ol><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 待混入样式</span></span><br><span class="line"><span class="selector-class">.bg-red</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 加上圆括号（）,在编译输入时将不再输出该样式</span></span><br><span class="line"><span class="selector-class">.bg-yellow</span>()&#123;</span><br><span class="line">    <span class="attribute">background</span>: yellow;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">18px</span> blue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box1</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="comment">// 混入</span></span><br><span class="line">    <span class="selector-class">.bg-red</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box2</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="comment">// 混入时也可以不加圆括号</span></span><br><span class="line">    <span class="selector-class">.bg-yellow</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译后输入样式：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.bg-red</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: red;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="comment">/* .bg-yellow 样式未输出 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box1</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box2</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background</span>: yellow;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">18px</span> blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="带参数的混入"><a href="#带参数的混入" class="headerlink" title="带参数的混入"></a>带参数的混入</h4><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义带参数的待混入数据</span></span><br><span class="line"><span class="selector-class">.box-font</span>(<span class="variable">@size</span>,<span class="variable">@color</span>)&#123;</span><br><span class="line">   <span class="attribute">font-size</span>: <span class="variable">@size</span>; </span><br><span class="line">   <span class="attribute">color</span>: <span class="variable">@color</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box1</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="comment">// 使用带参数的混入</span></span><br><span class="line">    <span class="selector-class">.box-font</span>(<span class="number">20px</span>,gold);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="映射（Maps）"><a href="#映射（Maps）" class="headerlink" title="映射（Maps）"></a>映射（Maps）</h3><p>从 Less 3.5 版本开始，你还可以将混合（mixins）和规则集（rulesets）作为一组值的映射（map）使用。</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//声明规则集</span></span><br><span class="line"><span class="selector-id">#colors</span>() &#123;</span><br><span class="line">    info: blue;</span><br><span class="line">    success: green;</span><br><span class="line">    warn:yellow;</span><br><span class="line">    danger:red</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line"><span class="selector-class">.colors</span>&#123;</span><br><span class="line">    <span class="selector-tag">li</span><span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="comment">//使用规则集中成员</span></span><br><span class="line">        <span class="attribute">color</span>: #colors[info];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">li</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>)&#123;</span><br><span class="line">        <span class="attribute">color</span>: #colors[success];</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>编译后输入样式：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.colors</span> <span class="selector-tag">li</span><span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>) &#123;</span><br><span class="line">  <span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.colors</span> <span class="selector-tag">li</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>) &#123;</span><br><span class="line">  <span class="attribute">color</span>: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="嵌套（Nesting）"><a href="#嵌套（Nesting）" class="headerlink" title="嵌套（Nesting）"></a>嵌套（Nesting）</h3><p>Less 提供了使用嵌套（nesting）代替层叠或与层叠结合使用的能力。</p><ol><li>嵌套规则就是在样式中包含另一样式,less在编译时会自动分析其父子关系。</li><li><code>&amp;</code> 表示当前选择器的父级。</li></ol><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.colors</span>&#123;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">    <span class="selector-tag">li</span>&#123;</span><br><span class="line">        <span class="attribute">border</span>: <span class="number">1px</span> solid gold;</span><br><span class="line">        <span class="comment">// &amp; 表示当前选择器的父级</span></span><br><span class="line">        <span class="selector-tag">&amp;</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">            <span class="attribute">background</span>: gray;</span><br><span class="line">            <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.red</span>&#123;</span><br><span class="line">        <span class="attribute">background</span>: red;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译后输入样式：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.colors</span> &#123;</span><br><span class="line">  <span class="attribute">list-style</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.colors</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid gold;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.colors</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: gray;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.colors</span> <span class="selector-class">.red</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="amp-产生重复的类名"><a href="#amp-产生重复的类名" class="headerlink" title="&amp; 产生重复的类名"></a>&amp; 产生重复的类名</h4><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">    <span class="selector-tag">&amp;</span><span class="selector-tag">-num1</span>&#123;</span><br><span class="line">        <span class="attribute">color</span>: red;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">&amp;</span><span class="selector-tag">-num2</span>&#123;</span><br><span class="line">        <span class="attribute">color</span>: yellow;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译后输入样式：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box-num1</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box-num2</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: yellow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="关系选择器"><a href="#关系选择器" class="headerlink" title="关系选择器"></a>关系选择器</h4><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">article</span> &#123;</span><br><span class="line">    ~ <span class="selector-tag">article</span> &#123; <span class="attribute">border-top</span>: <span class="number">1px</span> dashed <span class="number">#ccc</span> &#125;</span><br><span class="line">    &gt; <span class="selector-tag">section</span> &#123; <span class="attribute">background</span>: <span class="number">#eee</span> &#125;</span><br><span class="line">    <span class="selector-tag">nav</span> + <span class="selector-tag">&amp;</span> &#123; <span class="attribute">margin-top</span>: <span class="number">0</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译后输入样式：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">article</span> ~ <span class="selector-tag">article</span> &#123;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">1px</span> dashed <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">article</span> &gt; <span class="selector-tag">section</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#eee</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">nav</span> + <span class="selector-tag">article</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">Less</summary>
    
    
    
    <category term="前端" scheme="https://tom9527c.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="前端" scheme="https://tom9527c.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="Less" scheme="https://tom9527c.github.io/tags/Less/"/>
    
  </entry>
  
  <entry>
    <title>TypeScript</title>
    <link href="https://tom9527c.github.io/posts/d044eab7.html"/>
    <id>https://tom9527c.github.io/posts/d044eab7.html</id>
    <published>2023-09-15T17:00:30.000Z</published>
    <updated>2024-07-05T10:06:11.648Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="TS"><a href="#TS" class="headerlink" title="TS"></a>TS</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>TypeScript 是一种由微软开发的自由和开源的编程语言，它是 JavaScript 的一个超集，扩展了 JavaScript 的语法。</p><p>TypeScript 通过类型注解提供编译时的静态类型检查。</p><p>TypeScript的语法不会将任何JavaScript代码视为错误。这意味着您可以获取任何有效的JavaScript代码并将其放入TypeScript文件中，而不必担心它的确切编写方式。</p><blockquote><p><strong>TypeScript是JavaScript的运行时，带有编译时类型检查器</strong>。</p></blockquote><h3 id="开发环境："><a href="#开发环境：" class="headerlink" title="开发环境："></a>开发环境：</h3><p><a href="https://webpack.docschina.org/guides/typescript/">webpack中配置 typescript</a></p><ol><li><p>安装： <code>npm install --save-dev typescript ts-loader</code></p></li><li><p>修改目录结构和配置文件</p><ul><li>webpack-demo<ul><li>package.json</li><li><code>+</code> tsconfig.json</li><li>webpack.common.js</li><li>webpack.dev.js</li><li>webpack.prod.js</li><li>/src<ul><li>index.js</li><li><code>+</code> index.ts</li></ul></li><li>/node_modules</li></ul></li></ul></li></ol><blockquote><p>在webpack 添加两个文件 <code>tsconfig.json</code> 和 <code>index.ts</code></p></blockquote><ol><li><p><code>tsconfig.json</code> </p><p>ts基本的配置，来支持 JSX，并将 TypeScript 编译到 ES5……</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;outDir&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./dist/&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;noImplicitAny&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;module&quot;</span><span class="punctuation">:</span> <span class="string">&quot;es6&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;es5&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;jsx&quot;</span><span class="punctuation">:</span> <span class="string">&quot;react&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;allowJs&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li><li><p><code>webpack.common.js</code>  中配置 <strong>loader</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="comment">// 入口</span></span><br><span class="line">    <span class="attr">entry</span>: &#123;</span><br><span class="line">        <span class="comment">// ts 入口文件</span></span><br><span class="line">        <span class="attr">index</span>: <span class="string">&#x27;./src/index/index.ts&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// TS</span></span><br><span class="line">    <span class="attr">resolve</span>: &#123;</span><br><span class="line">        <span class="attr">extensions</span>: [<span class="string">&#x27;.tsx&#x27;</span>, <span class="string">&#x27;.ts&#x27;</span>, <span class="string">&#x27;.js&#x27;</span>],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// loader 配置</span></span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">            <span class="comment">// ts loader 配置</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/\.tsx?$/</span>,</span><br><span class="line">                <span class="attr">use</span>: <span class="string">&#x27;ts-loader&#x27;</span>,</span><br><span class="line">                <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ol><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><h3 id="文件类型"><a href="#文件类型" class="headerlink" title="文件类型"></a>文件类型</h3><p>typescript 文件类型为 <code>.ts</code></p><h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><h4 id="变量语法"><a href="#变量语法" class="headerlink" title="变量语法"></a>变量语法</h4><ol><li><p><code>let [变量名] : [类型] = 值;</code></p></li><li><p><code>let [变量名] : [类型];</code></p></li><li><p><code>let [变量名]</code></p></li><li><p><code>let [变量名] : [类型1 | 类型2];</code></p><blockquote><p>使用 <strong>|</strong> 可以为变量设置多个类型。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">value</span>:<span class="built_in">string</span> | <span class="built_in">number</span></span><br><span class="line">value = <span class="number">123</span></span><br><span class="line">value = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="comment">// value = true //报错</span></span><br></pre></td></tr></table></figure></blockquote></li></ol><h4 id="函数语法："><a href="#函数语法：" class="headerlink" title="函数语法："></a>函数语法：</h4><p>为函数中的参数与返回值设置类型检测</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fun</span>(<span class="params">arg1:<span class="built_in">number</span> , arg2:<span class="built_in">string</span></span>):<span class="built_in">object</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">result</span>: arg1 + arg2</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">result</span>:<span class="built_in">object</span> = <span class="title function_">fun</span>(<span class="number">123</span>, <span class="string">&#x27;456&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="推论类型"><a href="#推论类型" class="headerlink" title="推论类型"></a>推论类型</h4><p>在声明变量时没有指定变量的数据类型，在给其赋值时会将<strong>值</strong>的类型作为变量的数据类型。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// value的类型为数字类型</span></span><br><span class="line"><span class="keyword">let</span> value = <span class="number">123</span></span><br></pre></td></tr></table></figure><h4 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">num</span>:<span class="built_in">number</span> <span class="comment">// 数字类型</span></span><br><span class="line">num = <span class="number">.78</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">str</span>:<span class="built_in">string</span> = <span class="string">&#x27;hello&#x27;</span> <span class="comment">//字符串类型</span></span><br><span class="line">str = <span class="string">&quot;ts&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">boo</span>:<span class="built_in">boolean</span> = <span class="literal">true</span> <span class="comment">//布尔类型</span></span><br></pre></td></tr></table></figure><h4 id="any"><a href="#any" class="headerlink" title="any"></a>any</h4><p>有时候，我们会想要为那些在编程阶段还不清楚类型的变量指定一个类型。 这些值可能来自于动态的内容。这种情况下，我们不希望类型检查器对这些值进行检查而是直接让它们通过编译阶段的检查。 那么我们可以使用 <code>any</code>类型来标记这些变量。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">value</span>:<span class="built_in">any</span> </span><br><span class="line">value = <span class="number">123</span></span><br><span class="line">value = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">value = <span class="literal">true</span></span><br></pre></td></tr></table></figure><h4 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h4><p>TypeScript像JavaScript一样可以操作数组元素。 有两种方式可以定义数组</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式一</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr</span>:<span class="built_in">number</span>[] = [<span class="number">1</span>,<span class="number">8</span>,<span class="number">3</span>,<span class="number">5</span>] <span class="comment">//数组</span></span><br><span class="line"><span class="comment">// 方式二</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr2</span>: <span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt; = [<span class="string">&#x27;hello&#x27;</span>,<span class="string">&#x27;123&#x27;</span>] <span class="comment">//数组泛型</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="数组-元组（-Tuple）"><a href="#数组-元组（-Tuple）" class="headerlink" title="数组 元组（ Tuple）"></a>数组 元组（ Tuple）</h4><p>元组类型允许表示一个已知元素数量和类型的数组，各元素的类型不必相同。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">arr3</span>:[<span class="built_in">string</span>, <span class="built_in">number</span>]  <span class="comment">//元组</span></span><br><span class="line">arr3 = [<span class="string">&#x27;hello&#x27;</span>, <span class="number">123</span>] <span class="comment">//正确</span></span><br><span class="line"><span class="comment">// arr3 = [&#x27;hello&#x27;, &#x27;ts&#x27;] //错误 ，因为 &#x27;ts&#x27;不能幅值给 number</span></span><br><span class="line"><span class="comment">// console.log( arr3[4] ) // 下标越界，报错。</span></span><br></pre></td></tr></table></figure><h4 id="对象-Object"><a href="#对象-Object" class="headerlink" title="对象(Object)"></a>对象(Object)</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">obj</span>:<span class="built_in">object</span></span><br><span class="line">obj = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">    <span class="attr">num</span>:<span class="number">123</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Null-和-Undefined"><a href="#Null-和-Undefined" class="headerlink" title="Null 和 Undefined"></a>Null 和 Undefined</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">n1</span>:<span class="literal">undefined</span> = <span class="literal">undefined</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">n2</span>:<span class="literal">null</span> = <span class="literal">null</span></span><br></pre></td></tr></table></figure><blockquote><p>默认情况下<code>null</code>和<code>undefined</code>是所有类型的子类型,可以把 <code>null</code>和<code>undefined</code>赋值给所有的类型：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">num</span>:<span class="built_in">number</span> = <span class="number">123</span></span><br><span class="line">num = <span class="literal">undefined</span></span><br><span class="line">num = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">str</span>:<span class="built_in">string</span> = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">str = <span class="literal">undefined</span></span><br><span class="line">str = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">boo</span>:<span class="built_in">boolean</span> = <span class="literal">true</span></span><br><span class="line">boo = <span class="literal">undefined</span></span><br><span class="line">boo = <span class="literal">null</span></span><br></pre></td></tr></table></figure></blockquote><h4 id="Void"><a href="#Void" class="headerlink" title="Void"></a>Void</h4><p>表示没有任何类型。 当一个函数没有返回值时，你通常会见到其返回值类型是 <code>void</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fun2</span>(<span class="params"></span>):<span class="built_in">void</span>&#123;</span><br><span class="line">    <span class="comment">// return &#x27;&#x27; // 报错</span></span><br><span class="line">    <span class="keyword">return</span>  <span class="comment">//正确</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="never"><a href="#never" class="headerlink" title="never"></a>never</h4><p><code>never</code>类型表示的是那些永不存在的值的类型。 例如， <code>never</code>类型是那些总是会抛出异常或根本就不会有返回值的函数表达式或箭头函数表达式的返回值类型； 变量也可能是 <code>never</code>类型，当它们被永不为真的类型保护所约束时。</p><p><code>never</code>类型是任何类型的子类型，也可以赋值给任何类型；然而，<em>没有</em>类型是<code>never</code>的子类型或可以赋值给<code>never</code>类型（除了<code>never</code>本身之外）。 即使 <code>any</code>也不可以赋值给<code>never</code>。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回never的函数必须存在无法达到的终点</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">error</span>(<span class="params">message: <span class="built_in">string</span></span>): <span class="built_in">never</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(message);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 推断的返回值类型为never</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fail</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">error</span>(<span class="string">&quot;Something failed&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回never的函数必须存在无法达到的终点</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">infiniteLoop</span>(<span class="params"></span>): <span class="built_in">never</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="枚举-（enum）"><a href="#枚举-（enum）" class="headerlink" title="枚举 （enum）"></a>枚举 （enum）</h4><p><code>enum</code>类型是对JavaScript标准数据类型的一个补充。</p><ol><li><p>默认情况下，从<code>0</code>开始为元素编号</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Color</span> &#123;<span class="title class_">Red</span>, <span class="title class_">Green</span>, <span class="title class_">Blue</span>&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">c</span>: <span class="title class_">Color</span> = <span class="title class_">Color</span>.<span class="property">Red</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( c ) <span class="comment">// 输入： 0</span></span><br></pre></td></tr></table></figure></li></ol><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API">Web API 接口参考</a></p>]]></content>
    
    
    <summary type="html">TypeScript</summary>
    
    
    
    <category term="前端" scheme="https://tom9527c.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="前端" scheme="https://tom9527c.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="TypeScript" scheme="https://tom9527c.github.io/tags/TypeScript/"/>
    
  </entry>
  
</feed>
